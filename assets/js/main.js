!function(){return function t(e,n,i){function r(o,s){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!s&&u)return u(o,!0);if(a)return a(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};e[o][0].call(l.exports,function(t){return r(e[o][1][t]||t)},l,l.exports,t,e,n,i)}return n[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}}()({1:[function(t,e,n){!function(t,i){"object"==typeof n&&void 0!==e?e.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).barba=i()}(this,function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}function n(){return(n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}).apply(this,arguments)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function r(t){return(r=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){return(a=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function o(t,e,n){return(o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=new(Function.bind.apply(t,i));return n&&a(r,n.prototype),r}).apply(null,arguments)}function s(t){var e="function"==typeof Map?new Map:void 0;return(s=function(t){function n(){return o(t,arguments,r(this).constructor)}if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,t)})(t)}function u(t,e){try{var n=t()}catch(t){return e(t)}return n&&n.then?n.then(void 0,e):n}function c(t,e){for(var n,i=[],r=0,a=0,o="",s=e&&e.delimiter||L,u=e&&e.whitelist||void 0,c=!1;null!==(n=E.exec(t));){var l=n[0],h=n[1],d=n.index;if(o+=t.slice(a,d),a=d+l.length,h)o+=h[1],c=!0;else{var m="",v=n[2],g=n[3],y=n[4],_=n[5];if(!c&&o.length){var x=o.length-1,b=o[x];(!u||u.indexOf(b)>-1)&&(m=b,o=o.slice(0,x))}o&&(i.push(o),o="",c=!1);var w=g||y,M=m||s;i.push({name:v||r++,prefix:m,delimiter:M,optional:"?"===_||"*"===_,repeat:"+"===_||"*"===_,pattern:w?p(w):"[^"+f(M===s?M:M+s)+"]+?"})}}return(o||a<t.length)&&i.push(o+t.substr(a)),i}function l(t,e){return function(n,i){var r=t.exec(n);if(!r)return!1;for(var a=r[0],o=r.index,s={},u=i&&i.decode||decodeURIComponent,c=1;c<r.length;c++)if(void 0!==r[c]){var l=e[c-1];s[l.name]=l.repeat?r[c].split(l.delimiter).map(function(t){return u(t,l)}):u(r[c],l)}return{path:a,index:o,params:s}}}function h(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"==typeof t[i]&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",d(e)));return function(e,i){for(var r="",a=i&&i.encode||encodeURIComponent,o=!i||!1!==i.validate,s=0;s<t.length;s++){var u=t[s];if("string"!=typeof u){var c,l=e?e[u.name]:void 0;if(Array.isArray(l)){if(!u.repeat)throw new TypeError('Expected "'+u.name+'" to not repeat, but got array');if(0===l.length){if(u.optional)continue;throw new TypeError('Expected "'+u.name+'" to not be empty')}for(var h=0;h<l.length;h++){if(c=a(l[h],u),o&&!n[s].test(c))throw new TypeError('Expected all "'+u.name+'" to match "'+u.pattern+'"');r+=(0===h?u.prefix:u.delimiter)+c}}else if("string"!=typeof l&&"number"!=typeof l&&"boolean"!=typeof l){if(!u.optional)throw new TypeError('Expected "'+u.name+'" to be '+(u.repeat?"an array":"a string"))}else{if(c=a(String(l),u),o&&!n[s].test(c))throw new TypeError('Expected "'+u.name+'" to match "'+u.pattern+'", but got "'+c+'"');r+=u.prefix+c}}else r+=u}return r}}function f(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function p(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function d(t){return t&&t.sensitive?"":"i"}function m(t,e,n){for(var i=(n=n||{}).strict,r=!1!==n.start,a=!1!==n.end,o=n.delimiter||L,s=[].concat(n.endsWith||[]).map(f).concat("$").join("|"),u=r?"^":"",c=0;c<t.length;c++){var l=t[c];if("string"==typeof l)u+=f(l);else{var h=l.repeat?"(?:"+l.pattern+")(?:"+f(l.delimiter)+"(?:"+l.pattern+"))*":l.pattern;e&&e.push(l),u+=l.optional?l.prefix?"(?:"+f(l.prefix)+"("+h+"))?":"("+h+")?":f(l.prefix)+"("+h+")"}}if(a)i||(u+="(?:"+f(o)+")?"),u+="$"===s?"$":"(?="+s+")";else{var p=t[t.length-1],m="string"==typeof p?p[p.length-1]===o:void 0===p;i||(u+="(?:"+f(o)+"(?="+s+"))?"),m||(u+="(?="+f(o)+"|"+s+")")}return new RegExp(u,d(n))}function v(t,e,n){return t instanceof RegExp?function(t,e){if(!e)return t;var n=t.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,n){for(var i=[],r=0;r<t.length;r++)i.push(v(t[r],e,n).source);return new RegExp("(?:"+i.join("|")+")",d(n))}(t,e,n):function(t,e,n){return m(c(t,n),e,n)}(t,e,n)}function g(t,e,n){return void 0===e&&(e=2e3),new Promise(function(i,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE)if(200===a.status)i(a.responseText);else if(a.status){var e={status:a.status,statusText:a.statusText};n(t,e),r(e)}},a.ontimeout=function(){var i=new Error("Timeout error ["+e+"]");n(t,i),r(i)},a.onerror=function(){var e=new Error("Fetch error");n(t,e),r(e)},a.open("GET",t),a.timeout=e,a.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),a.setRequestHeader("x-barba","yes"),a.send()})}function y(t,e){return void 0===e&&(e={}),function(){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];var a=!1;return new Promise(function(n,r){e.async=function(){return a=!0,function(t,e){t?r(t):n(e)}};var o=t.apply(e,i);a||(G(o)?o.then(n,r):n(o))})}}"undefined"!=typeof Symbol&&(Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator"))),"undefined"!=typeof Symbol&&(Symbol.asyncIterator||(Symbol.asyncIterator=Symbol("Symbol.asyncIterator")));var _,x="2.9.7";!function(t){t[t.off=0]="off",t[t.error=1]="error",t[t.warning=2]="warning",t[t.info=3]="info",t[t.debug=4]="debug"}(_||(_={}));var b=_.off,w=function(){function t(t){this.t=t}t.getLevel=function(){return b},t.setLevel=function(t){return b=_[t]};var e=t.prototype;return e.error=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.error,_.error,e)},e.warn=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.warn,_.warning,e)},e.info=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.info,_.info,e)},e.debug=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];this.i(console.log,_.debug,e)},e.i=function(e,n,i){n<=t.getLevel()&&e.apply(console,["["+this.t+"] "].concat(i))},t}(),M=v,S=l,A=c,T=h,P=m,L="/",E=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");M.match=function(t,e){var n=[];return l(v(t,n,e),n)},M.regexpToFunction=S,M.parse=A,M.compile=function(t,e){return h(c(t,e),e)},M.tokensToFunction=T,M.tokensToRegExp=P;var O={container:"container",history:"history",namespace:"namespace",prefix:"data-barba",prevent:"prevent",wrapper:"wrapper"},C=new(function(){function t(){this.o=O,this.u=new DOMParser}var e=t.prototype;return e.toString=function(t){return t.outerHTML},e.toDocument=function(t){return this.u.parseFromString(t,"text/html")},e.toElement=function(t){var e=document.createElement("div");return e.innerHTML=t,e},e.getHtml=function(t){return void 0===t&&(t=document),this.toString(t.documentElement)},e.getWrapper=function(t){return void 0===t&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.wrapper+'"]')},e.getContainer=function(t){return void 0===t&&(t=document),t.querySelector("["+this.o.prefix+'="'+this.o.container+'"]')},e.removeContainer=function(t){document.body.contains(t)&&t.parentNode.removeChild(t)},e.addContainer=function(t,e){var n=this.getContainer();n?this.s(t,n):e.appendChild(t)},e.getNamespace=function(t){void 0===t&&(t=document);var e=t.querySelector("["+this.o.prefix+"-"+this.o.namespace+"]");return e?e.getAttribute(this.o.prefix+"-"+this.o.namespace):null},e.getHref=function(t){if(t.tagName&&"a"===t.tagName.toLowerCase()){if("string"==typeof t.href)return t.href;var e=t.getAttribute("href")||t.getAttribute("xlink:href");if(e)return this.resolveUrl(e.baseVal||e)}return null},e.resolveUrl=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=e.length;if(0===i)throw new Error("resolveUrl requires at least one argument; got none.");var r=document.createElement("base");if(r.href=arguments[0],1===i)return r.href;var a=document.getElementsByTagName("head")[0];a.insertBefore(r,a.firstChild);for(var o,s=document.createElement("a"),u=1;u<i;u++)s.href=arguments[u],r.href=o=s.href;return a.removeChild(r),o},e.s=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},t}()),F=new(function(){function t(){this.h=[],this.v=-1}var i=t.prototype;return i.init=function(t,e){this.l="barba";var n={ns:e,scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(n),this.v=0;var i={from:this.l,index:0,states:[].concat(this.h)};window.history&&window.history.replaceState(i,"",t)},i.change=function(t,e,n){if(n&&n.state){var i=n.state,r=i.index;e=this.m(this.v-r),this.replace(i.states),this.v=r}else this.add(t,e);return e},i.add=function(t,e){var n=this.size,i=this.p(e),r={ns:"tmp",scroll:{x:window.scrollX,y:window.scrollY},url:t};this.h.push(r),this.v=n;var a={from:this.l,index:n,states:[].concat(this.h)};switch(i){case"push":window.history&&window.history.pushState(a,"",t);break;case"replace":window.history&&window.history.replaceState(a,"",t)}},i.update=function(t,e){var i=e||this.v,r=n({},this.get(i),{},t);this.set(i,r)},i.remove=function(t){t?this.h.splice(t,1):this.h.pop(),this.v--},i.clear=function(){this.h=[],this.v=-1},i.replace=function(t){this.h=t},i.get=function(t){return this.h[t]},i.set=function(t,e){return this.h[t]=e},i.p=function(t){var e="push",n=t,i=O.prefix+"-"+O.history;return n.hasAttribute&&n.hasAttribute(i)&&(e=n.getAttribute(i)),e},i.m=function(t){return Math.abs(t)>1?t>0?"forward":"back":0===t?"popstate":t>0?"back":"forward"},e(t,[{key:"current",get:function(){return this.h[this.v]}},{key:"state",get:function(){return this.h[this.h.length-1]}},{key:"previous",get:function(){return this.v<1?null:this.h[this.v-1]}},{key:"size",get:function(){return this.h.length}}]),t}()),I=function(t,e){try{var n=function(){if(!e.next.html)return Promise.resolve(t).then(function(t){var n=e.next;if(t){var i=C.toElement(t);n.namespace=C.getNamespace(i),n.container=C.getContainer(i),n.html=t,F.update({ns:n.namespace});var r=C.toDocument(t);document.title=r.title}})}();return Promise.resolve(n&&n.then?n.then(function(){}):void 0)}catch(t){return Promise.reject(t)}},N=M,D={__proto__:null,update:I,nextTick:function(){return new Promise(function(t){window.requestAnimationFrame(t)})},pathToRegexp:N},R=function(){return window.location.origin},k=function(t){return void 0===t&&(t=window.location.href),z(t).port},z=function(t){var e,n=t.match(/:\d+/);if(null===n)/^http/.test(t)&&(e=80),/^https/.test(t)&&(e=443);else{var i=n[0].substring(1);e=parseInt(i,10)}var r,a=t.replace(R(),""),o={},s=a.indexOf("#");s>=0&&(r=a.slice(s+1),a=a.slice(0,s));var u=a.indexOf("?");return u>=0&&(o=U(a.slice(u+1)),a=a.slice(0,u)),{hash:r,path:a,port:e,query:o}},U=function(t){return t.split("&").reduce(function(t,e){var n=e.split("=");return t[n[0]]=n[1],t},{})},B=function(t){return void 0===t&&(t=window.location.href),t.replace(/(\/#.*|\/|#.*)$/,"")},j={__proto__:null,getHref:function(){return window.location.href},getOrigin:R,getPort:k,getPath:function(t){return void 0===t&&(t=window.location.href),z(t).path},parse:z,parseQuery:U,clean:B},G=function(t){return!!t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then},V=new(function(t){function e(){var e;return(e=t.call(this)||this).logger=new w("@barba/core"),e.all=["ready","page","reset","currentAdded","currentRemoved","nextAdded","nextRemoved","beforeOnce","once","afterOnce","before","beforeLeave","leave","afterLeave","beforeEnter","enter","afterEnter","after"],e.registered=new Map,e.init(),e}i(e,t);var n=e.prototype;return n.init=function(){var t=this;this.registered.clear(),this.all.forEach(function(e){t[e]||(t[e]=function(n,i){t.registered.has(e)||t.registered.set(e,new Set),t.registered.get(e).add({ctx:i||{},fn:n})})})},n.do=function(t){for(var e=this,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(this.registered.has(t)){var a=Promise.resolve();return this.registered.get(t).forEach(function(t){a=a.then(function(){return y(t.fn,t.ctx).apply(void 0,i)})}),a.catch(function(n){e.logger.debug("Hook error ["+t+"]"),e.logger.error(n)})}return Promise.resolve()},n.clear=function(){var t=this;this.all.forEach(function(e){delete t[e]}),this.init()},n.help=function(){this.logger.info("Available hooks: "+this.all.join(","));var t=[];this.registered.forEach(function(e,n){return t.push(n)}),this.logger.info("Registered hooks: "+t.join(","))},e}(function(){})),W=function(){function t(t){if(this.P=[],"boolean"==typeof t)this.g=t;else{var e=Array.isArray(t)?t:[t];this.P=e.map(function(t){return N(t)})}}return t.prototype.checkHref=function(t){if("boolean"==typeof this.g)return this.g;var e=z(t).path;return this.P.some(function(t){return null!==t.exec(e)})},t}(),H=function(t){function e(e){var n;return(n=t.call(this,e)||this).k=new Map,n}i(e,t);var r=e.prototype;return r.set=function(t,e,n){return this.k.set(t,{action:n,request:e}),{action:n,request:e}},r.get=function(t){return this.k.get(t)},r.getRequest=function(t){return this.k.get(t).request},r.getAction=function(t){return this.k.get(t).action},r.has=function(t){return!this.checkHref(t)&&this.k.has(t)},r.delete=function(t){return this.k.delete(t)},r.update=function(t,e){var i=n({},this.k.get(t),{},e);return this.k.set(t,i),i},e}(W),X=function(){return!window.history.pushState},Y=function(t){return!t.el||!t.href},q=function(t){var e=t.event;return e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey},Q=function(t){var e=t.el;return e.hasAttribute("target")&&"_blank"===e.target},Z=function(t){var e=t.el;return void 0!==e.protocol&&window.location.protocol!==e.protocol||void 0!==e.hostname&&window.location.hostname!==e.hostname},J=function(t){var e=t.el;return void 0!==e.port&&k()!==k(e.href)},$=function(t){var e=t.el;return e.getAttribute&&"string"==typeof e.getAttribute("download")},K=function(t){return t.el.hasAttribute(O.prefix+"-"+O.prevent)},tt=function(t){return Boolean(t.el.closest("["+O.prefix+"-"+O.prevent+'="all"]'))},et=function(t){var e=t.href;return B(e)===B()&&k(e)===k()},nt=function(t){function e(e){var n;return(n=t.call(this,e)||this).suite=[],n.tests=new Map,n.init(),n}i(e,t);var n=e.prototype;return n.init=function(){this.add("pushState",X),this.add("exists",Y),this.add("newTab",q),this.add("blank",Q),this.add("corsDomain",Z),this.add("corsPort",J),this.add("download",$),this.add("preventSelf",K),this.add("preventAll",tt),this.add("sameUrl",et,!1)},n.add=function(t,e,n){void 0===n&&(n=!0),this.tests.set(t,e),n&&this.suite.push(t)},n.run=function(t,e,n,i){return this.tests.get(t)({el:e,event:n,href:i})},n.checkLink=function(t,e,n){var i=this;return this.suite.some(function(r){return i.run(r,t,e,n)})},e}(W),it=function(t){function e(n,i){var r;void 0===i&&(i="Barba error");for(var a=arguments.length,o=new Array(a>2?a-2:0),s=2;s<a;s++)o[s-2]=arguments[s];return(r=t.call.apply(t,[this].concat(o))||this).error=n,r.label=i,Error.captureStackTrace&&Error.captureStackTrace(function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(r),e),r.name="BarbaError",r}return i(e,t),e}(s(Error)),rt=function(){function t(t){void 0===t&&(t=[]),this.logger=new w("@barba/core"),this.all=[],this.page=[],this.once=[],this.A=[{name:"namespace",type:"strings"},{name:"custom",type:"function"}],t&&(this.all=this.all.concat(t)),this.update()}var e=t.prototype;return e.add=function(t,e){switch(t){case"rule":this.A.splice(e.position||0,0,e.value);break;case"transition":default:this.all.push(e)}this.update()},e.resolve=function(t,e){var n=this;void 0===e&&(e={});var i=e.once?this.once:this.page;i=i.filter(e.self?function(t){return t.name&&"self"===t.name}:function(t){return!t.name||"self"!==t.name});var r=new Map,a=i.find(function(i){var a=!0,o={};return!(!e.self||"self"!==i.name)||(n.A.reverse().forEach(function(e){a&&(a=n.R(i,e,t,o),i.from&&i.to&&(a=n.R(i,e,t,o,"from")&&n.R(i,e,t,o,"to")),i.from&&!i.to&&(a=n.R(i,e,t,o,"from")),!i.from&&i.to&&(a=n.R(i,e,t,o,"to")))}),r.set(i,o),a)}),o=r.get(a),s=[];if(s.push(e.once?"once":"page"),e.self&&s.push("self"),o){var u,c=[a];Object.keys(o).length>0&&c.push(o),(u=this.logger).info.apply(u,["Transition found ["+s.join(",")+"]"].concat(c))}else this.logger.info("No transition found ["+s.join(",")+"]");return a},e.update=function(){var t=this;this.all=this.all.map(function(e){return t.T(e)}).sort(function(t,e){return t.priority-e.priority}).reverse().map(function(t){return delete t.priority,t}),this.page=this.all.filter(function(t){return void 0!==t.leave||void 0!==t.enter}),this.once=this.all.filter(function(t){return void 0!==t.once})},e.R=function(t,e,n,i,r){var a=!0,o=!1,s=t,u=e.name,c=u,l=u,h=u,f=r?s[r]:s,p="to"===r?n.next:n.current;if(r?f&&f[u]:f[u]){switch(e.type){case"strings":default:var d=Array.isArray(f[c])?f[c]:[f[c]];p[c]&&-1!==d.indexOf(p[c])&&(o=!0),-1===d.indexOf(p[c])&&(a=!1);break;case"object":var m=Array.isArray(f[l])?f[l]:[f[l]];p[l]?(p[l].name&&-1!==m.indexOf(p[l].name)&&(o=!0),-1===m.indexOf(p[l].name)&&(a=!1)):a=!1;break;case"function":f[h](n)?o=!0:a=!1}o&&(r?(i[r]=i[r]||{},i[r][u]=s[r][u]):i[u]=s[u])}return a},e.O=function(t,e,n){var i=0;return(t[e]||t.from&&t.from[e]||t.to&&t.to[e])&&(i+=Math.pow(10,n),t.from&&t.from[e]&&(i+=1),t.to&&t.to[e]&&(i+=2)),i},e.T=function(t){var e=this;t.priority=0;var n=0;return this.A.forEach(function(i,r){n+=e.O(t,i.name,r+1)}),t.priority=n,t},t}(),at=function(){function t(t){void 0===t&&(t=[]),this.logger=new w("@barba/core"),this.S=!1,this.store=new rt(t)}var n=t.prototype;return n.get=function(t,e){return this.store.resolve(t,e)},n.doOnce=function(t){var e=t.data,n=t.transition;try{var i=function(){r.S=!1},r=this,a=n||{};r.S=!0;var o=u(function(){return Promise.resolve(r.j("beforeOnce",e,a)).then(function(){return Promise.resolve(r.once(e,a)).then(function(){return Promise.resolve(r.j("afterOnce",e,a)).then(function(){})})})},function(t){r.S=!1,r.logger.debug("Transition error [before/after/once]"),r.logger.error(t)});return Promise.resolve(o&&o.then?o.then(i):i())}catch(t){return Promise.reject(t)}},n.doPage=function(t){var e=t.data,n=t.transition,i=t.page,r=t.wrapper;try{var a=function(t){return o?t:void(s.S=!1)},o=!1,s=this,c=n||{},l=!0===c.sync||!1;s.S=!0;var h=u(function(){function t(){return Promise.resolve(s.j("before",e,c)).then(function(){function t(t){return n?t:Promise.resolve(s.remove(e)).then(function(){return Promise.resolve(s.j("after",e,c)).then(function(){})})}var n=!1,a=function(){if(l)return u(function(){return Promise.resolve(s.add(e,r)).then(function(){return Promise.resolve(s.j("beforeLeave",e,c)).then(function(){return Promise.resolve(s.j("beforeEnter",e,c)).then(function(){return Promise.resolve(Promise.all([s.leave(e,c),s.enter(e,c)])).then(function(){return Promise.resolve(s.j("afterLeave",e,c)).then(function(){return Promise.resolve(s.j("afterEnter",e,c)).then(function(){})})})})})})},function(t){if(s.M(t))throw new it(t,"Transition error [sync]")});var t=function(t){return n?t:u(function(){var t=function(){if(!1!==a)return Promise.resolve(s.add(e,r)).then(function(){return Promise.resolve(s.j("beforeEnter",e,c)).then(function(){return Promise.resolve(s.enter(e,c,a)).then(function(){return Promise.resolve(s.j("afterEnter",e,c)).then(function(){})})})})}();if(t&&t.then)return t.then(function(){})},function(t){if(s.M(t))throw new it(t,"Transition error [before/after/enter]")})},a=!1,o=u(function(){return Promise.resolve(s.j("beforeLeave",e,c)).then(function(){return Promise.resolve(Promise.all([s.leave(e,c),I(i,e)]).then(function(t){return t[0]})).then(function(t){return a=t,Promise.resolve(s.j("afterLeave",e,c)).then(function(){})})})},function(t){if(s.M(t))throw new it(t,"Transition error [before/after/leave]")});return o&&o.then?o.then(t):t(o)}();return a&&a.then?a.then(t):t(a)})}var n=function(){if(l)return Promise.resolve(I(i,e)).then(function(){})}();return n&&n.then?n.then(t):t()},function(t){if(s.S=!1,t.name&&"BarbaError"===t.name)throw s.logger.debug(t.label),s.logger.error(t.error),t;throw s.logger.debug("Transition error [page]"),s.logger.error(t),t});return Promise.resolve(h&&h.then?h.then(a):a(h))}catch(t){return Promise.reject(t)}},n.once=function(t,e){try{return Promise.resolve(V.do("once",t,e)).then(function(){return e.once?y(e.once,e)(t):Promise.resolve()})}catch(t){return Promise.reject(t)}},n.leave=function(t,e){try{return Promise.resolve(V.do("leave",t,e)).then(function(){return e.leave?y(e.leave,e)(t):Promise.resolve()})}catch(t){return Promise.reject(t)}},n.enter=function(t,e,n){try{return Promise.resolve(V.do("enter",t,e)).then(function(){return e.enter?y(e.enter,e)(t,n):Promise.resolve()})}catch(t){return Promise.reject(t)}},n.add=function(t,e){try{return C.addContainer(t.next.container,e),V.do("nextAdded",t),Promise.resolve()}catch(t){return Promise.reject(t)}},n.remove=function(t){try{return C.removeContainer(t.current.container),V.do("currentRemoved",t),Promise.resolve()}catch(t){return Promise.reject(t)}},n.M=function(t){return t.message?!/Timeout error|Fetch error/.test(t.message):!t.status},n.j=function(t,e,n){try{return Promise.resolve(V.do(t,e,n)).then(function(){return n[t]?y(n[t],n)(e):Promise.resolve()})}catch(t){return Promise.reject(t)}},e(t,[{key:"isRunning",get:function(){return this.S},set:function(t){this.S=t}},{key:"hasOnce",get:function(){return this.store.once.length>0}},{key:"hasSelf",get:function(){return this.store.all.some(function(t){return"self"===t.name})}},{key:"shouldWait",get:function(){return this.store.all.some(function(t){return t.to&&!t.to.route||t.sync})}}]),t}(),ot=function(){function t(t){var e=this;this.names=["beforeLeave","afterLeave","beforeEnter","afterEnter"],this.byNamespace=new Map,0!==t.length&&(t.forEach(function(t){e.byNamespace.set(t.namespace,t)}),this.names.forEach(function(t){V[t](e.L(t))}))}return t.prototype.L=function(t){var e=this;return function(n){var i=t.match(/enter/i)?n.next:n.current,r=e.byNamespace.get(i.namespace);return r&&r[t]?y(r[t],r)(n):Promise.resolve()}},t}();Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(t){var e=this;do{if(e.matches(t))return e;e=e.parentElement||e.parentNode}while(null!==e&&1===e.nodeType);return null});var st={container:null,html:"",namespace:"",url:{hash:"",href:"",path:"",port:null,query:{}}};return new(function(){function t(){this.version=x,this.schemaPage=st,this.Logger=w,this.logger=new w("@barba/core"),this.plugins=[],this.hooks=V,this.dom=C,this.helpers=D,this.history=F,this.request=g,this.url=j}var i=t.prototype;return i.use=function(t,e){var n=this.plugins;n.indexOf(t)>-1?this.logger.warn("Plugin ["+t.name+"] already installed."):"function"==typeof t.install?(t.install(this,e),n.push(t)):this.logger.warn("Plugin ["+t.name+'] has no "install" method.')},i.init=function(t){var e=void 0===t?{}:t,i=e.transitions,r=void 0===i?[]:i,a=e.views,o=void 0===a?[]:a,s=e.schema,u=void 0===s?O:s,c=e.requestError,l=e.timeout,h=void 0===l?2e3:l,f=e.cacheIgnore,p=void 0!==f&&f,d=e.prefetchIgnore,m=void 0!==d&&d,v=e.preventRunning,g=void 0!==v&&v,y=e.prevent,_=void 0===y?null:y,x=e.debug,b=e.logLevel;if(w.setLevel(!0===(void 0!==x&&x)?"debug":void 0===b?"off":b),this.logger.info(this.version),Object.keys(u).forEach(function(t){O[t]&&(O[t]=u[t])}),this.$=c,this.timeout=h,this.cacheIgnore=p,this.prefetchIgnore=m,this.preventRunning=g,this._=this.dom.getWrapper(),!this._)throw new Error("[@barba/core] No Barba wrapper found");this._.setAttribute("aria-live","polite"),this.q();var M=this.data.current;if(!M.container)throw new Error("[@barba/core] No Barba container found");if(this.cache=new H(p),this.prevent=new nt(m),this.transitions=new at(r),this.views=new ot(o),null!==_){if("function"!=typeof _)throw new Error("[@barba/core] Prevent should be a function");this.prevent.add("preventCustom",_)}this.history.init(M.url.href,M.namespace),this.B=this.B.bind(this),this.U=this.U.bind(this),this.D=this.D.bind(this),this.F(),this.plugins.forEach(function(t){return t.init()});var S=this.data;S.trigger="barba",S.next=S.current,S.current=n({},this.schemaPage),this.hooks.do("ready",S),this.once(S),this.q()},i.destroy=function(){this.q(),this.H(),this.history.clear(),this.hooks.clear(),this.plugins=[]},i.force=function(t){window.location.assign(t)},i.go=function(t,e,n){var i;if(void 0===e&&(e="barba"),this.transitions.isRunning)this.force(t);else if(!(i="popstate"===e?this.history.current&&this.url.getPath(this.history.current.url)===this.url.getPath(t):this.prevent.run("sameUrl",null,null,t))||this.transitions.hasSelf)return e=this.history.change(t,e,n),n&&(n.stopPropagation(),n.preventDefault()),this.page(t,e,i)},i.once=function(t){try{var e=this;return Promise.resolve(e.hooks.do("beforeEnter",t)).then(function(){function n(){return Promise.resolve(e.hooks.do("afterEnter",t)).then(function(){})}var i=function(){if(e.transitions.hasOnce){var n=e.transitions.get(t,{once:!0});return Promise.resolve(e.transitions.doOnce({transition:n,data:t})).then(function(){})}}();return i&&i.then?i.then(n):n()})}catch(t){return Promise.reject(t)}},i.page=function(t,e,i){try{var r=function(){var t=a.data;return Promise.resolve(a.hooks.do("page",t)).then(function(){var e=u(function(){var e=a.transitions.get(t,{once:!1,self:i});return Promise.resolve(a.transitions.doPage({data:t,page:o,transition:e,wrapper:a._})).then(function(){a.q()})},function(){0===w.getLevel()&&a.force(t.current.url.href)});if(e&&e.then)return e.then(function(){})})},a=this;a.data.next.url=n({href:t},a.url.parse(t)),a.data.trigger=e;var o=a.cache.has(t)?a.cache.update(t,{action:"click"}).request:a.cache.set(t,a.request(t,a.timeout,a.onRequestError.bind(a,e)),"click").request,s=function(){if(a.transitions.shouldWait)return Promise.resolve(I(o,a.data)).then(function(){})}();return Promise.resolve(s&&s.then?s.then(r):r())}catch(t){return Promise.reject(t)}},i.onRequestError=function(t){this.transitions.isRunning=!1;for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r=n[0],a=n[1],o=this.cache.getAction(r);return this.cache.delete(r),!(this.$&&!1===this.$(t,o,r,a)||("click"===o&&this.force(r),1))},i.prefetch=function(t){var e=this;this.cache.has(t)||this.cache.set(t,this.request(t,this.timeout,this.onRequestError.bind(this,"barba")).catch(function(t){e.logger.error(t)}),"prefetch")},i.F=function(){!0!==this.prefetchIgnore&&(document.addEventListener("mouseover",this.B),document.addEventListener("touchstart",this.B)),document.addEventListener("click",this.U),window.addEventListener("popstate",this.D)},i.H=function(){!0!==this.prefetchIgnore&&(document.removeEventListener("mouseover",this.B),document.removeEventListener("touchstart",this.B)),document.removeEventListener("click",this.U),window.removeEventListener("popstate",this.D)},i.B=function(t){var e=this,n=this.I(t);if(n){var i=this.dom.getHref(n);this.prevent.checkHref(i)||this.cache.has(i)||this.cache.set(i,this.request(i,this.timeout,this.onRequestError.bind(this,n)).catch(function(t){e.logger.error(t)}),"enter")}},i.U=function(t){var e=this.I(t);if(e)return this.transitions.isRunning&&this.preventRunning?(t.preventDefault(),void t.stopPropagation()):void this.go(this.dom.getHref(e),e,t)},i.D=function(t){this.go(this.url.getHref(),"popstate",t)},i.I=function(t){for(var e=t.target;e&&!this.dom.getHref(e);)e=e.parentNode;if(e&&!this.prevent.checkLink(e,t,this.dom.getHref(e)))return e},i.q=function(){var t=this.url.getHref(),e={container:this.dom.getContainer(),html:this.dom.getHtml(),namespace:this.dom.getNamespace(),url:n({href:t},this.url.parse(t))};this.C={current:e,next:n({},this.schemaPage),trigger:void 0},this.hooks.do("reset",this.data)},e(t,[{key:"data",get:function(){return this.C}},{key:"wrapper",get:function(){return this._}}]),t}())})},{}],2:[function(t,e,n){!function(t,i){"object"==typeof n&&void 0!==e?e.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).barbaCss=i()}(this,function(){var t="2.1.15";return new(function(){function e(){this.name="@barba/css",this.version=t,this.prefix="barba",this.callbacks={},this.t=!1}var n=e.prototype;return n.install=function(t){this.logger=new t.Logger(this.name),this.logger.info(this.version),this.barba=t,this.i=this.i.bind(this),this.s=this.s.bind(this),this.h=this.h.bind(this)},n.init=function(){this.barba.hooks.before(this.o,this),this.barba.hooks.beforeOnce(this.o,this),this.barba.hooks.beforeOnce(this.u,this),this.barba.hooks.afterOnce(this.m,this),this.barba.hooks.beforeLeave(this.P,this),this.barba.hooks.afterLeave(this.v,this),this.barba.hooks.beforeEnter(this.l,this),this.barba.hooks.afterEnter(this.p,this),this.barba.transitions.once=this.i,this.barba.transitions.leave=this.s,this.barba.transitions.enter=this.h,this.barba.transitions.store.all.unshift({name:"barba",once:function(){},leave:function(){},enter:function(){}}),this.barba.transitions.store.update()},n.start=function(t,e){try{var n=this;return n.add(t,e),Promise.resolve(n.barba.helpers.nextTick()).then(function(){return n.add(t,e+"-active"),Promise.resolve(n.barba.helpers.nextTick()).then(function(){})})}catch(t){return Promise.reject(t)}},n.next=function(t,e){try{var n=this;return n.t=n.g(t),Promise.resolve(n.t?new Promise(function(t){try{return n.cb=t,n.callbacks[e]=t,i.addEventListener("transitionend",t,!1),Promise.resolve(n.barba.helpers.nextTick()).then(function(){return n.remove(i,e),n.add(i,e+"-to"),Promise.resolve(n.barba.helpers.nextTick()).then(function(){})})}catch(t){return Promise.reject(t)}}):(n.remove(t,e),Promise.resolve(n.barba.helpers.nextTick()).then(function(){return n.add(t,e+"-to"),Promise.resolve(n.barba.helpers.nextTick()).then(function(){})})))}catch(t){return Promise.reject(t)}},n.end=function(t,e){try{return this.remove(t,e+"-to"),this.remove(t,e+"-active"),t.removeEventListener("transitionend",this.callbacks[e]),this.t=!1,Promise.resolve()}catch(t){return Promise.reject(t)}},n.add=function(t,e){t.classList.add(this.prefix+"-"+e)},n.remove=function(t,e){t.classList.remove(this.prefix+"-"+e)},n.o=function(t,e){this.prefix=e.name||"barba"},n.g=function(t){return"0s"!==getComputedStyle(t).transitionDuration},n.u=function(t){return this.start(t.next.container,"once")},n.i=function(t,e){try{var n=this;return Promise.resolve(n.barba.hooks.do("once",t,e)).then(function(){return n.next(t.next.container,"once")})}catch(t){return Promise.reject(t)}},n.m=function(t){return this.end(t.next.container,"once")},n.P=function(t){return this.start(t.current.container,"leave")},n.s=function(t,e){try{var n=this;return Promise.resolve(n.barba.hooks.do("leave",t,e)).then(function(){return n.next(t.current.container,"leave")})}catch(t){return Promise.reject(t)}},n.v=function(t){return this.end(t.current.container,"leave"),this.barba.transitions.remove(t),Promise.resolve()},n.l=function(t){return 1===this.barba.history.size?Promise.resolve():this.start(t.next.container,"enter")},n.h=function(t,e){try{var n=this;return Promise.resolve(n.barba.hooks.do("enter",t,e)).then(function(){return n.next(t.next.container,"enter")})}catch(t){return Promise.reject(t)}},n.p=function(t){return 1===this.barba.history.size?Promise.resolve():this.end(t.next.container,"enter")},e}())})},{}],3:[function(t,e,n){!function(t,i){"object"==typeof n&&void 0!==e?e.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).barbaPrefetch=i()}(this,function(){var t="2.1.10",e=window.requestIdleCallback||function(t){var e=Date.now();return setTimeout(function(){t({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-e))}})},1)};return new(function(){function n(){this.name="@barba/prefetch",this.version=t,this.toPrefetch=new Set}var i=n.prototype;return i.install=function(t,e){var n=void 0===e?{}:e,i=n.root,r=void 0===i?document.body:i,a=n.timeout,o=void 0===a?2e3:a;this.logger=new t.Logger(this.name),this.logger.info(this.version),this.barba=t,this.root=r,this.timeout=o},i.init=function(){var t=this;this.barba.prefetchIgnore?this.logger.warn("barba.prefetchIgnore is enabled"):this.barba.cacheIgnore?this.logger.warn("barba.cacheIgnore is enabled"):(this.observer=new IntersectionObserver(function(e){e.forEach(function(e){if(e.isIntersecting){var n=e.target,i=t.barba.dom.getHref(n);t.toPrefetch.has(i)&&(t.observer.unobserve(n),t.barba.cache.has(i)?t.barba.cache.update(i,{action:"prefetch"}):t.barba.cache.set(i,t.barba.request(i,t.barba.timeout,t.barba.onRequestError.bind(t.barba,"barba")).catch(function(e){t.logger.error(e)}),"prefetch"))}})}),this.observe(),this.barba.hooks.after(this.observe,this))},i.observe=function(){var t=this;e(function(){t.root.querySelectorAll("a").forEach(function(e){var n=e,i=t.barba.dom.getHref(n);t.barba.cache.has(i)||t.barba.prevent.checkHref(i)||t.barba.prevent.checkLink(n,{},i)||(t.observer.observe(e),t.toPrefetch.add(i))})},{timeout:this.timeout})},n}())})},{}],4:[function(t,e,n){(function(t,i){!function(t,i){"object"==typeof n&&void 0!==e?e.exports=i():"function"==typeof define&&define.amd?define(i):((t=t||self).Vimeo=t.Vimeo||{},t.Vimeo.Player=i())}(this,function(){"use strict";function e(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function n(t,e){return 0===t.indexOf(e.toLowerCase())?t:"".concat(e.toLowerCase()).concat(t.substr(0,1).toUpperCase()).concat(t.substr(1))}function r(t){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(t)}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.id,n=t.url,i=e||n;if(!i)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(function(t){return!isNaN(parseFloat(t))&&isFinite(t)&&Math.floor(t)==t}(i))return"https://vimeo.com/".concat(i);if(r(i))return i.replace("http:","https:");if(e)throw new TypeError("â€œ".concat(e,"â€ is not a valid video id."));throw new TypeError("â€œ".concat(i,"â€ is not a vimeo.com url."))}function o(t,e,n){var i=x.get(t.element)||{};e in i||(i[e]=[]),i[e].push(n),x.set(t.element,i)}function s(t,e){return(x.get(t.element)||{})[e]||[]}function u(t,e,n){var i=x.get(t.element)||{};if(!i[e])return!0;if(!n)return i[e]=[],x.set(t.element,i),!0;var r=i[e].indexOf(n);return-1!==r&&i[e].splice(r,1),x.set(t.element,i),i[e]&&0===i[e].length}function c(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b.reduce(function(e,n){var i=t.getAttribute("data-vimeo-".concat(n));return(i||""===i)&&(e[n]=""===i?1:i),e},e)}function l(t,e){var n=t.html;if(!e)throw new TypeError("An element must be provided");if(null!==e.getAttribute("data-vimeo-initialized"))return e.querySelector("iframe");var i=document.createElement("div");return i.innerHTML=n,e.appendChild(i.firstChild),e.setAttribute("data-vimeo-initialized","true"),e.querySelector("iframe")}function h(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;return new Promise(function(i,a){if(!r(t))throw new TypeError("â€œ".concat(t,"â€ is not a vimeo.com url."));var o="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(t));for(var s in e)e.hasOwnProperty(s)&&(o+="&".concat(s,"=").concat(encodeURIComponent(e[s])));var u="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;u.open("GET",o,!0),u.onload=function(){if(404!==u.status)if(403!==u.status)try{var e=JSON.parse(u.responseText);if(403===e.domain_status_code)return l(e,n),void a(new Error("â€œ".concat(t,"â€ is not embeddable.")));i(e)}catch(t){a(t)}else a(new Error("â€œ".concat(t,"â€ is not embeddable.")));else a(new Error("â€œ".concat(t,"â€ was not found.")))},u.onerror=function(){var t=u.status?" (".concat(u.status,")"):"";a(new Error("There was an error fetching the embed code from Vimeo".concat(t,".")))},u.send()})}function f(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){return{}}return t}function p(t,e,n){if(t.element.contentWindow&&t.element.contentWindow.postMessage){var i={method:e};void 0!==n&&(i.value=n);var r=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));r>=8&&r<10&&(i=JSON.stringify(i)),t.element.contentWindow.postMessage(i,t.origin)}}function d(t,e){var n,i=[];if((e=f(e)).event){if("error"===e.event)s(t,e.data.method).forEach(function(n){var i=new Error(e.data.message);i.name=e.data.name,n.reject(i),u(t,e.data.method,n)});i=s(t,"event:".concat(e.event)),n=e.data}else if(e.method){var r=function(t,e){var n=s(t,e);if(n.length<1)return!1;var i=n.shift();return u(t,e,i),i}(t,e.method);r&&(i.push(r),n=e.value)}i.forEach(function(e){try{if("function"==typeof e)return void e.call(t,n);e.resolve(n)}catch(t){}})}var m=void 0!==t&&"[object global]"==={}.toString.call(t),v=void 0!==Array.prototype.indexOf,g="undefined"!=typeof window&&void 0!==window.postMessage;if(!(m||v&&g))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};!function(t){function e(t){return Object(t)===t}if(!t.WeakMap){var n=Object.prototype.hasOwnProperty,i=function(t,e,n){Object.defineProperty?Object.defineProperty(t,e,{configurable:!0,writable:!0,value:n}):t[e]=n};t.WeakMap=function(){function t(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(i(this,"_id","_WeakMap"+"_"+a()+"."+a()),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}function r(t,i){if(!e(t)||!n.call(t,"_id"))throw new TypeError(i+" method called on incompatible receiver "+typeof t)}function a(){return Math.random().toString().substring(2)}return i(t.prototype,"delete",function(t){if(r(this,"delete"),!e(t))return!1;var n=t[this._id];return!(!n||n[0]!==t||(delete t[this._id],0))}),i(t.prototype,"get",function(t){if(r(this,"get"),e(t)){var n=t[this._id];return n&&n[0]===t?n[1]:void 0}}),i(t.prototype,"has",function(t){if(r(this,"has"),!e(t))return!1;var n=t[this._id];return!(!n||n[0]!==t)}),i(t.prototype,"set",function(t,n){if(r(this,"set"),!e(t))throw new TypeError("Invalid value used as weak map key");var a=t[this._id];return a&&a[0]===t?(a[1]=n,this):(i(t,this._id,[t,n]),this)}),i(t,"_polyfill",!0),t}()}}("undefined"!=typeof self?self:"undefined"!=typeof window?window:y);var _=function(t,e){return t(e={exports:{}},e.exports),e.exports}(function(t){!function(e,n,i){n[e]=n[e]||i(),t.exports&&(t.exports=n[e])}("Promise",y,function(){function t(t,e){p.add(t,e),f||(f=m(p.drain))}function e(t){var e,n=typeof t;return null==t||"object"!=n&&"function"!=n||(e=t.then),"function"==typeof e&&e}function n(){for(var t=0;t<this.chain.length;t++)r(this,1===this.state?this.chain[t].success:this.chain[t].failure,this.chain[t]);this.chain.length=0}function r(t,n,i){var r,a;try{!1===n?i.reject(t.msg):(r=!0===n?t.msg:n.call(void 0,t.msg))===i.promise?i.reject(TypeError("Promise-chain cycle")):(a=e(r))?a.call(r,i.resolve,i.reject):i.resolve(r)}catch(t){i.reject(t)}}function a(i){var r,s=this;if(!s.triggered){s.triggered=!0,s.def&&(s=s.def);try{(r=e(i))?t(function(){var t=new u(s);try{r.call(i,function(){a.apply(t,arguments)},function(){o.apply(t,arguments)})}catch(e){o.call(t,e)}}):(s.msg=i,s.state=1,s.chain.length>0&&t(n,s))}catch(t){o.call(new u(s),t)}}}function o(e){var i=this;i.triggered||(i.triggered=!0,i.def&&(i=i.def),i.msg=e,i.state=2,i.chain.length>0&&t(n,i))}function s(t,e,n,i){for(var r=0;r<e.length;r++)!function(r){t.resolve(e[r]).then(function(t){n(r,t)},i)}(r)}function u(t){this.def=t,this.triggered=!1}function c(t){this.promise=t,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var i=new c(this);this.then=function(e,r){var a={success:"function"!=typeof e||e,failure:"function"==typeof r&&r};return a.promise=new this.constructor(function(t,e){if("function"!=typeof t||"function"!=typeof e)throw TypeError("Not a function");a.resolve=t,a.reject=e}),i.chain.push(a),0!==i.state&&t(n,i),a.promise},this.catch=function(t){return this.then(void 0,t)};try{e.call(void 0,function(t){a.call(i,t)},function(t){o.call(i,t)})}catch(t){o.call(i,t)}}var h,f,p,d=Object.prototype.toString,m=void 0!==i?function(t){return i(t)}:setTimeout;try{Object.defineProperty({},"x",{}),h=function(t,e,n,i){return Object.defineProperty(t,e,{value:n,writable:!0,configurable:!1!==i})}}catch(t){h=function(t,e,n){return t[e]=n,t}}p=function(){function t(t,e){this.fn=t,this.self=e,this.next=void 0}var e,n,i;return{add:function(r,a){i=new t(r,a),n?n.next=i:e=i,n=i,i=void 0},drain:function(){var t=e;for(e=n=f=void 0;t;)t.fn.call(t.self),t=t.next}}}();var v=h({},"constructor",l,!1);return l.prototype=v,h(v,"__NPO__",0,!1),h(l,"resolve",function(t){return t&&"object"==typeof t&&1===t.__NPO__?t:new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");e(t)})}),h(l,"reject",function(t){return new this(function(e,n){if("function"!=typeof e||"function"!=typeof n)throw TypeError("Not a function");n(t)})}),h(l,"all",function(t){var e=this;return"[object Array]"!=d.call(t)?e.reject(TypeError("Not an array")):0===t.length?e.resolve([]):new e(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");var r=t.length,a=Array(r),o=0;s(e,t,function(t,e){a[t]=e,++o===r&&n(a)},i)})}),h(l,"race",function(t){var e=this;return"[object Array]"!=d.call(t)?e.reject(TypeError("Not an array")):new e(function(n,i){if("function"!=typeof n||"function"!=typeof i)throw TypeError("Not a function");s(e,t,function(t,e){n(e)},i)})}),l})}),x=new WeakMap,b=["autopause","autoplay","background","byline","color","controls","dnt","height","id","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"],w=new WeakMap,M=new WeakMap,S={},A=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),window.jQuery&&e instanceof jQuery&&(e.length>1&&window.console&&console.warn,e=e[0]),"undefined"!=typeof document&&"string"==typeof e&&(e=document.getElementById(e)),!function(t){return Boolean(t&&1===t.nodeType&&"nodeName"in t&&t.ownerDocument&&t.ownerDocument.defaultView)}(e))throw new TypeError("You must pass either a valid element or a valid id.");if("IFRAME"!==e.nodeName){var s=e.querySelector("iframe");s&&(e=s)}if("IFRAME"===e.nodeName&&!r(e.getAttribute("src")||""))throw new Error("The player element passed isnâ€™t a Vimeo embed.");if(w.has(e))return w.get(e);this._window=e.ownerDocument.defaultView,this.element=e,this.origin="*";var m=new _(function(t,o){if(n._onMessage=function(e){if(r(e.origin)&&n.element.contentWindow===e.source){"*"===n.origin&&(n.origin=e.origin);var i=f(e.data);if(i&&"error"===i.event&&i.data&&"ready"===i.data.method){var a=new Error(i.data.message);return a.name=i.data.name,void o(a)}var s=i&&"ready"===i.event,u=i&&"ping"===i.method;return s||u?(n.element.setAttribute("data-ready","true"),void t()):void d(n,i)}},n._window.addEventListener("message",n._onMessage),"IFRAME"!==n.element.nodeName){var s=c(e,i);h(a(s),s,e).then(function(t){var i=l(t,e);return n.element=i,n._originalElement=e,function(t,e){var n=x.get(t);x.set(e,n),x.delete(t)}(e,i),w.set(n.element,n),t}).catch(o)}});if(M.set(this,m),w.set(this.element,this),"IFRAME"===this.element.nodeName&&p(this,"ping"),S.isEnabled){var v=function(){return S.exit()};S.on("fullscreenchange",function(){S.isFullscreen?o(n,"event:exitFullscreen",v):u(n,"event:exitFullscreen",v),n.ready().then(function(){p(n,"fullscreenchange",S.isFullscreen)})})}return this}return function(t,n,i){n&&e(t.prototype,n),i&&e(t,i)}(t,[{key:"callMethod",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new _(function(i,r){return e.ready().then(function(){o(e,t,{resolve:i,reject:r}),p(e,t,n)}).catch(r)})}},{key:"get",value:function(t){var e=this;return new _(function(i,r){return t=n(t,"get"),e.ready().then(function(){o(e,t,{resolve:i,reject:r}),p(e,t)}).catch(r)})}},{key:"set",value:function(t,e){var i=this;return new _(function(r,a){if(t=n(t,"set"),null==e)throw new TypeError("There must be a value to set.");return i.ready().then(function(){o(i,t,{resolve:r,reject:a}),p(i,t,e)}).catch(a)})}},{key:"on",value:function(t,e){if(!t)throw new TypeError("You must pass an event name.");if(!e)throw new TypeError("You must pass a callback function.");if("function"!=typeof e)throw new TypeError("The callback must be a function.");0===s(this,"event:".concat(t)).length&&this.callMethod("addEventListener",t).catch(function(){}),o(this,"event:".concat(t),e)}},{key:"off",value:function(t,e){if(!t)throw new TypeError("You must pass an event name.");if(e&&"function"!=typeof e)throw new TypeError("The callback must be a function.");u(this,"event:".concat(t),e)&&this.callMethod("removeEventListener",t).catch(function(t){})}},{key:"loadVideo",value:function(t){return this.callMethod("loadVideo",t)}},{key:"ready",value:function(){var t=M.get(this)||new _(function(t,e){e(new Error("Unknown player. Probably unloaded."))});return _.resolve(t)}},{key:"addCuePoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod("addCuePoint",{time:t,data:e})}},{key:"removeCuePoint",value:function(t){return this.callMethod("removeCuePoint",t)}},{key:"enableTextTrack",value:function(t,e){if(!t)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:t,kind:e})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"requestFullscreen",value:function(){return S.isEnabled?S.request(this.element):this.callMethod("requestFullscreen")}},{key:"exitFullscreen",value:function(){return S.isEnabled?S.exit():this.callMethod("exitFullscreen")}},{key:"getFullscreen",value:function(){return S.isEnabled?_.resolve(S.isFullscreen):this.get("fullscreen")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var t=this;return new _(function(e){M.delete(t),w.delete(t.element),t._originalElement&&(w.delete(t._originalElement),t._originalElement.removeAttribute("data-vimeo-initialized")),t.element&&"IFRAME"===t.element.nodeName&&t.element.parentNode&&t.element.parentNode.removeChild(t.element),t._window.removeEventListener("message",t._onMessage),e()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(t){return this.set("autopause",t)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getChapters",value:function(){return this.get("chapters")}},{key:"getCurrentChapter",value:function(){return this.get("currentChapter")}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(t){return this.set("color",t)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(t){return this.set("currentTime",t)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(t){return this.set("loop",t)}},{key:"setMuted",value:function(t){return this.set("muted",t)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(t){return this.set("playbackRate",t)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(t){return this.set("volume",t)}}]),t}();return m||(S=function(){var t=function(){for(var t,e=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],n=0,i=e.length,r={};n<i;n++)if((t=e[n])&&t[1]in document){for(n=0;n<t.length;n++)r[e[0][n]]=t[n];return r}return!1}(),e={fullscreenchange:t.fullscreenchange,fullscreenerror:t.fullscreenerror},n={request:function(e){return new Promise(function(i,r){var a=function t(){n.off("fullscreenchange",t),i()};n.on("fullscreenchange",a);var o=(e=e||document.documentElement)[t.requestFullscreen]();o instanceof Promise&&o.then(a).catch(r)})},exit:function(){return new Promise(function(e,i){if(n.isFullscreen){var r=function t(){n.off("fullscreenchange",t),e()};n.on("fullscreenchange",r);var a=document[t.exitFullscreen]();a instanceof Promise&&a.then(r).catch(i)}else e()})},on:function(t,n){var i=e[t];i&&document.addEventListener(i,n)},off:function(t,n){var i=e[t];i&&document.removeEventListener(i,n)}};return Object.defineProperties(n,{isFullscreen:{get:function(){return Boolean(document[t.fullscreenElement])}},element:{enumerable:!0,get:function(){return document[t.fullscreenElement]}},isEnabled:{enumerable:!0,get:function(){return Boolean(document[t.fullscreenEnabled])}}}),n}(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,e=[].slice.call(t.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")),n=function(t){"console"in window&&console.error};e.forEach(function(t){try{if(null!==t.getAttribute("data-vimeo-defer"))return;var e=c(t);h(a(e),e,t).then(function(e){return l(e,t)}).catch(n)}catch(t){n()}})}(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;window.VimeoPlayerResizeEmbeds_||(window.VimeoPlayerResizeEmbeds_=!0,window.addEventListener("message",function(e){if(r(e.origin)&&e.data&&"spacechange"===e.data.event)for(var n=t.querySelectorAll("iframe"),i=0;i<n.length;i++)if(n[i].contentWindow===e.source){n[i].parentElement.style.paddingBottom="".concat(e.data.data[0].bottom,"px");break}}))}()),A})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},t("timers").setImmediate)},{timers:90}],5:[function(t,e,n){!function(t,i){"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((t=t||self).THREE={})}(this,function(t){"use strict";function e(){}function n(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}function i(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length}function r(t,e,a,o,s,u,c,l,h,f){Object.defineProperty(this,"id",{value:ju++}),this.uuid=zu.generateUUID(),this.name="",this.image=void 0!==t?t:r.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:r.DEFAULT_MAPPING,this.wrapS=void 0!==a?a:Xo,this.wrapT=void 0!==o?o:Xo,this.magFilter=void 0!==s?s:Jo,this.minFilter=void 0!==u?u:Ko,this.anisotropy=void 0!==h?h:1,this.format=void 0!==c?c:ds,this.internalFormat=null,this.type=void 0!==l?l:ts,this.offset=new n(0,0),this.repeat=new n(1,1),this.center=new n(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new i,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==f?f:_u,this.version=0,this.onUpdate=null}function a(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),this.x=t,this.y=e,this.z=n,this.w=i}function o(t,e,n){this.width=t,this.height=e,this.scissor=new a(0,0,t,e),this.scissorTest=!1,this.viewport=new a(0,0,t,e),n=n||{},this.texture=new r(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:Jo,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function s(t,e,n){o.call(this,t,e,n),this.samples=4}function u(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=1),this._x=t,this._y=e,this._z=n,this._w=i}function c(t,e,n){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),this.x=t,this.y=e,this.z=n}function l(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length}function h(t,e,n,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===n&&(n=0),void 0===i&&(i=h.DefaultOrder),this._x=t,this._y=e,this._z=n,this._order=i}function f(){this.mask=1}function p(){Object.defineProperty(this,"id",{value:Ku++}),this.uuid=zu.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=p.DefaultUp.clone();var t=new c,e=new h,n=new u,r=new c(1,1,1);e._onChange(function(){n.setFromEuler(e,!1)}),n._onChange(function(){e.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new l},normalMatrix:{value:new i}}),this.matrix=new l,this.matrixWorld=new l,this.matrixAutoUpdate=p.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new f,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function d(){p.call(this),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function m(t,e){this.min=void 0!==t?t:new c(1/0,1/0,1/0),this.max=void 0!==e?e:new c(-1/0,-1/0,-1/0)}function v(t,e,n,i,r){for(var a=0,o=t.length-3;a<=o;a+=3){Sc.fromArray(t,a);var s=r.x*Math.abs(Sc.x)+r.y*Math.abs(Sc.y)+r.z*Math.abs(Sc.z),u=e.dot(Sc),c=n.dot(Sc),l=i.dot(Sc);if(Math.max(-Math.max(u,c,l),Math.min(u,c,l))>s)return!1}return!0}function g(t,e){this.center=void 0!==t?t:new c,this.radius=void 0!==e?e:-1}function y(t,e){this.origin=void 0!==t?t:new c,this.direction=void 0!==e?e:new c(0,0,-1)}function _(t,e){this.normal=void 0!==t?t:new c(1,0,0),this.constant=void 0!==e?e:0}function x(t,e,n){this.a=void 0!==t?t:new c,this.b=void 0!==e?e:new c,this.c=void 0!==n?n:new c}function b(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function w(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function M(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function S(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}function A(t,e,n,i,r,a){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new c,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new b,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}function T(){Object.defineProperty(this,"id",{value:Qc++}),this.uuid=zu.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=to,this.side=Za,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=mo,this.blendDst=vo,this.blendEquation=ao,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ao,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Fu,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Cu,this.stencilZFail=Cu,this.stencilZPass=Cu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function P(t){T.call(this),this.type="MeshBasicMaterial",this.color=new b(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Oo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}function L(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=Iu,this.updateRange={offset:0,count:-1},this.version=0}function E(t,e,n){L.call(this,new Int8Array(t),e,n)}function O(t,e,n){L.call(this,new Uint8Array(t),e,n)}function C(t,e,n){L.call(this,new Uint8ClampedArray(t),e,n)}function F(t,e,n){L.call(this,new Int16Array(t),e,n)}function I(t,e,n){L.call(this,new Uint16Array(t),e,n)}function N(t,e,n){L.call(this,new Int32Array(t),e,n)}function D(t,e,n){L.call(this,new Uint32Array(t),e,n)}function R(t,e,n){L.call(this,new Float32Array(t),e,n)}function k(t,e,n){L.call(this,new Float64Array(t),e,n)}function z(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function U(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}function B(){Object.defineProperty(this,"id",{value:$c+=2}),this.uuid=zu.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function j(t,e){p.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new P,this.updateMorphTargets()}function G(t,e,n,i,r,a,o,s){if(null===(e.side===Ja?i.intersectTriangle(o,a,r,!0,s):i.intersectTriangle(r,a,o,e.side!==$a,s)))return null;bl.copy(s),bl.applyMatrix4(t.matrixWorld);var u=n.ray.origin.distanceTo(bl);return u<n.near||u>n.far?null:{distance:u,point:bl.clone(),object:t}}function V(t,e,i,r,a,o,s,u,c,l,h,f){ul.fromBufferAttribute(a,l),cl.fromBufferAttribute(a,h),ll.fromBufferAttribute(a,f);var p=t.morphTargetInfluences;if(e.morphTargets&&o&&p){dl.set(0,0,0),ml.set(0,0,0),vl.set(0,0,0);for(var d=0,m=o.length;d<m;d++){var v=p[d],g=o[d];0!==v&&(hl.fromBufferAttribute(g,l),fl.fromBufferAttribute(g,h),pl.fromBufferAttribute(g,f),s?(dl.addScaledVector(hl,v),ml.addScaledVector(fl,v),vl.addScaledVector(pl,v)):(dl.addScaledVector(hl.sub(ul),v),ml.addScaledVector(fl.sub(cl),v),vl.addScaledVector(pl.sub(ll),v)))}ul.add(dl),cl.add(ml),ll.add(vl)}t.isSkinnedMesh&&(t.boneTransform(l,ul),t.boneTransform(h,cl),t.boneTransform(f,ll));var y=G(t,e,i,r,ul,cl,ll,xl);if(y){u&&(gl.fromBufferAttribute(u,l),yl.fromBufferAttribute(u,h),_l.fromBufferAttribute(u,f),y.uv=x.getUV(xl,ul,cl,ll,gl,yl,_l,new n)),c&&(gl.fromBufferAttribute(c,l),yl.fromBufferAttribute(c,h),_l.fromBufferAttribute(c,f),y.uv2=x.getUV(xl,ul,cl,ll,gl,yl,_l,new n));var _=new A(l,h,f);x.getNormal(ul,cl,ll,_.normal),y.face=_}return y}function W(){Object.defineProperty(this,"id",{value:wl+=2}),this.uuid=zu.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function H(t,e,n,i,r,a){W.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a},this.fromBufferGeometry(new X(t,e,n,i,r,a)),this.mergeVertices()}function X(t,e,n,i,r,a){function o(t,e,n,i,r,a,o,m,v,g,y){for(var _=a/v,x=o/g,b=a/2,w=o/2,M=m/2,S=v+1,A=g+1,T=0,P=0,L=new c,E=0;E<A;E++)for(var O=E*x-w,C=0;C<S;C++){var F=C*_-b;L[t]=F*i,L[e]=O*r,L[n]=M,l.push(L.x,L.y,L.z),L[t]=0,L[e]=0,L[n]=m>0?1:-1,h.push(L.x,L.y,L.z),f.push(C/v),f.push(1-E/g),T+=1}for(var I=0;I<g;I++)for(var N=0;N<v;N++){var D=p+N+S*I,R=p+N+S*(I+1),k=p+(N+1)+S*(I+1),z=p+(N+1)+S*I;u.push(D,R,z),u.push(R,k,z),P+=6}s.addGroup(d,P,y),d+=P,p+=T}void 0===t&&(t=1),void 0===e&&(e=1),void 0===n&&(n=1),void 0===i&&(i=1),void 0===r&&(r=1),void 0===a&&(a=1),B.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:a};var s=this;i=Math.floor(i),r=Math.floor(r),a=Math.floor(a);var u=[],l=[],h=[],f=[],p=0,d=0;o("z","y","x",-1,-1,n,e,t,a,r,0),o("z","y","x",1,-1,n,e,-t,a,r,1),o("x","z","y",1,1,t,n,e,i,a,2),o("x","z","y",1,-1,t,n,-e,i,a,3),o("x","y","z",1,-1,t,e,n,i,r,4),o("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(u),this.setAttribute("position",new R(l,3)),this.setAttribute("normal",new R(h,3)),this.setAttribute("uv",new R(f,2))}function Y(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}return e}function q(t){for(var e={},n=0;n<t.length;n++){var i=Y(t[n]);for(var r in i)e[r]=i[r]}return e}function Q(t){T.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Pl,this.fragmentShader=Ll,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(t.attributes,this.setValues(t))}function Z(){p.call(this),this.type="Camera",this.matrixWorldInverse=new l,this.projectionMatrix=new l,this.projectionMatrixInverse=new l}function J(t,e,n,i){Z.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function $(t,e,n){if(p.call(this),this.type="CubeCamera",!0===n.isWebGLCubeRenderTarget){this.renderTarget=n;var i=new J(El,Ol,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new c(1,0,0)),this.add(i);var r=new J(El,Ol,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new c(-1,0,0)),this.add(r);var a=new J(El,Ol,t,e);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(new c(0,1,0)),this.add(a);var o=new J(El,Ol,t,e);o.layers=this.layers,o.up.set(0,0,-1),o.lookAt(new c(0,-1,0)),this.add(o);var s=new J(El,Ol,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new c(0,0,1)),this.add(s);var u=new J(El,Ol,t,e);u.layers=this.layers,u.up.set(0,-1,0),u.lookAt(new c(0,0,-1)),this.add(u),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var c=t.xr.enabled,l=t.getRenderTarget();t.xr.enabled=!1;var h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,a),t.setRenderTarget(n,3),t.render(e,o),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,u),t.setRenderTarget(l),t.xr.enabled=c},this.clear=function(t,e,i,r){for(var a=t.getRenderTarget(),o=0;o<6;o++)t.setRenderTarget(n,o),t.clear(e,i,r);t.setRenderTarget(a)}}}function K(t,e,n){Number.isInteger(e)&&(e=n),o.call(this,t,t,e)}function tt(t,e,n,i,a,o,s,u,c,l,h,f){r.call(this,null,o,s,u,c,l,i,a,h,f),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==c?c:qo,this.minFilter=void 0!==l?l:qo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}function et(t,e,n,i,r,a){this.planes=[void 0!==t?t:new _,void 0!==e?e:new _,void 0!==n?n:new _,void 0!==i?i:new _,void 0!==r?r:new _,void 0!==a?a:new _]}function nt(){function t(n,a){i(n,a),r=e.requestAnimationFrame(t)}var e=null,n=!1,i=null,r=null;return{start:function(){!0!==n&&null!==i&&(r=e.requestAnimationFrame(t),n=!0)},stop:function(){e.cancelAnimationFrame(r),n=!1},setAnimationLoop:function(t){i=t},setContext:function(t){e=t}}}function it(t,e){function n(e,n){var i=e.array,r=e.usage,a=t.createBuffer();t.bindBuffer(n,a),t.bufferData(n,i,r),e.onUploadCallback();var o=5126;return i instanceof Float32Array?o=5126:i instanceof Float64Array||(i instanceof Uint16Array?o=5123:i instanceof Int16Array?o=5122:i instanceof Uint32Array?o=5125:i instanceof Int32Array?o=5124:i instanceof Int8Array?o=5120:i instanceof Uint8Array&&(o=5121)),{buffer:a,type:o,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function i(e,n,i){var a=n.array,o=n.updateRange;t.bindBuffer(i,e),-1===o.count?t.bufferSubData(i,0,a):(r?t.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a,o.offset,o.count):t.bufferSubData(i,o.offset*a.BYTES_PER_ELEMENT,a.subarray(o.offset,o.offset+o.count)),o.count=-1)}var r=e.isWebGL2,a=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),a.get(t)},remove:function(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=a.get(e);n&&(t.deleteBuffer(n.buffer),a.delete(e))},update:function(t,e){t.isInterleavedBufferAttribute&&(t=t.data);var r=a.get(t);void 0===r?a.set(t,n(t,e)):r.version<t.version&&(i(r.buffer,t,e),r.version=t.version)}}}function rt(t,e,n,i){W.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new at(t,e,n,i)),this.mergeVertices()}function at(t,e,n,i){B.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};for(var r=(t=t||1)/2,a=(e=e||1)/2,o=Math.floor(n)||1,s=Math.floor(i)||1,u=o+1,c=s+1,l=t/o,h=e/s,f=[],p=[],d=[],m=[],v=0;v<c;v++)for(var g=v*h-a,y=0;y<u;y++){var _=y*l-r;p.push(_,-g,0),d.push(0,0,1),m.push(y/o),m.push(1-v/s)}for(var x=0;x<s;x++)for(var b=0;b<o;b++){var w=b+u*x,M=b+u*(x+1),S=b+1+u*(x+1),A=b+1+u*x;f.push(w,M,A),f.push(M,S,A)}this.setIndex(f),this.setAttribute("position",new R(p,3)),this.setAttribute("normal",new R(d,3)),this.setAttribute("uv",new R(m,2))}function ot(t,e,n,i){function r(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}var a,o,s=new b(0),u=0,c=null,l=0,h=null;return{getClearColor:function(){return s},setClearColor:function(t,e){s.set(t),r(s,u=void 0!==e?e:1)},getClearAlpha:function(){return u},setClearAlpha:function(t){r(s,u=t)},render:function(e,i,f,p){var d=!0===i.isScene?i.background:null,m=t.xr,v=m.getSession&&m.getSession();if(v&&"additive"===v.environmentBlendMode&&(d=null),null===d?r(s,u):d&&d.isColor&&(r(d,1),p=!0),(t.autoClear||p)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),d&&(d.isCubeTexture||d.isWebGLCubeRenderTarget||d.mapping===Vo)){void 0===o&&((o=new j(new X(1,1,1),new Q({name:"BackgroundCubeMaterial",uniforms:Y(Dl.cube.uniforms),vertexShader:Dl.cube.vertexShader,fragmentShader:Dl.cube.fragmentShader,side:Ja,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),o.geometry.deleteAttribute("uv"),o.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),n.update(o));var g=d.isWebGLCubeRenderTarget?d.texture:d;o.material.uniforms.envMap.value=g,o.material.uniforms.flipEnvMap.value=g.isCubeTexture?-1:1,c===d&&l===g.version&&h===t.toneMapping||(o.material.needsUpdate=!0,c=d,l=g.version,h=t.toneMapping),e.unshift(o,o.geometry,o.material,0,0,null)}else d&&d.isTexture&&(void 0===a&&((a=new j(new at(2,2),new Q({name:"BackgroundMaterial",uniforms:Y(Dl.background.uniforms),vertexShader:Dl.background.vertexShader,fragmentShader:Dl.background.fragmentShader,side:Za,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(a)),a.material.uniforms.t2D.value=d,!0===d.matrixAutoUpdate&&d.updateMatrix(),a.material.uniforms.uvTransform.value.copy(d.matrix),c===d&&l===d.version&&h===t.toneMapping||(a.material.needsUpdate=!0,c=d,l=d.version,h=t.toneMapping),e.unshift(a,a.geometry,a.material,0,0,null))}}}function st(t,e,n,i){function r(){return i.isWebGL2?t.createVertexArray():y.createVertexArrayOES()}function a(e){return i.isWebGL2?t.bindVertexArray(e):y.bindVertexArrayOES(e)}function o(e){return i.isWebGL2?t.deleteVertexArray(e):y.deleteVertexArrayOES(e)}function s(t,e,n){var i=!0===n.wireframe,a=x[t.id];void 0===a&&(a={},x[t.id]=a);var o=a[e.id];void 0===o&&(o={},a[e.id]=o);var s=o[i];return void 0===s&&(s=u(r()),o[i]=s),s}function u(t){for(var e=[],n=[],i=[],r=0;r<g;r++)e[r]=0,n[r]=0,i[r]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{}}}function c(){for(var t=w.newAttributes,e=0,n=t.length;e<n;e++)t[e]=0}function l(t){h(t,0)}function h(n,r){var a=w.newAttributes,o=w.enabledAttributes,s=w.attributeDivisors;(a[n]=1,0===o[n]&&(t.enableVertexAttribArray(n),o[n]=1),s[n]!==r)&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r)}function f(){for(var e=w.newAttributes,n=w.enabledAttributes,i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function p(e,n,r,a,o,s){!0!==i.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,a,o,s):t.vertexAttribIPointer(e,n,r,o,s)}function d(r,a,o,s){if(!1!==i.isWebGL2||!r.isInstancedMesh&&!s.isInstancedBufferGeometry||null!==e.get("ANGLE_instanced_arrays")){c();var u=s.attributes,d=o.getAttributes(),m=a.defaultAttributeValues;for(var v in d){var g=d[v];if(g>=0){var y=u[v];if(void 0!==y){var _=y.normalized,x=y.itemSize,b=n.get(y);if(void 0===b)continue;var w=b.buffer,M=b.type,S=b.bytesPerElement;if(y.isInterleavedBufferAttribute){var A=y.data,T=A.stride,P=y.offset;A&&A.isInstancedInterleavedBuffer?(h(g,A.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=A.meshPerAttribute*A.count)):l(g),t.bindBuffer(34962,w),p(g,x,M,_,T*S,P*S)}else y.isInstancedBufferAttribute?(h(g,y.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=y.meshPerAttribute*y.count)):l(g),t.bindBuffer(34962,w),p(g,x,M,_,0,0)}else if("instanceMatrix"===v){var L=n.get(r.instanceMatrix);if(void 0===L)continue;var E=L.buffer,O=L.type;h(g+0,1),h(g+1,1),h(g+2,1),h(g+3,1),t.bindBuffer(34962,E),t.vertexAttribPointer(g+0,4,O,!1,64,0),t.vertexAttribPointer(g+1,4,O,!1,64,16),t.vertexAttribPointer(g+2,4,O,!1,64,32),t.vertexAttribPointer(g+3,4,O,!1,64,48)}else if(void 0!==m){var C=m[v];if(void 0!==C)switch(C.length){case 2:t.vertexAttrib2fv(g,C);break;case 3:t.vertexAttrib3fv(g,C);break;case 4:t.vertexAttrib4fv(g,C);break;default:t.vertexAttrib1fv(g,C)}}}}f()}}function m(){v(),w!==b&&a((w=b).object)}function v(){b.geometry=null,b.program=null,b.wireframe=!1}var g=t.getParameter(34921),y=i.isWebGL2?null:e.get("OES_vertex_array_object"),_=i.isWebGL2||null!==y,x={},b=u(null),w=b;return{setup:function(e,i,r,o,u){var c=!1;if(_){var l=s(o,r,i);w!==l&&a((w=l).object),(c=function(t){var e=w.attributes,n=t.attributes;if(Object.keys(e).length!==Object.keys(n).length)return!0;for(var i in n){var r=e[i],a=n[i];if(r.attribute!==a)return!0;if(r.data!==a.data)return!0}return!1}(o))&&function(t){var e={},n=t.attributes;for(var i in n){var r=n[i],a={};a.attribute=r,r.data&&(a.data=r.data),e[i]=a}w.attributes=e}(o)}else{var h=!0===i.wireframe;w.geometry===o.id&&w.program===r.id&&w.wireframe===h||(w.geometry=o.id,w.program=r.id,w.wireframe=h,c=!0)}!0===e.isInstancedMesh&&(c=!0),null!==u&&n.update(u,34963),c&&(d(e,i,r,o),null!==u&&t.bindBuffer(34963,n.get(u).buffer))},reset:m,resetDefaultState:v,dispose:function(){for(var t in m(),x){var e=x[t];for(var n in e){var i=e[n];for(var r in i)o(i[r].object),delete i[r];delete e[n]}delete x[t]}},releaseStatesOfGeometry:function(t){if(void 0!==x[t.id]){var e=x[t.id];for(var n in e){var i=e[n];for(var r in i)o(i[r].object),delete i[r];delete e[n]}delete x[t.id]}},releaseStatesOfProgram:function(t){for(var e in x){var n=x[e];if(void 0!==n[t.id]){var i=n[t.id];for(var r in i)o(i[r].object),delete i[r];delete n[t.id]}}},initAttributes:c,enableAttribute:l,disableUnusedAttributes:f}}function ut(t,e,n,i){var r,a=i.isWebGL2;this.setMode=function(t){r=t},this.render=function(e,i){t.drawArrays(r,e,i),n.update(i,r,1)},this.renderInstances=function(i,o,s){if(0!==s){var u,c;if(a)u=t,c="drawArraysInstanced";else if(c="drawArraysInstancedANGLE",null===(u=e.get("ANGLE_instanced_arrays")))return;u[c](r,i,o,s),n.update(o,r,s)}}}function ct(t,e,n){function i(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var r,a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!=typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext,o=void 0!==n.precision?n.precision:"highp",s=i(o);s!==o&&(o=s);var u=!0===n.logarithmicDepthBuffer,c=t.getParameter(34930),l=t.getParameter(35660),h=t.getParameter(3379),f=t.getParameter(34076),p=t.getParameter(34921),d=t.getParameter(36347),m=t.getParameter(36348),v=t.getParameter(36349),g=l>0,y=a||!!e.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:function(){if(void 0!==r)return r;var n=e.get("EXT_texture_filter_anisotropic");return r=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:i,precision:o,logarithmicDepthBuffer:u,maxTextures:c,maxVertexTextures:l,maxTextureSize:h,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:d,maxVaryings:m,maxFragmentUniforms:v,vertexTextures:g,floatFragmentTextures:y,floatVertexTextures:g&&y,maxSamples:a?t.getParameter(36183):0}}function lt(){function t(){l.value!==r&&(l.value=r,l.needsUpdate=a>0),n.numPlanes=a,n.numIntersection=0}function e(t,e,i,r){var a=null!==t?t.length:0,o=null;if(0!==a){if(o=l.value,!0!==r||null===o){var s=i+4*a,h=e.matrixWorldInverse;c.getNormalMatrix(h),(null===o||o.length<s)&&(o=new Float32Array(s));for(var f=0,p=i;f!==a;++f,p+=4)u.copy(t[f]).applyMatrix4(h,c),u.normal.toArray(o,p),o[p+3]=u.constant}l.value=o,l.needsUpdate=!0}return n.numPlanes=a,n.numIntersection=0,o}var n=this,r=null,a=0,o=!1,s=!1,u=new _,c=new i,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,n,i){var s=0!==t.length||n||0!==a||o;return o=n,r=e(t,i,0),a=t.length,s},this.beginShadows=function(){s=!0,e(null)},this.endShadows=function(){s=!1,t()},this.setState=function(n,i,u,c,h,f){if(!o||null===n||0===n.length||s&&!u)s?e(null):t();else{var p=s?0:a,d=4*p,m=h.clippingState||null;l.value=m,m=e(n,c,d,f);for(var v=0;v!==d;++v)m[v]=r[v];h.clippingState=m,this.numIntersection=i?this.numPlanes:0,this.numPlanes+=p}}}function ht(t){var e={};return{has:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,!!i},get:function(t){return this.has(t),e[t]}}}function ft(t,e,n,i){function r(t){var a=t.target,u=o.get(a);for(var c in null!==u.index&&e.remove(u.index),u.attributes)e.remove(u.attributes[c]);a.removeEventListener("dispose",r),o.delete(a);var l=s.get(u);l&&(e.remove(l),s.delete(u)),i.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(t){var n=[],i=t.index,r=t.attributes.position,a=0;if(null!==i){var o=i.array;a=i.version;for(var u=0,c=o.length;u<c;u+=3){var l=o[u+0],h=o[u+1],f=o[u+2];n.push(l,h,h,f,f,l)}}else{var p=r.array;a=r.version;for(var d=0,m=p.length/3-1;d<m;d+=3){var v=d+0,g=d+1,y=d+2;n.push(v,g,g,y,y,v)}}var _=new(U(n)>65535?D:I)(n,1);_.version=a;var x=s.get(t);x&&e.remove(x),s.set(t,_)}var o=new WeakMap,s=new WeakMap;return{get:function(t,e){var i=o.get(e);return i||(e.addEventListener("dispose",r),e.isBufferGeometry?i=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new B).setFromObject(t)),i=e._bufferGeometry),o.set(e,i),n.memory.geometries++,i)},update:function(t){var n=t.attributes;for(var i in n)e.update(n[i],34962);var r=t.morphAttributes;for(var a in r)for(var o=r[a],s=0,u=o.length;s<u;s++)e.update(o[s],34962)},getWireframeAttribute:function(t){var e=s.get(t);if(e){var n=t.index;null!==n&&e.version<n.version&&a(t)}else a(t);return s.get(t)}}}function pt(t,e,n,i){var r,a,o,s=i.isWebGL2;this.setMode=function(t){r=t},this.setIndex=function(t){a=t.type,o=t.bytesPerElement},this.render=function(e,i){t.drawElements(r,i,a,e*o),n.update(i,r,1)},this.renderInstances=function(i,u,c){if(0!==c){var l,h;if(s)l=t,h="drawElementsInstanced";else if(h="drawElementsInstancedANGLE",null===(l=e.get("ANGLE_instanced_arrays")))return;l[h](r,u,a,i*o,c),n.update(u,r,c)}}}function dt(t){var e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.frame++,e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(t,n,i){switch(e.calls++,n){case 4:e.triangles+=i*(t/3);break;case 1:e.lines+=i*(t/2);break;case 3:e.lines+=i*(t-1);break;case 2:e.lines+=i*t;break;case 0:e.points+=i*t}}}}function mt(t,e){return t[0]-e[0]}function vt(t,e){return Math.abs(e[1])-Math.abs(t[1])}function gt(t){for(var e={},n=new Float32Array(8),i=[],r=0;r<8;r++)i[r]=[r,0];return{update:function(r,a,o,s){var u=r.morphTargetInfluences,c=void 0===u?0:u.length,l=e[a.id];if(void 0===l){l=[];for(var h=0;h<c;h++)l[h]=[h,0];e[a.id]=l}for(var f=0;f<c;f++){var p=l[f];p[0]=f,p[1]=u[f]}l.sort(vt);for(var d=0;d<8;d++)d<c&&l[d][1]?(i[d][0]=l[d][0],i[d][1]=l[d][1]):(i[d][0]=Number.MAX_SAFE_INTEGER,i[d][1]=0);i.sort(mt);for(var m=o.morphTargets&&a.morphAttributes.position,v=o.morphNormals&&a.morphAttributes.normal,g=0,y=0;y<8;y++){var _=i[y],x=_[0],b=_[1];x!==Number.MAX_SAFE_INTEGER&&b?(m&&a.getAttribute("morphTarget"+y)!==m[x]&&a.setAttribute("morphTarget"+y,m[x]),v&&a.getAttribute("morphNormal"+y)!==v[x]&&a.setAttribute("morphNormal"+y,v[x]),n[y]=b,g+=b):(m&&void 0!==a.getAttribute("morphTarget"+y)&&a.deleteAttribute("morphTarget"+y),v&&void 0!==a.getAttribute("morphNormal"+y)&&a.deleteAttribute("morphNormal"+y),n[y]=0)}var w=a.morphTargetsRelative?1:1-g;s.getUniforms().setValue(t,"morphTargetBaseInfluence",w),s.getUniforms().setValue(t,"morphTargetInfluences",n)}}}function yt(t,e,n,i){var r=new WeakMap;return{update:function(t){var a=i.render.frame,o=t.geometry,s=e.get(t,o);return r.get(s)!==a&&(o.isGeometry&&s.updateFromObject(t),e.update(s),r.set(s,a)),t.isInstancedMesh&&n.update(t.instanceMatrix,34962),s},dispose:function(){r=new WeakMap}}}function _t(t,e,n,i,a,o,s,u,c,l){t=void 0!==t?t:[],e=void 0!==e?e:Uo,s=void 0!==s?s:ps,r.call(this,t,e,n,i,a,o,s,u,c,l),this.flipY=!1}function xt(t,e,n,i){r.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.magFilter=qo,this.minFilter=qo,this.wrapR=Xo,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function bt(t,e,n,i){r.call(this,null),this.image={data:t||null,width:e||1,height:n||1,depth:i||1},this.magFilter=qo,this.minFilter=qo,this.wrapR=Xo,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function wt(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,a=Bl[r];if(void 0===a&&(a=new Float32Array(r),Bl[r]=a),0!==e){i.toArray(a,0);for(var o=1,s=0;o!==e;++o)s+=n,t[o].toArray(a,s)}return a}function Mt(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function St(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function At(t,e){var n=jl[e];void 0===n&&(n=new Int32Array(e),jl[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Tt(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Pt(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Mt(n,e))return;t.uniform2fv(this.addr,e),St(n,e)}}function Lt(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Mt(n,e))return;t.uniform3fv(this.addr,e),St(n,e)}}function Et(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Mt(n,e))return;t.uniform4fv(this.addr,e),St(n,e)}}function Ot(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Mt(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),St(n,e)}else{if(Mt(n,i))return;Wl.set(i),t.uniformMatrix2fv(this.addr,!1,Wl),St(n,i)}}function Ct(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Mt(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),St(n,e)}else{if(Mt(n,i))return;Vl.set(i),t.uniformMatrix3fv(this.addr,!1,Vl),St(n,i)}}function Ft(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Mt(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),St(n,e)}else{if(Mt(n,i))return;Gl.set(i),t.uniformMatrix4fv(this.addr,!1,Gl),St(n,i)}}function It(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||Rl,r)}function Nt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||kl,r)}function Dt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||zl,r)}function Rt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||Ul,r)}function kt(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function zt(t,e){var n=this.cache;Mt(n,e)||(t.uniform2iv(this.addr,e),St(n,e))}function Ut(t,e){var n=this.cache;Mt(n,e)||(t.uniform3iv(this.addr,e),St(n,e))}function Bt(t,e){var n=this.cache;Mt(n,e)||(t.uniform4iv(this.addr,e),St(n,e))}function jt(t,e){var n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Gt(t,e){t.uniform1fv(this.addr,e)}function Vt(t,e){t.uniform1iv(this.addr,e)}function Wt(t,e){t.uniform2iv(this.addr,e)}function Ht(t,e){t.uniform3iv(this.addr,e)}function Xt(t,e){t.uniform4iv(this.addr,e)}function Yt(t,e){var n=wt(e,this.size,2);t.uniform2fv(this.addr,n)}function qt(t,e){var n=wt(e,this.size,3);t.uniform3fv(this.addr,n)}function Qt(t,e){var n=wt(e,this.size,4);t.uniform4fv(this.addr,n)}function Zt(t,e){var n=wt(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Jt(t,e){var n=wt(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function $t(t,e){var n=wt(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Kt(t,e,n){var i=e.length,r=At(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTexture2D(e[a]||Rl,r[a])}function te(t,e,n){var i=e.length,r=At(n,i);t.uniform1iv(this.addr,r);for(var a=0;a!==i;++a)n.safeSetTextureCube(e[a]||Ul,r[a])}function ee(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=function(t){switch(t){case 5126:return Tt;case 35664:return Pt;case 35665:return Lt;case 35666:return Et;case 35674:return Ot;case 35675:return Ct;case 35676:return Ft;case 5124:case 35670:return kt;case 35667:case 35671:return zt;case 35668:case 35672:return Ut;case 35669:case 35673:return Bt;case 5125:return jt;case 35678:case 36198:case 36298:case 36306:case 35682:return It;case 35679:case 36299:case 36307:return Dt;case 35680:case 36300:case 36308:case 36293:return Rt;case 36289:case 36303:case 36311:case 36292:return Nt}}(e.type)}function ne(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=function(t){switch(t){case 5126:return Gt;case 35664:return Yt;case 35665:return qt;case 35666:return Qt;case 35674:return Zt;case 35675:return Jt;case 35676:return $t;case 5124:case 35670:return Vt;case 35667:case 35671:return Wt;case 35668:case 35672:return Ht;case 35669:case 35673:return Xt;case 35678:case 36198:case 36298:case 36306:case 35682:return Kt;case 35680:case 36300:case 36308:case 36293:return te}}(e.type)}function ie(t){this.id=t,this.seq=[],this.map={}}function re(t,e){t.seq.push(e),t.map[e.id]=e}function ae(t,e,n){var i=t.name,r=i.length;for(Hl.lastIndex=0;;){var a=Hl.exec(i),o=Hl.lastIndex,s=a[1],u="]"===a[2],c=a[3];if(u&&(s|=0),void 0===c||"["===c&&o+2===r){re(n,void 0===c?new ee(s,t,e):new ne(s,t,e));break}var l=n.map[s];void 0===l&&re(n,l=new ie(s)),n=l}}function oe(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i);ae(r,t.getUniformLocation(e,r.name),this)}}function se(t,e,n){var i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}function ue(t){switch(t){case _u:return["Linear","( value )"];case xu:return["sRGB","( value )"];case wu:return["RGBE","( value )"];case Su:return["RGBM","( value, 7.0 )"];case Au:return["RGBM","( value, 16.0 )"];case Tu:return["RGBD","( value, 256.0 )"];case bu:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case Mu:return["LogLuv","( value )"];default:return["Linear","( value )"]}}function ce(t,e,n){var i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();return i&&""===r?"":"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+function(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}(t.getShaderSource(e))}function le(t,e){var n=ue(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function he(t,e){var n=ue(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function fe(t,e){var n;switch(e){case No:n="Linear";break;case Do:n="Reinhard";break;case Ro:n="OptimizedCineon";break;case ko:n="ACESFilmic";break;case zo:n="Custom";break;default:n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function pe(t){return""!==t}function de(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function me(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function ve(t){return t.replace(Yl,ge)}function ge(t,e){var n=Nl[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return ve(n)}function ye(t){return t.replace(Ql,xe).replace(ql,_e)}function _e(t,e,n,i){return xe(t,e,n,i)}function xe(t,e,n,i){for(var r="",a=parseInt(e);a<parseInt(n);a++)r+=i.replace(/\[ i \]/g,"[ "+a+" ]").replace(/UNROLLED_LOOP_INDEX/g,a);return r}function be(t){var e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function we(t,e,n,i){var r,a,o=t.getContext(),s=n.defines,u=n.vertexShader,c=n.fragmentShader,l=function(t){var e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===Ya?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===qa?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===Qa&&(e="SHADOWMAP_TYPE_VSM"),e}(n),h=function(t){var e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case Uo:case Bo:e="ENVMAP_TYPE_CUBE";break;case Vo:case Wo:e="ENVMAP_TYPE_CUBE_UV";break;case jo:case Go:e="ENVMAP_TYPE_EQUIREC"}return e}(n),f=function(t){var e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case Bo:case Go:case Wo:e="ENVMAP_MODE_REFRACTION"}return e}(n),p=function(t){var e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case Oo:e="ENVMAP_BLENDING_MULTIPLY";break;case Co:e="ENVMAP_BLENDING_MIX";break;case Fo:e="ENVMAP_BLENDING_ADD"}return e}(n),d=t.gammaFactor>0?t.gammaFactor:1,m=n.isWebGL2?"":function(t){return[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(pe).join("\n")}(n),v=function(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}(s),g=o.createProgram();n.isRawShaderMaterial?((r=[v].filter(pe).join("\n")).length>0&&(r+="\n"),(a=[m,v].filter(pe).join("\n")).length>0&&(a+="\n")):(r=[be(n),"#define SHADER_NAME "+n.shaderName,v,n.instancing?"#define USE_INSTANCING":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+f:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING"," attribute mat4 instanceMatrix;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(pe).join("\n"),a=[m,be(n),"#define SHADER_NAME "+n.shaderName,v,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+h:"",n.envMap?"#define "+f:"",n.envMap?"#define "+p:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Io?"#define TONE_MAPPING":"",n.toneMapping!==Io?Nl.tonemapping_pars_fragment:"",n.toneMapping!==Io?fe("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",Nl.encodings_pars_fragment,n.map?le("mapTexelToLinear",n.mapEncoding):"",n.matcap?le("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?le("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?le("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?le("lightMapTexelToLinear",n.lightMapEncoding):"",he("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(pe).join("\n")),u=me(u=de(u=ve(u),n),n),c=me(c=de(c=ve(c),n),n),u=ye(u),c=ye(c),n.isWebGL2&&!n.isRawShaderMaterial&&(r=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+r,a=["#version 300 es\n","#define varying in","out highp vec4 pc_fragColor;","#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+a);var y,_,x=a+c,b=se(o,35633,r+u),w=se(o,35632,x);if(o.attachShader(g,b),o.attachShader(g,w),void 0!==n.index0AttributeName?o.bindAttribLocation(g,0,n.index0AttributeName):!0===n.morphTargets&&o.bindAttribLocation(g,0,"position"),o.linkProgram(g),t.debug.checkShaderErrors){var M=o.getProgramInfoLog(g).trim(),S=o.getShaderInfoLog(b).trim(),A=o.getShaderInfoLog(w).trim(),T=!0,P=!0;!1===o.getProgramParameter(g,35714)?(T=!1,ce(o,b,"vertex"),ce(o,w,"fragment")):""!==M||""!==S&&""!==A||(P=!1),P&&(this.diagnostics={runnable:T,programLog:M,vertexShader:{log:S,prefix:r},fragmentShader:{log:A,prefix:a}})}return o.deleteShader(b),o.deleteShader(w),this.getUniforms=function(){return void 0===y&&(y=new oe(o,g)),y},this.getAttributes=function(){return void 0===_&&(_=function(t,e){for(var n={},i=t.getProgramParameter(e,35721),r=0;r<i;r++){var a=t.getActiveAttrib(e,r).name;n[a]=t.getAttribLocation(e,a)}return n}(o,g)),_},this.destroy=function(){i.releaseStatesOfProgram(this),o.deleteProgram(g),this.program=void 0},this.name=n.shaderName,this.id=Xl++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=b,this.fragmentShader=w,this}function Me(t,e,n,i){function r(t){var e=t.skeleton.bones;if(c)return 1024;var n=l,i=Math.floor((n-20)/4),r=Math.min(i,e.length);return r<e.length?0:r}function a(t){var e;return t?t.isTexture?e=t.encoding:t.isWebGLRenderTarget&&(e=t.texture.encoding):e=_u,e}var o=[],s=n.isWebGL2,u=n.logarithmicDepthBuffer,c=n.floatVertexTextures,l=n.maxVertexUniforms,h=n.vertexTextures,f=n.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},d=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];return{getParameters:function(i,o,l,d,m,v,g){var y,_,x=d.fog,b=i.isMeshStandardMaterial?d.environment:null,w=i.envMap||b,M=p[i.type],S=g.isSkinnedMesh?r(g):0;if(null!==i.precision&&(f=n.getMaxPrecision(i.precision),i.precision),M){var A=Dl[M];y=A.vertexShader,_=A.fragmentShader}else y=i.vertexShader,_=i.fragmentShader;var T=t.getRenderTarget();return{isWebGL2:s,shaderID:M,shaderName:i.type,vertexShader:y,fragmentShader:_,defines:i.defines,isRawShaderMaterial:i.isRawShaderMaterial,isShaderMaterial:i.isShaderMaterial,precision:f,instancing:!0===g.isInstancedMesh,supportsVertexTextures:h,outputEncoding:null!==T?a(T.texture):t.outputEncoding,map:!!i.map,mapEncoding:a(i.map),matcap:!!i.matcap,matcapEncoding:a(i.matcap),envMap:!!w,envMapMode:w&&w.mapping,envMapEncoding:a(w),envMapCubeUV:!!w&&(w.mapping===Vo||w.mapping===Wo),lightMap:!!i.lightMap,lightMapEncoding:a(i.lightMap),aoMap:!!i.aoMap,emissiveMap:!!i.emissiveMap,emissiveMapEncoding:a(i.emissiveMap),bumpMap:!!i.bumpMap,normalMap:!!i.normalMap,objectSpaceNormalMap:i.normalMapType===Ou,tangentSpaceNormalMap:i.normalMapType===Eu,clearcoatMap:!!i.clearcoatMap,clearcoatRoughnessMap:!!i.clearcoatRoughnessMap,clearcoatNormalMap:!!i.clearcoatNormalMap,displacementMap:!!i.displacementMap,roughnessMap:!!i.roughnessMap,metalnessMap:!!i.metalnessMap,specularMap:!!i.specularMap,alphaMap:!!i.alphaMap,gradientMap:!!i.gradientMap,sheen:!!i.sheen,transmissionMap:!!i.transmissionMap,combine:i.combine,vertexTangents:i.normalMap&&i.vertexTangents,vertexColors:i.vertexColors,vertexUvs:!!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatMap||i.clearcoatRoughnessMap||i.clearcoatNormalMap||i.displacementMap||i.transmissionMap),uvsVertexOnly:!(i.map||i.bumpMap||i.normalMap||i.specularMap||i.alphaMap||i.emissiveMap||i.roughnessMap||i.metalnessMap||i.clearcoatNormalMap||i.transmissionMap||!i.displacementMap),fog:!!x,useFog:i.fog,fogExp2:x&&x.isFogExp2,flatShading:i.flatShading,sizeAttenuation:i.sizeAttenuation,logarithmicDepthBuffer:u,skinning:i.skinning&&S>0,maxBones:S,useVertexTexture:c,morphTargets:i.morphTargets,morphNormals:i.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numClippingPlanes:m,numClipIntersection:v,dithering:i.dithering,shadowMapEnabled:t.shadowMap.enabled&&l.length>0,shadowMapType:t.shadowMap.type,toneMapping:i.toneMapped?t.toneMapping:Io,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:i.premultipliedAlpha,alphaTest:i.alphaTest,doubleSided:i.side===$a,flipSided:i.side===Ja,depthPacking:void 0!==i.depthPacking&&i.depthPacking,index0AttributeName:i.index0AttributeName,extensionDerivatives:i.extensions&&i.extensions.derivatives,extensionFragDepth:i.extensions&&i.extensions.fragDepth,extensionDrawBuffers:i.extensions&&i.extensions.drawBuffers,extensionShaderTextureLOD:i.extensions&&i.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||null!==e.get("EXT_frag_depth"),rendererExtensionDrawBuffers:s||null!==e.get("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||null!==e.get("EXT_shader_texture_lod"),customProgramCacheKey:i.customProgramCacheKey()}},getProgramCacheKey:function(e){var n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(var i in e.defines)n.push(i),n.push(e.defines[i]);if(void 0===e.isRawShaderMaterial){for(var r=0;r<d.length;r++)n.push(e[d[r]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()},getUniforms:function(t){var e,n=p[t.type];if(n){var i=Dl[n];e=Tl.clone(i.uniforms)}else e=t.uniforms;return e},acquireProgram:function(e,n){for(var r,a=0,s=o.length;a<s;a++){var u=o[a];if(u.cacheKey===n){++(r=u).usedTimes;break}}return void 0===r&&(r=new we(t,n,e,i),o.push(r)),r},releaseProgram:function(t){if(0==--t.usedTimes){var e=o.indexOf(t);o[e]=o[o.length-1],o.pop(),t.destroy()}},programs:o}}function Se(){var t=new WeakMap;return{get:function(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n},remove:function(e){t.delete(e)},update:function(e,n,i){t.get(e)[n]=i},dispose:function(){t=new WeakMap}}}function Ae(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Te(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Pe(t){function e(e,r,a,s,u,c){var l=n[i],h=t.get(a);return void 0===l?(l={id:e.id,object:e,geometry:r,material:a,program:h.program||o,groupOrder:s,renderOrder:e.renderOrder,z:u,group:c},n[i]=l):(l.id=e.id,l.object=e,l.geometry=r,l.material=a,l.program=h.program||o,l.groupOrder=s,l.renderOrder=e.renderOrder,l.z=u,l.group=c),i++,l}var n=[],i=0,r=[],a=[],o={id:-1};return{opaque:r,transparent:a,init:function(){i=0,r.length=0,a.length=0},push:function(t,n,i,o,s,u){var c=e(t,n,i,o,s,u);(!0===i.transparent?a:r).push(c)},unshift:function(t,n,i,o,s,u){var c=e(t,n,i,o,s,u);(!0===i.transparent?a:r).unshift(c)},finish:function(){for(var t=i,e=n.length;t<e;t++){var r=n[t];if(null===r.id)break;r.id=null,r.object=null,r.geometry=null,r.material=null,r.program=null,r.group=null}},sort:function(t,e){r.length>1&&r.sort(t||Ae),a.length>1&&a.sort(e||Te)}}}function Le(t){function e(t){var i=t.target;i.removeEventListener("dispose",e),n.delete(i)}var n=new WeakMap;return{get:function(i,r){var a,o=n.get(i);return void 0===o?(a=new Pe(t),n.set(i,new WeakMap),n.get(i).set(r,a),i.addEventListener("dispose",e)):void 0===(a=o.get(r))&&(a=new Pe(t),o.set(r,a)),a},dispose:function(){n=new WeakMap}}}function Ee(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new c,color:new b};break;case"SpotLight":n={position:new c,direction:new c,color:new b,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new c,color:new b,distance:0,decay:0};break;case"HemisphereLight":n={direction:new c,skyColor:new b,groundColor:new b};break;case"RectAreaLight":n={color:new b,position:new c,halfWidth:new c,halfHeight:new c}}return t[e.id]=n,n}}}function Oe(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var i;switch(e.type){case"DirectionalLight":case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new n};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new n,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=i,i}}}function Ce(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function Fe(){for(var t=new Ee,e=Oe(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;i<9;i++)n.probe.push(new c);var r=new c,a=new l,o=new l;return{setup:function(i,s,u){for(var c=0,l=0,h=0,f=0;f<9;f++)n.probe[f].set(0,0,0);var p=0,d=0,m=0,v=0,g=0,y=0,_=0,x=0,b=u.matrixWorldInverse;i.sort(Ce);for(var w=0,M=i.length;w<M;w++){var S=i[w],A=S.color,T=S.intensity,P=S.distance,L=S.shadow&&S.shadow.map?S.shadow.map.texture:null;if(S.isAmbientLight)c+=A.r*T,l+=A.g*T,h+=A.b*T;else if(S.isLightProbe)for(var E=0;E<9;E++)n.probe[E].addScaledVector(S.sh.coefficients[E],T);else if(S.isDirectionalLight){var O=t.get(S);if(O.color.copy(S.color).multiplyScalar(S.intensity),O.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),O.direction.sub(r),O.direction.transformDirection(b),S.castShadow){var C=S.shadow,F=e.get(S);F.shadowBias=C.bias,F.shadowNormalBias=C.normalBias,F.shadowRadius=C.radius,F.shadowMapSize=C.mapSize,n.directionalShadow[p]=F,n.directionalShadowMap[p]=L,n.directionalShadowMatrix[p]=S.shadow.matrix,y++}n.directional[p]=O,p++}else if(S.isSpotLight){var I=t.get(S);if(I.position.setFromMatrixPosition(S.matrixWorld),I.position.applyMatrix4(b),I.color.copy(A).multiplyScalar(T),I.distance=P,I.direction.setFromMatrixPosition(S.matrixWorld),r.setFromMatrixPosition(S.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(b),I.coneCos=Math.cos(S.angle),I.penumbraCos=Math.cos(S.angle*(1-S.penumbra)),I.decay=S.decay,S.castShadow){var N=S.shadow,D=e.get(S);D.shadowBias=N.bias,D.shadowNormalBias=N.normalBias,D.shadowRadius=N.radius,D.shadowMapSize=N.mapSize,n.spotShadow[m]=D,n.spotShadowMap[m]=L,n.spotShadowMatrix[m]=S.shadow.matrix,x++}n.spot[m]=I,m++}else if(S.isRectAreaLight){var R=t.get(S);R.color.copy(A).multiplyScalar(T),R.position.setFromMatrixPosition(S.matrixWorld),R.position.applyMatrix4(b),o.identity(),a.copy(S.matrixWorld),a.premultiply(b),o.extractRotation(a),R.halfWidth.set(.5*S.width,0,0),R.halfHeight.set(0,.5*S.height,0),R.halfWidth.applyMatrix4(o),R.halfHeight.applyMatrix4(o),n.rectArea[v]=R,v++}else if(S.isPointLight){var k=t.get(S);if(k.position.setFromMatrixPosition(S.matrixWorld),k.position.applyMatrix4(b),k.color.copy(S.color).multiplyScalar(S.intensity),k.distance=S.distance,k.decay=S.decay,S.castShadow){var z=S.shadow,U=e.get(S);U.shadowBias=z.bias,U.shadowNormalBias=z.normalBias,U.shadowRadius=z.radius,U.shadowMapSize=z.mapSize,U.shadowCameraNear=z.camera.near,U.shadowCameraFar=z.camera.far,n.pointShadow[d]=U,n.pointShadowMap[d]=L,n.pointShadowMatrix[d]=S.shadow.matrix,_++}n.point[d]=k,d++}else if(S.isHemisphereLight){var B=t.get(S);B.direction.setFromMatrixPosition(S.matrixWorld),B.direction.transformDirection(b),B.direction.normalize(),B.skyColor.copy(S.color).multiplyScalar(T),B.groundColor.copy(S.groundColor).multiplyScalar(T),n.hemi[g]=B,g++}}n.ambient[0]=c,n.ambient[1]=l,n.ambient[2]=h;var j=n.hash;j.directionalLength===p&&j.pointLength===d&&j.spotLength===m&&j.rectAreaLength===v&&j.hemiLength===g&&j.numDirectionalShadows===y&&j.numPointShadows===_&&j.numSpotShadows===x||(n.directional.length=p,n.spot.length=m,n.rectArea.length=v,n.point.length=d,n.hemi.length=g,n.directionalShadow.length=y,n.directionalShadowMap.length=y,n.pointShadow.length=_,n.pointShadowMap.length=_,n.spotShadow.length=x,n.spotShadowMap.length=x,n.directionalShadowMatrix.length=y,n.pointShadowMatrix.length=_,n.spotShadowMatrix.length=x,j.directionalLength=p,j.pointLength=d,j.spotLength=m,j.rectAreaLength=v,j.hemiLength=g,j.numDirectionalShadows=y,j.numPointShadows=_,j.numSpotShadows=x,n.version=Zl++)},state:n}}function Ie(){var t=new Fe,e=[],n=[];return{init:function(){e.length=0,n.length=0},state:{lightsArray:e,shadowsArray:n,lights:t},setupLights:function(i){t.setup(e,n,i)},pushLight:function(t){e.push(t)},pushShadow:function(t){n.push(t)}}}function Ne(){function t(n){var i=n.target;i.removeEventListener("dispose",t),e.delete(i)}var e=new WeakMap;return{get:function(n,i){var r;return!1===e.has(n)?(r=new Ie,e.set(n,new WeakMap),e.get(n).set(i,r),n.addEventListener("dispose",t)):!1===e.get(n).has(i)?(r=new Ie,e.get(n).set(i,r)):r=e.get(n).get(i),r},dispose:function(){e=new WeakMap}}}function De(t){T.call(this),this.type="MeshDepthMaterial",this.depthPacking=Pu,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function Re(t){T.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new c,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}function ke(t,e,i){function r(n,i){var r=e.update(w);_.uniforms.shadow_pass.value=n.map.texture,_.uniforms.resolution.value=n.mapSize,_.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,_,w,null),x.uniforms.shadow_pass.value=n.mapPass.texture,x.uniforms.resolution.value=n.mapSize,x.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,x,w,null)}function s(t,e,n){var i=t<<0|e<<1|n<<2,r=m[i];return void 0===r&&(r=new De({depthPacking:Lu,morphTargets:t,skinning:e}),m[i]=r),r}function u(t,e,n){var i=t<<0|e<<1|n<<2,r=v[i];return void 0===r&&(r=new Re({morphTargets:t,skinning:e}),v[i]=r),r}function c(e,n,i,r,a,o,c){var l=null,h=s,f=e.customDepthMaterial;if(!0===r.isPointLight&&(h=u,f=e.customDistanceMaterial),void 0===f){var p=!1;!0===i.morphTargets&&(p=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);var d=!1;!0===e.isSkinnedMesh&&!0===i.skinning&&(d=!0),l=h(p,d,!0===e.isInstancedMesh)}else l=f;if(t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){var m=l.uuid,v=i.uuid,_=g[m];void 0===_&&(_={},g[m]=_);var x=_[v];void 0===x&&(x=l.clone(),_[v]=x),l=x}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=c===Qa?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:y[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=a,l.farDistance=o),l}function l(n,i,r,a,o){if(!1!==n.visible){if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===Qa)&&(!n.frustumCulled||h.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,n.matrixWorld);var s=e.update(n),u=n.material;if(Array.isArray(u))for(var f=s.groups,p=0,d=f.length;p<d;p++){var m=f[p],v=u[m.materialIndex];if(v&&v.visible){var g=c(n,s,v,a,r.near,r.far,o);t.renderBufferDirect(r,null,s,g,n,m)}}else if(u.visible){var y=c(n,s,u,a,r.near,r.far,o);t.renderBufferDirect(r,null,s,y,n,null)}}for(var _=n.children,x=0,b=_.length;x<b;x++)l(_[x],i,r,a,o)}}var h=new et,f=new n,p=new n,d=new a,m=[],v=[],g={},y={0:Ja,1:Za,2:$a},_=new Q({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new n},radius:{value:4}},vertexShader:$l,fragmentShader:Jl}),x=_.clone();x.defines.HORIZONAL_PASS=1;var b=new B;b.setAttribute("position",new L(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var w=new j(b,_),M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Ya,this.render=function(e,n,a){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==e.length){var s=t.getRenderTarget(),u=t.getActiveCubeFace(),c=t.getActiveMipmapLevel(),m=t.state;m.setBlending(Ka),m.buffers.color.setClear(1,1,1,1),m.buffers.depth.setTest(!0),m.setScissorTest(!1);for(var v=0,g=e.length;v<g;v++){var y=e[v],_=y.shadow;if((!1!==_.autoUpdate||!1!==_.needsUpdate)&&void 0!==_){f.copy(_.mapSize);var x=_.getFrameExtents();if(f.multiply(x),p.copy(_.mapSize),(f.x>i||f.y>i)&&(f.x>i&&(p.x=Math.floor(i/x.x),f.x=p.x*x.x,_.mapSize.x=p.x),f.y>i&&(p.y=Math.floor(i/x.y),f.y=p.y*x.y,_.mapSize.y=p.y)),null===_.map&&!_.isPointLightShadow&&this.type===Qa){var b={minFilter:Jo,magFilter:Jo,format:ds,stencilBuffer:!1};_.map=new o(f.x,f.y,b),_.map.texture.name=y.name+".shadowMap",_.mapPass=new o(f.x,f.y,b),_.camera.updateProjectionMatrix()}if(null===_.map){var w={minFilter:qo,magFilter:qo,format:ds,stencilBuffer:!1};_.map=new o(f.x,f.y,w),_.map.texture.name=y.name+".shadowMap",_.camera.updateProjectionMatrix()}t.setRenderTarget(_.map),t.clear();for(var S=_.getViewportCount(),A=0;A<S;A++){var T=_.getViewport(A);d.set(p.x*T.x,p.y*T.y,p.x*T.z,p.y*T.w),m.viewport(d),_.updateMatrices(y,A),h=_.getFrustum(),l(n,a,_.camera,y,this.type)}_.isPointLightShadow||this.type!==Qa||r(_,a),_.needsUpdate=!1}}M.needsUpdate=!1,t.setRenderTarget(s,u,c)}}}function ze(t,e,n){function i(e,n,i){var r=new Uint8Array(4),a=t.createTexture();t.bindTexture(e,a),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var o=0;o<i;o++)t.texImage2D(n+o,0,6408,1,1,0,6408,5121,r);return a}function r(e){!0!==v[e]&&(t.enable(e),v[e]=!0)}function o(e){!1!==v[e]&&(t.disable(e),v[e]=!1)}function s(e,n,i,a,s,u,c,l){if(e!==Ka){if(y||(r(3042),y=!0),e===ro)s=s||n,u=u||i,c=c||a,n===x&&s===M||(t.blendEquationSeparate(j[n],j[s]),x=n,M=s),i===b&&a===w&&u===S&&c===A||(t.blendFuncSeparate(V[i],V[a],V[u],V[c]),b=i,w=a,S=u,A=c),_=e,T=null;else if(e!==_||l!==T){if(x===ao&&M===ao||(t.blendEquation(32774),x=ao,M=ao),l)switch(e){case to:t.blendFuncSeparate(1,771,1,771);break;case eo:t.blendFunc(1,1);break;case no:t.blendFuncSeparate(0,0,769,771);break;case io:t.blendFuncSeparate(0,768,0,770)}else switch(e){case to:t.blendFuncSeparate(770,771,1,771);break;case eo:t.blendFunc(770,1);break;case no:t.blendFunc(0,769);break;case io:t.blendFunc(0,768)}b=null,w=null,S=null,A=null,_=e,T=l}}else y&&(o(3042),y=!1)}function u(e){P!==e&&(e?t.frontFace(2304):t.frontFace(2305),P=e)}function c(e){e!==Wa?(r(2884),e!==L&&(e===Ha?t.cullFace(1029):e===Xa?t.cullFace(1028):t.cullFace(1032))):o(2884),L=e}function l(e,n,i){e?(r(32823),O===n&&C===i||(t.polygonOffset(n,i),O=n,C=i)):o(32823)}function h(e){void 0===e&&(e=33984+F-1),R!==e&&(t.activeTexture(e),R=e)}var f=n.isWebGL2,p=new function(){var e=!1,n=new a,i=null,r=new a(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,a,o,s){!0===s&&(e*=o,i*=o,a*=o),n.set(e,i,a,o),!1===r.equals(n)&&(t.clearColor(e,i,a,o),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}},d=new function(){var e=!1,n=null,i=null,a=null;return{setTest:function(t){t?r(2929):o(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case wo:t.depthFunc(512);break;case Mo:t.depthFunc(519);break;case So:t.depthFunc(513);break;case Ao:t.depthFunc(515);break;case To:t.depthFunc(514);break;case Po:t.depthFunc(518);break;case Lo:t.depthFunc(516);break;case Eo:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){a!==e&&(t.clearDepth(e),a=e)},reset:function(){e=!1,n=null,i=null,a=null}}},m=new function(){var e=!1,n=null,i=null,a=null,s=null,u=null,c=null,l=null,h=null;return{setTest:function(t){e||(t?r(2960):o(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,r){i===e&&a===n&&s===r||(t.stencilFunc(e,n,r),i=e,a=n,s=r)},setOp:function(e,n,i){u===e&&c===n&&l===i||(t.stencilOp(e,n,i),u=e,c=n,l=i)},setLocked:function(t){e=t},setClear:function(e){h!==e&&(t.clearStencil(e),h=e)},reset:function(){e=!1,n=null,i=null,a=null,s=null,u=null,c=null,l=null,h=null}}},v={},g=null,y=null,_=null,x=null,b=null,w=null,M=null,S=null,A=null,T=!1,P=null,L=null,E=null,O=null,C=null,F=t.getParameter(35661),I=!1,N=0,D=t.getParameter(7938);-1!==D.indexOf("WebGL")?(N=parseFloat(/^WebGL\ ([0-9])/.exec(D)[1]),I=N>=1):-1!==D.indexOf("OpenGL ES")&&(N=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(D)[1]),I=N>=2);var R=null,k={},z=new a,U=new a,B={};B[3553]=i(3553,3553,1),B[34067]=i(34067,34069,6),p.setClear(0,0,0,1),d.setClear(1),m.setClear(0),r(2929),d.setFunc(Ao),u(!1),c(Ha),r(2884),s(Ka);var j={};if(j[ao]=32774,j[oo]=32778,j[so]=32779,f)j[uo]=32775,j[co]=32776;else{var G=e.get("EXT_blend_minmax");null!==G&&(j[uo]=G.MIN_EXT,j[co]=G.MAX_EXT)}var V={};return V[lo]=0,V[ho]=1,V[fo]=768,V[mo]=770,V[bo]=776,V[_o]=774,V[go]=772,V[po]=769,V[vo]=771,V[xo]=775,V[yo]=773,{buffers:{color:p,depth:d,stencil:m},enable:r,disable:o,useProgram:function(e){return g!==e&&(t.useProgram(e),g=e,!0)},setBlending:s,setMaterial:function(t,e){t.side===$a?o(2884):r(2884);var n=t.side===Ja;e&&(n=!n),u(n),t.blending===to&&!1===t.transparent?s(Ka):s(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),d.setFunc(t.depthFunc),d.setTest(t.depthTest),d.setMask(t.depthWrite),p.setMask(t.colorWrite);var i=t.stencilWrite;m.setTest(i),i&&(m.setMask(t.stencilWriteMask),m.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),m.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),l(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:u,setCullFace:c,setLineWidth:function(e){e!==E&&(I&&t.lineWidth(e),E=e)},setPolygonOffset:l,setScissorTest:function(t){t?r(3089):o(3089)},activeTexture:h,bindTexture:function(e,n){null===R&&h();var i=k[R];void 0===i&&(i={type:void 0,texture:void 0},k[R]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||B[e]),i.type=e,i.texture=n)},unbindTexture:function(){var e=k[R];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){}},scissor:function(e){!1===z.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),z.copy(e))},viewport:function(e){!1===U.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),U.copy(e))},reset:function(){v={},R=null,k={},g=null,_=null,P=null,L=null,p.reset(),d.reset(),m.reset()}}}function Ue(t,e,n,i,r,a,o){function s(t,e){return N?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function u(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var a=e?zu.floorPowerOfTwo:Math.floor,o=a(r*t.width),u=a(r*t.height);void 0===L&&(L=s(o,u));var c=n?s(o,u):L;return c.width=o,c.height=u,c.getContext("2d").drawImage(t,0,0,o,u),c}return t}return t}function c(t){return zu.isPowerOfTwo(t.width)&&zu.isPowerOfTwo(t.height)}function l(t,e){return t.generateMipmaps&&e&&t.minFilter!==qo&&t.minFilter!==Jo}function h(e,n,r,a){t.generateMipmap(e),i.get(n).__maxMipLevel=Math.log(Math.max(r,a))*Math.LOG2E}function f(n,i,r){if(!1===E)return i;if(null!==n&&void 0!==t[n])return t[n];var a=i;return 6403===i&&(5126===r&&(a=33326),5131===r&&(a=33325),5121===r&&(a=33321)),6407===i&&(5126===r&&(a=34837),5131===r&&(a=34843),5121===r&&(a=32849)),6408===i&&(5126===r&&(a=34836),5131===r&&(a=34842),5121===r&&(a=32856)),33325!==a&&33326!==a&&34842!==a&&34836!==a||e.get("EXT_color_buffer_float"),a}function p(t){return t===qo||t===Qo||t===Zo?9728:9729}function d(t){var e=t.target;e.removeEventListener("dispose",d),v(e),e.isVideoTexture&&I.delete(e),o.memory.textures--}function m(t){var e=t.target;e.removeEventListener("dispose",m),g(e),o.memory.textures--}function v(e){var n=i.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),i.remove(e))}function g(e){var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(var a=0;a<6;a++)t.deleteFramebuffer(n.__webglFramebuffer[a]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[a]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(e.texture),i.remove(e)}}function y(t,e){var r=i.get(t);if(t.isVideoTexture&&function(t){var e=o.render.frame;I.get(t)!==e&&(I.set(t,e),t.update())}(t),t.version>0&&r.__version!==t.version){var a=t.image;if(void 0===a);else if(!1!==a.complete)return void M(r,t,e)}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function _(e,r){if(6===e.image.length){var o=i.get(e);if(e.version>0&&o.__version!==e.version){w(o,e),n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture),t.pixelStorei(37440,e.flipY);for(var s=e&&(e.isCompressedTexture||e.image[0].isCompressedTexture),p=e.image[0]&&e.image[0].isDataTexture,d=[],m=0;m<6;m++)d[m]=s||p?p?e.image[m].image:e.image[m]:u(e.image[m],!1,!0,O);var v,g=d[0],y=c(g)||E,_=a.convert(e.format),x=a.convert(e.type),M=f(e.internalFormat,_,x);if(b(34067,e,y),s){for(var S=0;S<6;S++){v=d[S].mipmaps;for(var A=0;A<v.length;A++){var T=v[A];e.format!==ds&&e.format!==ps?null!==_&&n.compressedTexImage2D(34069+S,A,M,T.width,T.height,0,T.data):n.texImage2D(34069+S,A,M,T.width,T.height,0,_,x,T.data)}}o.__maxMipLevel=v.length-1}else{v=e.mipmaps;for(var P=0;P<6;P++)if(p){n.texImage2D(34069+P,0,M,d[P].width,d[P].height,0,_,x,d[P].data);for(var L=0;L<v.length;L++){var C=v[L].image[P].image;n.texImage2D(34069+P,L+1,M,C.width,C.height,0,_,x,C.data)}}else{n.texImage2D(34069+P,0,M,_,x,d[P]);for(var F=0;F<v.length;F++){var I=v[F];n.texImage2D(34069+P,F+1,M,_,x,I.image[P])}}o.__maxMipLevel=v.length}l(e,y)&&h(34067,e,g.width,g.height),o.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+r),n.bindTexture(34067,o.__webglTexture)}}function x(t,e){n.activeTexture(33984+e),n.bindTexture(34067,i.get(t).__webglTexture)}function b(n,a,o){o?(t.texParameteri(n,10242,R[a.wrapS]),t.texParameteri(n,10243,R[a.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,R[a.wrapR]),t.texParameteri(n,10240,k[a.magFilter]),t.texParameteri(n,10241,k[a.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),a.wrapS!==Xo||a.wrapT,t.texParameteri(n,10240,p(a.magFilter)),t.texParameteri(n,10241,p(a.minFilter)),a.minFilter!==qo&&a.minFilter);var s=e.get("EXT_texture_filter_anisotropic");if(s){if(a.type===os&&null===e.get("OES_texture_float_linear"))return;if(a.type===ss&&null===(E||e.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function w(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",d),e.__webglTexture=t.createTexture(),o.memory.textures++)}function M(e,i,r){var o=3553;i.isDataTexture2DArray&&(o=35866),i.isDataTexture3D&&(o=32879),w(e,i),n.activeTexture(33984+r),n.bindTexture(o,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);var s=function(t){return!E&&(t.wrapS!==Xo||t.wrapT!==Xo||t.minFilter!==qo&&t.minFilter!==Jo)}(i)&&!1===c(i.image),p=u(i.image,s,!1,C),d=c(p)||E,m=a.convert(i.format),v=a.convert(i.type),g=f(i.internalFormat,m,v);b(o,i,d);var y,_=i.mipmaps;if(i.isDepthTexture)g=6402,E?g=i.type===os?36012:i.type===as?33190:i.type===hs?35056:33189:i.type,i.format===ys&&6402===g&&i.type!==is&&i.type!==as&&(i.type=is,v=a.convert(i.type)),i.format===_s&&6402===g&&(g=34041,i.type!==hs&&(i.type=hs,v=a.convert(i.type))),n.texImage2D(3553,0,g,p.width,p.height,0,m,v,null);else if(i.isDataTexture)if(_.length>0&&d){for(var x=0,M=_.length;x<M;x++)y=_[x],n.texImage2D(3553,x,g,y.width,y.height,0,m,v,y.data);i.generateMipmaps=!1,e.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,g,p.width,p.height,0,m,v,p.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(var S=0,A=_.length;S<A;S++)y=_[S],i.format!==ds&&i.format!==ps?null!==m&&n.compressedTexImage2D(3553,S,g,y.width,y.height,0,y.data):n.texImage2D(3553,S,g,y.width,y.height,0,m,v,y.data);e.__maxMipLevel=_.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,g,p.width,p.height,p.depth,0,m,v,p.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,g,p.width,p.height,p.depth,0,m,v,p.data),e.__maxMipLevel=0;else if(_.length>0&&d){for(var T=0,P=_.length;T<P;T++)y=_[T],n.texImage2D(3553,T,g,m,v,y);i.generateMipmaps=!1,e.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,g,m,v,p),e.__maxMipLevel=0;l(i,d)&&h(o,i,p.width,p.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function S(e,r,o,s){var u=a.convert(r.texture.format),c=a.convert(r.texture.type),l=f(r.texture.internalFormat,u,c);n.texImage2D(s,0,l,r.width,r.height,0,u,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,o,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function A(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){var r=33189;if(i){var o=n.depthTexture;o&&o.isDepthTexture&&(o.type===os?r=36012:o.type===as&&(r=33190));var s=P(n);t.renderbufferStorageMultisample(36161,s,r,n.width,n.height)}else t.renderbufferStorage(36161,r,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(i){var u=P(n);t.renderbufferStorageMultisample(36161,u,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var c=a.convert(n.texture.format),l=a.convert(n.texture.type),h=f(n.texture.internalFormat,c,l);if(i){var p=P(n);t.renderbufferStorageMultisample(36161,p,h,n.width,n.height)}else t.renderbufferStorage(36161,h,n.width,n.height)}t.bindRenderbuffer(36161,null)}function T(e){var n=i.get(e),r=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),y(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===ys)t.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==_s)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,r,0)}}(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(var a=0;a<6;a++)t.bindFramebuffer(36160,n.__webglFramebuffer[a]),n.__webglDepthbuffer[a]=t.createRenderbuffer(),A(n.__webglDepthbuffer[a],e,!1)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),A(n.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}function P(t){return E&&t.isWebGLMultisampleRenderTarget?Math.min(F,t.samples):0}var L,E=r.isWebGL2,O=(r.maxTextures,r.maxCubemapSize),C=r.maxTextureSize,F=r.maxSamples,I=new WeakMap,N=!1;try{N="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}var D=0,R={};R[Ho]=10497,R[Xo]=33071,R[Yo]=33648;var k={};k[qo]=9728,k[Qo]=9984,k[Zo]=9986,k[Jo]=9729,k[$o]=9985,k[Ko]=9987;var z=!1,U=!1;this.allocateTextureUnit=function(){var t=D;return D+=1,t},this.resetTextureUnits=function(){D=0},this.setTexture2D=y,this.setTexture2DArray=function(t,e){var r=i.get(t);return t.version>0&&r.__version!==t.version?void M(r,t,e):(n.activeTexture(33984+e),void n.bindTexture(35866,r.__webglTexture))},this.setTexture3D=function(t,e){var r=i.get(t);return t.version>0&&r.__version!==t.version?void M(r,t,e):(n.activeTexture(33984+e),void n.bindTexture(32879,r.__webglTexture))},this.setTextureCube=_,this.setTextureCubeDynamic=x,this.setupRenderTarget=function(e){var r=i.get(e),s=i.get(e.texture);e.addEventListener("dispose",m),s.__webglTexture=t.createTexture(),o.memory.textures++;var u=!0===e.isWebGLCubeRenderTarget,p=!0===e.isWebGLMultisampleRenderTarget,d=c(e)||E;if(!E||e.texture.format!==ps||e.texture.type!==os&&e.texture.type!==ss||(e.texture.format=ds),u){r.__webglFramebuffer=[];for(var v=0;v<6;v++)r.__webglFramebuffer[v]=t.createFramebuffer()}else if(r.__webglFramebuffer=t.createFramebuffer(),p&&E){r.__webglMultisampledFramebuffer=t.createFramebuffer(),r.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,r.__webglColorRenderbuffer);var g=a.convert(e.texture.format),y=a.convert(e.texture.type),_=f(e.texture.internalFormat,g,y),x=P(e);t.renderbufferStorageMultisample(36161,x,_,e.width,e.height),t.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(r.__webglDepthRenderbuffer=t.createRenderbuffer(),A(r.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}if(u){n.bindTexture(34067,s.__webglTexture),b(34067,e.texture,d);for(var w=0;w<6;w++)S(r.__webglFramebuffer[w],e,36064,34069+w);l(e.texture,d)&&h(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,s.__webglTexture),b(3553,e.texture,d),S(r.__webglFramebuffer,e,36064,3553),l(e.texture,d)&&h(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&T(e)},this.updateRenderTargetMipmap=function(t){var e=t.texture;if(l(e,c(t)||E)){var r=t.isWebGLCubeRenderTarget?34067:3553,a=i.get(e).__webglTexture;n.bindTexture(r,a),h(r,e,t.width,t.height),n.bindTexture(r,null)}},this.updateMultisampleRenderTarget=function(e){if(e.isWebGLMultisampleRenderTarget&&E){var n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var r=e.width,a=e.height,o=16384;e.depthBuffer&&(o|=256),e.stencilBuffer&&(o|=1024),t.blitFramebuffer(0,0,r,a,0,0,r,a,o,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}},this.safeSetTexture2D=function(t,e){t&&t.isWebGLRenderTarget&&(!1===z&&(z=!0),t=t.texture),y(t,e)},this.safeSetTextureCube=function(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===U&&(U=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?_(t,e):x(t,e)}}function Be(t,e,n){var i=n.isWebGL2;return{convert:function(t){var n;if(t===ts)return 5121;if(t===us)return 32819;if(t===cs)return 32820;if(t===ls)return 33635;if(t===es)return 5120;if(t===ns)return 5122;if(t===is)return 5123;if(t===rs)return 5124;if(t===as)return 5125;if(t===os)return 5126;if(t===ss)return i?5131:null!==(n=e.get("OES_texture_half_float"))?n.HALF_FLOAT_OES:null;if(t===fs)return 6406;if(t===ps)return 6407;if(t===ds)return 6408;if(t===ms)return 6409;if(t===vs)return 6410;if(t===ys)return 6402;if(t===_s)return 34041;if(t===xs)return 6403;if(t===bs)return 36244;if(t===ws)return 33319;if(t===Ms)return 33320;if(t===Ss)return 36248;if(t===As)return 36249;if(t===Ts||t===Ps||t===Ls||t===Es){if(null===(n=e.get("WEBGL_compressed_texture_s3tc")))return null;if(t===Ts)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Ps)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Ls)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Es)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===Os||t===Cs||t===Fs||t===Is){if(null===(n=e.get("WEBGL_compressed_texture_pvrtc")))return null;if(t===Os)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Cs)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Fs)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Is)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===Ns)return null!==(n=e.get("WEBGL_compressed_texture_etc1"))?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===Ds||t===Rs)&&null!==(n=e.get("WEBGL_compressed_texture_etc"))){if(t===Ds)return n.COMPRESSED_RGB8_ETC2;if(t===Rs)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===ks||t===zs||t===Us||t===Bs||t===js||t===Gs||t===Vs||t===Ws||t===Hs||t===Xs||t===Ys||t===qs||t===Qs||t===Zs||t===$s||t===Ks||t===tu||t===eu||t===nu||t===iu||t===ru||t===au||t===ou||t===su||t===uu||t===cu||t===lu||t===hu?null!==(n=e.get("WEBGL_compressed_texture_astc"))?t:null:t===Js?null!==(n=e.get("EXT_texture_compression_bptc"))?t:null:t===hs?i?34042:null!==(n=e.get("WEBGL_depth_texture"))?n.UNSIGNED_INT_24_8_WEBGL:null:void 0}}}function je(t){J.call(this),this.cameras=t||[]}function Ge(){p.call(this),this.type="Group"}function Ve(){this._targetRay=null,this._grip=null,this._hand=null}function We(t,e){function n(t){var e=v.get(t.inputSource);e&&e.dispatchEvent({type:t.type})}function i(){v.forEach(function(t,e){t.disconnect(e)}),v.clear(),t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),T.stop(),u.isPresenting=!1,u.dispatchEvent({type:"sessionend"})}function r(t){f=t,T.setContext(l),T.start(),u.isPresenting=!0,u.dispatchEvent({type:"sessionstart"})}function o(t){for(var e=l.inputSources,n=0;n<m.length;n++)v.set(e[n],m[n]);for(var i=0;i<t.removed.length;i++){var r=t.removed[i],a=v.get(r);a&&(a.dispatchEvent({type:"disconnected",data:r}),v.delete(r))}for(var o=0;o<t.added.length;o++){var s=t.added[o],u=v.get(s);u&&u.dispatchEvent({type:"connected",data:s})}}function s(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}var u=this,l=null,h=1,f=null,p="local-floor",d=null,m=[],v=new Map,g=new J;g.layers.enable(1),g.viewport=new a;var y=new J;y.layers.enable(2),y.viewport=new a;var _=[g,y],x=new je;x.layers.enable(1),x.layers.enable(2);var b=null,w=null;this.enabled=!1,this.isPresenting=!1,this.getController=function(t){var e=m[t];return void 0===e&&(e=new Ve,m[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){var e=m[t];return void 0===e&&(e=new Ve,m[t]=e),e.getGripSpace()},this.getHand=function(t){var e=m[t];return void 0===e&&(e=new Ve,m[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){h=t,u.isPresenting},this.setReferenceSpaceType=function(t){p=t,u.isPresenting},this.getReferenceSpace=function(){return f},this.getSession=function(){return l},this.setSession=function(t){if(null!==(l=t)){l.addEventListener("select",n),l.addEventListener("selectstart",n),l.addEventListener("selectend",n),l.addEventListener("squeeze",n),l.addEventListener("squeezestart",n),l.addEventListener("squeezeend",n),l.addEventListener("end",i);var a=e.getContextAttributes();!0!==a.xrCompatible&&e.makeXRCompatible();var s={antialias:a.antialias,alpha:a.alpha,depth:a.depth,stencil:a.stencil,framebufferScaleFactor:h},u=new XRWebGLLayer(l,e,s);l.updateRenderState({baseLayer:u}),l.requestReferenceSpace(p).then(r),l.addEventListener("inputsourceschange",o)}};var M=new c,S=new c;this.getCamera=function(t){x.near=y.near=g.near=t.near,x.far=y.far=g.far=t.far,b===x.near&&w===x.far||(l.updateRenderState({depthNear:x.near,depthFar:x.far}),b=x.near,w=x.far);var e=t.parent,n=x.cameras;s(x,e);for(var i=0;i<n.length;i++)s(n[i],e);t.matrixWorld.copy(x.matrixWorld);for(var r=t.children,a=0,o=r.length;a<o;a++)r[a].updateMatrixWorld(!0);return 2===n.length?function(t,e,n){M.setFromMatrixPosition(e.matrixWorld),S.setFromMatrixPosition(n.matrixWorld);var i=M.distanceTo(S),r=e.projectionMatrix.elements,a=n.projectionMatrix.elements,o=r[14]/(r[10]-1),s=r[14]/(r[10]+1),u=(r[9]+1)/r[5],c=(r[9]-1)/r[5],l=(r[8]-1)/r[0],h=(a[8]+1)/a[0],f=o*l,p=o*h,d=i/(-l+h),m=d*-l;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(d),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var v=o+d,g=s+d,y=f-m,_=p+(i-m),x=u*s/g*v,b=c*s/g*v;t.projectionMatrix.makePerspective(y,_,x,b,v,g)}(x,g,y):x.projectionMatrix.copy(g.projectionMatrix),x};var A=null,T=new nt;T.setAnimationLoop(function(e,n){if(null!==(d=n.getViewerPose(f))){var i=d.views,r=l.renderState.baseLayer;t.setFramebuffer(r.framebuffer);var a=!1;i.length!==x.cameras.length&&(x.cameras.length=0,a=!0);for(var o=0;o<i.length;o++){var s=i[o],u=r.getViewport(s),c=_[o];c.matrix.fromArray(s.transform.matrix),c.projectionMatrix.fromArray(s.projectionMatrix),c.viewport.set(u.x,u.y,u.width,u.height),0===o&&x.matrix.copy(c.matrix),!0===a&&x.cameras.push(c)}}for(var h=l.inputSources,p=0;p<m.length;p++){var v=m[p],g=h[p];v.update(g,n,f)}A&&A(e,n)}),this.setAnimationLoop=function(t){A=t},this.dispose=function(){}}function He(t){function e(e,n,i){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);var r,a,o=n.envMap||i;if(o){e.envMap.value=o,e.flipEnvMap.value=o.isCubeTexture?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;var s=t.get(o).__maxMipLevel;void 0!==s&&(e.maxMipLevel.value=s)}n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap&&(r=n.emissiveMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap?a=n.aoMap:n.lightMap&&(a=n.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),e.uv2Transform.value.copy(a.matrix))}function n(t,e,n){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===Ja&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===Ja&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),(e.envMap||n)&&(t.envMapIntensity.value=e.envMapIntensity)}return{refreshFogUniforms:function(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)},refreshMaterialUniforms:function(t,i,r,a,o){i.isMeshBasicMaterial?e(t,i):i.isMeshLambertMaterial?(e(t,i),function(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}(t,i)):i.isMeshToonMaterial?(e(t,i),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===Ja&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===Ja&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshPhongMaterial?(e(t,i),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===Ja&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===Ja&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshStandardMaterial?(e(t,i,r),i.isMeshPhysicalMaterial?function(t,e,i){n(t,e,i),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===Ja&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}(t,i,r):n(t,i,r)):i.isMeshMatcapMaterial?(e(t,i),function(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===Ja&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===Ja&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDepthMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isMeshDistanceMaterial?(e(t,i),function(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}(t,i)):i.isMeshNormalMaterial?(e(t,i),function(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===Ja&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===Ja&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}(t,i)):i.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}(t,i),i.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,i)):i.isPointsMaterial?function(t,e,n,i){var r;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?r=e.map:e.alphaMap&&(r=e.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}(t,i,a,o):i.isSpriteMaterial?function(t,e){var n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}(t,i):i.isShadowMaterial?(t.color.value.copy(i.color),t.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Xe(t){function e(){return null===$?Mt:1}function i(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=v.getContext(i,e);if(null!==r)return r}return null}function r(){L=new ht(Rt),!1===(E=new ct(Rt,L,t)).isWebGL2&&(L.get("WEBGL_depth_texture"),L.get("OES_texture_float"),L.get("OES_texture_half_float"),L.get("OES_texture_half_float_linear"),L.get("OES_standard_derivatives"),L.get("OES_element_index_uint"),L.get("OES_vertex_array_object"),L.get("ANGLE_instanced_arrays")),L.get("OES_texture_float_linear"),H=new Be(Rt,L,E),(O=new ze(Rt,L,E)).scissor(_t.copy(Pt).multiplyScalar(Mt).floor()),O.viewport(vt.copy(Tt).multiplyScalar(Mt).floor()),C=new dt(Rt),F=new Se,I=new Ue(Rt,L,O,F,E,H,C),N=new it(Rt,E),X=new st(Rt,L,N,E),D=new ft(Rt,N,C,X),R=new yt(Rt,D,N,C),G=new gt(Rt),k=new Me(Y,L,E,X),z=new He(F),U=new Le(F),B=new Ne,j=new ot(Y,O,R,w),V=new ut(Rt,L,C,E),W=new pt(Rt,L,C,E),C.programs=k.programs,Y.capabilities=E,Y.extensions=L,Y.properties=F,Y.renderLists=U,Y.state=O,Y.info=C}function o(t){t.preventDefault(),q=!0}function s(){q=!1,r()}function u(t){var e=t.target;e.removeEventListener("dispose",u),function(t){h(t),F.remove(t)}(e)}function h(t){var e=F.get(t).program;void 0!==e&&k.releaseProgram(e)}function f(t,e,n){for(var i=!0===e.isScene?e.overrideMaterial:null,r=0,a=t.length;r<a;r++){var o=t[r],s=o.object,u=o.geometry,c=null===i?o.material:i,l=o.group;if(n.isArrayCamera){mt=n;for(var h=n.cameras,f=0,d=h.length;f<d;f++){var m=h[f];s.layers.test(m.layers)&&(O.viewport(vt.copy(m.viewport)),P.setupLights(m),p(s,e,m,u,c,l))}}else mt=null,p(s,e,n,u,c,l)}}function p(t,e,n,i,r,a){if(t.onBeforeRender(Y,e,n,i,r,a),P=B.get(e,mt||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){var o=m(n,e,r,t);O.setMaterial(r),X.reset(),function(t,e){t.render(function(t){Y.renderBufferImmediate(t,e)})}(t,o)}else Y.renderBufferDirect(n,e,i,r,t,a);t.onAfterRender(Y,e,n,i,r,a),P=B.get(e,mt||n)}function d(t,e,n){!0!==e.isScene&&(e=Dt);var i=F.get(t),r=P.state.lights,a=P.state.shadowsArray,o=r.state.version,s=k.getParameters(t,r.state,a,e,Ot.numPlanes,Ot.numIntersection,n),c=k.getProgramCacheKey(s),l=i.program,f=!0;if(void 0===l)t.addEventListener("dispose",u);else if(l.cacheKey!==c)h(t);else if(i.lightsStateVersion!==o)i.lightsStateVersion=o,f=!1;else{if(void 0!==s.shaderID)return;f=!1}f&&(s.uniforms=k.getUniforms(t,s),t.onBeforeCompile(s,Y),l=k.acquireProgram(s,c),i.program=l,i.uniforms=s.uniforms,i.outputEncoding=s.outputEncoding);var p=l.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var d=0;d<Y.maxMorphTargets;d++)p["morphTarget"+d]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(var m=0;m<Y.maxMorphNormals;m++)p["morphNormal"+m]>=0&&t.numSupportedMorphNormals++}var v=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=Ot.numPlanes,i.numIntersection=Ot.numIntersection,v.clippingPlanes=Ot.uniform),i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),i.lightsStateVersion=o,i.needsLights&&(v.ambientLightColor.value=r.state.ambient,v.lightProbe.value=r.state.probe,v.directionalLights.value=r.state.directional,v.directionalLightShadows.value=r.state.directionalShadow,v.spotLights.value=r.state.spot,v.spotLightShadows.value=r.state.spotShadow,v.rectAreaLights.value=r.state.rectArea,v.pointLights.value=r.state.point,v.pointLightShadows.value=r.state.pointShadow,v.hemisphereLights.value=r.state.hemi,v.directionalShadowMap.value=r.state.directionalShadowMap,v.directionalShadowMatrix.value=r.state.directionalShadowMatrix,v.spotShadowMap.value=r.state.spotShadowMap,v.spotShadowMatrix.value=r.state.spotShadowMatrix,v.pointShadowMap.value=r.state.pointShadowMap,v.pointShadowMatrix.value=r.state.pointShadowMatrix);var g=i.program.getUniforms(),y=oe.seqWithValue(g.seq,v);i.uniformsList=y}function m(t,e,n,i){!0!==e.isScene&&(e=Dt),I.resetTextureUnits();var r=e.fog,a=n.isMeshStandardMaterial?e.environment:null,o=null===$?Y.outputEncoding:$.texture.encoding,s=F.get(n),u=P.state.lights;if(!0===Ct&&(!0===Ft||t!==at)){var c=t===at&&n.id===rt;Ot.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,s,c)}n.version===s.__version?void 0===s.program?d(n,e,i):n.fog&&s.fog!==r?d(n,e,i):s.environment!==a?d(n,e,i):s.needsLights&&s.lightsStateVersion!==u.state.version?d(n,e,i):void 0===s.numClippingPlanes||s.numClippingPlanes===Ot.numPlanes&&s.numIntersection===Ot.numIntersection?s.outputEncoding!==o&&d(n,e,i):d(n,e,i):(d(n,e,i),s.__version=n.version);var l=!1,h=!1,f=!1,p=s.program,m=p.getUniforms(),v=s.uniforms;if(O.useProgram(p.program)&&(l=!0,h=!0,f=!0),n.id!==rt&&(rt=n.id,h=!0),l||at!==t){if(m.setValue(Rt,"projectionMatrix",t.projectionMatrix),E.logarithmicDepthBuffer&&m.setValue(Rt,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),at!==t&&(at=t,h=!0,f=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){var g=m.map.cameraPosition;void 0!==g&&g.setValue(Rt,Nt.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&m.setValue(Rt,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&m.setValue(Rt,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){m.setOptional(Rt,i,"bindMatrix"),m.setOptional(Rt,i,"bindMatrixInverse");var y=i.skeleton;if(y){var _=y.bones;if(E.floatVertexTextures){if(void 0===y.boneTexture){var x=Math.sqrt(4*_.length);x=zu.ceilPowerOfTwo(x),x=Math.max(x,4);var b=new Float32Array(x*x*4);b.set(y.boneMatrices);var w=new tt(b,x,x,ds,os);y.boneMatrices=b,y.boneTexture=w,y.boneTextureSize=x}m.setValue(Rt,"boneTexture",y.boneTexture,I),m.setValue(Rt,"boneTextureSize",y.boneTextureSize)}else m.setOptional(Rt,y,"boneMatrices")}}return(h||s.receiveShadow!==i.receiveShadow)&&(s.receiveShadow=i.receiveShadow,m.setValue(Rt,"receiveShadow",i.receiveShadow)),h&&(m.setValue(Rt,"toneMappingExposure",Y.toneMappingExposure),s.needsLights&&function(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}(v,f),r&&n.fog&&z.refreshFogUniforms(v,r),z.refreshMaterialUniforms(v,n,a,Mt,wt),void 0!==v.ltc_1&&(v.ltc_1.value=Il.LTC_1),void 0!==v.ltc_2&&(v.ltc_2.value=Il.LTC_2),oe.upload(Rt,s.uniformsList,v,I)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(oe.upload(Rt,s.uniformsList,v,I),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&m.setValue(Rt,"center",i.center),m.setValue(Rt,"modelViewMatrix",i.modelViewMatrix),m.setValue(Rt,"normalMatrix",i.normalMatrix),m.setValue(Rt,"modelMatrix",i.matrixWorld),p}var v=void 0!==(t=t||{}).canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),g=void 0!==t.context?t.context:null,y=void 0!==t.alpha&&t.alpha,_=void 0===t.depth||t.depth,x=void 0===t.stencil||t.stencil,b=void 0!==t.antialias&&t.antialias,w=void 0===t.premultipliedAlpha||t.premultipliedAlpha,M=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,S=void 0!==t.powerPreference?t.powerPreference:"default",A=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,T=null,P=null;this.domElement=v,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=_u,this.physicallyCorrectLights=!1,this.toneMapping=Io,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var L,E,O,C,F,I,N,D,R,k,z,U,B,j,G,V,W,H,X,Y=this,q=!1,Q=null,Z=0,J=0,$=null,K=null,rt=-1,at=null,mt=null,vt=new a,_t=new a,xt=null,bt=v.width,wt=v.height,Mt=1,St=null,At=null,Tt=new a(0,0,bt,wt),Pt=new a(0,0,bt,wt),Lt=!1,Et=new et,Ot=new lt,Ct=!1,Ft=!1,It=new l,Nt=new c,Dt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},Rt=g;try{var kt={alpha:y,depth:_,stencil:x,antialias:b,premultipliedAlpha:w,preserveDrawingBuffer:M,powerPreference:S,failIfMajorPerformanceCaveat:A};if(v.addEventListener("webglcontextlost",o,!1),v.addEventListener("webglcontextrestored",s,!1),null===Rt){var zt=["webgl2","webgl","experimental-webgl"];if(!0===Y.isWebGL1Renderer&&zt.shift(),null===(Rt=i(zt,kt)))throw i(zt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===Rt.getShaderPrecisionFormat&&(Rt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw t}r();var Ut=new We(Y,Rt);this.xr=Ut;var Bt=new ke(Y,R,E.maxTextureSize);this.shadowMap=Bt,this.getContext=function(){return Rt},this.getContextAttributes=function(){return Rt.getContextAttributes()},this.forceContextLoss=function(){var t=L.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=L.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Mt},this.setPixelRatio=function(t){void 0!==t&&(Mt=t,this.setSize(bt,wt,!1))},this.getSize=function(t){return void 0===t&&(t=new n),t.set(bt,wt)},this.setSize=function(t,e,n){Ut.isPresenting||(bt=t,wt=e,v.width=Math.floor(t*Mt),v.height=Math.floor(e*Mt),!1!==n&&(v.style.width=t+"px",v.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return void 0===t&&(t=new n),t.set(bt*Mt,wt*Mt).floor()},this.setDrawingBufferSize=function(t,e,n){bt=t,wt=e,Mt=n,v.width=Math.floor(t*n),v.height=Math.floor(e*n),this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return void 0===t&&(t=new a),t.copy(vt)},this.getViewport=function(t){return t.copy(Tt)},this.setViewport=function(t,e,n,i){t.isVector4?Tt.set(t.x,t.y,t.z,t.w):Tt.set(t,e,n,i),O.viewport(vt.copy(Tt).multiplyScalar(Mt).floor())},this.getScissor=function(t){return t.copy(Pt)},this.setScissor=function(t,e,n,i){t.isVector4?Pt.set(t.x,t.y,t.z,t.w):Pt.set(t,e,n,i),O.scissor(_t.copy(Pt).multiplyScalar(Mt).floor())},this.getScissorTest=function(){return Lt},this.setScissorTest=function(t){O.setScissorTest(Lt=t)},this.setOpaqueSort=function(t){St=t},this.setTransparentSort=function(t){At=t},this.getClearColor=function(){return j.getClearColor()},this.setClearColor=function(){j.setClearColor.apply(j,arguments)},this.getClearAlpha=function(){return j.getClearAlpha()},this.setClearAlpha=function(){j.setClearAlpha.apply(j,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),Rt.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){v.removeEventListener("webglcontextlost",o,!1),v.removeEventListener("webglcontextrestored",s,!1),U.dispose(),B.dispose(),F.dispose(),R.dispose(),X.dispose(),Ut.dispose(),Gt.stop()},this.renderBufferImmediate=function(t,e){X.initAttributes();var n=F.get(t);t.hasPositions&&!n.position&&(n.position=Rt.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=Rt.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=Rt.createBuffer()),t.hasColors&&!n.color&&(n.color=Rt.createBuffer());var i=e.getAttributes();t.hasPositions&&(Rt.bindBuffer(34962,n.position),Rt.bufferData(34962,t.positionArray,35048),X.enableAttribute(i.position),Rt.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(Rt.bindBuffer(34962,n.normal),Rt.bufferData(34962,t.normalArray,35048),X.enableAttribute(i.normal),Rt.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(Rt.bindBuffer(34962,n.uv),Rt.bufferData(34962,t.uvArray,35048),X.enableAttribute(i.uv),Rt.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(Rt.bindBuffer(34962,n.color),Rt.bufferData(34962,t.colorArray,35048),X.enableAttribute(i.color),Rt.vertexAttribPointer(i.color,3,5126,!1,0,0)),X.disableUnusedAttributes(),Rt.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,n,i,r,a,o){null===n&&(n=Dt);var s=a.isMesh&&a.matrixWorld.determinant()<0,u=m(t,n,r,a);O.setMaterial(r,s);var c=i.index,l=i.attributes.position;if(null===c){if(void 0===l||0===l.count)return}else if(0===c.count)return;var h=1;!0===r.wireframe&&(c=D.getWireframeAttribute(i),h=2),(r.morphTargets||r.morphNormals)&&G.update(a,i,r,u),X.setup(a,r,u,i,c);var f,p=V;null!==c&&(f=N.get(c),(p=W).setIndex(f));var d=null!==c?c.count:l.count,v=i.drawRange.start*h,g=i.drawRange.count*h,y=null!==o?o.start*h:0,_=null!==o?o.count*h:1/0,x=Math.max(v,y),b=Math.min(d,v+g,y+_)-1,w=Math.max(0,b-x+1);if(0!==w){if(a.isMesh)!0===r.wireframe?(O.setLineWidth(r.wireframeLinewidth*e()),p.setMode(1)):p.setMode(4);else if(a.isLine){var M=r.linewidth;void 0===M&&(M=1),O.setLineWidth(M*e()),a.isLineSegments?p.setMode(1):a.isLineLoop?p.setMode(2):p.setMode(3)}else a.isPoints?p.setMode(0):a.isSprite&&p.setMode(4);if(a.isInstancedMesh)p.renderInstances(x,w,a.count);else if(i.isInstancedBufferGeometry){var S=Math.min(i.instanceCount,i._maxInstanceCount);p.renderInstances(x,w,S)}else p.render(x,w)}},this.compile=function(t,e){(P=B.get(t,e)).init(),t.traverse(function(t){t.isLight&&(P.pushLight(t),t.castShadow&&P.pushShadow(t))}),P.setupLights(e);var n=new WeakMap;t.traverse(function(e){var i=e.material;if(i)if(Array.isArray(i))for(var r=0;r<i.length;r++){var a=i[r];!1===n.has(a)&&(d(a,t,e),n.set(a))}else!1===n.has(i)&&(d(i,t,e),n.set(i))})};var jt=null,Gt=new nt;Gt.setAnimationLoop(function(t){Ut.isPresenting||jt&&jt(t)}),"undefined"!=typeof window&&Gt.setContext(window),this.setAnimationLoop=function(t){jt=t,Ut.setAnimationLoop(t),null===t?Gt.stop():Gt.start()},this.render=function(t,e){var n,i;if(void 0!==arguments[2]&&(n=arguments[2]),void 0!==arguments[3]&&(i=arguments[3]),(void 0===e||!0===e.isCamera)&&!0!==q){X.resetDefaultState(),rt=-1,at=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===Ut.enabled&&!0===Ut.isPresenting&&(e=Ut.getCamera(e)),!0===t.isScene&&t.onBeforeRender(Y,t,e,n||$),(P=B.get(t,e)).init(),It.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),Et.setFromProjectionMatrix(It),Ft=this.localClippingEnabled,Ct=Ot.init(this.clippingPlanes,Ft,e),(T=U.get(t,e)).init(),function t(e,n,i,r){if(!1!==e.visible){if(e.layers.test(n.layers))if(e.isGroup)i=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(n);else if(e.isLight)P.pushLight(e),e.castShadow&&P.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||Et.intersectsSprite(e)){r&&Nt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(It);var a=R.update(e),o=e.material;o.visible&&T.push(e,a,o,i,Nt.z,null)}}else if(e.isImmediateRenderObject)r&&Nt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(It),T.push(e,null,e.material,i,Nt.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==C.render.frame&&(e.skeleton.update(),e.skeleton.frame=C.render.frame),!e.frustumCulled||Et.intersectsObject(e))){r&&Nt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(It);var s=R.update(e),u=e.material;if(Array.isArray(u))for(var c=s.groups,l=0,h=c.length;l<h;l++){var f=c[l],p=u[f.materialIndex];p&&p.visible&&T.push(e,s,p,i,Nt.z,f)}else u.visible&&T.push(e,s,u,i,Nt.z,null)}for(var d=e.children,m=0,v=d.length;m<v;m++)t(d[m],n,i,r)}}(t,e,0,Y.sortObjects),T.finish(),!0===Y.sortObjects&&T.sort(St,At),!0===Ct&&Ot.beginShadows();var r=P.state.shadowsArray;Bt.render(r,t,e),P.setupLights(e),!0===Ct&&Ot.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),j.render(T,t,e,i);var a=T.opaque,o=T.transparent;a.length>0&&f(a,t,e),o.length>0&&f(o,t,e),!0===t.isScene&&t.onAfterRender(Y,t,e),null!==$&&(I.updateRenderTargetMipmap($),I.updateMultisampleRenderTarget($)),O.buffers.depth.setTest(!0),O.buffers.depth.setMask(!0),O.buffers.color.setMask(!0),O.setPolygonOffset(!1),T=null,P=null}},this.setFramebuffer=function(t){Q!==t&&null===$&&Rt.bindFramebuffer(36160,t),Q=t},this.getActiveCubeFace=function(){return Z},this.getActiveMipmapLevel=function(){return J},this.getRenderTarget=function(){return $},this.setRenderTarget=function(t,e,n){$=t,Z=e,J=n,t&&void 0===F.get(t).__webglFramebuffer&&I.setupRenderTarget(t);var i=Q,r=!1;if(t){var a=F.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=a[e||0],r=!0):i=t.isWebGLMultisampleRenderTarget?F.get(t).__webglMultisampledFramebuffer:a,vt.copy(t.viewport),_t.copy(t.scissor),xt=t.scissorTest}else vt.copy(Tt).multiplyScalar(Mt).floor(),_t.copy(Pt).multiplyScalar(Mt).floor(),xt=Lt;if(K!==i&&(Rt.bindFramebuffer(36160,i),K=i),O.viewport(vt),O.scissor(_t),O.setScissorTest(xt),r){var o=F.get(t.texture);Rt.framebufferTexture2D(36160,36064,34069+(e||0),o.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,i,r,a,o){if(t&&t.isWebGLRenderTarget){var s=F.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==o&&(s=s[o]),s){var u=!1;s!==K&&(Rt.bindFramebuffer(36160,s),u=!0);try{var c=t.texture,l=c.format,h=c.type;if(l!==ds&&H.convert(l)!==Rt.getParameter(35739))return;if(!(h===ts||H.convert(h)===Rt.getParameter(35738)||h===os&&(E.isWebGL2||L.get("OES_texture_float")||L.get("WEBGL_color_buffer_float"))||h===ss&&(E.isWebGL2?L.get("EXT_color_buffer_float"):L.get("EXT_color_buffer_half_float"))))return;36053===Rt.checkFramebufferStatus(36160)&&e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&Rt.readPixels(e,n,i,r,H.convert(l),H.convert(h),a)}finally{u&&Rt.bindFramebuffer(36160,K)}}}},this.copyFramebufferToTexture=function(t,e,n){void 0===n&&(n=0);var i=Math.pow(2,-n),r=Math.floor(e.image.width*i),a=Math.floor(e.image.height*i),o=H.convert(e.format);I.setTexture2D(e,0),Rt.copyTexImage2D(3553,n,o,t.x,t.y,r,a,0),O.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i){void 0===i&&(i=0);var r=e.image.width,a=e.image.height,o=H.convert(n.format),s=H.convert(n.type);I.setTexture2D(n,0),Rt.pixelStorei(37440,n.flipY),Rt.pixelStorei(37441,n.premultiplyAlpha),Rt.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?Rt.texSubImage2D(3553,i,t.x,t.y,r,a,o,s,e.image.data):e.isCompressedTexture?Rt.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,o,e.mipmaps[0].data):Rt.texSubImage2D(3553,i,t.x,t.y,o,s,e.image),0===i&&n.generateMipmaps&&Rt.generateMipmap(3553),O.unbindTexture()},this.initTexture=function(t){I.setTexture2D(t,0),O.unbindTexture()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function Ye(t){Xe.call(this,t)}function qe(t,e){this.name="",this.color=new b(t),this.density=void 0!==e?e:25e-5}function Qe(t,e,n){this.name="",this.color=new b(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function Ze(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Iu,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=zu.generateUUID()}function Je(t,e,n,i){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function $e(t){T.call(this),this.type="SpriteMaterial",this.color=new b(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}function Ke(t){if(p.call(this),this.type="Sprite",void 0===th){th=new B;var e=new Ze(new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),5);th.setIndex([0,1,2,0,2,3]),th.setAttribute("position",new Je(e,3,0,!1)),th.setAttribute("uv",new Je(e,2,3,!1))}this.geometry=th,this.material=void 0!==t?t:new $e,this.center=new n(.5,.5)}function tn(t,e,n,i,r,a){rh.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(ah.x=a*rh.x-r*rh.y,ah.y=r*rh.x+a*rh.y):ah.copy(rh),t.copy(e),t.x+=ah.x,t.y+=ah.y,t.applyMatrix4(oh)}function en(){p.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}function nn(t,e){t&&t.isGeometry,j.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new l,this.bindMatrixInverse=new l}function rn(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),this.frame=-1,void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new l)}}function an(){p.call(this),this.type="Bone"}function on(t,e,n){j.call(this,t,e),this.instanceMatrix=new L(new Float32Array(16*n),16),this.count=n,this.frustumCulled=!1}function sn(t){T.call(this),this.type="LineBasicMaterial",this.color=new b(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}function un(t,e,n){p.call(this),this.type="Line",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new sn,this.updateMorphTargets()}function cn(t,e){un.call(this,t,e),this.type="LineSegments"}function ln(t,e){un.call(this,t,e),this.type="LineLoop"}function hn(t){T.call(this),this.type="PointsMaterial",this.color=new b(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}function fn(t,e){p.call(this),this.type="Points",this.geometry=void 0!==t?t:new B,this.material=void 0!==e?e:new hn,this.updateMorphTargets()}function pn(t,e,n,i,r,a,o){var s=Eh.distanceSqToPoint(t);if(s<n){var u=new c;Eh.closestPointToPoint(t,u),u.applyMatrix4(i);var l=r.ray.origin.distanceTo(u);if(l<r.near||l>r.far)return;a.push({distance:l,distanceToRay:Math.sqrt(s),point:u,index:e,face:null,object:o})}}function dn(t,e,n,i,a,o,s,u,c){r.call(this,t,e,n,i,a,o,s,u,c),this.format=void 0!==s?s:ps,this.minFilter=void 0!==o?o:Jo,this.magFilter=void 0!==a?a:Jo,this.generateMipmaps=!1;var l=this;"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(function e(){l.needsUpdate=!0,t.requestVideoFrameCallback(e)})}function mn(t,e,n,i,a,o,s,u,c,l,h,f){r.call(this,null,o,s,u,c,l,i,a,h,f),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function vn(t,e,n,i,a,o,s,u,c){r.call(this,t,e,n,i,a,o,s,u,c),this.needsUpdate=!0}function gn(t,e,n,i,a,o,s,u,c,l){if((l=void 0!==l?l:ys)!==ys&&l!==_s)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===ys&&(n=is),void 0===n&&l===_s&&(n=hs),r.call(this,null,i,a,o,s,u,l,n,c),this.image={width:t,height:e},this.magFilter=void 0!==s?s:qo,this.minFilter=void 0!==u?u:qo,this.flipY=!1,this.generateMipmaps=!1}function yn(t){B.call(this),this.type="WireframeGeometry";var e=[],n=[0,0],i={},r=["a","b","c"];if(t&&t.isGeometry){for(var a=t.faces,o=0,s=a.length;o<s;o++)for(var u=a[o],l=0;l<3;l++){var h=u[r[l]],f=u[r[(l+1)%3]];n[0]=Math.min(h,f),n[1]=Math.max(h,f);var p=n[0]+","+n[1];void 0===i[p]&&(i[p]={index1:n[0],index2:n[1]})}for(var d in i){var m=i[d],v=t.vertices[m.index1];e.push(v.x,v.y,v.z),v=t.vertices[m.index2],e.push(v.x,v.y,v.z)}}else if(t&&t.isBufferGeometry){var g=new c;if(null!==t.index){var y=t.attributes.position,_=t.index,x=t.groups;0===x.length&&(x=[{start:0,count:_.count,materialIndex:0}]);for(var b=0,w=x.length;b<w;++b)for(var M=x[b],S=M.start,A=S,T=S+M.count;A<T;A+=3)for(var P=0;P<3;P++){var L=_.getX(A+P),E=_.getX(A+(P+1)%3);n[0]=Math.min(L,E),n[1]=Math.max(L,E);var O=n[0]+","+n[1];void 0===i[O]&&(i[O]={index1:n[0],index2:n[1]})}for(var C in i){var F=i[C];g.fromBufferAttribute(y,F.index1),e.push(g.x,g.y,g.z),g.fromBufferAttribute(y,F.index2),e.push(g.x,g.y,g.z)}}else for(var I=t.attributes.position,N=0,D=I.count/3;N<D;N++)for(var k=0;k<3;k++){var z=3*N+k;g.fromBufferAttribute(I,z),e.push(g.x,g.y,g.z);var U=3*N+(k+1)%3;g.fromBufferAttribute(I,U),e.push(g.x,g.y,g.z)}}this.setAttribute("position",new R(e,3))}function _n(t,e,n){W.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new xn(t,e,n)),this.mergeVertices()}function xn(t,e,n){B.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i=[],r=[],a=[],o=[],s=1e-5,u=new c,l=new c,h=new c,f=new c,p=new c;t.length;for(var d=e+1,m=0;m<=n;m++)for(var v=m/n,g=0;g<=e;g++){var y=g/e;t(y,v,l),r.push(l.x,l.y,l.z),y-s>=0?(t(y-s,v,h),f.subVectors(l,h)):(t(y+s,v,h),f.subVectors(h,l)),v-s>=0?(t(y,v-s,h),p.subVectors(l,h)):(t(y,v+s,h),p.subVectors(h,l)),u.crossVectors(f,p).normalize(),a.push(u.x,u.y,u.z),o.push(y,v)}for(var _=0;_<n;_++)for(var x=0;x<e;x++){var b=_*d+x,w=_*d+x+1,M=(_+1)*d+x+1,S=(_+1)*d+x;i.push(b,w,S),i.push(w,M,S)}this.setIndex(i),this.setAttribute("position",new R(r,3)),this.setAttribute("normal",new R(a,3)),this.setAttribute("uv",new R(o,2))}function bn(t,e,n,i){W.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new wn(t,e,n,i)),this.mergeVertices()}function wn(t,e,i,r){function a(t,e,n,i){for(var r=Math.pow(2,i),a=[],s=0;s<=r;s++){a[s]=[];for(var u=t.clone().lerp(n,s/r),c=e.clone().lerp(n,s/r),l=r-s,h=0;h<=l;h++)a[s][h]=0===h&&s===r?u:u.clone().lerp(c,h/l)}for(var f=0;f<r;f++)for(var p=0;p<2*(r-f)-1;p++){var d=Math.floor(p/2);p%2==0?(o(a[f][d+1]),o(a[f+1][d]),o(a[f][d])):(o(a[f][d+1]),o(a[f+1][d+1]),o(a[f+1][d]))}}function o(t){p.push(t.x,t.y,t.z)}function s(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function u(){for(var t=new c,e=new c,i=new c,r=new c,a=new n,o=new n,s=new n,u=0,f=0;u<p.length;u+=9,f+=6){t.set(p[u+0],p[u+1],p[u+2]),e.set(p[u+3],p[u+4],p[u+5]),i.set(p[u+6],p[u+7],p[u+8]),a.set(d[f+0],d[f+1]),o.set(d[f+2],d[f+3]),s.set(d[f+4],d[f+5]),r.copy(t).add(e).add(i).divideScalar(3);var m=h(r);l(a,f+0,t,m),l(o,f+2,e,m),l(s,f+4,i,m)}}function l(t,e,n,i){i<0&&1===t.x&&(d[e]=t.x-1),0===n.x&&0===n.z&&(d[e]=i/2/Math.PI+.5)}function h(t){return Math.atan2(t.z,-t.x)}function f(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}B.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:i,detail:r},i=i||1;var p=[],d=[];(function(t){for(var n=new c,i=new c,r=new c,o=0;o<e.length;o+=3)s(e[o+0],n),s(e[o+1],i),s(e[o+2],r),a(n,i,r,t)})(r=r||0),function(t){for(var e=new c,n=0;n<p.length;n+=3)e.x=p[n+0],e.y=p[n+1],e.z=p[n+2],e.normalize().multiplyScalar(t),p[n+0]=e.x,p[n+1]=e.y,p[n+2]=e.z}(i),function(){for(var t=new c,e=0;e<p.length;e+=3){t.x=p[e+0],t.y=p[e+1],t.z=p[e+2];var n=h(t)/2/Math.PI+.5,i=f(t)/Math.PI+.5;d.push(n,1-i)}u(),function(){for(var t=0;t<d.length;t+=6){var e=d[t+0],n=d[t+2],i=d[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);r>.9&&a<.1&&(e<.2&&(d[t+0]+=1),n<.2&&(d[t+2]+=1),i<.2&&(d[t+4]+=1))}}()}(),this.setAttribute("position",new R(p,3)),this.setAttribute("normal",new R(p.slice(),3)),this.setAttribute("uv",new R(d,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function Mn(t,e){W.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Sn(t,e)),this.mergeVertices()}function Sn(t,e){wn.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function An(t,e){W.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Tn(t,e)),this.mergeVertices()}function Tn(t,e){wn.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Pn(t,e){W.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ln(t,e)),this.mergeVertices()}function Ln(t,e){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1];wn.call(this,i,[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function En(t,e){W.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new On(t,e)),this.mergeVertices()}function On(t,e){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i];wn.call(this,r,[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Cn(t,e,n,i,r,a){W.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r};var o=new Fn(t,e,n,i,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals,this.fromBufferGeometry(o),this.mergeVertices()}function Fn(t,e,i,r,a){function o(n){f=t.getPointAt(n/e,f);for(var a=s.normals[n],o=s.binormals[n],c=0;c<=r;c++){var h=c/r*Math.PI*2,m=Math.sin(h),v=-Math.cos(h);l.x=v*a.x+m*o.x,l.y=v*a.y+m*o.y,l.z=v*a.z+m*o.z,l.normalize(),d.push(l.x,l.y,l.z),u.x=f.x+i*l.x,u.y=f.y+i*l.y,u.z=f.z+i*l.z,p.push(u.x,u.y,u.z)}}B.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:i,radialSegments:r,closed:a},e=e||64,i=i||1,r=r||8,a=a||!1;var s=t.computeFrenetFrames(e,a);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;var u=new c,l=new c,h=new n,f=new c,p=[],d=[],m=[],v=[];(function(){for(var t=0;t<e;t++)o(t);o(!1===a?e:0),function(){for(var t=0;t<=e;t++)for(var n=0;n<=r;n++)h.x=t/e,h.y=n/r,m.push(h.x,h.y)}(),function(){for(var t=1;t<=e;t++)for(var n=1;n<=r;n++){var i=(r+1)*(t-1)+(n-1),a=(r+1)*t+(n-1),o=(r+1)*t+n,s=(r+1)*(t-1)+n;v.push(i,a,s),v.push(a,o,s)}}()})(),this.setIndex(v),this.setAttribute("position",new R(p,3)),this.setAttribute("normal",new R(d,3)),this.setAttribute("uv",new R(m,2))}function In(t,e,n,i,r,a,o){W.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},this.fromBufferGeometry(new Nn(t,e,n,i,r,a)),this.mergeVertices()}function Nn(t,e,n,i,r,a){function o(t,e,n,i,r){var a=Math.cos(t),o=Math.sin(t),s=n/e*t,u=Math.cos(s);r.x=i*(2+u)*.5*a,r.y=i*(2+u)*o*.5,r.z=i*Math.sin(s)*.5}B.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:a},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,a=a||3;for(var s=[],u=[],l=[],h=[],f=new c,p=new c,d=new c,m=new c,v=new c,g=new c,y=new c,_=0;_<=n;++_){var x=_/n*r*Math.PI*2;o(x,r,a,t,d),o(x+.01,r,a,t,m),g.subVectors(m,d),y.addVectors(m,d),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize();for(var b=0;b<=i;++b){var w=b/i*Math.PI*2,M=-e*Math.cos(w),S=e*Math.sin(w);f.x=d.x+(M*y.x+S*v.x),f.y=d.y+(M*y.y+S*v.y),f.z=d.z+(M*y.z+S*v.z),u.push(f.x,f.y,f.z),p.subVectors(f,d).normalize(),l.push(p.x,p.y,p.z),h.push(_/n),h.push(b/i)}}for(var A=1;A<=n;A++)for(var T=1;T<=i;T++){var P=(i+1)*(A-1)+(T-1),L=(i+1)*A+(T-1),E=(i+1)*A+T,O=(i+1)*(A-1)+T;s.push(P,L,O),s.push(L,E,O)}this.setIndex(s),this.setAttribute("position",new R(u,3)),this.setAttribute("normal",new R(l,3)),this.setAttribute("uv",new R(h,2))}function Dn(t,e,n,i,r){W.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Rn(t,e,n,i,r)),this.mergeVertices()}function Rn(t,e,n,i,r){B.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;for(var a=[],o=[],s=[],u=[],l=new c,h=new c,f=new c,p=0;p<=n;p++)for(var d=0;d<=i;d++){var m=d/i*r,v=p/n*Math.PI*2;h.x=(t+e*Math.cos(v))*Math.cos(m),h.y=(t+e*Math.cos(v))*Math.sin(m),h.z=e*Math.sin(v),o.push(h.x,h.y,h.z),l.x=t*Math.cos(m),l.y=t*Math.sin(m),f.subVectors(h,l).normalize(),s.push(f.x,f.y,f.z),u.push(d/i),u.push(p/n)}for(var g=1;g<=n;g++)for(var y=1;y<=i;y++){var _=(i+1)*g+y-1,x=(i+1)*(g-1)+y-1,b=(i+1)*(g-1)+y,w=(i+1)*g+y;a.push(_,x,w),a.push(x,b,w)}this.setIndex(a),this.setAttribute("position",new R(o,3)),this.setAttribute("normal",new R(s,3)),this.setAttribute("uv",new R(u,2))}function kn(t,e,n,i,r){var a,o;if(r===function(t,e,n,i){for(var r=0,a=e,o=n-i;a<n;a+=i)r+=(t[o]-t[a])*(t[a+1]+t[o+1]),o=a;return r}(t,e,n,i)>0)for(a=e;a<n;a+=i)o=ri(a,t[a],t[a+1],o);else for(a=n-i;a>=e;a-=i)o=ri(a,t[a],t[a+1],o);return o&&$n(o,o.next)&&(ai(o),o=o.next),o}function zn(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!$n(i,i.next)&&0!==Jn(i.prev,i,i.next))i=i.next;else{if(ai(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Un(t,e,n,i,r,a,o){if(t){!o&&a&&function(t,e,n,i){var r=t;do{null===r.z&&(r.z=Yn(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,a,o,s,u,c=1;do{for(n=t,t=null,a=null,o=0;n;){for(o++,i=n,s=0,e=0;e<c&&(s++,i=i.nextZ);e++);for(u=c;s>0||u>0&&i;)0!==s&&(0===u||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,u--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,c*=2}while(o>1)}(r)}(t,i,r,a);for(var s,u,c=t;t.prev!==t.next;)if(s=t.prev,u=t.next,a?jn(t,i,r,a):Bn(t))e.push(s.i/n),e.push(t.i/n),e.push(u.i/n),ai(t),t=u.next,c=u.next;else if((t=u)===c){o?1===o?Un(t=Gn(zn(t),e,n),e,n,i,r,a,2):2===o&&Vn(t,e,n,i,r,a):Un(zn(t),e,n,i,r,a,1);break}}}function Bn(t){var e=t.prev,n=t,i=t.next;if(Jn(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Qn(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Jn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function jn(t,e,n,i){var r=t.prev,a=t,o=t.next;if(Jn(r,a,o)>=0)return!1;for(var s=r.x<a.x?r.x<o.x?r.x:o.x:a.x<o.x?a.x:o.x,u=r.y<a.y?r.y<o.y?r.y:o.y:a.y<o.y?a.y:o.y,c=r.x>a.x?r.x>o.x?r.x:o.x:a.x>o.x?a.x:o.x,l=r.y>a.y?r.y>o.y?r.y:o.y:a.y>o.y?a.y:o.y,h=Yn(s,u,e,n,i),f=Yn(c,l,e,n,i),p=t.prevZ,d=t.nextZ;p&&p.z>=h&&d&&d.z<=f;){if(p!==t.prev&&p!==t.next&&Qn(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Jn(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,d!==t.prev&&d!==t.next&&Qn(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Jn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&Qn(r.x,r.y,a.x,a.y,o.x,o.y,p.x,p.y)&&Jn(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;d&&d.z<=f;){if(d!==t.prev&&d!==t.next&&Qn(r.x,r.y,a.x,a.y,o.x,o.y,d.x,d.y)&&Jn(d.prev,d,d.next)>=0)return!1;d=d.nextZ}return!0}function Gn(t,e,n){var i=t;do{var r=i.prev,a=i.next.next;!$n(r,a)&&Kn(r,i,i.next,a)&&ni(r,a)&&ni(a,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(a.i/n),ai(i),ai(i.next),i=t=a),i=i.next}while(i!==t);return zn(i)}function Vn(t,e,n,i,r,a){var o=t;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Zn(o,s)){var u=ii(o,s);return o=zn(o,o.next),u=zn(u,u.next),Un(o,e,n,i,r,a),void Un(u,e,n,i,r,a)}s=s.next}o=o.next}while(o!==t)}function Wn(t,e){return t.x-e.x}function Hn(t,e){if(e=function(t,e){var n,i=e,r=t.x,a=t.y,o=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var s=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>o){if(o=s,s===r){if(a===i.y)return i;if(a===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===o)return n;var u,c=n,l=n.x,h=n.y,f=1/0;i=n;do{r>=i.x&&i.x>=l&&r!==i.x&&Qn(a<h?r:o,a,l,h,a<h?o:r,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(r-i.x),ni(i,t)&&(u<f||u===f&&(i.x>n.x||i.x===n.x&&Xn(n,i)))&&(n=i,f=u)),i=i.next}while(i!==c);return n}(t,e)){var n=ii(e,t);zn(e,e.next),zn(n,n.next)}}function Xn(t,e){return Jn(t.prev,t,e.prev)<0&&Jn(e.next,t,t.next)<0}function Yn(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-n)*r)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*r)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function qn(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function Qn(t,e,n,i,r,a,o,s){return(r-o)*(e-s)-(t-o)*(a-s)>=0&&(t-o)*(i-s)-(n-o)*(e-s)>=0&&(n-o)*(a-s)-(r-o)*(i-s)>=0}function Zn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Kn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(ni(t,e)&&ni(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(Jn(t.prev,t,e.prev)||Jn(t,e.prev,e))||$n(t,e)&&Jn(t.prev,t,t.next)>0&&Jn(e.prev,e,e.next)>0)}function Jn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function $n(t,e){return t.x===e.x&&t.y===e.y}function Kn(t,e,n,i){var r=ei(Jn(t,e,n)),a=ei(Jn(t,e,i)),o=ei(Jn(n,i,t)),s=ei(Jn(n,i,e));return r!==a&&o!==s||!(0!==r||!ti(t,n,e))||!(0!==a||!ti(t,i,e))||!(0!==o||!ti(n,t,i))||!(0!==s||!ti(n,e,i))}function ti(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function ei(t){return t>0?1:t<0?-1:0}function ni(t,e){return Jn(t.prev,t,t.next)<0?Jn(t,e,t.next)>=0&&Jn(t,t.prev,e)>=0:Jn(t,e,t.prev)<0||Jn(t,t.next,e)<0}function ii(t,e){var n=new oi(t.i,t.x,t.y),i=new oi(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function ri(t,e,n,i){var r=new oi(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ai(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function oi(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function si(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function ui(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function ci(t,e){W.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new li(t,e)),this.mergeVertices()}function li(t,e){function i(t){function i(t,e,n){return e.clone().multiplyScalar(n).add(t)}function s(t,e,i){var r,a,o,s=t.x-e.x,u=t.y-e.y,c=i.x-t.x,l=i.y-t.y,h=s*s+u*u,f=s*l-u*c;if(Math.abs(f)>Number.EPSILON){var p=Math.sqrt(h),d=Math.sqrt(c*c+l*l),m=e.x-u/p,v=e.y+s/p,g=((i.x-l/d-m)*l-(i.y+c/d-v)*c)/(s*l-u*c),y=(r=m+s*g-t.x)*r+(a=v+u*g-t.y)*a;if(y<=2)return new n(r,a);o=Math.sqrt(y/2)}else{var _=!1;s>Number.EPSILON?c>Number.EPSILON&&(_=!0):s<-Number.EPSILON?c<-Number.EPSILON&&(_=!0):Math.sign(u)===Math.sign(l)&&(_=!0),_?(r=-u,a=s,o=Math.sqrt(h)):(r=s,a=u,o=Math.sqrt(h/2))}return new n(r/o,a/o)}function u(t,e){for(var n=t.length;--n>=0;){var i=n,r=n-1;r<0&&(r=t.length-1);for(var a=0,o=g+2*M;a<o;a++){var s=V*a,u=V*(a+1);f(e+i+s,e+r+s,e+r+u,e+i+u)}}}function l(t,e,n){m.push(t),m.push(e),m.push(n)}function h(t,e,n){p(t),p(e),p(n);var i=a.length/3,o=A.generateTopUV(r,a,i-3,i-2,i-1);d(o[0]),d(o[1]),d(o[2])}function f(t,e,n,i){p(t),p(e),p(i),p(e),p(n),p(i);var o=a.length/3,s=A.generateSideWallUV(r,a,o-6,o-3,o-2,o-1);d(s[0]),d(s[1]),d(s[3]),d(s[1]),d(s[2]),d(s[3])}function p(t){a.push(m[3*t+0]),a.push(m[3*t+1]),a.push(m[3*t+2])}function d(t){o.push(t.x),o.push(t.y)}var m=[],v=void 0!==e.curveSegments?e.curveSegments:12,g=void 0!==e.steps?e.steps:1,y=void 0!==e.depth?e.depth:100,_=void 0===e.bevelEnabled||e.bevelEnabled,x=void 0!==e.bevelThickness?e.bevelThickness:6,b=void 0!==e.bevelSize?e.bevelSize:x-2,w=void 0!==e.bevelOffset?e.bevelOffset:0,M=void 0!==e.bevelSegments?e.bevelSegments:3,S=e.extrudePath,A=void 0!==e.UVGenerator?e.UVGenerator:Nh;void 0!==e.amount&&(y=e.amount);var T,P,L,E,O,C=!1;S&&(T=S.getSpacedPoints(g),C=!0,_=!1,P=S.computeFrenetFrames(g,!1),L=new c,E=new c,O=new c),_||(M=0,x=0,b=0,w=0);var F=t.extractPoints(v),I=F.shape,N=F.holes;if(!Ih.isClockWise(I)){I=I.reverse();for(var D=0,R=N.length;D<R;D++){var k=N[D];Ih.isClockWise(k)&&(N[D]=k.reverse())}}for(var z=Ih.triangulateShape(I,N),U=I,B=0,j=N.length;B<j;B++){var G=N[B];I=I.concat(G)}for(var V=I.length,W=z.length,H=[],X=0,Y=U.length,q=Y-1,Q=X+1;X<Y;X++,q++,Q++)q===Y&&(q=0),Q===Y&&(Q=0),H[X]=s(U[X],U[q],U[Q]);for(var Z,J=[],$=H.concat(),K=0,tt=N.length;K<tt;K++){var et=N[K];Z=[];for(var nt=0,it=et.length,rt=it-1,at=nt+1;nt<it;nt++,rt++,at++)rt===it&&(rt=0),at===it&&(at=0),Z[nt]=s(et[nt],et[rt],et[at]);J.push(Z),$=$.concat(Z)}for(var ot=0;ot<M;ot++){for(var st=ot/M,ut=x*Math.cos(st*Math.PI/2),ct=b*Math.sin(st*Math.PI/2)+w,lt=0,ht=U.length;lt<ht;lt++){var ft=i(U[lt],H[lt],ct);l(ft.x,ft.y,-ut)}for(var pt=0,dt=N.length;pt<dt;pt++){var mt=N[pt];Z=J[pt];for(var vt=0,gt=mt.length;vt<gt;vt++){var yt=i(mt[vt],Z[vt],ct);l(yt.x,yt.y,-ut)}}}for(var _t=b+w,xt=0;xt<V;xt++){var bt=_?i(I[xt],$[xt],_t):I[xt];C?(E.copy(P.normals[0]).multiplyScalar(bt.x),L.copy(P.binormals[0]).multiplyScalar(bt.y),O.copy(T[0]).add(E).add(L),l(O.x,O.y,O.z)):l(bt.x,bt.y,0)}for(var wt=1;wt<=g;wt++)for(var Mt=0;Mt<V;Mt++){var St=_?i(I[Mt],$[Mt],_t):I[Mt];C?(E.copy(P.normals[wt]).multiplyScalar(St.x),L.copy(P.binormals[wt]).multiplyScalar(St.y),O.copy(T[wt]).add(E).add(L),l(O.x,O.y,O.z)):l(St.x,St.y,y/g*wt)}for(var At=M-1;At>=0;At--){for(var Tt=At/M,Pt=x*Math.cos(Tt*Math.PI/2),Lt=b*Math.sin(Tt*Math.PI/2)+w,Et=0,Ot=U.length;Et<Ot;Et++){var Ct=i(U[Et],H[Et],Lt);l(Ct.x,Ct.y,y+Pt)}for(var Ft=0,It=N.length;Ft<It;Ft++){var Nt=N[Ft];Z=J[Ft];for(var Dt=0,Rt=Nt.length;Dt<Rt;Dt++){var kt=i(Nt[Dt],Z[Dt],Lt);C?l(kt.x,kt.y+T[g-1].y,T[g-1].x+Pt):l(kt.x,kt.y,y+Pt)}}}(function(){var t=a.length/3;if(_){for(var e=0,n=V*e,i=0;i<W;i++){var o=z[i];h(o[2]+n,o[1]+n,o[0]+n)}n=V*(e=g+2*M);for(var s=0;s<W;s++){var u=z[s];h(u[0]+n,u[1]+n,u[2]+n)}}else{for(var c=0;c<W;c++){var l=z[c];h(l[2],l[1],l[0])}for(var f=0;f<W;f++){var p=z[f];h(p[0]+V*g,p[1]+V*g,p[2]+V*g)}}r.addGroup(t,a.length/3-t,0)})(),function(){var t=a.length/3,e=0;u(U,e),e+=U.length;for(var n=0,i=N.length;n<i;n++){var o=N[n];u(o,e),e+=o.length}r.addGroup(t,a.length/3-t,1)}()}B.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var r=this,a=[],o=[],s=0,u=t.length;s<u;s++){i(t[s])}this.setAttribute("position",new R(a,3)),this.setAttribute("uv",new R(o,2)),this.computeVertexNormals()}function hi(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var a=t[i];n.shapes.push(a.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function fi(t,e){W.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new pi(t,e)),this.mergeVertices()}function pi(t,e){var n=(e=e||{}).font;if(!n||!n.isFont)return new W;var i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),li.call(this,i,e),this.type="TextBufferGeometry"}function di(t,e,n,i,r,a,o){W.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},this.fromBufferGeometry(new mi(t,e,n,i,r,a,o)),this.mergeVertices()}function mi(t,e,n,i,r,a,o){B.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:a,thetaLength:o},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,o=void 0!==o?o:Math.PI;for(var s=Math.min(a+o,Math.PI),u=0,l=[],h=new c,f=new c,p=[],d=[],m=[],v=[],g=0;g<=n;g++){var y=[],_=g/n,x=0;0==g&&0==a?x=.5/e:g==n&&s==Math.PI&&(x=-.5/e);for(var b=0;b<=e;b++){var w=b/e;h.x=-t*Math.cos(i+w*r)*Math.sin(a+_*o),h.y=t*Math.cos(a+_*o),h.z=t*Math.sin(i+w*r)*Math.sin(a+_*o),d.push(h.x,h.y,h.z),f.copy(h).normalize(),m.push(f.x,f.y,f.z),v.push(w+x,1-_),y.push(u++)}l.push(y)}for(var M=0;M<n;M++)for(var S=0;S<e;S++){var A=l[M][S+1],T=l[M][S],P=l[M+1][S],L=l[M+1][S+1];(0!==M||a>0)&&p.push(A,T,L),(M!==n-1||s<Math.PI)&&p.push(T,P,L)}this.setIndex(p),this.setAttribute("position",new R(d,3)),this.setAttribute("normal",new R(m,3)),this.setAttribute("uv",new R(v,2))}function vi(t,e,n,i,r,a){W.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:a},this.fromBufferGeometry(new gi(t,e,n,i,r,a)),this.mergeVertices()}function gi(t,e,i,r,a,o){B.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:i,phiSegments:r,thetaStart:a,thetaLength:o},t=t||.5,e=e||1,a=void 0!==a?a:0,o=void 0!==o?o:2*Math.PI,i=void 0!==i?Math.max(3,i):8;for(var s=[],u=[],l=[],h=[],f=t,p=(e-t)/(r=void 0!==r?Math.max(1,r):1),d=new c,m=new n,v=0;v<=r;v++){for(var g=0;g<=i;g++){var y=a+g/i*o;d.x=f*Math.cos(y),d.y=f*Math.sin(y),u.push(d.x,d.y,d.z),l.push(0,0,1),m.x=(d.x/e+1)/2,m.y=(d.y/e+1)/2,h.push(m.x,m.y)}f+=p}for(var _=0;_<r;_++)for(var x=_*(i+1),b=0;b<i;b++){var w=b+x,M=w,S=w+i+1,A=w+i+2,T=w+1;s.push(M,S,T),s.push(S,A,T)}this.setIndex(s),this.setAttribute("position",new R(u,3)),this.setAttribute("normal",new R(l,3)),this.setAttribute("uv",new R(h,2))}function yi(t,e,n,i){W.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new _i(t,e,n,i)),this.mergeVertices()}function _i(t,e,i,r){B.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:i,phiLength:r},e=Math.floor(e)||12,i=i||0,r=r||2*Math.PI,r=zu.clamp(r,0,2*Math.PI);for(var a=[],o=[],s=[],u=1/e,l=new c,h=new n,f=0;f<=e;f++)for(var p=i+f*u*r,d=Math.sin(p),m=Math.cos(p),v=0;v<=t.length-1;v++)l.x=t[v].x*d,l.y=t[v].y,l.z=t[v].x*m,o.push(l.x,l.y,l.z),h.x=f/e,h.y=v/(t.length-1),s.push(h.x,h.y);for(var g=0;g<e;g++)for(var y=0;y<t.length-1;y++){var _=y+g*t.length,x=_,b=_+t.length,w=_+t.length+1,M=_+1;a.push(x,b,M),a.push(b,w,M)}if(this.setIndex(a),this.setAttribute("position",new R(o,3)),this.setAttribute("uv",new R(s,2)),this.computeVertexNormals(),r===2*Math.PI)for(var S=this.attributes.normal.array,A=new c,T=new c,P=new c,L=e*t.length*3,E=0,O=0;E<t.length;E++,O+=3)A.x=S[O+0],A.y=S[O+1],A.z=S[O+2],T.x=S[L+O+0],T.y=S[L+O+1],T.z=S[L+O+2],P.addVectors(A,T).normalize(),S[O+0]=S[L+O+0]=P.x,S[O+1]=S[L+O+1]=P.y,S[O+2]=S[L+O+2]=P.z}function xi(t,e){W.call(this),this.type="ShapeGeometry","object"==typeof e&&(e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new bi(t,e)),this.mergeVertices()}function bi(t,e){function n(t){var n=r.length/3,s=t.extractPoints(e),c=s.shape,l=s.holes;!1===Ih.isClockWise(c)&&(c=c.reverse());for(var h=0,f=l.length;h<f;h++){var p=l[h];!0===Ih.isClockWise(p)&&(l[h]=p.reverse())}for(var d=Ih.triangulateShape(c,l),m=0,v=l.length;m<v;m++){var g=l[m];c=c.concat(g)}for(var y=0,_=c.length;y<_;y++){var x=c[y];r.push(x.x,x.y,0),a.push(0,0,1),o.push(x.x,x.y)}for(var b=0,w=d.length;b<w;b++){var M=d[b],S=M[0]+n,A=M[1]+n,T=M[2]+n;i.push(S,A,T),u+=3}}B.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var i=[],r=[],a=[],o=[],s=0,u=0;if(!1===Array.isArray(t))n(t);else for(var c=0;c<t.length;c++)n(t[c]),this.addGroup(s,u,c),s+=u,u=0;this.setIndex(i),this.setAttribute("position",new R(r,3)),this.setAttribute("normal",new R(a,3)),this.setAttribute("uv",new R(o,2))}function wi(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}function Mi(t,e){B.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,i,r,a,o=[],s=Math.cos(zu.DEG2RAD*e),u=[0,0],c={},l=["a","b","c"];t.isBufferGeometry?(a=new W).fromBufferGeometry(t):a=t.clone(),a.mergeVertices(),a.computeFaceNormals();for(var h=a.vertices,f=a.faces,p=0,d=f.length;p<d;p++)for(var m=f[p],v=0;v<3;v++)n=m[l[v]],i=m[l[(v+1)%3]],u[0]=Math.min(n,i),u[1]=Math.max(n,i),void 0===c[r=u[0]+","+u[1]]?c[r]={index1:u[0],index2:u[1],face1:p,face2:void 0}:c[r].face2=p;for(r in c){var g=c[r];if(void 0===g.face2||f[g.face1].normal.dot(f[g.face2].normal)<=s){var y=h[g.index1];o.push(y.x,y.y,y.z),y=h[g.index2],o.push(y.x,y.y,y.z)}}this.setAttribute("position",new R(o,3))}function Si(t,e,n,i,r,a,o,s){W.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:a,thetaStart:o,thetaLength:s},this.fromBufferGeometry(new Ai(t,e,n,i,r,a,o,s)),this.mergeVertices()}function Ai(t,e,i,r,a,o,s,u){function l(i){var a,o,l=new n,g=new c,x=0,b=!0===i?t:e,w=!0===i?1:-1;a=v;for(var M=1;M<=r;M++)p.push(0,y*w,0),d.push(0,w,0),m.push(.5,.5),v++;o=v;for(var S=0;S<=r;S++){var A=S/r*u+s,T=Math.cos(A),P=Math.sin(A);g.x=b*P,g.y=y*w,g.z=b*T,p.push(g.x,g.y,g.z),d.push(0,w,0),l.x=.5*T+.5,l.y=.5*P*w+.5,m.push(l.x,l.y),v++}for(var L=0;L<r;L++){var E=a+L,O=o+L;!0===i?f.push(O,O+1,E):f.push(O+1,O,E),x+=3}h.addGroup(_,x,!0===i?1:2),_+=x}B.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:i,radialSegments:r,heightSegments:a,openEnded:o,thetaStart:s,thetaLength:u};var h=this;t=void 0!==t?t:1,e=void 0!==e?e:1,i=i||1,r=Math.floor(r)||8,a=Math.floor(a)||1,o=void 0!==o&&o,s=void 0!==s?s:0,u=void 0!==u?u:2*Math.PI;var f=[],p=[],d=[],m=[],v=0,g=[],y=i/2,_=0;(function(){for(var n=new c,o=new c,l=0,x=(e-t)/i,b=0;b<=a;b++){for(var w=[],M=b/a,S=M*(e-t)+t,A=0;A<=r;A++){var T=A/r,P=T*u+s,L=Math.sin(P),E=Math.cos(P);o.x=S*L,o.y=-M*i+y,o.z=S*E,p.push(o.x,o.y,o.z),n.set(L,x,E).normalize(),d.push(n.x,n.y,n.z),m.push(T,1-M),w.push(v++)}g.push(w)}for(var O=0;O<r;O++)for(var C=0;C<a;C++){var F=g[C][O],I=g[C+1][O],N=g[C+1][O+1],D=g[C][O+1];f.push(F,I,D),f.push(I,N,D),l+=6}h.addGroup(_,l,0),_+=l})(),!1===o&&(t>0&&l(!0),e>0&&l(!1)),this.setIndex(f),this.setAttribute("position",new R(p,3)),this.setAttribute("normal",new R(d,3)),this.setAttribute("uv",new R(m,2))}function Ti(t,e,n,i,r,a,o){Si.call(this,0,t,e,n,i,r,a,o),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function Pi(t,e,n,i,r,a,o){Ai.call(this,0,t,e,n,i,r,a,o),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:a,thetaLength:o}}function Li(t,e,n,i){W.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Ei(t,e,n,i)),this.mergeVertices()}function Ei(t,e,i,r){B.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:r},t=t||1,e=void 0!==e?Math.max(3,e):8,i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI;var a=[],o=[],s=[],u=[],l=new c,h=new n;o.push(0,0,0),s.push(0,0,1),u.push(.5,.5);for(var f=0,p=3;f<=e;f++,p+=3){var d=i+f/e*r;l.x=t*Math.cos(d),l.y=t*Math.sin(d),o.push(l.x,l.y,l.z),s.push(0,0,1),h.x=(o[p]/t+1)/2,h.y=(o[p+1]/t+1)/2,u.push(h.x,h.y)}for(var m=1;m<=e;m++)a.push(m,m+1,0);this.setIndex(a),this.setAttribute("position",new R(o,3)),this.setAttribute("normal",new R(s,3)),this.setAttribute("uv",new R(u,2))}function Oi(t){T.call(this),this.type="ShadowMaterial",this.color=new b(0),this.transparent=!0,this.setValues(t)}function Ci(t){Q.call(this,t),this.type="RawShaderMaterial"}function Fi(t){T.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new b(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eu,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function Ii(t){Fi.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new n(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function Ni(t){T.call(this),this.type="MeshPhongMaterial",this.color=new b(16777215),this.specular=new b(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eu,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Oo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Di(t){T.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new b(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eu,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ri(t){T.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eu,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ki(t){T.call(this),this.type="MeshLambertMaterial",this.color=new b(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new b(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Oo,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function zi(t){T.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new b(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Eu,this.normalScale=new n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ui(t){sn.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function Bi(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function ji(t,e,n,i){Bi.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Gi(t,e,n,i){Bi.call(this,t,e,n,i)}function Vi(t,e,n,i){Bi.call(this,t,e,n,i)}function Wi(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=kh.convertArray(e,this.TimeBufferType),this.values=kh.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Hi(t,e,n){Wi.call(this,t,e,n)}function Xi(t,e,n,i){Wi.call(this,t,e,n,i)}function Yi(t,e,n,i){Wi.call(this,t,e,n,i)}function qi(t,e,n,i){Bi.call(this,t,e,n,i)}function Qi(t,e,n,i){Wi.call(this,t,e,n,i)}function Zi(t,e,n,i){Wi.call(this,t,e,n,i)}function Ji(t,e,n,i){Wi.call(this,t,e,n,i)}function $i(t,e,n,i){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.blendMode=void 0!==i?i:yu,this.uuid=zu.generateUUID(),this.duration<0&&this.resetDuration()}function Ki(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=function(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Yi;case"vector":case"vector2":case"vector3":case"vector4":return Ji;case"color":return Xi;case"quaternion":return Qi;case"bool":case"boolean":return Hi;case"string":return Zi}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}(t.type);if(void 0===t.times){var n=[],i=[];kh.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}function tr(t,e,n){var i=this,r=!1,a=0,o=0,s=void 0,u=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){o++,!1===r&&void 0!==i.onStart&&i.onStart(t,a,o),r=!0},this.itemEnd=function(t){a++,void 0!==i.onProgress&&i.onProgress(t,a,o),a===o&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return u.push(t,e),this},this.removeHandler=function(t){var e=u.indexOf(t);return-1!==e&&u.splice(e,2),this},this.getHandler=function(t){for(var e=0,n=u.length;e<n;e+=2){var i=u[e],r=u[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null}}function er(t){this.manager=void 0!==t?t:Uh,this.crossOrigin="anonymous",this.path="",this.resourcePath="",this.requestHeader={}}function nr(t){er.call(this,t)}function ir(t){er.call(this,t)}function rr(t){er.call(this,t)}function ar(t){er.call(this,t)}function or(t){er.call(this,t)}function sr(t){er.call(this,t)}function ur(t){er.call(this,t)}function cr(){this.type="Curve",this.arcLengthDivisions=200}function lr(t,e,n,i,r,a,o,s){cr.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=a||2*Math.PI,this.aClockwise=o||!1,this.aRotation=s||0}function hr(t,e,n,i,r,a){lr.call(this,t,e,n,n,i,r,a),this.type="ArcCurve"}function fr(){function t(t,a,o,s){e=t,n=o,i=-3*t+3*a-2*o-s,r=2*t-2*a+o+s}var e=0,n=0,i=0,r=0;return{initCatmullRom:function(e,n,i,r,a){t(n,i,a*(i-e),a*(r-n))},initNonuniformCatmullRom:function(e,n,i,r,a,o,s){var u=(n-e)/a-(i-e)/(a+o)+(i-n)/o,c=(i-n)/o-(r-n)/(o+s)+(r-i)/s;t(n,i,u*=o,c*=o)},calc:function(t){var a=t*t;return e+n*t+i*a+r*(a*t)}}}function pr(t,e,n,i){cr.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=void 0!==i?i:.5}function dr(t,e,n,i,r){var a=.5*(i-e),o=.5*(r-n),s=t*t;return(2*n-2*i+a+o)*(t*s)+(-3*n+3*i-2*a-o)*s+a*t+n}function mr(t,e,n,i){return function(t,e){var n=1-t;return n*n*e}(t,e)+function(t,e){return 2*(1-t)*t*e}(t,n)+function(t,e){return t*t*e}(t,i)}function vr(t,e,n,i,r){return function(t,e){var n=1-t;return n*n*n*e}(t,e)+function(t,e){var n=1-t;return 3*n*n*t*e}(t,n)+function(t,e){return 3*(1-t)*t*t*e}(t,i)+function(t,e){return t*t*t*e}(t,r)}function gr(t,e,i,r){cr.call(this),this.type="CubicBezierCurve",this.v0=t||new n,this.v1=e||new n,this.v2=i||new n,this.v3=r||new n}function yr(t,e,n,i){cr.call(this),this.type="CubicBezierCurve3",this.v0=t||new c,this.v1=e||new c,this.v2=n||new c,this.v3=i||new c}function _r(t,e){cr.call(this),this.type="LineCurve",this.v1=t||new n,this.v2=e||new n}function xr(t,e){cr.call(this),this.type="LineCurve3",this.v1=t||new c,this.v2=e||new c}function br(t,e,i){cr.call(this),this.type="QuadraticBezierCurve",this.v0=t||new n,this.v1=e||new n,this.v2=i||new n}function wr(t,e,n){cr.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new c,this.v1=e||new c,this.v2=n||new c}function Mr(t){cr.call(this),this.type="SplineCurve",this.points=t||[]}function Sr(){cr.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Ar(t){Sr.call(this),this.type="Path",this.currentPoint=new n,t&&this.setFromPoints(t)}function Tr(t){Ar.call(this,t),this.uuid=zu.generateUUID(),this.type="Shape",this.holes=[]}function Pr(t,e){p.call(this),this.type="Light",this.color=new b(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Lr(t,e,n){Pr.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(p.DefaultUp),this.updateMatrix(),this.groundColor=new b(e)}function Er(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new n(512,512),this.map=null,this.mapPass=null,this.matrix=new l,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new et,this._frameExtents=new n(1,1),this._viewportCount=1,this._viewports=[new a(0,0,1,1)]}function Or(){Er.call(this,new J(50,1,.5,500))}function Cr(t,e,n,i,r,a){Pr.call(this,t,e),this.type="SpotLight",this.position.copy(p.DefaultUp),this.updateMatrix(),this.target=new p,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==a?a:1,this.shadow=new Or}function Fr(){Er.call(this,new J(90,1,.5,500)),this._frameExtents=new n(4,2),this._viewportCount=6,this._viewports=[new a(2,1,1,1),new a(0,1,1,1),new a(3,1,1,1),new a(1,1,1,1),new a(3,0,1,1),new a(1,0,1,1)],this._cubeDirections=[new c(1,0,0),new c(-1,0,0),new c(0,0,1),new c(0,0,-1),new c(0,1,0),new c(0,-1,0)],this._cubeUps=[new c(0,1,0),new c(0,1,0),new c(0,1,0),new c(0,1,0),new c(0,0,1),new c(0,0,-1)]}function Ir(t,e,n,i){Pr.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Fr}function Nr(t,e,n,i,r,a){Z.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==a?a:2e3,this.updateProjectionMatrix()}function Dr(){Er.call(this,new Nr(-5,5,5,-5,.5,500))}function Rr(t,e){Pr.call(this,t,e),this.type="DirectionalLight",this.position.copy(p.DefaultUp),this.updateMatrix(),this.target=new p,this.shadow=new Dr}function kr(t,e){Pr.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function zr(t,e,n,i){Pr.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function Ur(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new c)}function Br(t,e){Pr.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new Ur}function jr(t){er.call(this,t),this.textures={}}function Gr(){B.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function Vr(t,e,n,i){"number"==typeof n&&(i=n,n=!1),L.call(this,t,e,n),this.meshPerAttribute=i||1}function Wr(t){er.call(this,t)}function Hr(t){er.call(this,t)}function Xr(t){er.call(this,t),this.options={premultiplyAlpha:"none"}}function Yr(){this.type="ShapePath",this.color=new b,this.subPaths=[],this.currentPath=null}function qr(t){this.type="Font",this.data=t}function Qr(t,e,n,i,r){var a=r.glyphs[t]||r.glyphs["?"];if(a){var o,s,u,c,l,h,f,p,d=new Yr;if(a.o)for(var m=a._cachedOutline||(a._cachedOutline=a.o.split(" ")),v=0,g=m.length;v<g;){switch(m[v++]){case"m":o=m[v++]*e+n,s=m[v++]*e+i,d.moveTo(o,s);break;case"l":o=m[v++]*e+n,s=m[v++]*e+i,d.lineTo(o,s);break;case"q":u=m[v++]*e+n,c=m[v++]*e+i,l=m[v++]*e+n,h=m[v++]*e+i,d.quadraticCurveTo(l,h,u,c);break;case"b":u=m[v++]*e+n,c=m[v++]*e+i,l=m[v++]*e+n,h=m[v++]*e+i,f=m[v++]*e+n,p=m[v++]*e+i,d.bezierCurveTo(l,h,f,p,u,c)}}return{offsetX:a.ha*e,path:d}}}function Zr(t){er.call(this,t)}function Jr(t){er.call(this,t)}function $r(t,e,n){Br.call(this,void 0,n);var i=(new b).set(t),r=(new b).set(e),a=new c(i.r,i.g,i.b),o=new c(r.r,r.g,r.b),s=Math.sqrt(Math.PI),u=s*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(o).multiplyScalar(s),this.sh.coefficients[1].copy(a).sub(o).multiplyScalar(u)}function Kr(t,e){Br.call(this,void 0,e);var n=(new b).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}function ta(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new J,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new J,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}function ea(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function na(){p.call(this),this.type="AudioListener",this.context=$h.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new ea}function ia(t){p.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this._startedAt=0,this._progress=0,this.filters=[]}function ra(t){ia.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function aa(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function oa(t,e,n){var i,r,a;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}function sa(t,e,n){var i=n||ua.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function ua(t,e,n){this.path=e,this.parsedPath=n||ua.parseTrackName(e),this.node=ua.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function ca(){this.uuid=zu.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function la(t,e,n,i){this._mixer=t,this._clip=e,this._localRoot=n||null,this.blendMode=i||e.blendMode;for(var r=e.tracks,a=r.length,o=new Array(a),s={endingStart:mu,endingEnd:mu},u=0;u!==a;++u){var c=r[u].createInterpolant(null);o[u]=c,c.settings=s}this._interpolantSettings=s,this._interpolants=o,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=fu,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function ha(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function fa(t){"string"==typeof t&&(t=arguments[1]),this.value=t}function pa(t,e,n){Ze.call(this,t,e),this.meshPerAttribute=n||1}function da(t,e,n,i){this.ray=new y(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new f,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return this.Points}}})}function ma(t,e){return t.distance-e.distance}function va(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i)for(var r=t.children,a=0,o=r.length;a<o;a++)va(r[a],e,n,!0)}function ga(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function ya(t,e){this.min=void 0!==t?t:new n(1/0,1/0),this.max=void 0!==e?e:new n(-1/0,-1/0)}function _a(t,e){this.start=void 0!==t?t:new c,this.end=void 0!==e?e:new c}function xa(t){p.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}function ba(t,e){p.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new B,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,a=1;r<32;r++,a++){var o=r/32*Math.PI*2,s=a/32*Math.PI*2;i.push(Math.cos(o),Math.sin(o),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new R(i,3));var u=new sn({fog:!1,toneMapped:!1});this.cone=new cn(n,u),this.add(this.cone),this.update()}function wa(t){for(var e=function t(e){var n=[];e&&e.isBone&&n.push(e);for(var i=0;i<e.children.length;i++)n.push.apply(n,t(e.children[i]));return n}(t),n=new B,i=[],r=[],a=new b(0,0,1),o=new b(0,1,0),s=0;s<e.length;s++){var u=e[s];u.parent&&u.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(a.r,a.g,a.b),r.push(o.r,o.g,o.b))}n.setAttribute("position",new R(i,3)),n.setAttribute("color",new R(r,3));var c=new sn({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});cn.call(this,n,c),this.type="SkeletonHelper",this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Ma(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var i=new mi(e,4,2),r=new P({wireframe:!0,fog:!1,toneMapped:!1});j.call(this,i,r),this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Sa(t,e,n){p.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new Tn(e);i.rotateY(.5*Math.PI),this.material=new P({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);var r=i.getAttribute("position"),a=new Float32Array(3*r.count);i.setAttribute("color",new L(a,3)),this.add(new j(i,this.material)),this.update()}function Aa(t,e,n,i){t=t||10,e=e||10,n=new b(void 0!==n?n:4473924),i=new b(void 0!==i?i:8947848);for(var r=e/2,a=t/e,o=t/2,s=[],u=[],c=0,l=0,h=-o;c<=e;c++,h+=a){s.push(-o,0,h,o,0,h),s.push(h,0,-o,h,0,o);var f=c===r?n:i;f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3,f.toArray(u,l),l+=3}var p=new B;p.setAttribute("position",new R(s,3)),p.setAttribute("color",new R(u,3));var d=new sn({vertexColors:!0,toneMapped:!1});cn.call(this,p,d),this.type="GridHelper"}function Ta(t,e,n,i,r,a){t=t||10,e=e||16,n=n||8,i=i||64,r=new b(void 0!==r?r:4473924),a=new b(void 0!==a?a:8947848);for(var o=[],s=[],u=0;u<=e;u++){var c=u/e*(2*Math.PI),l=Math.sin(c)*t,h=Math.cos(c)*t;o.push(0,0,0),o.push(l,0,h);var f=1&u?r:a;s.push(f.r,f.g,f.b),s.push(f.r,f.g,f.b)}for(var p=0;p<=n;p++)for(var d=1&p?r:a,m=t-t/n*p,v=0;v<i;v++){var g=v/i*(2*Math.PI),y=Math.sin(g)*m,_=Math.cos(g)*m;o.push(y,0,_),s.push(d.r,d.g,d.b),g=(v+1)/i*(2*Math.PI),y=Math.sin(g)*m,_=Math.cos(g)*m,o.push(y,0,_),s.push(d.r,d.g,d.b)}var x=new B;x.setAttribute("position",new R(o,3)),x.setAttribute("color",new R(s,3));var w=new sn({vertexColors:!0,toneMapped:!1});cn.call(this,x,w),this.type="PolarGridHelper"}function Pa(t,e,n){p.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var i=new B;i.setAttribute("position",new R([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new sn({fog:!1,toneMapped:!1});this.lightPlane=new un(i,r),this.add(this.lightPlane),(i=new B).setAttribute("position",new R([0,0,0,0,0,1],3)),this.targetLine=new un(i,r),this.add(this.targetLine),this.update()}function La(t){function e(t,e,i){n(t,i),n(e,i)}function n(t,e){a.push(0,0,0),o.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(a.length/3-1)}var i=new B,r=new sn({color:16777215,vertexColors:!0,toneMapped:!1}),a=[],o=[],s={},u=new b(16755200),c=new b(16711680),l=new b(43775),h=new b(16777215),f=new b(3355443);e("n1","n2",u),e("n2","n4",u),e("n4","n3",u),e("n3","n1",u),e("f1","f2",u),e("f2","f4",u),e("f4","f3",u),e("f3","f1",u),e("n1","f1",u),e("n2","f2",u),e("n3","f3",u),e("n4","f4",u),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",l),e("u2","u3",l),e("u3","u1",l),e("c","t",h),e("p","c",f),e("cn1","cn2",f),e("cn3","cn4",f),e("cf1","cf2",f),e("cf3","cf4",f),i.setAttribute("position",new R(a,3)),i.setAttribute("color",new R(o,3)),cn.call(this,i,r),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function Ea(t,e,n,i,r,a,o){Nf.set(r,a,o).unproject(i);var s=e[t];if(void 0!==s)for(var u=n.getAttribute("position"),c=0,l=s.length;c<l;c++)u.setXYZ(s[c],Nf.x,Nf.y,Nf.z)}function Oa(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new B;r.setIndex(new L(n,1)),r.setAttribute("position",new L(i,3)),cn.call(this,r,new sn({color:e,toneMapped:!1})),this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}function Ca(t,e){this.type="Box3Helper",this.box=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new B;i.setIndex(new L(n,1)),i.setAttribute("position",new R([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),cn.call(this,i,new sn({color:e,toneMapped:!1})),this.type="Box3Helper",this.geometry.computeBoundingSphere()}function Fa(t,e,n){this.plane=t,this.size=void 0===e?1:e;var i=void 0!==n?n:16776960,r=new B;r.setAttribute("position",new R([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),r.computeBoundingSphere(),un.call(this,r,new sn({color:i,toneMapped:!1})),this.type="PlaneHelper";var a=new B;a.setAttribute("position",new R([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),a.computeBoundingSphere(),this.add(new j(a,new P({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}function Ia(t,e,n,i,r,a){p.call(this),this.type="ArrowHelper",void 0===t&&(t=new c(0,0,1)),void 0===e&&(e=new c(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===a&&(a=.2*r),void 0===kf&&((kf=new B).setAttribute("position",new R([0,0,0,0,1,0],3)),(zf=new Ai(0,.5,1,5,1)).translate(0,-.5,0)),this.position.copy(e),this.line=new un(kf,new sn({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new j(zf,new P({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,a)}function Na(t){var e=[0,0,0,t=t||1,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=new B;n.setAttribute("position",new R(e,3)),n.setAttribute("color",new R([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));var i=new sn({vertexColors:!0,toneMapped:!1});cn.call(this,n,i),this.type="AxesHelper"}function Da(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=function(t){var e=new Float32Array(t),n=new c(0,1,0);return new Ci({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:Xf[_u]},outputEncoding:{value:Xf[_u]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:Ka,depthTest:!1,depthWrite:!1})}(Hf),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}function Ra(t){return void 0!==t&&t.type===ts&&(t.encoding===_u||t.encoding===xu||t.encoding===bu)}function ka(t){var e=new o(3*Gf,3*Gf,t);return e.texture.mapping=Vo,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function za(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Ua(){return new Ci({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:new n(1,1)},inputEncoding:{value:Xf[_u]},outputEncoding:{value:Xf[_u]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:Ka,depthTest:!1,depthWrite:!1})}function Ba(){return new Ci({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:Xf[_u]},outputEncoding:{value:Xf[_u]}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t",blending:Ka,depthTest:!1,depthWrite:!1})}function ja(t){pr.call(this,t),this.type="catmullrom",this.closed=!0}function Ga(t){pr.call(this,t),this.type="catmullrom"}function Va(t){pr.call(this,t),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e});var Wa=0,Ha=1,Xa=2,Ya=1,qa=2,Qa=3,Za=0,Ja=1,$a=2,Ka=0,to=1,eo=2,no=3,io=4,ro=5,ao=100,oo=101,so=102,uo=103,co=104,lo=200,ho=201,fo=202,po=203,mo=204,vo=205,go=206,yo=207,_o=208,xo=209,bo=210,wo=0,Mo=1,So=2,Ao=3,To=4,Po=5,Lo=6,Eo=7,Oo=0,Co=1,Fo=2,Io=0,No=1,Do=2,Ro=3,ko=4,zo=5,Uo=301,Bo=302,jo=303,Go=304,Vo=306,Wo=307,Ho=1e3,Xo=1001,Yo=1002,qo=1003,Qo=1004,Zo=1005,Jo=1006,$o=1007,Ko=1008,ts=1009,es=1010,ns=1011,is=1012,rs=1013,as=1014,os=1015,ss=1016,us=1017,cs=1018,ls=1019,hs=1020,fs=1021,ps=1022,ds=1023,ms=1024,vs=1025,gs=ds,ys=1026,_s=1027,xs=1028,bs=1029,ws=1030,Ms=1031,Ss=1032,As=1033,Ts=33776,Ps=33777,Ls=33778,Es=33779,Os=35840,Cs=35841,Fs=35842,Is=35843,Ns=36196,Ds=37492,Rs=37496,ks=37808,zs=37809,Us=37810,Bs=37811,js=37812,Gs=37813,Vs=37814,Ws=37815,Hs=37816,Xs=37817,Ys=37818,qs=37819,Qs=37820,Zs=37821,Js=36492,$s=37840,Ks=37841,tu=37842,eu=37843,nu=37844,iu=37845,ru=37846,au=37847,ou=37848,su=37849,uu=37850,cu=37851,lu=37852,hu=37853,fu=2201,pu=2300,du=2301,mu=2400,vu=2401,gu=2402,yu=2500,_u=3e3,xu=3001,bu=3007,wu=3002,Mu=3003,Su=3004,Au=3005,Tu=3006,Pu=3200,Lu=3201,Eu=0,Ou=1,Cu=7680,Fu=519,Iu=35044,Nu=35048;Object.assign(e.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners[t];if(void 0!==n){var i=n.indexOf(e);-1!==i&&n.splice(i,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners[t.type];if(void 0!==e){t.target=this;for(var n=e.slice(0),i=0,r=n.length;i<r;i++)n[i].call(this,t)}}}});for(var Du=[],Ru=0;Ru<256;Ru++)Du[Ru]=(Ru<16?"0":"")+Ru.toString(16);var ku=1234567,zu={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){var t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(Du[255&t]+Du[t>>8&255]+Du[t>>16&255]+Du[t>>24&255]+"-"+Du[255&e]+Du[e>>8&255]+"-"+Du[e>>16&15|64]+Du[e>>24&255]+"-"+Du[63&n|128]+Du[n>>8&255]+"-"+Du[n>>16&255]+Du[n>>24&255]+Du[255&i]+Du[i>>8&255]+Du[i>>16&255]+Du[i>>24&255]).toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(ku=t%2147483647),((ku=16807*ku%2147483647)-1)/2147483646},degToRad:function(t){return t*zu.DEG2RAD},radToDeg:function(t){return t*zu.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){var a=Math.cos,o=Math.sin,s=a(n/2),u=o(n/2),c=a((e+i)/2),l=o((e+i)/2),h=a((e-i)/2),f=o((e-i)/2),p=a((i-e)/2),d=o((i-e)/2);switch(r){case"XYX":t.set(s*l,u*h,u*f,s*c);break;case"YZY":t.set(u*f,s*l,u*h,s*c);break;case"ZXZ":t.set(u*h,u*f,s*l,s*c);break;case"XZX":t.set(s*l,u*d,u*p,s*c);break;case"YXY":t.set(u*p,s*l,u*d,s*c);break;case"ZYZ":t.set(u*d,u*p,s*l,s*c)}}};Object.defineProperties(n.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(n.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){return Math.atan2(-this.y,-this.x)+Math.PI},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,a=this.y-t.y;return this.x=r*n-a*i+t.x,this.y=r*i+a*n+t.y,this},random:function(){return this.x=Math.random(),this.y=Math.random(),this}}),Object.assign(i.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,a,o,s,u){var c=this.elements;return c[0]=t,c[1]=i,c[2]=o,c[3]=e,c[4]=r,c[5]=s,c[6]=n,c[7]=a,c[8]=u,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},extractBasis:function(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[3],s=n[6],u=n[1],c=n[4],l=n[7],h=n[2],f=n[5],p=n[8],d=i[0],m=i[3],v=i[6],g=i[1],y=i[4],_=i[7],x=i[2],b=i[5],w=i[8];return r[0]=a*d+o*g+s*x,r[3]=a*m+o*y+s*b,r[6]=a*v+o*_+s*w,r[1]=u*d+c*g+l*x,r[4]=u*m+c*y+l*b,r[7]=u*v+c*_+l*w,r[2]=h*d+f*g+p*x,r[5]=h*m+f*y+p*b,r[8]=h*v+f*_+p*w,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],a=t[4],o=t[5],s=t[6],u=t[7],c=t[8];return e*a*c-e*o*u-n*r*c+n*o*s+i*r*u-i*a*s},getInverse:function(t,e){var n=t.elements,i=this.elements,r=n[0],a=n[1],o=n[2],s=n[3],u=n[4],c=n[5],l=n[6],h=n[7],f=n[8],p=f*u-c*h,d=c*l-f*s,m=h*s-u*l,v=r*p+a*d+o*m;if(0===v)return this.set(0,0,0,0,0,0,0,0,0);var g=1/v;return i[0]=p*g,i[1]=(o*h-f*a)*g,i[2]=(c*a-o*u)*g,i[3]=d*g,i[4]=(f*r-o*l)*g,i[5]=(o*s-c*r)*g,i[6]=m*g,i[7]=(a*l-h*r)*g,i[8]=(u*r-a*s)*g,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,a,o){var s=Math.cos(r),u=Math.sin(r);this.set(n*s,n*u,-n*(s*a+u*o)+a+t,-i*u,i*s,-i*(-u*a+s*o)+o+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],a=i[3],o=i[6],s=i[1],u=i[4],c=i[7];return i[0]=e*r+n*s,i[3]=e*a+n*u,i[6]=e*o+n*c,i[1]=-n*r+e*s,i[4]=-n*a+e*u,i[7]=-n*o+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Uu,Bu={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;var e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Uu&&(Uu=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Uu.width=t.width,Uu.height=t.height;var n=Uu.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Uu}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},ju=0;r.DEFAULT_IMAGE=void 0,r.DEFAULT_MAPPING=300,r.prototype=Object.assign(Object.create(e.prototype),{constructor:r,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=zu.generateUUID()),!e&&void 0===t.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var a=0,o=i.length;a<o;a++)r.push(Bu.getDataURL(i[a]))}else r=Bu.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Ho:t.x=t.x-Math.floor(t.x);break;case Xo:t.x=t.x<0?0:1;break;case Yo:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Ho:t.y=t.y-Math.floor(t.y);break;case Xo:t.y=t.y<0?0:1;break;case Yo:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(r.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.defineProperties(a.prototype,{width:{get:function(){return this.z},set:function(t){this.z=t}},height:{get:function(){return this.w},set:function(t){this.w=t}}}),Object.assign(a.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,a=t.elements;return this.x=a[0]*e+a[4]*n+a[8]*i+a[12]*r,this.y=a[1]*e+a[5]*n+a[9]*i+a[13]*r,this.z=a[2]*e+a[6]*n+a[10]*i+a[14]*r,this.w=a[3]*e+a[7]*n+a[11]*i+a[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,a=.01,o=t.elements,s=o[0],u=o[4],c=o[8],l=o[1],h=o[5],f=o[9],p=o[2],d=o[6],m=o[10];if(Math.abs(u-l)<a&&Math.abs(c-p)<a&&Math.abs(f-d)<a){if(Math.abs(u+l)<.1&&Math.abs(c+p)<.1&&Math.abs(f+d)<.1&&Math.abs(s+h+m-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var v=(s+1)/2,g=(h+1)/2,y=(m+1)/2,_=(u+l)/4,x=(c+p)/4,b=(f+d)/4;return v>g&&v>y?v<a?(n=0,i=.707106781,r=.707106781):(i=_/(n=Math.sqrt(v)),r=x/n):g>y?g<a?(n=.707106781,i=0,r=.707106781):(n=_/(i=Math.sqrt(g)),r=b/i):y<a?(n=.707106781,i=.707106781,r=0):(n=x/(r=Math.sqrt(y)),i=b/r),this.set(n,i,r,e),this}var w=Math.sqrt((d-f)*(d-f)+(c-p)*(c-p)+(l-u)*(l-u));return Math.abs(w)<.001&&(w=1),this.x=(d-f)/w,this.y=(c-p)/w,this.z=(l-u)/w,this.w=Math.acos((s+h+m-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}),o.prototype=Object.assign(Object.create(e.prototype),{constructor:o,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),s.prototype=Object.assign(Object.create(o.prototype),{constructor:s,isWebGLMultisampleRenderTarget:!0,copy:function(t){return o.prototype.copy.call(this,t),this.samples=t.samples,this}}),Object.assign(u,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,a,o){var s=n[i+0],u=n[i+1],c=n[i+2],l=n[i+3],h=r[a+0],f=r[a+1],p=r[a+2],d=r[a+3];if(l!==d||s!==h||u!==f||c!==p){var m=1-o,v=s*h+u*f+c*p+l*d,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var _=Math.sqrt(y),x=Math.atan2(_,v*g);m=Math.sin(m*x)/_,o=Math.sin(o*x)/_}var b=o*g;if(s=s*m+h*b,u=u*m+f*b,c=c*m+p*b,l=l*m+d*b,m===1-o){var w=1/Math.sqrt(s*s+u*u+c*c+l*l);s*=w,u*=w,c*=w,l*=w}}t[e]=s,t[e+1]=u,t[e+2]=c,t[e+3]=l},multiplyQuaternionsFlat:function(t,e,n,i,r,a){var o=n[i],s=n[i+1],u=n[i+2],c=n[i+3],l=r[a],h=r[a+1],f=r[a+2],p=r[a+3];return t[e]=o*p+c*l+s*f-u*h,t[e+1]=s*p+c*h+u*l-o*f,t[e+2]=u*p+c*f+o*h-s*l,t[e+3]=c*p-o*l-s*h-u*f,t}}),Object.defineProperties(u.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this._onChangeCallback()}}}),Object.assign(u.prototype,{isQuaternion:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,a=t.order,o=Math.cos,s=Math.sin,u=o(n/2),c=o(i/2),l=o(r/2),h=s(n/2),f=s(i/2),p=s(r/2);switch(a){case"XYZ":this._x=h*c*l+u*f*p,this._y=u*f*l-h*c*p,this._z=u*c*p+h*f*l,this._w=u*c*l-h*f*p;break;case"YXZ":this._x=h*c*l+u*f*p,this._y=u*f*l-h*c*p,this._z=u*c*p-h*f*l,this._w=u*c*l+h*f*p;break;case"ZXY":this._x=h*c*l-u*f*p,this._y=u*f*l+h*c*p,this._z=u*c*p+h*f*l,this._w=u*c*l-h*f*p;break;case"ZYX":this._x=h*c*l-u*f*p,this._y=u*f*l+h*c*p,this._z=u*c*p-h*f*l,this._w=u*c*l+h*f*p;break;case"YZX":this._x=h*c*l+u*f*p,this._y=u*f*l+h*c*p,this._z=u*c*p-h*f*l,this._w=u*c*l-h*f*p;break;case"XZY":this._x=h*c*l-u*f*p,this._y=u*f*l-h*c*p,this._z=u*c*p+h*f*l,this._w=u*c*l+h*f*p}return!1!==e&&this._onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this},setFromRotationMatrix:function(t){var e=t.elements,n=e[0],i=e[4],r=e[8],a=e[1],o=e[5],s=e[9],u=e[2],c=e[6],l=e[10],h=n+o+l;if(h>0){var f=.5/Math.sqrt(h+1);this._w=.25/f,this._x=(c-s)*f,this._y=(r-u)*f,this._z=(a-i)*f}else if(n>o&&n>l){var p=2*Math.sqrt(1+n-o-l);this._w=(c-s)/p,this._x=.25*p,this._y=(i+a)/p,this._z=(r+u)/p}else if(o>l){var d=2*Math.sqrt(1+o-n-l);this._w=(r-u)/d,this._x=(i+a)/d,this._y=.25*d,this._z=(s+c)/d}else{var m=2*Math.sqrt(1+l-n-o);this._w=(a-i)/m,this._x=(r+u)/m,this._y=(s+c)/m,this._z=.25*m}return this._onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(zu.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},identity:function(){return this.set(0,0,0,1)},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this},multiply:function(t,e){return void 0!==e?this.multiplyQuaternions(t,e):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,a=t._w,o=e._x,s=e._y,u=e._z,c=e._w;return this._x=n*c+a*o+i*u-r*s,this._y=i*c+a*s+r*o-n*u,this._z=r*c+a*u+n*s-i*o,this._w=a*c-n*o-i*s-r*u,this._onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,a=this._w,o=a*t._w+n*t._x+i*t._y+r*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=a,this._x=n,this._y=i,this._z=r,this;var s=1-o*o;if(s<=Number.EPSILON){var u=1-e;return this._w=u*a+e*this._w,this._x=u*n+e*this._x,this._y=u*i+e*this._y,this._z=u*r+e*this._z,this.normalize(),this._onChangeCallback(),this}var c=Math.sqrt(s),l=Math.atan2(c,o),h=Math.sin((1-e)*l)/c,f=Math.sin(e*l)/c;return this._w=a*h+this._w*f,this._x=n*h+this._x*f,this._y=i*h+this._y*f,this._z=r*h+this._z*f,this._onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},fromBufferAttribute:function(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}});var Gu=new c,Vu=new u;Object.assign(c.prototype,{isVector3:!0,set:function(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?this.addVectors(t,e):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?this.subVectors(t,e):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?this.multiplyVectors(t,e):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return!t||t.isEuler,this.applyQuaternion(Vu.setFromEuler(t))},applyAxisAngle:function(t,e){return this.applyQuaternion(Vu.setFromAxisAngle(t,e))},applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyNormalMatrix:function(t){return this.applyMatrix3(t).normalize()},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,a=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*a,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*a,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*a,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,a=t.y,o=t.z,s=t.w,u=s*e+a*i-o*n,c=s*n+o*e-r*i,l=s*i+r*n-a*e,h=-r*e-a*n-o*i;return this.x=u*s+h*-r+c*-o-l*-a,this.y=c*s+h*-a+l*-r-u*-o,this.z=l*s+h*-o+u*-a-c*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this},cross:function(t,e){return void 0!==e?this.crossVectors(t,e):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,a=e.x,o=e.y,s=e.z;return this.x=i*s-r*o,this.y=r*a-n*s,this.z=n*o-i*a,this},projectOnVector:function(t){var e=t.lengthSq();if(0===e)return this.set(0,0,0);var n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)},projectOnPlane:function(t){return Gu.copy(this).projectOnVector(t),this.sub(Gu)},reflect:function(t){return this.sub(Gu.copy(t).multiplyScalar(2*this.dot(t)))},angleTo:function(t){var e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;var n=this.dot(t)/e;return Math.acos(zu.clamp(n,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},setFromMatrix3Column:function(t,e){return this.fromArray(t.elements,3*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this},random:function(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}});var Wu=new c,Hu=new l,Xu=new c(0,0,0),Yu=new c(1,1,1),qu=new c,Qu=new c,Zu=new c;Object.assign(l.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,a,o,s,u,c,l,h,f,p,d,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=a,v[9]=o,v[13]=s,v[2]=u,v[6]=c,v[10]=l,v[14]=h,v[3]=f,v[7]=p,v[11]=d,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new l).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(t){var e=this.elements,n=t.elements,i=1/Wu.setFromMatrixColumn(t,0).length(),r=1/Wu.setFromMatrixColumn(t,1).length(),a=1/Wu.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*a,e[9]=n[9]*a,e[10]=n[10]*a,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromEuler:function(t){!t||t.isEuler;var e=this.elements,n=t.x,i=t.y,r=t.z,a=Math.cos(n),o=Math.sin(n),s=Math.cos(i),u=Math.sin(i),c=Math.cos(r),l=Math.sin(r);if("XYZ"===t.order){var h=a*c,f=a*l,p=o*c,d=o*l;e[0]=s*c,e[4]=-s*l,e[8]=u,e[1]=f+p*u,e[5]=h-d*u,e[9]=-o*s,e[2]=d-h*u,e[6]=p+f*u,e[10]=a*s}else if("YXZ"===t.order){var m=s*c,v=s*l,g=u*c,y=u*l;e[0]=m+y*o,e[4]=g*o-v,e[8]=a*u,e[1]=a*l,e[5]=a*c,e[9]=-o,e[2]=v*o-g,e[6]=y+m*o,e[10]=a*s}else if("ZXY"===t.order){var _=s*c,x=s*l,b=u*c,w=u*l;e[0]=_-w*o,e[4]=-a*l,e[8]=b+x*o,e[1]=x+b*o,e[5]=a*c,e[9]=w-_*o,e[2]=-a*u,e[6]=o,e[10]=a*s}else if("ZYX"===t.order){var M=a*c,S=a*l,A=o*c,T=o*l;e[0]=s*c,e[4]=A*u-S,e[8]=M*u+T,e[1]=s*l,e[5]=T*u+M,e[9]=S*u-A,e[2]=-u,e[6]=o*s,e[10]=a*s}else if("YZX"===t.order){var P=a*s,L=a*u,E=o*s,O=o*u;e[0]=s*c,e[4]=O-P*l,e[8]=E*l+L,e[1]=l,e[5]=a*c,e[9]=-o*c,e[2]=-u*c,e[6]=L*l+E,e[10]=P-O*l}else if("XZY"===t.order){var C=a*s,F=a*u,I=o*s,N=o*u;e[0]=s*c,e[4]=-l,e[8]=u*c,e[1]=C*l+N,e[5]=a*c,e[9]=F*l-I,e[2]=I*l-F,e[6]=o*c,e[10]=N*l+C}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(t){return this.compose(Xu,t,Yu)},lookAt:function(t,e,n){var i=this.elements;return Zu.subVectors(t,e),0===Zu.lengthSq()&&(Zu.z=1),Zu.normalize(),qu.crossVectors(n,Zu),0===qu.lengthSq()&&(1===Math.abs(n.z)?Zu.x+=1e-4:Zu.z+=1e-4,Zu.normalize(),qu.crossVectors(n,Zu)),qu.normalize(),Qu.crossVectors(Zu,qu),i[0]=qu.x,i[4]=Qu.x,i[8]=Zu.x,i[1]=qu.y,i[5]=Qu.y,i[9]=Zu.y,i[2]=qu.z,i[6]=Qu.z,i[10]=Zu.z,this},multiply:function(t,e){return void 0!==e?this.multiplyMatrices(t,e):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,a=n[0],o=n[4],s=n[8],u=n[12],c=n[1],l=n[5],h=n[9],f=n[13],p=n[2],d=n[6],m=n[10],v=n[14],g=n[3],y=n[7],_=n[11],x=n[15],b=i[0],w=i[4],M=i[8],S=i[12],A=i[1],T=i[5],P=i[9],L=i[13],E=i[2],O=i[6],C=i[10],F=i[14],I=i[3],N=i[7],D=i[11],R=i[15];return r[0]=a*b+o*A+s*E+u*I,r[4]=a*w+o*T+s*O+u*N,r[8]=a*M+o*P+s*C+u*D,r[12]=a*S+o*L+s*F+u*R,r[1]=c*b+l*A+h*E+f*I,r[5]=c*w+l*T+h*O+f*N,r[9]=c*M+l*P+h*C+f*D,r[13]=c*S+l*L+h*F+f*R,r[2]=p*b+d*A+m*E+v*I,r[6]=p*w+d*T+m*O+v*N,r[10]=p*M+d*P+m*C+v*D,r[14]=p*S+d*L+m*F+v*R,r[3]=g*b+y*A+_*E+x*I,r[7]=g*w+y*T+_*O+x*N,r[11]=g*M+y*P+_*C+x*D,r[15]=g*S+y*L+_*F+x*R,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],a=t[1],o=t[5],s=t[9],u=t[13],c=t[2],l=t[6],h=t[10],f=t[14];return t[3]*(+r*s*l-i*u*l-r*o*h+n*u*h+i*o*f-n*s*f)+t[7]*(+e*s*f-e*u*h+r*a*h-i*a*f+i*u*c-r*s*c)+t[11]*(+e*u*l-e*o*f-r*a*l+n*a*f+r*o*c-n*u*c)+t[15]*(-i*o*c-e*s*l+e*o*h+i*a*l-n*a*h+n*s*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],a=i[1],o=i[2],s=i[3],u=i[4],c=i[5],l=i[6],h=i[7],f=i[8],p=i[9],d=i[10],m=i[11],v=i[12],g=i[13],y=i[14],_=i[15],x=p*y*h-g*d*h+g*l*m-c*y*m-p*l*_+c*d*_,b=v*d*h-f*y*h-v*l*m+u*y*m+f*l*_-u*d*_,w=f*g*h-v*p*h+v*c*m-u*g*m-f*c*_+u*p*_,M=v*p*l-f*g*l-v*c*d+u*g*d+f*c*y-u*p*y,S=r*x+a*b+o*w+s*M;if(0===S)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var A=1/S;return n[0]=x*A,n[1]=(g*d*s-p*y*s-g*o*m+a*y*m+p*o*_-a*d*_)*A,n[2]=(c*y*s-g*l*s+g*o*h-a*y*h-c*o*_+a*l*_)*A,n[3]=(p*l*s-c*d*s-p*o*h+a*d*h+c*o*m-a*l*m)*A,n[4]=b*A,n[5]=(f*y*s-v*d*s+v*o*m-r*y*m-f*o*_+r*d*_)*A,n[6]=(v*l*s-u*y*s-v*o*h+r*y*h+u*o*_-r*l*_)*A,n[7]=(u*d*s-f*l*s+f*o*h-r*d*h-u*o*m+r*l*m)*A,n[8]=w*A,n[9]=(v*p*s-f*g*s-v*a*m+r*g*m+f*a*_-r*p*_)*A,n[10]=(u*g*s-v*c*s+v*a*h-r*g*h-u*a*_+r*c*_)*A,n[11]=(f*c*s-u*p*s-f*a*h+r*p*h+u*a*m-r*c*m)*A,n[12]=M*A,n[13]=(f*g*o-v*p*o+v*a*d-r*g*d-f*a*y+r*p*y)*A,n[14]=(v*c*o-u*g*o-v*a*l+r*g*l+u*a*y-r*c*y)*A,n[15]=(u*p*o-f*c*o+f*a*l-r*p*l-u*a*d+r*c*d)*A,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,a=t.x,o=t.y,s=t.z,u=r*a,c=r*o;return this.set(u*a+n,u*o-i*s,u*s+i*o,0,u*o+i*s,c*o+n,c*s-i*a,0,u*s-i*o,c*s+i*a,r*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,a=e._y,o=e._z,s=e._w,u=r+r,c=a+a,l=o+o,h=r*u,f=r*c,p=r*l,d=a*c,m=a*l,v=o*l,g=s*u,y=s*c,_=s*l,x=n.x,b=n.y,w=n.z;return i[0]=(1-(d+v))*x,i[1]=(f+_)*x,i[2]=(p-y)*x,i[3]=0,i[4]=(f-_)*b,i[5]=(1-(h+v))*b,i[6]=(m+g)*b,i[7]=0,i[8]=(p+y)*w,i[9]=(m-g)*w,i[10]=(1-(h+d))*w,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(t,e,n){var i=this.elements,r=Wu.set(i[0],i[1],i[2]).length(),a=Wu.set(i[4],i[5],i[6]).length(),o=Wu.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Hu.copy(this);var s=1/r,u=1/a,c=1/o;return Hu.elements[0]*=s,Hu.elements[1]*=s,Hu.elements[2]*=s,Hu.elements[4]*=u,Hu.elements[5]*=u,Hu.elements[6]*=u,Hu.elements[8]*=c,Hu.elements[9]*=c,Hu.elements[10]*=c,e.setFromRotationMatrix(Hu),n.x=r,n.y=a,n.z=o,this},makePerspective:function(t,e,n,i,r,a){var o=this.elements,s=2*r/(e-t),u=2*r/(n-i),c=(e+t)/(e-t),l=(n+i)/(n-i),h=-(a+r)/(a-r),f=-2*a*r/(a-r);return o[0]=s,o[4]=0,o[8]=c,o[12]=0,o[1]=0,o[5]=u,o[9]=l,o[13]=0,o[2]=0,o[6]=0,o[10]=h,o[14]=f,o[3]=0,o[7]=0,o[11]=-1,o[15]=0,this},makeOrthographic:function(t,e,n,i,r,a){var o=this.elements,s=1/(e-t),u=1/(n-i),c=1/(a-r),l=(e+t)*s,h=(n+i)*u,f=(a+r)*c;return o[0]=2*s,o[4]=0,o[8]=0,o[12]=-l,o[1]=0,o[5]=2*u,o[9]=0,o[13]=-h,o[2]=0,o[6]=0,o[10]=-2*c,o[14]=-f,o[3]=0,o[7]=0,o[11]=0,o[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var Ju=new l,$u=new u;h.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],h.DefaultOrder="XYZ",Object.defineProperties(h.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this._onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this._onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this._onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this._onChangeCallback()}}}),Object.assign(h.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=zu.clamp,r=t.elements,a=r[0],o=r[4],s=r[8],u=r[1],c=r[5],l=r[9],h=r[2],f=r[6],p=r[10];switch(e=e||this._order){case"XYZ":this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-l,p),this._z=Math.atan2(-o,a)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-i(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(u,c)):(this._y=Math.atan2(-h,a),this._z=0);break;case"ZXY":this._x=Math.asin(i(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(u,a));break;case"ZYX":this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(u,a)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(i(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-h,a)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-i(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(s,a)):(this._x=Math.atan2(-l,p),this._y=0)}return this._order=e,!1!==n&&this._onChangeCallback(),this},setFromQuaternion:function(t,e,n){return Ju.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Ju,e,n)},setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(t){return $u.setFromEuler(this),this.setFromQuaternion($u,t)},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new c(this._x,this._y,this._z)},_onChange:function(t){return this._onChangeCallback=t,this},_onChangeCallback:function(){}}),Object.assign(f.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},enableAll:function(){this.mask=-1},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},disableAll:function(){this.mask=0},test:function(t){return 0!=(this.mask&t.mask)}});var Ku=0,tc=new c,ec=new u,nc=new l,ic=new c,rc=new c,ac=new c,oc=new u,sc=new c(1,0,0),uc=new c(0,1,0),cc=new c(0,0,1),lc={type:"added"},hc={type:"removed"};p.DefaultUp=new c(0,1,0),p.DefaultMatrixAutoUpdate=!0,p.prototype=Object.assign(Object.create(e.prototype),{constructor:p,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return ec.setFromAxisAngle(t,e),this.quaternion.multiply(ec),this},rotateOnWorldAxis:function(t,e){return ec.setFromAxisAngle(t,e),this.quaternion.premultiply(ec),this},rotateX:function(t){return this.rotateOnAxis(sc,t)},rotateY:function(t){return this.rotateOnAxis(uc,t)},rotateZ:function(t){return this.rotateOnAxis(cc,t)},translateOnAxis:function(t,e){return tc.copy(t).applyQuaternion(this.quaternion),this.position.add(tc.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(sc,t)},translateY:function(t){return this.translateOnAxis(uc,t)},translateZ:function(t){return this.translateOnAxis(cc,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(nc.getInverse(this.matrixWorld))},lookAt:function(t,e,n){t.isVector3?ic.copy(t):ic.set(t,e,n);var i=this.parent;this.updateWorldMatrix(!0,!1),rc.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?nc.lookAt(rc,ic,this.up):nc.lookAt(ic,rc,this.up),this.quaternion.setFromRotationMatrix(nc),i&&(nc.extractRotation(i.matrixWorld),ec.setFromRotationMatrix(nc),this.quaternion.premultiply(ec.inverse()))},add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?this:(t&&t.isObject3D&&(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(lc)),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,this.children.splice(n,1),t.dispatchEvent(hc)),this},attach:function(t){return this.updateWorldMatrix(!0,!1),nc.getInverse(this.matrixWorld),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),nc.multiply(t.parent.matrixWorld)),t.applyMatrix4(nc),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n].getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(t=new c),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(t=new u),this.updateMatrixWorld(!0),this.matrixWorld.decompose(rc,t,ac),t},getWorldScale:function(t){return void 0===t&&(t=new c),this.updateMatrixWorld(!0),this.matrixWorld.decompose(rc,oc,t),t},getWorldDirection:function(t){void 0===t&&(t=new c),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,r=0,a=i.length;r<a;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(t){function e(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}function n(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var a={};if(a.uuid=this.uuid,a.type=this.type,""!==this.name&&(a.name=this.name),!0===this.castShadow&&(a.castShadow=!0),!0===this.receiveShadow&&(a.receiveShadow=!0),!1===this.visible&&(a.visible=!1),!1===this.frustumCulled&&(a.frustumCulled=!1),0!==this.renderOrder&&(a.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(a.userData=this.userData),a.layers=this.layers.mask,a.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(a.matrixAutoUpdate=!1),this.isInstancedMesh&&(a.type="InstancedMesh",a.count=this.count,a.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){a.geometry=e(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var s=o.shapes;if(Array.isArray(s))for(var u=0,c=s.length;u<c;u++){var l=s[u];e(t.shapes,l)}else e(t.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){for(var h=[],f=0,p=this.material.length;f<p;f++)h.push(e(t.materials,this.material[f]));a.material=h}else a.material=e(t.materials,this.material);if(this.children.length>0){a.children=[];for(var d=0;d<this.children.length;d++)a.children.push(this.children[d].toJSON(t).object)}if(i){var m=n(t.geometries),v=n(t.materials),g=n(t.textures),y=n(t.images),_=n(t.shapes);m.length>0&&(r.geometries=m),v.length>0&&(r.materials=v),g.length>0&&(r.textures=g),y.length>0&&(r.images=y),_.length>0&&(r.shapes=_)}return r.object=a,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}}),d.prototype=Object.assign(Object.create(p.prototype),{constructor:d,isScene:!0,copy:function(t,e){return p.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=p.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}});var fc=[new c,new c,new c,new c,new c,new c,new c,new c],pc=new c,dc=new m,mc=new c,vc=new c,gc=new c,yc=new c,_c=new c,xc=new c,bc=new c,wc=new c,Mc=new c,Sc=new c;Object.assign(m.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,u=t.length;s<u;s+=3){var c=t[s],l=t[s+1],h=t[s+2];c<e&&(e=c),l<n&&(n=l),h<i&&(i=h),c>r&&(r=c),l>a&&(a=l),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,a=-1/0,o=-1/0,s=0,u=t.count;s<u;s++){var c=t.getX(s),l=t.getY(s),h=t.getZ(s);c<e&&(e=c),l<n&&(n=l),h<i&&(i=h),c>r&&(r=c),l>a&&(a=l),h>o&&(o=h)}return this.min.set(e,n,i),this.max.set(r,a,o),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=pc.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(t=new c),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(t=new c),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(t){t.updateWorldMatrix(!1,!1);var e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),dc.copy(e.boundingBox),dc.applyMatrix4(t.matrixWorld),this.union(dc));for(var n=t.children,i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(e=new c),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(t){return this.clampPoint(t.center,pc),pc.distanceToSquared(t.center)<=t.radius*t.radius},intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(t){if(this.isEmpty())return!1;this.getCenter(bc),wc.subVectors(this.max,bc),mc.subVectors(t.a,bc),vc.subVectors(t.b,bc),gc.subVectors(t.c,bc),yc.subVectors(vc,mc),_c.subVectors(gc,vc),xc.subVectors(mc,gc);var e=[0,-yc.z,yc.y,0,-_c.z,_c.y,0,-xc.z,xc.y,yc.z,0,-yc.x,_c.z,0,-_c.x,xc.z,0,-xc.x,-yc.y,yc.x,0,-_c.y,_c.x,0,-xc.y,xc.x,0];return!!v(e,mc,vc,gc,wc)&&(!!v(e=[1,0,0,0,1,0,0,0,1],mc,vc,gc,wc)&&(Mc.crossVectors(yc,_c),v(e=[Mc.x,Mc.y,Mc.z],mc,vc,gc,wc)))},clampPoint:function(t,e){return void 0===e&&(e=new c),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return pc.copy(t).clamp(this.min,this.max).sub(t).length()},getBoundingSphere:function(t){return this.getCenter(t.center),t.radius=.5*this.getSize(pc).length(),t},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(t){return this.isEmpty()?this:(fc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),fc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),fc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),fc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),fc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),fc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),fc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),fc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(fc),this)},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var Ac=new m;Object.assign(g.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(t,e){var n=this.center;void 0!==e?n.copy(e):Ac.setFromPoints(t).getCenter(n);for(var i=0,r=0,a=t.length;r<a;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},isEmpty:function(){return this.radius<0},makeEmpty:function(){return this.center.set(0,0,0),this.radius=-1,this},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(e=new c),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(t=new m),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}});var Tc=new c,Pc=new c,Lc=new c,Ec=new c,Oc=new c,Cc=new c,Fc=new c;Object.assign(y.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(e=new c),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(t){return this.origin.copy(this.at(t,Tc)),this},closestPointToPoint:function(t,e){void 0===e&&(e=new c),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(t){var e=Tc.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Tc.copy(this.direction).multiplyScalar(e).add(this.origin),Tc.distanceToSquared(t))},distanceSqToSegment:function(t,e,n,i){Pc.copy(t).add(e).multiplyScalar(.5),Lc.copy(e).sub(t).normalize(),Ec.copy(this.origin).sub(Pc);var r,a,o,s,u=.5*t.distanceTo(e),c=-this.direction.dot(Lc),l=Ec.dot(this.direction),h=-Ec.dot(Lc),f=Ec.lengthSq(),p=Math.abs(1-c*c);if(p>0)if(a=c*l-h,s=u*p,(r=c*h-l)>=0)if(a>=-s)if(a<=s){var d=1/p;o=(r*=d)*(r+c*(a*=d)+2*l)+a*(c*r+a+2*h)+f}else a=u,o=-(r=Math.max(0,-(c*a+l)))*r+a*(a+2*h)+f;else a=-u,o=-(r=Math.max(0,-(c*a+l)))*r+a*(a+2*h)+f;else a<=-s?o=-(r=Math.max(0,-(-c*u+l)))*r+(a=r>0?-u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f:a<=s?(r=0,o=(a=Math.min(Math.max(-u,-h),u))*(a+2*h)+f):o=-(r=Math.max(0,-(c*u+l)))*r+(a=r>0?u:Math.min(Math.max(-u,-h),u))*(a+2*h)+f;else a=c>0?-u:u,o=-(r=Math.max(0,-(c*a+l)))*r+a*(a+2*h)+f;return n&&n.copy(this.direction).multiplyScalar(r).add(this.origin),i&&i.copy(Lc).multiplyScalar(a).add(Pc),o},intersectSphere:function(t,e){Tc.subVectors(t.center,this.origin);var n=Tc.dot(this.direction),i=Tc.dot(Tc)-n*n,r=t.radius*t.radius;if(i>r)return null;var a=Math.sqrt(r-i),o=n-a,s=n+a;return o<0&&s<0?null:o<0?this.at(s,e):this.at(o,e)},intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,i,r,a,o,s,u=1/this.direction.x,c=1/this.direction.y,l=1/this.direction.z,h=this.origin;return u>=0?(n=(t.min.x-h.x)*u,i=(t.max.x-h.x)*u):(n=(t.max.x-h.x)*u,i=(t.min.x-h.x)*u),c>=0?(r=(t.min.y-h.y)*c,a=(t.max.y-h.y)*c):(r=(t.max.y-h.y)*c,a=(t.min.y-h.y)*c),n>a||r>i?null:((r>n||n!=n)&&(n=r),(a<i||i!=i)&&(i=a),l>=0?(o=(t.min.z-h.z)*l,s=(t.max.z-h.z)*l):(o=(t.max.z-h.z)*l,s=(t.min.z-h.z)*l),n>s||o>i?null:((o>n||n!=n)&&(n=o),(s<i||i!=i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))},intersectsBox:function(t){return null!==this.intersectBox(t,Tc)},intersectTriangle:function(t,e,n,i,r){Oc.subVectors(e,t),Cc.subVectors(n,t),Fc.crossVectors(Oc,Cc);var a,o=this.direction.dot(Fc);if(o>0){if(i)return null;a=1}else{if(!(o<0))return null;a=-1,o=-o}Ec.subVectors(this.origin,t);var s=a*this.direction.dot(Cc.crossVectors(Ec,Cc));if(s<0)return null;var u=a*this.direction.dot(Oc.cross(Ec));if(u<0)return null;if(s+u>o)return null;var c=-a*Ec.dot(Fc);return c<0?null:this.at(c/o,r)},applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}});var Ic=new c,Nc=new c,Dc=new i;Object.assign(_.prototype,{isPlane:!0,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(t,e,n){var i=Ic.subVectors(n,e).cross(Nc.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(e=new c),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(t,e){void 0===e&&(e=new c);var n=t.delta(Ic),i=this.normal.dot(n);if(0!==i){var r=-(t.start.dot(this.normal)+this.constant)/i;if(!(r<0||r>1))return e.copy(n).multiplyScalar(r).add(t.start)}else if(0===this.distanceToPoint(t.start))return e.copy(t.start)},intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(t=new c),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(t,e){var n=e||Dc.getNormalMatrix(t),i=this.coplanarPoint(Ic).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this},translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}});var Rc=new c,kc=new c,zc=new c,Uc=new c,Bc=new c,jc=new c,Gc=new c,Vc=new c,Wc=new c,Hc=new c;Object.assign(x,{getNormal:function(t,e,n,i){void 0===i&&(i=new c),i.subVectors(n,e),Rc.subVectors(t,e),i.cross(Rc);var r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)},getBarycoord:function(t,e,n,i,r){Rc.subVectors(i,e),kc.subVectors(n,e),zc.subVectors(t,e);var a=Rc.dot(Rc),o=Rc.dot(kc),s=Rc.dot(zc),u=kc.dot(kc),l=kc.dot(zc),h=a*u-o*o;if(void 0===r&&(r=new c),0===h)return r.set(-2,-1,-1);var f=1/h,p=(u*s-o*l)*f,d=(a*l-o*s)*f;return r.set(1-p-d,d,p)},containsPoint:function(t,e,n,i){return x.getBarycoord(t,e,n,i,Uc),Uc.x>=0&&Uc.y>=0&&Uc.x+Uc.y<=1},getUV:function(t,e,n,i,r,a,o,s){return this.getBarycoord(t,e,n,i,Uc),s.set(0,0),s.addScaledVector(r,Uc.x),s.addScaledVector(a,Uc.y),s.addScaledVector(o,Uc.z),s},isFrontFacing:function(t,e,n,i){return Rc.subVectors(n,e),kc.subVectors(t,e),Rc.cross(kc).dot(i)<0}}),Object.assign(x.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){return Rc.subVectors(this.c,this.b),kc.subVectors(this.a,this.b),.5*Rc.cross(kc).length()},getMidpoint:function(t){return void 0===t&&(t=new c),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return x.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(t=new _),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return x.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,i,r){return x.getUV(t,this.a,this.b,this.c,e,n,i,r)},containsPoint:function(t){return x.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return x.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(t,e){void 0===e&&(e=new c);var n,i,r=this.a,a=this.b,o=this.c;Bc.subVectors(a,r),jc.subVectors(o,r),Vc.subVectors(t,r);var s=Bc.dot(Vc),u=jc.dot(Vc);if(s<=0&&u<=0)return e.copy(r);Wc.subVectors(t,a);var l=Bc.dot(Wc),h=jc.dot(Wc);if(l>=0&&h<=l)return e.copy(a);var f=s*h-l*u;if(f<=0&&s>=0&&l<=0)return n=s/(s-l),e.copy(r).addScaledVector(Bc,n);Hc.subVectors(t,o);var p=Bc.dot(Hc),d=jc.dot(Hc);if(d>=0&&p<=d)return e.copy(o);var m=p*u-s*d;if(m<=0&&u>=0&&d<=0)return i=u/(u-d),e.copy(r).addScaledVector(jc,i);var v=l*d-p*h;if(v<=0&&h-l>=0&&p-d>=0)return Gc.subVectors(o,a),i=(h-l)/(h-l+(p-d)),e.copy(a).addScaledVector(Gc,i);var g=1/(v+m+f);return n=m*g,i=f*g,e.copy(r).addScaledVector(Bc,n).addScaledVector(jc,i)},equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}});var Xc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Yc={h:0,s:0,l:0},qc={h:0,s:0,l:0};Object.assign(b.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(t,e,n){if(t=zu.euclideanModulo(t,1),e=zu.clamp(e,0,1),n=zu.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{var i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=w(r,i,t+1/3),this.g=w(r,i,t),this.b=w(r,i,t-1/3)}return this},setStyle:function(t){function e(t){void 0!==t&&parseFloat(t)}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[1],a=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(a)){var o=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,u=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(o,s,u)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=n[1],l=c.length;if(3===l)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===l)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this},setColorName:function(t){var e=Xc[t];return void 0!==e&&this.setHex(e),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(t){return this.r=M(t.r),this.g=M(t.g),this.b=M(t.b),this},copyLinearToSRGB:function(t){return this.r=S(t.r),this.g=S(t.g),this.b=S(t.b),this},convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(t={h:0,s:0,l:0});var e,n,i=this.r,r=this.g,a=this.b,o=Math.max(i,r,a),s=Math.min(i,r,a),u=(s+o)/2;if(s===o)e=0,n=0;else{var c=o-s;switch(n=u<=.5?c/(o+s):c/(2-o-s),o){case i:e=(r-a)/c+(r<a?6:0);break;case r:e=(a-i)/c+2;break;case a:e=(i-r)/c+4}e/=6}return t.h=e,t.s=n,t.l=u,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(t,e,n){return this.getHSL(Yc),Yc.h+=t,Yc.s+=e,Yc.l+=n,this.setHSL(Yc.h,Yc.s,Yc.l),this},add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(t,e){this.getHSL(Yc),t.getHSL(qc);var n=zu.lerp(Yc.h,qc.h,e),i=zu.lerp(Yc.s,qc.s,e),r=zu.lerp(Yc.l,qc.l,e);return this.setHSL(n,i,r),this},equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},fromBufferAttribute:function(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this},toJSON:function(){return this.getHex()}}),b.NAMES=Xc,Object.assign(A.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(var i=0,r=t.vertexColors.length;i<r;i++)this.vertexColors[i]=t.vertexColors[i].clone();return this}});var Qc=0;T.prototype=Object.assign(Object.create(e.prototype),{constructor:T,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i&&(i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n)}else this.flatShading=1===n}},toJSON:function(t){function e(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var n=void 0===t||"string"==typeof t;n&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(i.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity,i.refractionRatio=this.refractionRatio,void 0!==this.combine&&(i.combine=this.combine),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==to&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==Za&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.morphNormals&&(i.morphNormals=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),n){var r=e(t.textures),a=e(t.images);r.length>0&&(i.textures=r),a.length>0&&(i.images=a)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(T.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),P.prototype=Object.create(T.prototype),P.prototype.constructor=P,P.prototype.isMeshBasicMaterial=!0,P.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};var Zc=new c,Jc=new n;Object.defineProperty(L.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(L.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(a=new b),e[n++]=a.r,e[n++]=a.g,e[n++]=a.b}return this},copyVector2sArray:function(t){for(var e=this.array,i=0,r=0,a=t.length;r<a;r++){var o=t[r];void 0===o&&(o=new n),e[i++]=o.x,e[i++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var a=t[i];void 0===a&&(a=new c),e[n++]=a.x,e[n++]=a.y,e[n++]=a.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(o=new a),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(var e=0,n=this.count;e<n;e++)Jc.fromBufferAttribute(this,e),Jc.applyMatrix3(t),this.setXY(e,Jc.x,Jc.y);else if(3===this.itemSize)for(var i=0,r=this.count;i<r;i++)Zc.fromBufferAttribute(this,i),Zc.applyMatrix3(t),this.setXYZ(i,Zc.x,Zc.y,Zc.z);return this},applyMatrix4:function(t){for(var e=0,n=this.count;e<n;e++)Zc.x=this.getX(e),Zc.y=this.getY(e),Zc.z=this.getZ(e),Zc.applyMatrix4(t),this.setXYZ(e,Zc.x,Zc.y,Zc.z);return this},applyNormalMatrix:function(t){for(var e=0,n=this.count;e<n;e++)Zc.x=this.getX(e),Zc.y=this.getY(e),Zc.z=this.getZ(e),Zc.applyNormalMatrix(t),this.setXYZ(e,Zc.x,Zc.y,Zc.z);return this},transformDirection:function(t){for(var e=0,n=this.count;e<n;e++)Zc.x=this.getX(e),Zc.y=this.getY(e),Zc.z=this.getZ(e),Zc.transformDirection(t),this.setXYZ(e,Zc.x,Zc.y,Zc.z);return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),E.prototype=Object.create(L.prototype),E.prototype.constructor=E,O.prototype=Object.create(L.prototype),O.prototype.constructor=O,C.prototype=Object.create(L.prototype),C.prototype.constructor=C,F.prototype=Object.create(L.prototype),F.prototype.constructor=F,I.prototype=Object.create(L.prototype),I.prototype.constructor=I,N.prototype=Object.create(L.prototype),N.prototype.constructor=N,D.prototype=Object.create(L.prototype),D.prototype.constructor=D,R.prototype=Object.create(L.prototype),R.prototype.constructor=R,k.prototype=Object.create(L.prototype),k.prototype.constructor=k,Object.assign(z.prototype,{computeGroups:function(t){var e,n,i=[],r=void 0,a=t.faces;for(n=0;n<a.length;n++){var o=a[n];o.materialIndex!==r&&(r=o.materialIndex,void 0!==e&&(e.count=3*n-e.start,i.push(e)),e={start:3*n,materialIndex:r})}void 0!==e&&(e.count=3*n-e.start,i.push(e)),this.groups=i},fromGeometry:function(t){var e,i=t.faces,r=t.vertices,a=t.faceVertexUvs,o=a[0]&&a[0].length>0,s=a[1]&&a[1].length>0,u=t.morphTargets,c=u.length;if(c>0){e=[];for(var l=0;l<c;l++)e[l]={name:u[l].name,data:[]};this.morphTargets.position=e}var h,f=t.morphNormals,p=f.length;if(p>0){h=[];for(var d=0;d<p;d++)h[d]={name:f[d].name,data:[]};this.morphTargets.normal=h}var m=t.skinIndices,v=t.skinWeights,g=m.length===r.length,y=v.length===r.length;r.length>0&&i.length;for(var _=0;_<i.length;_++){var x=i[_];this.vertices.push(r[x.a],r[x.b],r[x.c]);var b=x.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var w=x.normal;this.normals.push(w,w,w)}var M=x.vertexColors;if(3===M.length)this.colors.push(M[0],M[1],M[2]);else{var S=x.color;this.colors.push(S,S,S)}if(!0===o){var A=a[0][_];void 0!==A?this.uvs.push(A[0],A[1],A[2]):this.uvs.push(new n,new n,new n)}if(!0===s){var T=a[1][_];void 0!==T?this.uvs2.push(T[0],T[1],T[2]):this.uvs2.push(new n,new n,new n)}for(var P=0;P<c;P++){var L=u[P].vertices;e[P].data.push(L[x.a],L[x.b],L[x.c])}for(var E=0;E<p;E++){var O=f[E].vertexNormals[_];h[E].data.push(O.a,O.b,O.c)}g&&this.skinIndices.push(m[x.a],m[x.b],m[x.c]),y&&this.skinWeights.push(v[x.a],v[x.b],v[x.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this}});var $c=1,Kc=new l,tl=new p,el=new c,nl=new m,il=new m,rl=new c;B.prototype=Object.assign(Object.create(e.prototype),{constructor:B,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(U(t)>65535?D:I)(t,1):this.index=t},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){var e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var r=(new i).getNormalMatrix(t);n.applyNormalMatrix(r),n.needsUpdate=!0}var a=this.attributes.tangent;return void 0!==a&&(a.transformDirection(t),a.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return Kc.makeRotationX(t),this.applyMatrix4(Kc),this},rotateY:function(t){return Kc.makeRotationY(t),this.applyMatrix4(Kc),this},rotateZ:function(t){return Kc.makeRotationZ(t),this.applyMatrix4(Kc),this},translate:function(t,e,n){return Kc.makeTranslation(t,e,n),this.applyMatrix4(Kc),this},scale:function(t,e,n){return Kc.makeScale(t,e,n),this.applyMatrix4(Kc),this},lookAt:function(t){return tl.lookAt(t),tl.updateMatrix(),this.applyMatrix4(tl.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(el).negate(),this.translate(el.x,el.y,el.z),this},setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new R(3*e.vertices.length,3),i=new R(3*e.colors.length,3);if(this.setAttribute("position",n.copyVector3sArray(e.vertices)),this.setAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new R(e.lineDistances.length,1);this.setAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new R(e,3)),this},updateFromObject:function(t){var e=t.geometry;if(t.isMesh){var n=e.__directGeometry;if(!0===e.elementsNeedUpdate&&(n=void 0,e.elementsNeedUpdate=!1),void 0===n)return this.fromGeometry(e);n.verticesNeedUpdate=e.verticesNeedUpdate,n.normalsNeedUpdate=e.normalsNeedUpdate,n.colorsNeedUpdate=e.colorsNeedUpdate,n.uvsNeedUpdate=e.uvsNeedUpdate,n.groupsNeedUpdate=e.groupsNeedUpdate,e.verticesNeedUpdate=!1,e.normalsNeedUpdate=!1,e.colorsNeedUpdate=!1,e.uvsNeedUpdate=!1,e.groupsNeedUpdate=!1,e=n}if(!0===e.verticesNeedUpdate){var i=this.attributes.position;void 0!==i&&(i.copyVector3sArray(e.vertices),i.needsUpdate=!0),e.verticesNeedUpdate=!1}if(!0===e.normalsNeedUpdate){var r=this.attributes.normal;void 0!==r&&(r.copyVector3sArray(e.normals),r.needsUpdate=!0),e.normalsNeedUpdate=!1}if(!0===e.colorsNeedUpdate){var a=this.attributes.color;void 0!==a&&(a.copyColorsArray(e.colors),a.needsUpdate=!0),e.colorsNeedUpdate=!1}if(e.uvsNeedUpdate){var o=this.attributes.uv;void 0!==o&&(o.copyVector2sArray(e.uvs),o.needsUpdate=!0),e.uvsNeedUpdate=!1}if(e.lineDistancesNeedUpdate){var s=this.attributes.lineDistance;void 0!==s&&(s.copyArray(e.lineDistances),s.needsUpdate=!0),e.lineDistancesNeedUpdate=!1}return e.groupsNeedUpdate&&(e.computeGroups(t.geometry),this.groups=e.groups,e.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new z).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.setAttribute("position",new L(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.setAttribute("normal",new L(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.setAttribute("color",new L(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.setAttribute("uv",new L(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var a=new Float32Array(2*t.uvs2.length);this.setAttribute("uv2",new L(a,2).copyVector2sArray(t.uvs2))}for(var o in this.groups=t.groups,t.morphTargets){for(var s=[],u=t.morphTargets[o],c=0,l=u.length;c<l;c++){var h=u[c],f=new R(3*h.data.length,3);f.name=h.name,s.push(f.copyVector3sArray(h.data))}this.morphAttributes[o]=s}if(t.skinIndices.length>0){var p=new R(4*t.skinIndices.length,4);this.setAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var d=new R(4*t.skinWeights.length,4);this.setAttribute("skinWeight",d.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new m);var t=this.attributes.position,e=this.morphAttributes.position;if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(var n=0,i=e.length;n<i;n++){var r=e[n];nl.setFromBufferAttribute(r),this.morphTargetsRelative?(rl.addVectors(this.boundingBox.min,nl.min),this.boundingBox.expandByPoint(rl),rl.addVectors(this.boundingBox.max,nl.max),this.boundingBox.expandByPoint(rl)):(this.boundingBox.expandByPoint(nl.min),this.boundingBox.expandByPoint(nl.max))}}else this.boundingBox.makeEmpty();isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new g);var t=this.attributes.position,e=this.morphAttributes.position;if(t){var n=this.boundingSphere.center;if(nl.setFromBufferAttribute(t),e)for(var i=0,r=e.length;i<r;i++){var a=e[i];il.setFromBufferAttribute(a),this.morphTargetsRelative?(rl.addVectors(nl.min,il.min),nl.expandByPoint(rl),rl.addVectors(nl.max,il.max),nl.expandByPoint(rl)):(nl.expandByPoint(il.min),nl.expandByPoint(il.max))}nl.getCenter(n);for(var o=0,s=0,u=t.count;s<u;s++)rl.fromBufferAttribute(t,s),o=Math.max(o,n.distanceToSquared(rl));if(e)for(var c=0,l=e.length;c<l;c++)for(var h=e[c],f=this.morphTargetsRelative,p=0,d=h.count;p<d;p++)rl.fromBufferAttribute(h,p),f&&(el.fromBufferAttribute(t,p),rl.add(el)),o=Math.max(o,n.distanceToSquared(rl));this.boundingSphere.radius=Math.sqrt(o),isNaN(this.boundingSphere.radius)}},computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.getAttribute("position");if(void 0!==e){var n=this.getAttribute("normal");if(void 0===n)n=new L(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(var i=0,r=n.count;i<r;i++)n.setXYZ(i,0,0,0);var a=new c,o=new c,s=new c,u=new c,l=new c,h=new c,f=new c,p=new c;if(t)for(var d=0,m=t.count;d<m;d+=3){var v=t.getX(d+0),g=t.getX(d+1),y=t.getX(d+2);a.fromBufferAttribute(e,v),o.fromBufferAttribute(e,g),s.fromBufferAttribute(e,y),f.subVectors(s,o),p.subVectors(a,o),f.cross(p),u.fromBufferAttribute(n,v),l.fromBufferAttribute(n,g),h.fromBufferAttribute(n,y),u.add(f),l.add(f),h.add(f),n.setXYZ(v,u.x,u.y,u.z),n.setXYZ(g,l.x,l.y,l.z),n.setXYZ(y,h.x,h.y,h.z)}else for(var _=0,x=e.count;_<x;_+=3)a.fromBufferAttribute(e,_+0),o.fromBufferAttribute(e,_+1),s.fromBufferAttribute(e,_+2),f.subVectors(s,o),p.subVectors(a,o),f.cross(p),n.setXYZ(_+0,f.x,f.y,f.z),n.setXYZ(_+1,f.x,f.y,f.z),n.setXYZ(_+2,f.x,f.y,f.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0);var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i].array,a=t.attributes[i],o=a.array,s=a.itemSize*e,u=Math.min(o.length,r.length-s),c=0,l=s;c<u;c++,l++)r[l]=o[c];return this}},normalizeNormals:function(){for(var t=this.attributes.normal,e=0,n=t.count;e<n;e++)rl.fromBufferAttribute(t,e),rl.normalize(),t.setXYZ(e,rl.x,rl.y,rl.z)},toNonIndexed:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=t.normalized,a=new n.constructor(e.length*i),o=0,s=0,u=0,c=e.length;u<c;u++){o=e[u]*i;for(var l=0;l<i;l++)a[s++]=n[o++]}return new L(a,i,r)}if(null===this.index)return this;var e=new B,n=this.index.array,i=this.attributes;for(var r in i){var a=t(i[r],n);e.setAttribute(r,a)}var o=this.morphAttributes;for(var s in o){for(var u=[],c=o[s],l=0,h=c.length;l<h;l++){var f=t(c[l],n);u.push(f)}e.morphAttributes[s]=u}e.morphTargetsRelative=this.morphTargetsRelative;for(var p=this.groups,d=0,m=p.length;d<m;d++){var v=p[d];e.addGroup(v.start,v.count,v.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var a in r){var o=r[a],s=o.toJSON(t.data);""!==o.name&&(s.name=o.name),t.data.attributes[a]=s}var u={},c=!1;for(var l in this.morphAttributes){for(var h=this.morphAttributes[l],f=[],p=0,d=h.length;p<d;p++){var m=h[p],v=m.toJSON(t.data);""!==m.name&&(v.name=m.name),f.push(v)}f.length>0&&(u[l]=f,c=!0)}c&&(t.data.morphAttributes=u,t.data.morphTargetsRelative=this.morphTargetsRelative);var g=this.groups;g.length>0&&(t.data.groups=JSON.parse(JSON.stringify(g)));var y=this.boundingSphere;return null!==y&&(t.data.boundingSphere={center:y.center.toArray(),radius:y.radius}),t},clone:function(){return(new B).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var e={};this.name=t.name;var n=t.index;null!==n&&this.setIndex(n.clone(e));var i=t.attributes;for(var r in i){var a=i[r];this.setAttribute(r,a.clone(e))}var o=t.morphAttributes;for(var s in o){for(var u=[],c=o[s],l=0,h=c.length;l<h;l++)u.push(c[l].clone(e));this.morphAttributes[s]=u}this.morphTargetsRelative=t.morphTargetsRelative;for(var f=t.groups,p=0,d=f.length;p<d;p++){var m=f[p];this.addGroup(m.start,m.count,m.materialIndex)}var v=t.boundingBox;null!==v&&(this.boundingBox=v.clone());var g=t.boundingSphere;return null!==g&&(this.boundingSphere=g.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var al=new l,ol=new y,sl=new g,ul=new c,cl=new c,ll=new c,hl=new c,fl=new c,pl=new c,dl=new c,ml=new c,vl=new c,gl=new n,yl=new n,_l=new n,xl=new c,bl=new c;j.prototype=Object.assign(Object.create(p.prototype),{constructor:j,isMesh:!0,copy:function(t){return p.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=t.morphTargets;void 0!==s&&s.length}},raycast:function(t,e){var i,r=this.geometry,a=this.material,o=this.matrixWorld;if(void 0!==a&&(null===r.boundingSphere&&r.computeBoundingSphere(),sl.copy(r.boundingSphere),sl.applyMatrix4(o),!1!==t.ray.intersectsSphere(sl)&&(al.getInverse(o),ol.copy(t.ray).applyMatrix4(al),null===r.boundingBox||!1!==ol.intersectsBox(r.boundingBox))))if(r.isBufferGeometry){var s=r.index,u=r.attributes.position,c=r.morphAttributes.position,l=r.morphTargetsRelative,h=r.attributes.uv,f=r.attributes.uv2,p=r.groups,d=r.drawRange;if(null!==s)if(Array.isArray(a))for(var m=0,v=p.length;m<v;m++)for(var g=p[m],y=a[g.materialIndex],_=Math.max(g.start,d.start),b=Math.min(g.start+g.count,d.start+d.count);_<b;_+=3){var w=s.getX(_),M=s.getX(_+1),S=s.getX(_+2);(i=V(this,y,t,ol,u,c,l,h,f,w,M,S))&&(i.faceIndex=Math.floor(_/3),i.face.materialIndex=g.materialIndex,e.push(i))}else for(var A=Math.max(0,d.start),T=Math.min(s.count,d.start+d.count);A<T;A+=3){var P=s.getX(A),L=s.getX(A+1),E=s.getX(A+2);(i=V(this,a,t,ol,u,c,l,h,f,P,L,E))&&(i.faceIndex=Math.floor(A/3),e.push(i))}else if(void 0!==u)if(Array.isArray(a))for(var O=0,C=p.length;O<C;O++)for(var F=p[O],I=a[F.materialIndex],N=Math.max(F.start,d.start),D=Math.min(F.start+F.count,d.start+d.count);N<D;N+=3){(i=V(this,I,t,ol,u,c,l,h,f,N,N+1,N+2))&&(i.faceIndex=Math.floor(N/3),i.face.materialIndex=F.materialIndex,e.push(i))}else for(var R=Math.max(0,d.start),k=Math.min(u.count,d.start+d.count);R<k;R+=3){(i=V(this,a,t,ol,u,c,l,h,f,R,R+1,R+2))&&(i.faceIndex=Math.floor(R/3),e.push(i))}}else if(r.isGeometry){var z,U=Array.isArray(a),B=r.vertices,j=r.faces,W=r.faceVertexUvs[0];W.length>0&&(z=W);for(var H=0,X=j.length;H<X;H++){var Y=j[H],q=U?a[Y.materialIndex]:a;if(void 0!==q){var Q=B[Y.a],Z=B[Y.b],J=B[Y.c];if(i=G(this,q,t,ol,Q,Z,J,xl)){if(z&&z[H]){var $=z[H];gl.copy($[0]),yl.copy($[1]),_l.copy($[2]),i.uv=x.getUV(xl,Q,Z,J,gl,yl,_l,new n)}i.face=Y,i.faceIndex=H,e.push(i)}}}}}});var wl=0,Ml=new l,Sl=new p,Al=new c;W.prototype=Object.assign(Object.create(e.prototype),{constructor:W,isGeometry:!0,applyMatrix4:function(t){for(var e=(new i).getNormalMatrix(t),n=0,r=this.vertices.length;n<r;n++){this.vertices[n].applyMatrix4(t)}for(var a=0,o=this.faces.length;a<o;a++){var s=this.faces[a];s.normal.applyMatrix3(e).normalize();for(var u=0,c=s.vertexNormals.length;u<c;u++)s.vertexNormals[u].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(t){return Ml.makeRotationX(t),this.applyMatrix4(Ml),this},rotateY:function(t){return Ml.makeRotationY(t),this.applyMatrix4(Ml),this},rotateZ:function(t){return Ml.makeRotationZ(t),this.applyMatrix4(Ml),this},translate:function(t,e,n){return Ml.makeTranslation(t,e,n),this.applyMatrix4(Ml),this},scale:function(t,e,n){return Ml.makeScale(t,e,n),this.applyMatrix4(Ml),this},lookAt:function(t){return Sl.lookAt(t),Sl.updateMatrix(),this.applyMatrix4(Sl.matrix),this},fromBufferGeometry:function(t){function e(t,e,r,a){var o=void 0===u?[]:[i.colors[t].clone(),i.colors[e].clone(),i.colors[r].clone()],f=new A(t,e,r,void 0===s?[]:[(new c).fromBufferAttribute(s,t),(new c).fromBufferAttribute(s,e),(new c).fromBufferAttribute(s,r)],o,a);i.faces.push(f),void 0!==l&&i.faceVertexUvs[0].push([(new n).fromBufferAttribute(l,t),(new n).fromBufferAttribute(l,e),(new n).fromBufferAttribute(l,r)]),void 0!==h&&i.faceVertexUvs[1].push([(new n).fromBufferAttribute(h,t),(new n).fromBufferAttribute(h,e),(new n).fromBufferAttribute(h,r)])}var i=this,r=null!==t.index?t.index:void 0,a=t.attributes;if(void 0===a.position)return this;var o=a.position,s=a.normal,u=a.color,l=a.uv,h=a.uv2;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var f=0;f<o.count;f++)i.vertices.push((new c).fromBufferAttribute(o,f)),void 0!==u&&i.colors.push((new b).fromBufferAttribute(u,f));var p=t.groups;if(p.length>0)for(var d=0;d<p.length;d++)for(var m=p[d],v=m.start,g=v,y=v+m.count;g<y;g+=3)void 0!==r?e(r.getX(g),r.getX(g+1),r.getX(g+2),m.materialIndex):e(g,g+1,g+2,m.materialIndex);else if(void 0!==r)for(var _=0;_<r.count;_+=3)e(r.getX(_),r.getX(_+1),r.getX(_+2));else for(var x=0;x<o.count;x+=3)e(x,x+1,x+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Al).negate(),this.translate(Al.x,Al.y,Al.z),this},normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new l;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix4(i),this},computeFaceNormals:function(){for(var t=new c,e=new c,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],a=this.vertices[r.a],o=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,o),e.subVectors(a,o),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){void 0===t&&(t=!0);for(var e=new Array(this.vertices.length),n=0,i=this.vertices.length;n<i;n++)e[n]=new c;if(t)for(var r=new c,a=new c,o=0,s=this.faces.length;o<s;o++){var u=this.faces[o],l=this.vertices[u.a],h=this.vertices[u.b],f=this.vertices[u.c];r.subVectors(f,h),a.subVectors(l,h),r.cross(a),e[u.a].add(r),e[u.b].add(r),e[u.c].add(r)}else{this.computeFaceNormals();for(var p=0,d=this.faces.length;p<d;p++){var m=this.faces[p];e[m.a].add(m.normal),e[m.b].add(m.normal),e[m.c].add(m.normal)}}for(var v=0,g=this.vertices.length;v<g;v++)e[v].normalize();for(var y=0,_=this.faces.length;y<_;y++){var x=this.faces[y],b=x.vertexNormals;3===b.length?(b[0].copy(e[x.a]),b[1].copy(e[x.b]),b[2].copy(e[x.c])):(b[0]=e[x.a].clone(),b[1]=e[x.b].clone(),b[2]=e[x.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){this.computeFaceNormals();for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t],i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){for(var t=0,e=this.faces.length;t<e;t++){var n=this.faces[t];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);for(var i=0,r=n.vertexNormals.length;i<r;i++)n.__originalVertexNormals[i]?n.__originalVertexNormals[i].copy(n.vertexNormals[i]):n.__originalVertexNormals[i]=n.vertexNormals[i].clone()}var a=new W;a.faces=this.faces;for(var o=0,s=this.morphTargets.length;o<s;o++){if(!this.morphNormals[o]){this.morphNormals[o]={},this.morphNormals[o].faceNormals=[],this.morphNormals[o].vertexNormals=[];for(var u=this.morphNormals[o].faceNormals,l=this.morphNormals[o].vertexNormals,h=0,f=this.faces.length;h<f;h++){var p=new c,d={a:new c,b:new c,c:new c};u.push(p),l.push(d)}}var m=this.morphNormals[o];a.vertices=this.morphTargets[o].vertices,a.computeFaceNormals(),a.computeVertexNormals();for(var v=0,g=this.faces.length;v<g;v++){var y=this.faces[v],_=m.faceNormals[v],x=m.vertexNormals[v];_.copy(y.normal),x.a.copy(y.vertexNormals[0]),x.b.copy(y.vertexNormals[1]),x.c.copy(y.vertexNormals[2])}}for(var b=0,w=this.faces.length;b<w;b++){var M=this.faces[b];M.normal=M.__originalFaceNormal,M.vertexNormals=M.__originalVertexNormals}},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new m),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new g),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var r,a=this.vertices.length,o=this.vertices,s=t.vertices,u=this.faces,c=t.faces,l=this.colors,h=t.colors;void 0===n&&(n=0),void 0!==e&&(r=(new i).getNormalMatrix(e));for(var f=0,p=s.length;f<p;f++){var d=s[f].clone();void 0!==e&&d.applyMatrix4(e),o.push(d)}for(var m=0,v=h.length;m<v;m++)l.push(h[m].clone());for(var g=0,y=c.length;g<y;g++){var _=c[g],x=void 0,b=void 0,w=void 0,M=_.vertexNormals,S=_.vertexColors;(x=new A(_.a+a,_.b+a,_.c+a)).normal.copy(_.normal),void 0!==r&&x.normal.applyMatrix3(r).normalize();for(var T=0,P=M.length;T<P;T++)b=M[T].clone(),void 0!==r&&b.applyMatrix3(r).normalize(),x.vertexNormals.push(b);x.color.copy(_.color);for(var L=0,E=S.length;L<E;L++)w=S[L],x.vertexColors.push(w.clone());x.materialIndex=_.materialIndex+n,u.push(x)}for(var O=0,C=t.faceVertexUvs.length;O<C;O++){var F=t.faceVertexUvs[O];void 0===this.faceVertexUvs[O]&&(this.faceVertexUvs[O]=[]);for(var I=0,N=F.length;I<N;I++){for(var D=F[I],R=[],k=0,z=D.length;k<z;k++)R.push(D[k].clone());this.faceVertexUvs[O].push(R)}}}},mergeMesh:function(t){t&&t.isMesh&&(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix))},mergeVertices:function(){for(var t={},e=[],n=[],i=Math.pow(10,4),r=0,a=this.vertices.length;r<a;r++){var o=this.vertices[r],s=Math.round(o.x*i)+"_"+Math.round(o.y*i)+"_"+Math.round(o.z*i);void 0===t[s]?(t[s]=r,e.push(this.vertices[r]),n[r]=e.length-1):n[r]=n[t[s]]}for(var u=[],c=0,l=this.faces.length;c<l;c++){var h=this.faces[c];h.a=n[h.a],h.b=n[h.b],h.c=n[h.c];for(var f=[h.a,h.b,h.c],p=0;p<3;p++)if(f[p]===f[(p+1)%3]){u.push(c);break}}for(var d=u.length-1;d>=0;d--){var m=u[d];this.faces.splice(m,1);for(var v=0,g=this.faceVertexUvs.length;v<g;v++)this.faceVertexUvs[v].splice(m,1)}var y=this.vertices.length-e.length;return this.vertices=e,y},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new c(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;t.sort(function(t,e){return t.materialIndex-e.materialIndex});var i,r,a=this.faceVertexUvs[0],o=this.faceVertexUvs[1];a&&a.length===e&&(i=[]),o&&o.length===e&&(r=[]);for(var s=0;s<e;s++){var u=t[s]._id;i&&i.push(a[u]),r&&r.push(o[u])}i&&(this.faceVertexUvs[0]=i),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==f[e]?f[e]:(f[e]=h.length/3,h.push(t.x,t.y,t.z),f[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==d[e]?d[e]:(d[e]=p.length,p.push(t.getHex()),d[e])}function i(t){var e=t.x.toString()+t.y.toString();return void 0!==v[e]?v[e]:(v[e]=m.length/2,m.push(t.x,t.y),v[e])}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var a=this.parameters;for(var o in a)void 0!==a[o]&&(r[o]=a[o]);return r}for(var s=[],u=0;u<this.vertices.length;u++){var c=this.vertices[u];s.push(c.x,c.y,c.z)}for(var l=[],h=[],f={},p=[],d={},m=[],v={},g=0;g<this.faces.length;g++){var y=this.faces[g],_=void 0!==this.faceVertexUvs[0][g],x=y.normal.length()>0,b=y.vertexNormals.length>0,w=1!==y.color.r||1!==y.color.g||1!==y.color.b,M=y.vertexColors.length>0,S=0;if(S=t(S,0,0),S=t(S,1,!0),S=t(S,2,!1),S=t(S,3,_),S=t(S,4,x),S=t(S,5,b),S=t(S,6,w),S=t(S,7,M),l.push(S),l.push(y.a,y.b,y.c),l.push(y.materialIndex),_){var A=this.faceVertexUvs[0][g];l.push(i(A[0]),i(A[1]),i(A[2]))}if(x&&l.push(e(y.normal)),b){var T=y.vertexNormals;l.push(e(T[0]),e(T[1]),e(T[2]))}if(w&&l.push(n(y.color)),M){var P=y.vertexColors;l.push(n(P[0]),n(P[1]),n(P[2]))}}return r.data={},r.data.vertices=s,r.data.normals=h,p.length>0&&(r.data.colors=p),m.length>0&&(r.data.uvs=[m]),r.data.faces=l,r},clone:function(){return(new W).copy(this)},copy:function(t){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;for(var e=t.vertices,n=0,i=e.length;n<i;n++)this.vertices.push(e[n].clone());for(var r=t.colors,a=0,o=r.length;a<o;a++)this.colors.push(r[a].clone());for(var s=t.faces,u=0,c=s.length;u<c;u++)this.faces.push(s[u].clone());for(var l=0,h=t.faceVertexUvs.length;l<h;l++){var f=t.faceVertexUvs[l];void 0===this.faceVertexUvs[l]&&(this.faceVertexUvs[l]=[]);for(var p=0,d=f.length;p<d;p++){for(var m=f[p],v=[],g=0,y=m.length;g<y;g++){var _=m[g];v.push(_.clone())}this.faceVertexUvs[l].push(v)}}for(var x=t.morphTargets,b=0,w=x.length;b<w;b++){var M={};if(M.name=x[b].name,void 0!==x[b].vertices){M.vertices=[];for(var S=0,A=x[b].vertices.length;S<A;S++)M.vertices.push(x[b].vertices[S].clone())}if(void 0!==x[b].normals){M.normals=[];for(var T=0,P=x[b].normals.length;T<P;T++)M.normals.push(x[b].normals[T].clone())}this.morphTargets.push(M)}for(var L=t.morphNormals,E=0,O=L.length;E<O;E++){var C={};if(void 0!==L[E].vertexNormals){C.vertexNormals=[];for(var F=0,I=L[E].vertexNormals.length;F<I;F++){var N=L[E].vertexNormals[F],D={};D.a=N.a.clone(),D.b=N.b.clone(),D.c=N.c.clone(),C.vertexNormals.push(D)}}if(void 0!==L[E].faceNormals){C.faceNormals=[];for(var R=0,k=L[E].faceNormals.length;R<k;R++)C.faceNormals.push(L[E].faceNormals[R].clone())}this.morphNormals.push(C)}for(var z=t.skinWeights,U=0,B=z.length;U<B;U++)this.skinWeights.push(z[U].clone());for(var j=t.skinIndices,G=0,V=j.length;G<V;G++)this.skinIndices.push(j[G].clone());for(var W=t.lineDistances,H=0,X=W.length;H<X;H++)this.lineDistances.push(W[H]);var Y=t.boundingBox;null!==Y&&(this.boundingBox=Y.clone());var q=t.boundingSphere;return null!==q&&(this.boundingSphere=q.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),H.prototype=Object.create(W.prototype),H.prototype.constructor=H,X.prototype=Object.create(B.prototype),X.prototype.constructor=X;var Tl={clone:Y,merge:q},Pl="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",Ll="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";Q.prototype=Object.create(T.prototype),Q.prototype.constructor=Q,Q.prototype.isShaderMaterial=!0,Q.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Y(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this},Q.prototype.toJSON=function(t){var e=T.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var i=this.uniforms[n].value;i&&i.isTexture?e.uniforms[n]={type:"t",value:i.toJSON(t).uuid}:i&&i.isColor?e.uniforms[n]={type:"c",value:i.getHex()}:i&&i.isVector2?e.uniforms[n]={type:"v2",value:i.toArray()}:i&&i.isVector3?e.uniforms[n]={type:"v3",value:i.toArray()}:i&&i.isVector4?e.uniforms[n]={type:"v4",value:i.toArray()}:i&&i.isMatrix3?e.uniforms[n]={type:"m3",value:i.toArray()}:i&&i.isMatrix4?e.uniforms[n]={type:"m4",value:i.toArray()}:e.uniforms[n]={value:i}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var r={};for(var a in this.extensions)!0===this.extensions[a]&&(r[a]=!0);return Object.keys(r).length>0&&(e.extensions=r),e},Z.prototype=Object.assign(Object.create(p.prototype),{constructor:Z,isCamera:!0,copy:function(t,e){return p.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(t=new c),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){p.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},updateWorldMatrix:function(t,e){p.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),J.prototype=Object.assign(Object.create(Z.prototype),{constructor:J,isPerspectiveCamera:!0,copy:function(t,e){return Z.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*zu.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*zu.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*zu.RAD2DEG*Math.atan(Math.tan(.5*zu.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,a){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*zu.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,a=this.view;if(null!==this.view&&this.view.enabled){var o=a.fullWidth,s=a.fullHeight;r+=a.offsetX*i/o,e-=a.offsetY*n/s,i*=a.width/o,n*=a.height/s}var u=this.filmOffset;0!==u&&(r+=t*u/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=p.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});var El=90,Ol=1;$.prototype=Object.create(p.prototype),$.prototype.constructor=$,K.prototype=Object.create(o.prototype),K.prototype.constructor=K,K.prototype.isWebGLCubeRenderTarget=!0,K.prototype.fromEquirectangularTexture=function(t,e){this.texture.type=e.type,this.texture.format=ds,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;var n=new d,i="\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t#include <begin_vertex>\n\t\t\t\t#include <project_vertex>\n\n\t\t\t}\n\t\t",r="\n\n\t\t\tuniform sampler2D tEquirect;\n\n\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t}\n\t\t",a=new Q({name:"CubemapFromEquirect",uniforms:Y({tEquirect:{value:null}}),vertexShader:i,fragmentShader:r,side:Ja,blending:Ka});a.uniforms.tEquirect.value=e;var o=new j(new X(5,5,5),a);return n.add(o),new $(1,10,this).update(t,n),o.geometry.dispose(),o.material.dispose(),this},tt.prototype=Object.create(r.prototype),tt.prototype.constructor=tt,tt.prototype.isDataTexture=!0;var Cl=new g,Fl=new c;Object.assign(et.prototype,{set:function(t,e,n,i,r,a){var o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(n),o[3].copy(i),o[4].copy(r),o[5].copy(a),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromProjectionMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],a=n[2],o=n[3],s=n[4],u=n[5],c=n[6],l=n[7],h=n[8],f=n[9],p=n[10],d=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return e[0].setComponents(o-i,l-s,d-h,y-m).normalize(),e[1].setComponents(o+i,l+s,d+h,y+m).normalize(),e[2].setComponents(o+r,l+u,d+f,y+v).normalize(),e[3].setComponents(o-r,l-u,d-f,y-v).normalize(),e[4].setComponents(o-a,l-c,d-p,y-g).normalize(),e[5].setComponents(o+a,l+c,d+p,y+g).normalize(),this},intersectsObject:function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Cl.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Cl)},intersectsSprite:function(t){return Cl.center.set(0,0,0),Cl.radius=.7071067811865476,Cl.applyMatrix4(t.matrixWorld),this.intersectsSphere(Cl)},intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++){if(e[r].distanceToPoint(n)<i)return!1}return!0},intersectsBox:function(t){for(var e=this.planes,n=0;n<6;n++){var i=e[n];if(Fl.x=i.normal.x>0?t.max.x:t.min.x,Fl.y=i.normal.y>0?t.max.y:t.min.y,Fl.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Fl)<0)return!1}return!0},containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}});var Il={common:{diffuse:{value:new b(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new i},uv2Transform:{value:new i},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new n(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new b(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new b(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new i}},sprite:{diffuse:{value:new b(15658734)},opacity:{value:1},center:{value:new n(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new i}}};rt.prototype=Object.create(W.prototype),rt.prototype.constructor=rt,at.prototype=Object.create(B.prototype),at.prototype.constructor=at;var Nl={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);    } else if (face == 1.0) {\n      uv = vec2(-direction.x, -direction.z) / abs(direction.y);    } else if (face == 2.0) {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);    } else if (face == 3.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);    } else if (face == 4.0) {\n      uv = vec2(-direction.x, direction.z) / abs(direction.y);    } else {\n      uv = vec2(direction.x, direction.y) / abs(direction.z);    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV = equirectUv( reflectVec );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmissionmap_fragment:"#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",transmissionmap_pars_fragment:"#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},Dl={basic:{uniforms:q([Il.common,Il.specularmap,Il.envmap,Il.aomap,Il.lightmap,Il.fog]),vertexShader:Nl.meshbasic_vert,fragmentShader:Nl.meshbasic_frag},lambert:{uniforms:q([Il.common,Il.specularmap,Il.envmap,Il.aomap,Il.lightmap,Il.emissivemap,Il.fog,Il.lights,{emissive:{value:new b(0)}}]),vertexShader:Nl.meshlambert_vert,fragmentShader:Nl.meshlambert_frag},phong:{uniforms:q([Il.common,Il.specularmap,Il.envmap,Il.aomap,Il.lightmap,Il.emissivemap,Il.bumpmap,Il.normalmap,Il.displacementmap,Il.fog,Il.lights,{emissive:{value:new b(0)},specular:{value:new b(1118481)},shininess:{value:30}}]),vertexShader:Nl.meshphong_vert,fragmentShader:Nl.meshphong_frag},standard:{uniforms:q([Il.common,Il.envmap,Il.aomap,Il.lightmap,Il.emissivemap,Il.bumpmap,Il.normalmap,Il.displacementmap,Il.roughnessmap,Il.metalnessmap,Il.fog,Il.lights,{emissive:{value:new b(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nl.meshphysical_vert,fragmentShader:Nl.meshphysical_frag},toon:{uniforms:q([Il.common,Il.aomap,Il.lightmap,Il.emissivemap,Il.bumpmap,Il.normalmap,Il.displacementmap,Il.gradientmap,Il.fog,Il.lights,{emissive:{value:new b(0)}}]),vertexShader:Nl.meshtoon_vert,fragmentShader:Nl.meshtoon_frag},matcap:{uniforms:q([Il.common,Il.bumpmap,Il.normalmap,Il.displacementmap,Il.fog,{matcap:{value:null}}]),vertexShader:Nl.meshmatcap_vert,fragmentShader:Nl.meshmatcap_frag},points:{uniforms:q([Il.points,Il.fog]),vertexShader:Nl.points_vert,fragmentShader:Nl.points_frag},dashed:{uniforms:q([Il.common,Il.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nl.linedashed_vert,fragmentShader:Nl.linedashed_frag},depth:{uniforms:q([Il.common,Il.displacementmap]),vertexShader:Nl.depth_vert,fragmentShader:Nl.depth_frag},normal:{uniforms:q([Il.common,Il.bumpmap,Il.normalmap,Il.displacementmap,{opacity:{value:1}}]),vertexShader:Nl.normal_vert,fragmentShader:Nl.normal_frag},sprite:{uniforms:q([Il.sprite,Il.fog]),vertexShader:Nl.sprite_vert,fragmentShader:Nl.sprite_frag},background:{uniforms:{uvTransform:{value:new i},t2D:{value:null}},vertexShader:Nl.background_vert,fragmentShader:Nl.background_frag},cube:{uniforms:q([Il.envmap,{opacity:{value:1}}]),vertexShader:Nl.cube_vert,fragmentShader:Nl.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nl.equirect_vert,fragmentShader:Nl.equirect_frag},distanceRGBA:{uniforms:q([Il.common,Il.displacementmap,{referencePosition:{value:new c},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nl.distanceRGBA_vert,fragmentShader:Nl.distanceRGBA_frag},shadow:{uniforms:q([Il.lights,Il.fog,{color:{value:new b(0)},opacity:{value:1}}]),vertexShader:Nl.shadow_vert,fragmentShader:Nl.shadow_frag}};Dl.physical={uniforms:q([Dl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new n(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new b(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:Nl.meshphysical_vert,fragmentShader:Nl.meshphysical_frag},_t.prototype=Object.create(r.prototype),_t.prototype.constructor=_t,_t.prototype.isCubeTexture=!0,Object.defineProperty(_t.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),xt.prototype=Object.create(r.prototype),xt.prototype.constructor=xt,xt.prototype.isDataTexture2DArray=!0,bt.prototype=Object.create(r.prototype),bt.prototype.constructor=bt,bt.prototype.isDataTexture3D=!0;var Rl=new r,kl=new xt,zl=new bt,Ul=new _t,Bl=[],jl=[],Gl=new Float32Array(16),Vl=new Float32Array(9),Wl=new Float32Array(4);ne.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),St(e,t)},ie.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,a=i.length;r!==a;++r){var o=i[r];o.setValue(t,e[o.id],n)}};var Hl=/([\w\d_]+)(\])?(\[|\.)?/g;oe.prototype.setValue=function(t,e,n,i){var r=this.map[e];void 0!==r&&r.setValue(t,n,i)},oe.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},oe.upload=function(t,e,n,i){for(var r=0,a=e.length;r!==a;++r){var o=e[r],s=n[o.id];!1!==s.needsUpdate&&o.setValue(t,s.value,i)}},oe.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var a=t[i];a.id in e&&n.push(a)}return n};var Xl=0,Yl=/^[ \t]*#include +<([\w\d.\/]+)>/gm,ql=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Ql=/#pragma unroll_loop_start[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}[\s]+?#pragma unroll_loop_end/g,Zl=0;De.prototype=Object.create(T.prototype),De.prototype.constructor=De,De.prototype.isMeshDepthMaterial=!0,De.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Re.prototype=Object.create(T.prototype),Re.prototype.constructor=Re,Re.prototype.isMeshDistanceMaterial=!0,Re.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var Jl="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",$l="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";je.prototype=Object.assign(Object.create(J.prototype),{constructor:je,isArrayCamera:!0}),Ge.prototype=Object.assign(Object.create(p.prototype),{constructor:Ge,isGroup:!0}),Object.assign(Ve.prototype,{constructor:Ve,getHandSpace:function(){if(null===this._hand&&(this._hand=new Ge,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints=[],this._hand.inputState={pinching:!1},window.XRHand))for(var t=0;t<=window.XRHand.LITTLE_PHALANX_TIP;t++){var e=new Ge;e.matrixAutoUpdate=!1,e.visible=!1,this._hand.joints.push(e),this._hand.add(e)}return this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new Ge,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new Ge,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,n){var i=null,r=null,a=null,o=this._targetRay,s=this._grip,u=this._hand;if(t)if(t.hand){a=!0;for(var c=0;c<=window.XRHand.LITTLE_PHALANX_TIP;c++)if(t.hand[c]){var l=e.getJointPose(t.hand[c],n),h=u.joints[c];null!==l&&(h.matrix.fromArray(l.transform.matrix),h.matrix.decompose(h.position,h.rotation,h.scale),h.jointRadius=l.radius),h.visible=null!==l;var f=u.joints[window.XRHand.INDEX_PHALANX_TIP],p=u.joints[window.XRHand.THUMB_PHALANX_TIP],d=f.position.distanceTo(p.position);u.inputState.pinching&&d>.025?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!u.inputState.pinching&&d<=.015&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}}else null!==o&&(null!==(i=e.getPose(t.targetRaySpace,n))&&(o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale))),null!==s&&t.gripSpace&&(null!==(r=e.getPose(t.gripSpace,n))&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)));return null!==o&&(o.visible=null!==i),null!==s&&(s.visible=null!==r),null!==u&&(u.visible=null!==a),this}}),Object.assign(We.prototype,e.prototype),Ye.prototype=Object.assign(Object.create(Xe.prototype),{constructor:Ye,isWebGL1Renderer:!0}),Object.assign(qe.prototype,{isFogExp2:!0,clone:function(){return new qe(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Qe.prototype,{isFog:!0,clone:function(){return new Qe(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Object.defineProperty(Ze.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Ze.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=zu.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var e=new Ze(new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),this.stride);return e.setUsage(this.usage),e},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=zu.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});var Kl=new c;Object.defineProperties(Je.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(Je.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(var e=0,n=this.data.count;e<n;e++)Kl.x=this.getX(e),Kl.y=this.getY(e),Kl.z=this.getZ(e),Kl.applyMatrix4(t),this.setXYZ(e,Kl.x,Kl.y,Kl.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this},clone:function(t){if(void 0===t){for(var e=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)e.push(this.data.array[i+r]);return new L(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Je(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(void 0===t){for(var e=[],n=0;n<this.count;n++)for(var i=n*this.data.stride+this.offset,r=0;r<this.itemSize;r++)e.push(this.data.array[i+r]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),$e.prototype=Object.create(T.prototype),$e.prototype.constructor=$e,$e.prototype.isSpriteMaterial=!0,$e.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};var th,eh=new c,nh=new c,ih=new c,rh=new n,ah=new n,oh=new l,sh=new c,uh=new c,ch=new c,lh=new n,hh=new n,fh=new n;Ke.prototype=Object.assign(Object.create(p.prototype),{constructor:Ke,isSprite:!0,raycast:function(t,e){t.camera,nh.setFromMatrixScale(this.matrixWorld),oh.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),ih.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&nh.multiplyScalar(-ih.z);var i,r,a=this.material.rotation;0!==a&&(r=Math.cos(a),i=Math.sin(a));var o=this.center;tn(sh.set(-.5,-.5,0),ih,o,nh,i,r),tn(uh.set(.5,-.5,0),ih,o,nh,i,r),tn(ch.set(.5,.5,0),ih,o,nh,i,r),lh.set(0,0),hh.set(1,0),fh.set(1,1);var s=t.ray.intersectTriangle(sh,uh,ch,!1,eh);if(null!==s||(tn(uh.set(-.5,.5,0),ih,o,nh,i,r),hh.set(0,1),null!==(s=t.ray.intersectTriangle(sh,ch,uh,!1,eh)))){var u=t.ray.origin.distanceTo(eh);u<t.near||u>t.far||e.push({distance:u,point:eh.clone(),uv:x.getUV(eh,sh,uh,ch,lh,hh,fh,new n),face:null,object:this})}},copy:function(t){return p.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});var ph=new c,dh=new c;en.prototype=Object.assign(Object.create(p.prototype),{constructor:en,isLOD:!0,copy:function(t){p.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);var n,i=this.levels;for(n=0;n<i.length&&!(e<i[n].distance);n++);return i.splice(n,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){var e=this.levels;if(e.length>0){var n,i;for(n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object}return null},raycast:function(t,e){if(this.levels.length>0){ph.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(ph);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){var e=this.levels;if(e.length>1){ph.setFromMatrixPosition(t.matrixWorld),dh.setFromMatrixPosition(this.matrixWorld);var n,i,r=ph.distanceTo(dh)/t.zoom;for(e[0].object.visible=!0,n=1,i=e.length;n<i&&r>=e[n].distance;n++)e[n-1].object.visible=!1,e[n].object.visible=!0;for(this._currentLevel=n-1;n<i;n++)e[n].object.visible=!1}},toJSON:function(t){var e=p.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var a=n[i];e.object.levels.push({object:a.object.uuid,distance:a.distance})}return e}}),nn.prototype=Object.assign(Object.create(j.prototype),{constructor:nn,isSkinnedMesh:!0,copy:function(t){return j.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new a,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){j.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode&&this.bindMatrixInverse.getInverse(this.bindMatrix)},boneTransform:function(){var t=new c,e=new a,n=new a,i=new c,r=new l;return function(a,o){var s=this.skeleton,u=this.geometry;e.fromBufferAttribute(u.attributes.skinIndex,a),n.fromBufferAttribute(u.attributes.skinWeight,a),t.fromBufferAttribute(u.attributes.position,a).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(var c=0;c<4;c++){var l=n.getComponent(c);if(0!==l){var h=e.getComponent(c);r.multiplyMatrices(s.bones[h].matrixWorld,s.boneInverses[h]),o.addScaledVector(i.copy(t).applyMatrix4(r),l)}}return o.applyMatrix4(this.bindMatrixInverse)}}()});var mh=new l,vh=new l;Object.assign(rn.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new l;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){for(var t=0,e=this.bones.length;t<e;t++){var n=this.bones[t];n&&n.matrixWorld.getInverse(this.boneInverses[t])}for(var i=0,r=this.bones.length;i<r;i++){var a=this.bones[i];a&&(a.parent&&a.parent.isBone?(a.matrix.getInverse(a.parent.matrixWorld),a.matrix.multiply(a.matrixWorld)):a.matrix.copy(a.matrixWorld),a.matrix.decompose(a.position,a.quaternion,a.scale))}},update:function(){for(var t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture,r=0,a=t.length;r<a;r++){var o=t[r]?t[r].matrixWorld:vh;mh.multiplyMatrices(o,e[r]),mh.toArray(n,16*r)}void 0!==i&&(i.needsUpdate=!0)},clone:function(){return new rn(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}},dispose:function(){this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=void 0)}}),an.prototype=Object.assign(Object.create(p.prototype),{constructor:an,isBone:!0});var gh=new l,yh=new l,_h=[],xh=new j;on.prototype=Object.assign(Object.create(j.prototype),{constructor:on,isInstancedMesh:!0,copy:function(t){return j.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),this.count=t.count,this},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){var n=this.matrixWorld,i=this.count;if(xh.geometry=this.geometry,xh.material=this.material,void 0!==xh.material)for(var r=0;r<i;r++){this.getMatrixAt(r,gh),yh.multiplyMatrices(n,gh),xh.matrixWorld=yh,xh.raycast(t,_h);for(var a=0,o=_h.length;a<o;a++){var s=_h[a];s.instanceId=r,s.object=this,e.push(s)}_h.length=0}},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){}}),sn.prototype=Object.create(T.prototype),sn.prototype.constructor=sn,sn.prototype.isLineBasicMaterial=!0,sn.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};var bh=new c,wh=new c,Mh=new l,Sh=new y,Ah=new g;un.prototype=Object.assign(Object.create(p.prototype),{constructor:un,isLine:!0,copy:function(t){return p.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,n=[0],i=1,r=e.count;i<r;i++)bh.fromBufferAttribute(e,i-1),wh.fromBufferAttribute(e,i),n[i]=n[i-1],n[i]+=bh.distanceTo(wh);t.setAttribute("lineDistance",new R(n,1))}}else if(t.isGeometry){var a=t.vertices,o=t.lineDistances;o[0]=0;for(var s=1,u=a.length;s<u;s++)o[s]=o[s-1],o[s]+=a[s-1].distanceTo(a[s])}return this},raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ah.copy(n.boundingSphere),Ah.applyMatrix4(i),Ah.radius+=r,!1!==t.ray.intersectsSphere(Ah)){Mh.getInverse(i),Sh.copy(t.ray).applyMatrix4(Mh);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,s=new c,u=new c,l=new c,h=new c,f=this&&this.isLineSegments?2:1;if(n.isBufferGeometry){var p=n.index,d=n.attributes.position.array;if(null!==p)for(var m=p.array,v=0,g=m.length-1;v<g;v+=f){var y=m[v],_=m[v+1];if(s.fromArray(d,3*y),u.fromArray(d,3*_),!(Sh.distanceSqToSegment(s,u,h,l)>o)){h.applyMatrix4(this.matrixWorld);var x=t.ray.origin.distanceTo(h);x<t.near||x>t.far||e.push({distance:x,point:l.clone().applyMatrix4(this.matrixWorld),index:v,face:null,faceIndex:null,object:this})}}else for(var b=0,w=d.length/3-1;b<w;b+=f){if(s.fromArray(d,3*b),u.fromArray(d,3*b+3),!(Sh.distanceSqToSegment(s,u,h,l)>o)){h.applyMatrix4(this.matrixWorld);var M=t.ray.origin.distanceTo(h);M<t.near||M>t.far||e.push({distance:M,point:l.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(n.isGeometry)for(var S=n.vertices,A=S.length,T=0;T<A-1;T+=f){if(!(Sh.distanceSqToSegment(S[T],S[T+1],h,l)>o)){h.applyMatrix4(this.matrixWorld);var P=t.ray.origin.distanceTo(h);P<t.near||P>t.far||e.push({distance:P,point:l.clone().applyMatrix4(this.matrixWorld),index:T,face:null,faceIndex:null,object:this})}}}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=t.morphTargets;void 0!==s&&s.length}}});var Th=new c,Ph=new c;cn.prototype=Object.assign(Object.create(un.prototype),{constructor:cn,isLineSegments:!0,computeLineDistances:function(){var t=this.geometry;if(t.isBufferGeometry){if(null===t.index){for(var e=t.attributes.position,n=[],i=0,r=e.count;i<r;i+=2)Th.fromBufferAttribute(e,i),Ph.fromBufferAttribute(e,i+1),n[i]=0===i?0:n[i-1],n[i+1]=n[i]+Th.distanceTo(Ph);t.setAttribute("lineDistance",new R(n,1))}}else if(t.isGeometry)for(var a=t.vertices,o=t.lineDistances,s=0,u=a.length;s<u;s+=2)Th.copy(a[s]),Ph.copy(a[s+1]),o[s]=0===s?0:o[s-1],o[s+1]=o[s]+Th.distanceTo(Ph);return this}}),ln.prototype=Object.assign(Object.create(un.prototype),{constructor:ln,isLineLoop:!0}),hn.prototype=Object.create(T.prototype),hn.prototype.constructor=hn,hn.prototype.isPointsMaterial=!0,hn.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};var Lh=new l,Eh=new y,Oh=new g,Ch=new c;fn.prototype=Object.assign(Object.create(p.prototype),{constructor:fn,isPoints:!0,copy:function(t){return p.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){var n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),Oh.copy(n.boundingSphere),Oh.applyMatrix4(i),Oh.radius+=r,!1!==t.ray.intersectsSphere(Oh)){Lh.getInverse(i),Eh.copy(t.ray).applyMatrix4(Lh);var a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a;if(n.isBufferGeometry){var s=n.index,u=n.attributes.position.array;if(null!==s)for(var c=s.array,l=0,h=c.length;l<h;l++){var f=c[l];Ch.fromArray(u,3*f),pn(Ch,f,o,i,t,e,this)}else for(var p=0,d=u.length/3;p<d;p++)Ch.fromArray(u,3*p),pn(Ch,p,o,i,t,e,this)}else for(var m=n.vertices,v=0,g=m.length;v<g;v++)pn(m[v],v,o,i,t,e,this)}},updateMorphTargets:function(){var t=this.geometry;if(t.isBufferGeometry){var e=t.morphAttributes,n=Object.keys(e);if(n.length>0){var i=e[n[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var r=0,a=i.length;r<a;r++){var o=i[r].name||String(r);this.morphTargetInfluences.push(0),this.morphTargetDictionary[o]=r}}}}else{var s=t.morphTargets;void 0!==s&&s.length}}}),dn.prototype=Object.assign(Object.create(r.prototype),{constructor:dn,isVideoTexture:!0,update:function(){var t=this.image;!1==="requestVideoFrameCallback"in t&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),mn.prototype=Object.create(r.prototype),mn.prototype.constructor=mn,mn.prototype.isCompressedTexture=!0,vn.prototype=Object.create(r.prototype),vn.prototype.constructor=vn,vn.prototype.isCanvasTexture=!0,gn.prototype=Object.create(r.prototype),gn.prototype.constructor=gn,gn.prototype.isDepthTexture=!0,yn.prototype=Object.create(B.prototype),yn.prototype.constructor=yn,_n.prototype=Object.create(W.prototype),_n.prototype.constructor=_n,xn.prototype=Object.create(B.prototype),xn.prototype.constructor=xn,bn.prototype=Object.create(W.prototype),bn.prototype.constructor=bn,wn.prototype=Object.create(B.prototype),wn.prototype.constructor=wn,Mn.prototype=Object.create(W.prototype),Mn.prototype.constructor=Mn,Sn.prototype=Object.create(wn.prototype),Sn.prototype.constructor=Sn,An.prototype=Object.create(W.prototype),An.prototype.constructor=An,Tn.prototype=Object.create(wn.prototype),Tn.prototype.constructor=Tn,Pn.prototype=Object.create(W.prototype),Pn.prototype.constructor=Pn,Ln.prototype=Object.create(wn.prototype),Ln.prototype.constructor=Ln,En.prototype=Object.create(W.prototype),En.prototype.constructor=En,On.prototype=Object.create(wn.prototype),On.prototype.constructor=On,Cn.prototype=Object.create(W.prototype),Cn.prototype.constructor=Cn,Fn.prototype=Object.create(B.prototype),Fn.prototype.constructor=Fn,Fn.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},In.prototype=Object.create(W.prototype),In.prototype.constructor=In,Nn.prototype=Object.create(B.prototype),Nn.prototype.constructor=Nn,Dn.prototype=Object.create(W.prototype),Dn.prototype.constructor=Dn,Rn.prototype=Object.create(B.prototype),Rn.prototype.constructor=Rn;var Fh=function(t,e,n){n=n||2;var i,r,a,o,s,u,c,l=e&&e.length,h=l?e[0]*n:t.length,f=kn(t,0,h,n,!0),p=[];if(!f||f.next===f.prev)return p;if(l&&(f=function(t,e,n,i){var r,a,o,s=[];for(r=0,a=e.length;r<a;r++)(o=kn(t,e[r]*i,r<a-1?e[r+1]*i:t.length,i,!1))===o.next&&(o.steiner=!0),s.push(qn(o));for(s.sort(Wn),r=0;r<s.length;r++)Hn(s[r],n),n=zn(n,n.next);return n}(t,e,f,n)),t.length>80*n){i=a=t[0],r=o=t[1];for(var d=n;d<h;d+=n)(s=t[d])<i&&(i=s),(u=t[d+1])<r&&(r=u),s>a&&(a=s),u>o&&(o=u);c=0!==(c=Math.max(a-i,o-r))?1/c:0}return Un(f,p,n,i,r,c),p},Ih={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return Ih.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],r=[];si(t),ui(n,t);var a=t.length;e.forEach(si);for(var o=0;o<e.length;o++)i.push(a),a+=e[o].length,ui(n,e[o]);for(var s=Fh(n,i),u=0;u<s.length;u+=3)r.push(s.slice(u,u+3));return r}};ci.prototype=Object.create(W.prototype),ci.prototype.constructor=ci,ci.prototype.toJSON=function(){var t=W.prototype.toJSON.call(this);return hi(this.parameters.shapes,this.parameters.options,t)},li.prototype=Object.create(B.prototype),li.prototype.constructor=li,li.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this);return hi(this.parameters.shapes,this.parameters.options,t)};var Nh={generateTopUV:function(t,e,i,r,a){var o=e[3*i],s=e[3*i+1],u=e[3*r],c=e[3*r+1],l=e[3*a],h=e[3*a+1];return[new n(o,s),new n(u,c),new n(l,h)]},generateSideWallUV:function(t,e,i,r,a,o){var s=e[3*i],u=e[3*i+1],c=e[3*i+2],l=e[3*r],h=e[3*r+1],f=e[3*r+2],p=e[3*a],d=e[3*a+1],m=e[3*a+2],v=e[3*o],g=e[3*o+1],y=e[3*o+2];return Math.abs(u-h)<.01?[new n(s,1-c),new n(l,1-f),new n(p,1-m),new n(v,1-y)]:[new n(u,1-c),new n(h,1-f),new n(d,1-m),new n(g,1-y)]}};fi.prototype=Object.create(W.prototype),fi.prototype.constructor=fi,pi.prototype=Object.create(li.prototype),pi.prototype.constructor=pi,di.prototype=Object.create(W.prototype),di.prototype.constructor=di,mi.prototype=Object.create(B.prototype),mi.prototype.constructor=mi,vi.prototype=Object.create(W.prototype),vi.prototype.constructor=vi,gi.prototype=Object.create(B.prototype),gi.prototype.constructor=gi,yi.prototype=Object.create(W.prototype),yi.prototype.constructor=yi,_i.prototype=Object.create(B.prototype),_i.prototype.constructor=_i,xi.prototype=Object.create(W.prototype),xi.prototype.constructor=xi,xi.prototype.toJSON=function(){var t=W.prototype.toJSON.call(this);return wi(this.parameters.shapes,t)},bi.prototype=Object.create(B.prototype),bi.prototype.constructor=bi,bi.prototype.toJSON=function(){var t=B.prototype.toJSON.call(this);return wi(this.parameters.shapes,t)},Mi.prototype=Object.create(B.prototype),Mi.prototype.constructor=Mi,Si.prototype=Object.create(W.prototype),Si.prototype.constructor=Si,Ai.prototype=Object.create(B.prototype),Ai.prototype.constructor=Ai,Ti.prototype=Object.create(Si.prototype),Ti.prototype.constructor=Ti,Pi.prototype=Object.create(Ai.prototype),Pi.prototype.constructor=Pi,Li.prototype=Object.create(W.prototype),Li.prototype.constructor=Li,Ei.prototype=Object.create(B.prototype),Ei.prototype.constructor=Ei;var Dh=Object.freeze({__proto__:null,WireframeGeometry:yn,ParametricGeometry:_n,ParametricBufferGeometry:xn,TetrahedronGeometry:Mn,TetrahedronBufferGeometry:Sn,OctahedronGeometry:An,OctahedronBufferGeometry:Tn,IcosahedronGeometry:Pn,IcosahedronBufferGeometry:Ln,DodecahedronGeometry:En,DodecahedronBufferGeometry:On,PolyhedronGeometry:bn,PolyhedronBufferGeometry:wn,TubeGeometry:Cn,TubeBufferGeometry:Fn,TorusKnotGeometry:In,TorusKnotBufferGeometry:Nn,TorusGeometry:Dn,TorusBufferGeometry:Rn,TextGeometry:fi,TextBufferGeometry:pi,SphereGeometry:di,SphereBufferGeometry:mi,RingGeometry:vi,RingBufferGeometry:gi,PlaneGeometry:rt,PlaneBufferGeometry:at,LatheGeometry:yi,LatheBufferGeometry:_i,ShapeGeometry:xi,ShapeBufferGeometry:bi,ExtrudeGeometry:ci,ExtrudeBufferGeometry:li,EdgesGeometry:Mi,ConeGeometry:Ti,ConeBufferGeometry:Pi,CylinderGeometry:Si,CylinderBufferGeometry:Ai,CircleGeometry:Li,CircleBufferGeometry:Ei,BoxGeometry:H,BoxBufferGeometry:X});Oi.prototype=Object.create(T.prototype),Oi.prototype.constructor=Oi,Oi.prototype.isShadowMaterial=!0,Oi.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this},Ci.prototype=Object.create(Q.prototype),Ci.prototype.constructor=Ci,Ci.prototype.isRawShaderMaterial=!0,Fi.prototype=Object.create(T.prototype),Fi.prototype.constructor=Fi,Fi.prototype.isMeshStandardMaterial=!0,Fi.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},Ii.prototype=Object.create(Fi.prototype),Ii.prototype.constructor=Ii,Ii.prototype.isMeshPhysicalMaterial=!0,Ii.prototype.copy=function(t){return Fi.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new b).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},Ni.prototype=Object.create(T.prototype),Ni.prototype.constructor=Ni,Ni.prototype.isMeshPhongMaterial=!0,Ni.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Di.prototype=Object.create(T.prototype),Di.prototype.constructor=Di,Di.prototype.isMeshToonMaterial=!0,Di.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ri.prototype=Object.create(T.prototype),Ri.prototype.constructor=Ri,Ri.prototype.isMeshNormalMaterial=!0,Ri.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},ki.prototype=Object.create(T.prototype),ki.prototype.constructor=ki,ki.prototype.isMeshLambertMaterial=!0,ki.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},zi.prototype=Object.create(T.prototype),zi.prototype.constructor=zi,zi.prototype.isMeshMatcapMaterial=!0,zi.prototype.copy=function(t){return T.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ui.prototype=Object.create(sn.prototype),Ui.prototype.constructor=Ui,Ui.prototype.isLineDashedMaterial=!0,Ui.prototype.copy=function(t){return sn.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Rh=Object.freeze({__proto__:null,ShadowMaterial:Oi,SpriteMaterial:$e,RawShaderMaterial:Ci,ShaderMaterial:Q,PointsMaterial:hn,MeshPhysicalMaterial:Ii,MeshStandardMaterial:Fi,MeshPhongMaterial:Ni,MeshToonMaterial:Di,MeshNormalMaterial:Ri,MeshLambertMaterial:ki,MeshDepthMaterial:De,MeshDistanceMaterial:Re,MeshBasicMaterial:P,MeshMatcapMaterial:zi,LineDashedMaterial:Ui,LineBasicMaterial:sn,Material:T}),kh={arraySlice:function(t,e,n){return kh.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){for(var e=t.length,n=new Array(e),i=0;i!==e;++i)n[i]=i;return n.sort(function(e,n){return t[e]-t[n]}),n},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),a=0,o=0;o!==i;++a)for(var s=n[a]*e,u=0;u!==e;++u)r[o++]=t[s+u];return r},flattenJSON:function(t,e,n,i){for(var r=1,a=t[0];void 0!==a&&void 0===a[i];)a=t[r++];if(void 0!==a){var o=a[i];if(void 0!==o)if(Array.isArray(o))do{void 0!==(o=a[i])&&(e.push(a.time),n.push.apply(n,o)),a=t[r++]}while(void 0!==a);else if(void 0!==o.toArray)do{void 0!==(o=a[i])&&(e.push(a.time),o.toArray(n,n.length)),a=t[r++]}while(void 0!==a);else do{void 0!==(o=a[i])&&(e.push(a.time),n.push(o)),a=t[r++]}while(void 0!==a)}},subclip:function(t,e,n,i,r){r=r||30;var a=t.clone();a.name=e;for(var o=[],s=0;s<a.tracks.length;++s){for(var u=a.tracks[s],c=u.getValueSize(),l=[],h=[],f=0;f<u.times.length;++f){var p=u.times[f]*r;if(!(p<n||p>=i)){l.push(u.times[f]);for(var d=0;d<c;++d)h.push(u.values[f*c+d])}}0!==l.length&&(u.times=kh.convertArray(l,u.times.constructor),u.values=kh.convertArray(h,u.values.constructor),o.push(u))}a.tracks=o;for(var m=1/0,v=0;v<a.tracks.length;++v)m>a.tracks[v].times[0]&&(m=a.tracks[v].times[0]);for(var g=0;g<a.tracks.length;++g)a.tracks[g].shift(-1*m);return a.resetDuration(),a},makeClipAdditive:function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=t),(void 0===i||i<=0)&&(i=30);for(var r=t.tracks.length,a=e/i,o=function(e){var i=n.tracks[e],r=i.ValueTypeName;if("bool"!==r&&"string"!==r){var o=t.tracks.find(function(t){return t.name===i.name&&t.ValueTypeName===r});if(void 0!==o){var s=i.getValueSize(),c=i.times.length-1,l=void 0;if(a<=i.times[0])l=kh.arraySlice(i.values,0,i.valueSize);else if(a>=i.times[c]){var h=c*s;l=kh.arraySlice(i.values,h)}else{var f=i.createInterpolant();f.evaluate(a),l=f.resultBuffer}if("quaternion"===r)new u(l[0],l[1],l[2],l[3]).normalize().conjugate().toArray(l);for(var p=o.times.length,d=0;d<p;++d){var m=d*s;if("quaternion"===r)u.multiplyQuaternionsFlat(o.values,m,l,0,o.values,m);else for(var v=0;v<s;++v)o.values[m+v]-=l[v]}}}},s=0;s<r;++s)o(s);return t.blendMode=2501,t}};Object.assign(Bi.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var a;n:{i:if(!(t<i)){for(var o=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===o)break;if(r=i,t<(i=e[++n]))break e}a=e.length;break n}if(t>=r)break t;var s=e[1];t<s&&(n=2,r=s);for(var u=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===u)break;if(i=r,t>=(r=e[--n-1]))break e}a=n,n=0}for(;n<a;){var c=n+a>>>1;t<e[c]?a=c:n=c+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,a=0;a!==i;++a)e[a]=n[r+a];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Bi.prototype,{beforeStart_:Bi.prototype.copySampleValue_,afterEnd_:Bi.prototype.copySampleValue_}),ji.prototype=Object.assign(Object.create(Bi.prototype),{constructor:ji,DefaultSettings_:{endingStart:mu,endingEnd:mu},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,a=t+1,o=i[r],s=i[a];if(void 0===o)switch(this.getSettings_().endingStart){case vu:r=t,o=2*e-n;break;case gu:o=e+i[r=i.length-2]-i[r+1];break;default:r=t,o=n}if(void 0===s)switch(this.getSettings_().endingEnd){case vu:a=t,s=2*n-e;break;case gu:a=1,s=n+i[1]-i[0];break;default:a=t-1,s=e}var u=.5*(n-e),c=this.valueSize;this._weightPrev=u/(e-o),this._weightNext=u/(s-n),this._offsetPrev=r*c,this._offsetNext=a*c},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,c=this._offsetPrev,l=this._offsetNext,h=this._weightPrev,f=this._weightNext,p=(n-e)/(i-e),d=p*p,m=d*p,v=-h*m+2*h*d-h*p,g=(1+h)*m+(-1.5-2*h)*d+(-.5+h)*p+1,y=(-1-f)*m+(1.5+f)*d+.5*p,_=f*m-f*d,x=0;x!==o;++x)r[x]=v*a[c+x]+g*a[u+x]+y*a[s+x]+_*a[l+x];return r}}),Gi.prototype=Object.assign(Object.create(Bi.prototype),{constructor:Gi,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=t*o,u=s-o,c=(n-e)/(i-e),l=1-c,h=0;h!==o;++h)r[h]=a[u+h]*l+a[s+h]*c;return r}}),Vi.prototype=Object.assign(Object.create(Bi.prototype),{constructor:Vi,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Wi,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:kh.convertArray(t.times,Array),values:kh.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(Wi.prototype,{constructor:Wi,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:du,InterpolantFactoryMethodDiscrete:function(t){return new Vi(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Gi(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new ji(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case pu:e=this.InterpolantFactoryMethodDiscrete;break;case du:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return pu;case this.InterpolantFactoryMethodLinear:return du;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,a=i-1;r!==i&&n[r]<t;)++r;for(;-1!==a&&n[a]>e;)--a;if(++a,0!==r||a!==i){r>=a&&(r=(a=Math.max(a,1))-1);var o=this.getValueSize();this.times=kh.arraySlice(n,r,a),this.values=kh.arraySlice(this.values,r*o,a*o)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(t=!1);for(var a=null,o=0;o!==r;o++){var s=n[o];if("number"==typeof s&&isNaN(s)){t=!1;break}if(null!==a&&a>s){t=!1;break}a=s}if(void 0!==i&&kh.isTypedArray(i))for(var u=0,c=i.length;u!==c;++u){var l=i[u];if(isNaN(l)){t=!1;break}}return t},optimize:function(){for(var t=kh.arraySlice(this.times),e=kh.arraySlice(this.values),n=this.getValueSize(),i=2302===this.getInterpolation(),r=t.length-1,a=1,o=1;o<r;++o){var s=!1,u=t[o];if(u!==t[o+1]&&(1!==o||u!==u[0]))if(i)s=!0;else for(var c=o*n,l=c-n,h=c+n,f=0;f!==n;++f){var p=e[c+f];if(p!==e[l+f]||p!==e[h+f]){s=!0;break}}if(s){if(o!==a){t[a]=t[o];for(var d=o*n,m=a*n,v=0;v!==n;++v)e[m+v]=e[d+v]}++a}}if(r>0){t[a]=t[r];for(var g=r*n,y=a*n,_=0;_!==n;++_)e[y+_]=e[g+_];++a}return a!==t.length?(this.times=kh.arraySlice(t,0,a),this.values=kh.arraySlice(e,0,a*n)):(this.times=t,this.values=e),this},clone:function(){var t=kh.arraySlice(this.times,0),e=kh.arraySlice(this.values,0),n=new(0,this.constructor)(this.name,t,e);return n.createInterpolant=this.createInterpolant,n}}),Hi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Hi,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:pu,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Xi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Xi,ValueTypeName:"color"}),Yi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Yi,ValueTypeName:"number"}),qi.prototype=Object.assign(Object.create(Bi.prototype),{constructor:qi,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,o=this.valueSize,s=(n-e)/(i-e),c=t*o,l=c+o;c!==l;c+=4)u.slerpFlat(r,0,a,c-o,a,c,s);return r}}),Qi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Qi,ValueTypeName:"quaternion",DefaultInterpolation:du,InterpolantFactoryMethodLinear:function(t){return new qi(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Zi.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Zi,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:pu,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ji.prototype=Object.assign(Object.create(Wi.prototype),{constructor:Ji,ValueTypeName:"vector"}),Object.assign($i,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,a=n.length;r!==a;++r)e.push(Ki(n[r]).scale(i));return new $i(t.name,t.duration,e,t.blendMode)},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode},r=0,a=n.length;r!==a;++r)e.push(Wi.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,a=[],o=0;o<r;o++){var s=[],u=[];s.push((o+r-1)%r,o,(o+1)%r),u.push(0,1,0);var c=kh.getKeyframeOrder(s);s=kh.sortedArray(s,1,c),u=kh.sortedArray(u,1,c),i||0!==s[0]||(s.push(r),u.push(u[0])),a.push(new Yi(".morphTargetInfluences["+e[o].name+"]",s,u).scale(1/n))}return new $i(t,-1,a)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,a=0,o=t.length;a<o;a++){var s=t[a],u=s.name.match(r);if(u&&u.length>1){var c=u[1],l=i[c];l||(i[c]=l=[]),l.push(s)}}var h=[];for(var f in i)h.push($i.CreateFromMorphTargetSequence(f,i[f],e,n));return h},parseAnimation:function(t,e){if(!t)return null;for(var n=function(t,e,n,i,r){if(0!==n.length){var a=[],o=[];kh.flattenJSON(n,a,o,i),0!==a.length&&r.push(new t(e,a,o))}},i=[],r=t.name||"default",a=t.fps||30,o=t.blendMode,s=t.length||-1,u=t.hierarchy||[],c=0;c<u.length;c++){var l=u[c].keys;if(l&&0!==l.length)if(l[0].morphTargets){var h={},f=void 0;for(f=0;f<l.length;f++)if(l[f].morphTargets)for(var p=0;p<l[f].morphTargets.length;p++)h[l[f].morphTargets[p]]=-1;for(var d in h){for(var m=[],v=[],g=0;g!==l[f].morphTargets.length;++g){var y=l[f];m.push(y.time),v.push(y.morphTarget===d?1:0)}i.push(new Yi(".morphTargetInfluence["+d+"]",m,v))}s=h.length*(a||1)}else{var _=".bones["+e[c].name+"]";n(Ji,_+".position",l,"pos",i),n(Qi,_+".quaternion",l,"rot",i),n(Ji,_+".scale",l,"scl",i)}}return 0===i.length?null:new $i(r,s,i,o)}}),Object.assign($i.prototype,{resetDuration:function(){for(var t=0,e=0,n=this.tracks.length;e!==n;++e){var i=this.tracks[e];t=Math.max(t,i.times[i.times.length-1])}return this.duration=t,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new $i(this.name,this.duration,t,this.blendMode)}});var zh={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},Uh=new tr;Object.assign(er.prototype,{load:function(){},loadAsync:function(t,e){var n=this;return new Promise(function(i,r){n.load(t,i,e,r)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});var Bh={};nr.prototype=Object.assign(Object.create(er.prototype),{constructor:nr,load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=zh.get(t);if(void 0!==a)return r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a;if(void 0===Bh[t]){var o,s=t.match(/^data:(.*?)(;base64)?,(.*)$/);if(s){var u=s[1],c=!!s[2],l=s[3];l=decodeURIComponent(l),c&&(l=atob(l));try{var h,f=(this.responseType||"").toLowerCase();switch(f){case"arraybuffer":case"blob":for(var p=new Uint8Array(l.length),d=0;d<l.length;d++)p[d]=l.charCodeAt(d);h="blob"===f?new Blob([p.buffer],{type:u}):p.buffer;break;case"document":var m=new DOMParser;h=m.parseFromString(l,u);break;case"json":h=JSON.parse(l);break;default:h=l}setTimeout(function(){e&&e(h),r.manager.itemEnd(t)},0)}catch(e){setTimeout(function(){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)},0)}}else{for(var v in Bh[t]=[],Bh[t].push({onLoad:e,onProgress:n,onError:i}),(o=new XMLHttpRequest).open("GET",t,!0),o.addEventListener("load",function(e){var n=this.response,i=Bh[t];if(delete Bh[t],200===this.status||0===this.status){this.status,zh.add(t,n);for(var a=0,o=i.length;a<o;a++){var s=i[a];s.onLoad&&s.onLoad(n)}r.manager.itemEnd(t)}else{for(var u=0,c=i.length;u<c;u++){var l=i[u];l.onError&&l.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}},!1),o.addEventListener("progress",function(e){for(var n=Bh[t],i=0,r=n.length;i<r;i++){var a=n[i];a.onProgress&&a.onProgress(e)}},!1),o.addEventListener("error",function(e){var n=Bh[t];delete Bh[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),o.addEventListener("abort",function(e){var n=Bh[t];delete Bh[t];for(var i=0,a=n.length;i<a;i++){var o=n[i];o.onError&&o.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),void 0!==this.responseType&&(o.responseType=this.responseType),void 0!==this.withCredentials&&(o.withCredentials=this.withCredentials),o.overrideMimeType&&o.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)o.setRequestHeader(v,this.requestHeader[v]);o.send(null)}return r.manager.itemStart(t),o}Bh[t].push({onLoad:e,onProgress:n,onError:i})},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this}}),ir.prototype=Object.assign(Object.create(er.prototype),{constructor:ir,load:function(t,e,n,i){var r=this,a=new nr(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i&&i(e),r.manager.itemError(t)}},n,i)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=$i.parse(t[n]);e.push(i)}return e}}),rr.prototype=Object.assign(Object.create(er.prototype),{constructor:rr,load:function(t,e,n,i){function r(r){u.load(t[r],function(t){var n=a.parse(t,!0);o[r]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(c+=1)&&(1===n.mipmapCount&&(s.minFilter=Jo),s.format=n.format,s.needsUpdate=!0,e&&e(s))},n,i)}var a=this,o=[],s=new mn;s.image=o;var u=new nr(this.manager);u.setPath(this.path),u.setResponseType("arraybuffer"),u.setRequestHeader(this.requestHeader);var c=0;if(Array.isArray(t))for(var l=0,h=t.length;l<h;++l)r(l);else u.load(t,function(t){var n=a.parse(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,r=0;r<i;r++){o[r]={mipmaps:[]};for(var u=0;u<n.mipmapCount;u++)o[r].mipmaps.push(n.mipmaps[r*n.mipmapCount+u]),o[r].format=n.format,o[r].width=n.width,o[r].height=n.height}else s.image.width=n.width,s.image.height=n.height,s.mipmaps=n.mipmaps;1===n.mipmapCount&&(s.minFilter=Jo),s.format=n.format,s.needsUpdate=!0,e&&e(s)},n,i);return s}}),ar.prototype=Object.assign(Object.create(er.prototype),{constructor:ar,load:function(t,e,n,i){var r=this,a=new tt,o=new nr(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.load(t,function(t){var n=r.parse(t);n&&(void 0!==n.image?a.image=n.image:void 0!==n.data&&(a.image.width=n.width,a.image.height=n.height,a.image.data=n.data),a.wrapS=void 0!==n.wrapS?n.wrapS:Xo,a.wrapT=void 0!==n.wrapT?n.wrapT:Xo,a.magFilter=void 0!==n.magFilter?n.magFilter:Jo,a.minFilter=void 0!==n.minFilter?n.minFilter:Jo,a.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(a.format=n.format),void 0!==n.type&&(a.type=n.type),void 0!==n.mipmaps&&(a.mipmaps=n.mipmaps,a.minFilter=Ko),1===n.mipmapCount&&(a.minFilter=Jo),a.needsUpdate=!0,e&&e(a,n))},n,i),a}}),or.prototype=Object.assign(Object.create(er.prototype),{constructor:or,load:function(t,e,n,i){function r(){u.removeEventListener("load",r,!1),u.removeEventListener("error",a,!1),zh.add(t,this),e&&e(this),o.manager.itemEnd(t)}function a(e){u.removeEventListener("load",r,!1),u.removeEventListener("error",a,!1),i&&i(e),o.manager.itemError(t),o.manager.itemEnd(t)}void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var o=this,s=zh.get(t);if(void 0!==s)return o.manager.itemStart(t),setTimeout(function(){e&&e(s),o.manager.itemEnd(t)},0),s;var u=document.createElementNS("http://www.w3.org/1999/xhtml","img");return u.addEventListener("load",r,!1),u.addEventListener("error",a,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(u.crossOrigin=this.crossOrigin),o.manager.itemStart(t),u.src=t,u}}),sr.prototype=Object.assign(Object.create(er.prototype),{constructor:sr,load:function(t,e,n,i){function r(n){o.load(t[n],function(t){a.images[n]=t,6===++s&&(a.needsUpdate=!0,e&&e(a))},void 0,i)}var a=new _t,o=new or(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var s=0,u=0;u<t.length;++u)r(u);return a}}),ur.prototype=Object.assign(Object.create(er.prototype),{constructor:ur,load:function(t,e,n,i){var a=new r,o=new or(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){a.image=n;var i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);a.format=i?ps:ds,a.needsUpdate=!0,void 0!==e&&e(a)},n,i),a}}),Object.assign(cr.prototype,{getPoint:function(){return null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n=[],i=this.getPoint(0),r=0;n.push(0);for(var a=1;a<=t;a++)r+=(e=this.getPoint(a/t)).distanceTo(i),n.push(r),i=e;return this.cacheArcLengths=n,n},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,a=i.length;n=e||t*i[a-1];for(var o,s=0,u=a-1;s<=u;)if((o=i[r=Math.floor(s+(u-s)/2)]-n)<0)s=r+1;else{if(!(o>0)){u=r;break}u=r-1}if(i[r=u]===n)return r/(a-1);var c=i[r];return(r+(n-c)/(i[r+1]-c))/(a-1)},getTangent:function(t,e){var i=t-1e-4,r=t+1e-4;i<0&&(i=0),r>1&&(r=1);var a=this.getPoint(i),o=this.getPoint(r),s=e||(a.isVector2?new n:new c);return s.copy(o).sub(a).normalize(),s},getTangentAt:function(t,e){var n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){for(var n=new c,i=[],r=[],a=[],o=new c,s=new l,u=0;u<=t;u++){var h=u/t;i[u]=this.getTangentAt(h,new c),i[u].normalize()}r[0]=new c,a[0]=new c;var f=Number.MAX_VALUE,p=Math.abs(i[0].x),d=Math.abs(i[0].y),m=Math.abs(i[0].z);p<=f&&(f=p,n.set(1,0,0)),d<=f&&(f=d,n.set(0,1,0)),m<=f&&n.set(0,0,1),o.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],o),a[0].crossVectors(i[0],r[0]);for(var v=1;v<=t;v++){if(r[v]=r[v-1].clone(),a[v]=a[v-1].clone(),o.crossVectors(i[v-1],i[v]),o.length()>Number.EPSILON){o.normalize();var g=Math.acos(zu.clamp(i[v-1].dot(i[v]),-1,1));r[v].applyMatrix4(s.makeRotationAxis(o,g))}a[v].crossVectors(i[v],r[v])}if(!0===e){var y=Math.acos(zu.clamp(r[0].dot(r[t]),-1,1));y/=t,i[0].dot(o.crossVectors(r[0],r[t]))>0&&(y=-y);for(var _=1;_<=t;_++)r[_].applyMatrix4(s.makeRotationAxis(i[_],y*_)),a[_].crossVectors(i[_],r[_])}return{tangents:i,normals:r,binormals:a}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),lr.prototype=Object.create(cr.prototype),lr.prototype.constructor=lr,lr.prototype.isEllipseCurve=!0,lr.prototype.getPoint=function(t,e){for(var i=e||new n,r=2*Math.PI,a=this.aEndAngle-this.aStartAngle,o=Math.abs(a)<Number.EPSILON;a<0;)a+=r;for(;a>r;)a-=r;a<Number.EPSILON&&(a=o?0:r),!0!==this.aClockwise||o||(a===r?a=-r:a-=r);var s=this.aStartAngle+t*a,u=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var l=Math.cos(this.aRotation),h=Math.sin(this.aRotation),f=u-this.aX,p=c-this.aY;u=f*l-p*h+this.aX,c=f*h+p*l+this.aY}return i.set(u,c)},lr.prototype.copy=function(t){return cr.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},lr.prototype.toJSON=function(){var t=cr.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},lr.prototype.fromJSON=function(t){return cr.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},hr.prototype=Object.create(lr.prototype),hr.prototype.constructor=hr,hr.prototype.isArcCurve=!0;var jh=new c,Gh=new fr,Vh=new fr,Wh=new fr;pr.prototype=Object.create(cr.prototype),pr.prototype.constructor=pr,pr.prototype.isCatmullRomCurve3=!0,pr.prototype.getPoint=function(t,e){var n,i,r,a,o=e||new c,s=this.points,u=s.length,l=(u-(this.closed?0:1))*t,h=Math.floor(l),f=l-h;if(this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/u)+1)*u:0===f&&h===u-1&&(h=u-2,f=1),this.closed||h>0?n=s[(h-1)%u]:(jh.subVectors(s[0],s[1]).add(s[0]),n=jh),i=s[h%u],r=s[(h+1)%u],this.closed||h+2<u?a=s[(h+2)%u]:(jh.subVectors(s[u-1],s[u-2]).add(s[u-1]),a=jh),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,d=Math.pow(n.distanceToSquared(i),p),m=Math.pow(i.distanceToSquared(r),p),v=Math.pow(r.distanceToSquared(a),p);m<1e-4&&(m=1),d<1e-4&&(d=m),v<1e-4&&(v=m),Gh.initNonuniformCatmullRom(n.x,i.x,r.x,a.x,d,m,v),Vh.initNonuniformCatmullRom(n.y,i.y,r.y,a.y,d,m,v),Wh.initNonuniformCatmullRom(n.z,i.z,r.z,a.z,d,m,v)}else"catmullrom"===this.curveType&&(Gh.initCatmullRom(n.x,i.x,r.x,a.x,this.tension),Vh.initCatmullRom(n.y,i.y,r.y,a.y,this.tension),Wh.initCatmullRom(n.z,i.z,r.z,a.z,this.tension));return o.set(Gh.calc(f),Vh.calc(f),Wh.calc(f)),o},pr.prototype.copy=function(t){cr.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},pr.prototype.toJSON=function(){var t=cr.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},pr.prototype.fromJSON=function(t){cr.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new c).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},gr.prototype=Object.create(cr.prototype),gr.prototype.constructor=gr,gr.prototype.isCubicBezierCurve=!0,gr.prototype.getPoint=function(t,e){var i=e||new n,r=this.v0,a=this.v1,o=this.v2,s=this.v3;return i.set(vr(t,r.x,a.x,o.x,s.x),vr(t,r.y,a.y,o.y,s.y)),i},gr.prototype.copy=function(t){return cr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},gr.prototype.toJSON=function(){var t=cr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},gr.prototype.fromJSON=function(t){return cr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},yr.prototype=Object.create(cr.prototype),yr.prototype.constructor=yr,yr.prototype.isCubicBezierCurve3=!0,yr.prototype.getPoint=function(t,e){var n=e||new c,i=this.v0,r=this.v1,a=this.v2,o=this.v3;return n.set(vr(t,i.x,r.x,a.x,o.x),vr(t,i.y,r.y,a.y,o.y),vr(t,i.z,r.z,a.z,o.z)),n},yr.prototype.copy=function(t){return cr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},yr.prototype.toJSON=function(){var t=cr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},yr.prototype.fromJSON=function(t){return cr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},_r.prototype=Object.create(cr.prototype),_r.prototype.constructor=_r,_r.prototype.isLineCurve=!0,_r.prototype.getPoint=function(t,e){var i=e||new n;return 1===t?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(t).add(this.v1)),i},_r.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},_r.prototype.getTangent=function(t,e){var i=e||new n;return i.copy(this.v2).sub(this.v1).normalize(),i},_r.prototype.copy=function(t){return cr.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},_r.prototype.toJSON=function(){var t=cr.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},_r.prototype.fromJSON=function(t){return cr.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},xr.prototype=Object.create(cr.prototype),xr.prototype.constructor=xr,xr.prototype.isLineCurve3=!0,xr.prototype.getPoint=function(t,e){var n=e||new c;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},xr.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},xr.prototype.copy=function(t){return cr.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},xr.prototype.toJSON=function(){var t=cr.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},xr.prototype.fromJSON=function(t){return cr.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},br.prototype=Object.create(cr.prototype),br.prototype.constructor=br,br.prototype.isQuadraticBezierCurve=!0,br.prototype.getPoint=function(t,e){var i=e||new n,r=this.v0,a=this.v1,o=this.v2;return i.set(mr(t,r.x,a.x,o.x),mr(t,r.y,a.y,o.y)),i},br.prototype.copy=function(t){return cr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},br.prototype.toJSON=function(){var t=cr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},br.prototype.fromJSON=function(t){return cr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},wr.prototype=Object.create(cr.prototype),wr.prototype.constructor=wr,wr.prototype.isQuadraticBezierCurve3=!0,wr.prototype.getPoint=function(t,e){var n=e||new c,i=this.v0,r=this.v1,a=this.v2;return n.set(mr(t,i.x,r.x,a.x),mr(t,i.y,r.y,a.y),mr(t,i.z,r.z,a.z)),n},wr.prototype.copy=function(t){return cr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},wr.prototype.toJSON=function(){var t=cr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},wr.prototype.fromJSON=function(t){return cr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Mr.prototype=Object.create(cr.prototype),Mr.prototype.constructor=Mr,Mr.prototype.isSplineCurve=!0,Mr.prototype.getPoint=function(t,e){var i=e||new n,r=this.points,a=(r.length-1)*t,o=Math.floor(a),s=a-o,u=r[0===o?o:o-1],c=r[o],l=r[o>r.length-2?r.length-1:o+1],h=r[o>r.length-3?r.length-1:o+2];return i.set(dr(s,u.x,c.x,l.x,h.x),dr(s,u.y,c.y,l.y,h.y)),i},Mr.prototype.copy=function(t){cr.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this},Mr.prototype.toJSON=function(){var t=cr.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t},Mr.prototype.fromJSON=function(t){cr.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,i=t.points.length;e<i;e++){var r=t.points[e];this.points.push((new n).fromArray(r))}return this};var Hh=Object.freeze({__proto__:null,ArcCurve:hr,CatmullRomCurve3:pr,CubicBezierCurve:gr,CubicBezierCurve3:yr,EllipseCurve:lr,LineCurve:_r,LineCurve3:xr,QuadraticBezierCurve:br,QuadraticBezierCurve3:wr,SplineCurve:Mr});Sr.prototype=Object.assign(Object.create(cr.prototype),{constructor:Sr,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new _r(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,a=this.curves[i],o=a.getLength(),s=0===o?0:1-r/o;return a.getPointAt(s)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var a=r[i],o=a&&a.isEllipseCurve?2*t:a&&(a.isLineCurve||a.isLineCurve3)?1:a&&a.isSplineCurve?t*a.points.length:t,s=a.getPoints(o),u=0;u<s.length;u++){var c=s[u];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){cr.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=cr.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){cr.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push((new Hh[i.type]).fromJSON(i))}return this}}),Ar.prototype=Object.assign(Object.create(Sr.prototype),{constructor:Ar,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){var i=new _r(this.currentPoint.clone(),new n(t,e));return this.curves.push(i),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,i,r){var a=new br(this.currentPoint.clone(),new n(t,e),new n(i,r));return this.curves.push(a),this.currentPoint.set(i,r),this},bezierCurveTo:function(t,e,i,r,a,o){var s=new gr(this.currentPoint.clone(),new n(t,e),new n(i,r),new n(a,o));return this.curves.push(s),this.currentPoint.set(a,o),this},splineThru:function(t){var e=new Mr([this.currentPoint.clone()].concat(t));return this.curves.push(e),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,i,r,a){var o=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+o,e+s,n,i,r,a),this},absarc:function(t,e,n,i,r,a){return this.absellipse(t,e,n,n,i,r,a),this},ellipse:function(t,e,n,i,r,a,o,s){var u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+u,e+c,n,i,r,a,o,s),this},absellipse:function(t,e,n,i,r,a,o,s){var u=new lr(t,e,n,i,r,a,o,s);if(this.curves.length>0){var c=u.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(u);var l=u.getPoint(1);return this.currentPoint.copy(l),this},copy:function(t){return Sr.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Sr.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Sr.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Tr.prototype=Object.assign(Object.create(Ar.prototype),{constructor:Tr,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Ar.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){var t=Ar.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){Ar.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push((new Ar).fromJSON(i))}return this}}),Pr.prototype=Object.assign(Object.create(p.prototype),{constructor:Pr,isLight:!0,copy:function(t){return p.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=p.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Lr.prototype=Object.assign(Object.create(Pr.prototype),{constructor:Lr,isHemisphereLight:!0,copy:function(t){return Pr.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Er.prototype,{_projScreenMatrix:new l,_lightPositionWorld:new c,_lookTarget:new c,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){var e=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,a=this._lightPositionWorld;a.setFromMatrixPosition(t.matrixWorld),e.position.copy(a),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Or.prototype=Object.assign(Object.create(Er.prototype),{constructor:Or,isSpotLightShadow:!0,updateMatrices:function(t){var e=this.camera,n=2*zu.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),Er.prototype.updateMatrices.call(this,t)}}),Cr.prototype=Object.assign(Object.create(Pr.prototype),{constructor:Cr,isSpotLight:!0,copy:function(t){return Pr.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Fr.prototype=Object.assign(Object.create(Er.prototype),{constructor:Fr,isPointLightShadow:!0,updateMatrices:function(t,e){void 0===e&&(e=0);var n=this.camera,i=this.matrix,r=this._lightPositionWorld,a=this._lookTarget,o=this._projScreenMatrix;r.setFromMatrixPosition(t.matrixWorld),n.position.copy(r),a.copy(n.position),a.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(a),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),o.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(o)}}),Ir.prototype=Object.assign(Object.create(Pr.prototype),{constructor:Ir,isPointLight:!0,copy:function(t){return Pr.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Nr.prototype=Object.assign(Object.create(Z.prototype),{constructor:Nr,isOrthographicCamera:!0,copy:function(t,e){return Z.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,a){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=a,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,a=n+t,o=i+e,s=i-e;if(null!==this.view&&this.view.enabled){var u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;a=(r+=u*this.view.offsetX)+u*this.view.width,s=(o-=c*this.view.offsetY)-c*this.view.height}this.projectionMatrix.makeOrthographic(r,a,o,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=p.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Dr.prototype=Object.assign(Object.create(Er.prototype),{constructor:Dr,isDirectionalLightShadow:!0,updateMatrices:function(t){Er.prototype.updateMatrices.call(this,t)}}),Rr.prototype=Object.assign(Object.create(Pr.prototype),{constructor:Rr,isDirectionalLight:!0,copy:function(t){return Pr.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),kr.prototype=Object.assign(Object.create(Pr.prototype),{constructor:kr,isAmbientLight:!0}),zr.prototype=Object.assign(Object.create(Pr.prototype),{constructor:zr,isRectAreaLight:!0,copy:function(t){return Pr.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Pr.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Object.assign(Ur.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.282095),e.addScaledVector(a[1],.488603*i),e.addScaledVector(a[2],.488603*r),e.addScaledVector(a[3],.488603*n),e.addScaledVector(a[4],n*i*1.092548),e.addScaledVector(a[5],i*r*1.092548),e.addScaledVector(a[6],.315392*(3*r*r-1)),e.addScaledVector(a[7],n*r*1.092548),e.addScaledVector(a[8],.546274*(n*n-i*i)),e},getIrradianceAt:function(t,e){var n=t.x,i=t.y,r=t.z,a=this.coefficients;return e.copy(a[0]).multiplyScalar(.886227),e.addScaledVector(a[1],1.023328*i),e.addScaledVector(a[2],1.023328*r),e.addScaledVector(a[3],1.023328*n),e.addScaledVector(a[4],.858086*n*i),e.addScaledVector(a[5],.858086*i*r),e.addScaledVector(a[6],.743125*r*r-.247708),e.addScaledVector(a[7],.858086*n*r),e.addScaledVector(a[8],.429043*(n*n-i*i)),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},addScaledSH:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t,e){void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);for(var n=this.coefficients,i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}}),Object.assign(Ur,{getBasisAt:function(t,e){var n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}),Br.prototype=Object.assign(Object.create(Pr.prototype),{constructor:Br,isLightProbe:!0,copy:function(t){return Pr.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){var e=Pr.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}}),jr.prototype=Object.assign(Object.create(er.prototype),{constructor:jr,load:function(t,e,n,i){var r=this,a=new nr(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i&&i(e),r.manager.itemError(t)}},n,i)},parse:function(t){function e(t){return r[t],r[t]}var r=this.textures,o=new Rh[t.type];if(void 0!==t.uuid&&(o.uuid=t.uuid),void 0!==t.name&&(o.name=t.name),void 0!==t.color&&o.color.setHex(t.color),void 0!==t.roughness&&(o.roughness=t.roughness),void 0!==t.metalness&&(o.metalness=t.metalness),void 0!==t.sheen&&(o.sheen=(new b).setHex(t.sheen)),void 0!==t.emissive&&o.emissive.setHex(t.emissive),void 0!==t.specular&&o.specular.setHex(t.specular),void 0!==t.shininess&&(o.shininess=t.shininess),void 0!==t.clearcoat&&(o.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(o.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(o.fog=t.fog),void 0!==t.flatShading&&(o.flatShading=t.flatShading),void 0!==t.blending&&(o.blending=t.blending),void 0!==t.combine&&(o.combine=t.combine),void 0!==t.side&&(o.side=t.side),void 0!==t.opacity&&(o.opacity=t.opacity),void 0!==t.transparent&&(o.transparent=t.transparent),void 0!==t.alphaTest&&(o.alphaTest=t.alphaTest),void 0!==t.depthTest&&(o.depthTest=t.depthTest),void 0!==t.depthWrite&&(o.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(o.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(o.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(o.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(o.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(o.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(o.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(o.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(o.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(o.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(o.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(o.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(o.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(o.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(o.rotation=t.rotation),1!==t.linewidth&&(o.linewidth=t.linewidth),void 0!==t.dashSize&&(o.dashSize=t.dashSize),void 0!==t.gapSize&&(o.gapSize=t.gapSize),void 0!==t.scale&&(o.scale=t.scale),void 0!==t.polygonOffset&&(o.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(o.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(o.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(o.skinning=t.skinning),void 0!==t.morphTargets&&(o.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(o.morphNormals=t.morphNormals),void 0!==t.dithering&&(o.dithering=t.dithering),void 0!==t.vertexTangents&&(o.vertexTangents=t.vertexTangents),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.toneMapped&&(o.toneMapped=t.toneMapped),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.vertexColors&&("number"==typeof t.vertexColors?o.vertexColors=t.vertexColors>0:o.vertexColors=t.vertexColors),void 0!==t.uniforms)for(var s in t.uniforms){var u=t.uniforms[s];switch(o.uniforms[s]={},u.type){case"t":o.uniforms[s].value=e(u.value);break;case"c":o.uniforms[s].value=(new b).setHex(u.value);break;case"v2":o.uniforms[s].value=(new n).fromArray(u.value);break;case"v3":o.uniforms[s].value=(new c).fromArray(u.value);break;case"v4":o.uniforms[s].value=(new a).fromArray(u.value);break;case"m3":o.uniforms[s].value=(new i).fromArray(u.value);case"m4":o.uniforms[s].value=(new l).fromArray(u.value);break;default:o.uniforms[s].value=u.value}}if(void 0!==t.defines&&(o.defines=t.defines),void 0!==t.vertexShader&&(o.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(o.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var h in t.extensions)o.extensions[h]=t.extensions[h];if(void 0!==t.shading&&(o.flatShading=1===t.shading),void 0!==t.size&&(o.size=t.size),void 0!==t.sizeAttenuation&&(o.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(o.map=e(t.map)),void 0!==t.matcap&&(o.matcap=e(t.matcap)),void 0!==t.alphaMap&&(o.alphaMap=e(t.alphaMap)),void 0!==t.bumpMap&&(o.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(o.bumpScale=t.bumpScale),void 0!==t.normalMap&&(o.normalMap=e(t.normalMap)),void 0!==t.normalMapType&&(o.normalMapType=t.normalMapType),void 0!==t.normalScale){var f=t.normalScale;!1===Array.isArray(f)&&(f=[f,f]),o.normalScale=(new n).fromArray(f)}return void 0!==t.displacementMap&&(o.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(o.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(o.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(o.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(o.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(o.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(o.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(o.specularMap=e(t.specularMap)),void 0!==t.envMap&&(o.envMap=e(t.envMap)),void 0!==t.envMapIntensity&&(o.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(o.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(o.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(o.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(o.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(o.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(o.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(o.gradientMap=e(t.gradientMap)),void 0!==t.clearcoatMap&&(o.clearcoatMap=e(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(o.clearcoatRoughnessMap=e(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(o.clearcoatNormalMap=e(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(o.clearcoatNormalScale=(new n).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(o.transmission=t.transmission),void 0!==t.transmissionMap&&(o.transmissionMap=e(t.transmissionMap)),o},setTextures:function(t){return this.textures=t,this}});var Xh={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};Gr.prototype=Object.assign(Object.create(B.prototype),{constructor:Gr,isInstancedBufferGeometry:!0,copy:function(t){return B.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=B.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),Vr.prototype=Object.assign(Object.create(L.prototype),{constructor:Vr,isInstancedBufferAttribute:!0,copy:function(t){return L.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=L.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Wr.prototype=Object.assign(Object.create(er.prototype),{constructor:Wr,load:function(t,e,n,i){var r=this,a=new nr(r.manager);a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(e){i&&i(e),r.manager.itemError(t)}},n,i)},parse:function(t){function e(t,e){if(void 0!==i[e])return i[e];var r=t.interleavedBuffers[e],a=n(t,r.buffer),o=new Ze(new Yh[r.type](a),r.stride);return o.uuid=r.uuid,i[e]=o,o}function n(t,e){if(void 0!==r[e])return r[e];var n=t.arrayBuffers[e],i=new Uint32Array(n).buffer;return r[e]=i,i}var i={},r={},a=t.isInstancedBufferGeometry?new Gr:new B,o=t.data.index;if(void 0!==o){var s=new Yh[o.type](o.array);a.setIndex(new L(s,1))}var u=t.data.attributes;for(var l in u){var h=u[l],f=void 0;if(h.isInterleavedBufferAttribute){f=new Je(e(t.data,h.data),h.itemSize,h.offset,h.normalized)}else{var p=new Yh[h.type](h.array);f=new(h.isInstancedBufferAttribute?Vr:L)(p,h.itemSize,h.normalized)}void 0!==h.name&&(f.name=h.name),a.setAttribute(l,f)}var d=t.data.morphAttributes;if(d)for(var m in d){for(var v=d[m],y=[],_=0,x=v.length;_<x;_++){var b=v[_],w=void 0;if(b.isInterleavedBufferAttribute)w=new Je(e(t.data,b.data),b.itemSize,b.offset,b.normalized);else w=new L(new Yh[b.type](b.array),b.itemSize,b.normalized);void 0!==b.name&&(w.name=b.name),y.push(w)}a.morphAttributes[m]=y}t.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);var M=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==M)for(var S=0,A=M.length;S!==A;++S){var T=M[S];a.addGroup(T.start,T.count,T.materialIndex)}var P=t.data.boundingSphere;if(void 0!==P){var E=new c;void 0!==P.center&&E.fromArray(P.center),a.boundingSphere=new g(E,P.radius)}return t.name&&(a.name=t.name),t.userData&&(a.userData=t.userData),a}});var Yh={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Hr.prototype=Object.assign(Object.create(er.prototype),{constructor:Hr,load:function(t,e,n,i){var r=this,a=""===this.path?Xh.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||a;var o=new nr(r.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.load(t,function(t){var n=null;try{n=JSON.parse(t)}catch(t){return void(void 0!==i&&i(t))}var a=n.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()&&r.parse(n,e)},n,i)},parse:function(t,e){var n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),r=this.parseImages(t.images,function(){void 0!==e&&e(s)}),a=this.parseTextures(t.textures,r),o=this.parseMaterials(t.materials,a),s=this.parseObject(t.object,i,o);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new Tr).fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var n,i={};if(void 0!==t)for(var r=new Wr,a=0,o=t.length;a<o;a++){var s=void 0,u=t[a];switch(u.type){case"PlaneGeometry":case"PlaneBufferGeometry":s=new Dh[u.type](u.width,u.height,u.widthSegments,u.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":s=new Dh[u.type](u.width,u.height,u.depth,u.widthSegments,u.heightSegments,u.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":s=new Dh[u.type](u.radius,u.segments,u.thetaStart,u.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":s=new Dh[u.type](u.radiusTop,u.radiusBottom,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":s=new Dh[u.type](u.radius,u.height,u.radialSegments,u.heightSegments,u.openEnded,u.thetaStart,u.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":s=new Dh[u.type](u.radius,u.widthSegments,u.heightSegments,u.phiStart,u.phiLength,u.thetaStart,u.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":s=new Dh[u.type](u.radius,u.detail);break;case"RingGeometry":case"RingBufferGeometry":s=new Dh[u.type](u.innerRadius,u.outerRadius,u.thetaSegments,u.phiSegments,u.thetaStart,u.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":s=new Dh[u.type](u.radius,u.tube,u.radialSegments,u.tubularSegments,u.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":s=new Dh[u.type](u.radius,u.tube,u.tubularSegments,u.radialSegments,u.p,u.q);break;case"TubeGeometry":case"TubeBufferGeometry":s=new Dh[u.type]((new Hh[u.path.type]).fromJSON(u.path),u.tubularSegments,u.radius,u.radialSegments,u.closed);break;case"LatheGeometry":case"LatheBufferGeometry":s=new Dh[u.type](u.points,u.segments,u.phiStart,u.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":s=new Dh[u.type](u.vertices,u.indices,u.radius,u.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":n=[];for(var c=0,l=u.shapes.length;c<l;c++){var h=e[u.shapes[c]];n.push(h)}s=new Dh[u.type](n,u.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":n=[];for(var f=0,p=u.shapes.length;f<p;f++){var d=e[u.shapes[f]];n.push(d)}var m=u.options.extrudePath;void 0!==m&&(u.options.extrudePath=(new Hh[m.type]).fromJSON(m)),s=new Dh[u.type](n,u.options);break;case"BufferGeometry":case"InstancedBufferGeometry":s=r.parse(u);break;case"Geometry":break;default:continue}s.uuid=u.uuid,void 0!==u.name&&(s.name=u.name),!0===s.isBufferGeometry&&void 0!==u.userData&&(s.userData=u.userData),i[u.uuid]=s}return i},parseMaterials:function(t,e){var n={},i={};if(void 0!==t){var r=new jr;r.setTextures(e);for(var a=0,o=t.length;a<o;a++){var s=t[a];if("MultiMaterial"===s.type){for(var u=[],c=0;c<s.materials.length;c++){var l=s.materials[c];void 0===n[l.uuid]&&(n[l.uuid]=r.parse(l)),u.push(n[l.uuid])}i[s.uuid]=u}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=$i.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),e.push(r)}return e},parseImages:function(t,e){function n(t){return r.manager.itemStart(t),i.load(t,function(){r.manager.itemEnd(t)},void 0,function(){r.manager.itemError(t),r.manager.itemEnd(t)})}var i,r=this,a={};if(void 0!==t&&t.length>0){var o=new tr(e);(i=new or(o)).setCrossOrigin(this.crossOrigin);for(var s=0,u=t.length;s<u;s++){var c=t[s],l=c.url;if(Array.isArray(l)){a[c.uuid]=[];for(var h=0,f=l.length;h<f;h++){var p=l[h],d=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:r.resourcePath+p;a[c.uuid].push(n(d))}}else{var m=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:r.resourcePath+c.url;a[c.uuid]=n(m)}}}return a},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:e[t]}var i={};if(void 0!==t)for(var a=0,o=t.length;a<o;a++){var s=t[a];s.image,e[s.image];var u=void 0;(u=Array.isArray(e[s.image])?new _t(e[s.image]):new r(e[s.image])).needsUpdate=!0,u.uuid=s.uuid,void 0!==s.name&&(u.name=s.name),void 0!==s.mapping&&(u.mapping=n(s.mapping,qh)),void 0!==s.offset&&u.offset.fromArray(s.offset),void 0!==s.repeat&&u.repeat.fromArray(s.repeat),void 0!==s.center&&u.center.fromArray(s.center),void 0!==s.rotation&&(u.rotation=s.rotation),void 0!==s.wrap&&(u.wrapS=n(s.wrap[0],Qh),u.wrapT=n(s.wrap[1],Qh)),void 0!==s.format&&(u.format=s.format),void 0!==s.type&&(u.type=s.type),void 0!==s.encoding&&(u.encoding=s.encoding),void 0!==s.minFilter&&(u.minFilter=n(s.minFilter,Zh)),void 0!==s.magFilter&&(u.magFilter=n(s.magFilter,Zh)),void 0!==s.anisotropy&&(u.anisotropy=s.anisotropy),void 0!==s.flipY&&(u.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(u.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(u.unpackAlignment=s.unpackAlignment),i[s.uuid]=u}return i},parseObject:function(t,e,n){function i(t){return e[t],e[t]}function r(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var a=t[i];n[a],e.push(n[a])}return e}return n[t],n[t]}}var a,o,s;switch(t.type){case"Scene":a=new d,void 0!==t.background&&Number.isInteger(t.background)&&(a.background=new b(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?a.fog=new Qe(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(a.fog=new qe(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":a=new J(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(a.focus=t.focus),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.filmGauge&&(a.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(a.filmOffset=t.filmOffset),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"OrthographicCamera":a=new Nr(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(a.zoom=t.zoom),void 0!==t.view&&(a.view=Object.assign({},t.view));break;case"AmbientLight":a=new kr(t.color,t.intensity);break;case"DirectionalLight":a=new Rr(t.color,t.intensity);break;case"PointLight":a=new Ir(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":a=new zr(t.color,t.intensity,t.width,t.height);break;case"SpotLight":a=new Cr(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":a=new Lr(t.color,t.groundColor,t.intensity);break;case"LightProbe":a=(new Br).fromJSON(t);break;case"SkinnedMesh":case"Mesh":a=new j(o=i(t.geometry),s=r(t.material));break;case"InstancedMesh":o=i(t.geometry),s=r(t.material);var u=t.count,c=t.instanceMatrix;(a=new on(o,s,u)).instanceMatrix=new L(new Float32Array(c.array),16);break;case"LOD":a=new en;break;case"Line":a=new un(i(t.geometry),r(t.material),t.mode);break;case"LineLoop":a=new ln(i(t.geometry),r(t.material));break;case"LineSegments":a=new cn(i(t.geometry),r(t.material));break;case"PointCloud":case"Points":a=new fn(i(t.geometry),r(t.material));break;case"Sprite":a=new Ke(r(t.material));break;case"Group":a=new Ge;break;default:a=new p}if(a.uuid=t.uuid,void 0!==t.name&&(a.name=t.name),void 0!==t.matrix?(a.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(a.matrixAutoUpdate=t.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(void 0!==t.position&&a.position.fromArray(t.position),void 0!==t.rotation&&a.rotation.fromArray(t.rotation),void 0!==t.quaternion&&a.quaternion.fromArray(t.quaternion),void 0!==t.scale&&a.scale.fromArray(t.scale)),void 0!==t.castShadow&&(a.castShadow=t.castShadow),void 0!==t.receiveShadow&&(a.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(a.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(a.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(a.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&a.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(a.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(a.visible=t.visible),void 0!==t.frustumCulled&&(a.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(a.renderOrder=t.renderOrder),void 0!==t.userData&&(a.userData=t.userData),void 0!==t.layers&&(a.layers.mask=t.layers),void 0!==t.children)for(var l=t.children,h=0;h<l.length;h++)a.add(this.parseObject(l[h],e,n));if("LOD"===t.type){void 0!==t.autoUpdate&&(a.autoUpdate=t.autoUpdate);for(var f=t.levels,m=0;m<f.length;m++){var v=f[m],g=a.getObjectByProperty("uuid",v.object);void 0!==g&&a.addLevel(g,v.distance)}}return a}});var qh={UVMapping:300,CubeReflectionMapping:Uo,CubeRefractionMapping:Bo,EquirectangularReflectionMapping:jo,EquirectangularRefractionMapping:Go,CubeUVReflectionMapping:Vo,CubeUVRefractionMapping:Wo},Qh={RepeatWrapping:Ho,ClampToEdgeWrapping:Xo,MirroredRepeatWrapping:Yo},Zh={NearestFilter:qo,NearestMipmapNearestFilter:Qo,NearestMipmapLinearFilter:Zo,LinearFilter:Jo,LinearMipmapNearestFilter:$o,LinearMipmapLinearFilter:Ko};Xr.prototype=Object.assign(Object.create(er.prototype),{constructor:Xr,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,a=zh.get(t);return void 0!==a?(r.manager.itemStart(t),setTimeout(function(){e&&e(a),r.manager.itemEnd(t)},0),a):(fetch(t).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,r.options)}).then(function(n){zh.add(t,n),e&&e(n),r.manager.itemEnd(t)}).catch(function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),void r.manager.itemStart(t))}}),Object.assign(Yr.prototype,{moveTo:function(t,e){return this.currentPath=new Ar,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this},bezierCurveTo:function(t,e,n,i,r,a){return this.currentPath.bezierCurveTo(t,e,n,i,r,a),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],a=new Tr;a.curves=r.curves,e.push(a)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,a=0;a<n;r=a++){var o=e[r],s=e[a],u=s.x-o.x,c=s.y-o.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(o=e[a],u=-u,s=e[r],c=-c),t.y<o.y||t.y>s.y)continue;if(t.y===o.y){if(t.x===o.x)return!0}else{var l=c*(t.x-o.x)-u*(t.y-o.y);if(0===l)return!0;if(l<0)continue;i=!i}}else{if(t.y!==o.y)continue;if(s.x<=t.x&&t.x<=o.x||o.x<=t.x&&t.x<=s.x)return!0}}return i}var r=Ih.isClockWise,a=this.subPaths;if(0===a.length)return[];if(!0===e)return n(a);var o,s,u,c=[];if(1===a.length)return s=a[0],(u=new Tr).curves=s.curves,c.push(u),c;var l=!r(a[0].getPoints());l=t?!l:l;var h,f=[],p=[],d=[],m=0;p[m]=void 0,d[m]=[];for(var v=0,g=a.length;v<g;v++)o=r(h=(s=a[v]).getPoints()),(o=t?!o:o)?(!l&&p[m]&&m++,p[m]={s:new Tr,p:h},p[m].s.curves=s.curves,l&&m++,d[m]=[]):d[m].push({h:s,p:h[0]});if(!p[0])return n(a);if(p.length>1){for(var y=!1,_=[],x=0,b=p.length;x<b;x++)f[x]=[];for(var w=0,M=p.length;w<M;w++)for(var S=d[w],A=0;A<S.length;A++){for(var T=S[A],P=!0,L=0;L<p.length;L++)i(T.p,p[L].p)&&(w!==L&&_.push({froms:w,tos:L,hole:A}),P?(P=!1,f[L].push(T)):y=!0);P&&f[w].push(T)}_.length>0&&(y||(d=f))}for(var E,O=0,C=p.length;O<C;O++){u=p[O].s,c.push(u);for(var F=0,I=(E=d[O]).length;F<I;F++)u.holes.push(E[F].h)}return c}}),Object.assign(qr.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],i=function(t,e,n){for(var i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,o=[],s=0,u=0,c=0;c<i.length;c++){var l=i[c];if("\n"===l)s=0,u-=a;else{var h=Qr(l,r,s,u,n);s+=h.offsetX,o.push(h.path)}}return o}(t,e,this.data),r=0,a=i.length;r<a;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),Zr.prototype=Object.assign(Object.create(er.prototype),{constructor:Zr,load:function(t,e,n,i){var r=this,a=new nr(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.load(t,function(t){var n;try{n=JSON.parse(t)}catch(e){n=JSON.parse(t.substring(65,t.length-2))}var i=r.parse(n);e&&e(i)},n,i)},parse:function(t){return new qr(t)}});var Jh,$h={getContext:function(){return void 0===Jh&&(Jh=new(window.AudioContext||window.webkitAudioContext)),Jh},setContext:function(t){Jh=t}};Jr.prototype=Object.assign(Object.create(er.prototype),{constructor:Jr,load:function(t,e,n,i){var r=this,a=new nr(r.manager);a.setResponseType("arraybuffer"),a.setPath(r.path),a.setRequestHeader(r.requestHeader),a.load(t,function(n){try{var a=n.slice(0);$h.getContext().decodeAudioData(a,function(t){e(t)})}catch(e){i&&i(e),r.manager.itemError(t)}},n,i)}}),$r.prototype=Object.assign(Object.create(Br.prototype),{constructor:$r,isHemisphereLightProbe:!0,copy:function(t){return Br.prototype.copy.call(this,t),this},toJSON:function(t){return Br.prototype.toJSON.call(this,t)}}),Kr.prototype=Object.assign(Object.create(Br.prototype),{constructor:Kr,isAmbientLightProbe:!0,copy:function(t){return Br.prototype.copy.call(this,t),this},toJSON:function(t){return Br.prototype.toJSON.call(this,t)}});var Kh=new l,tf=new l;Object.assign(ta.prototype,{update:function(t){var e=this._cache;if(e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;var n,i,r=t.projectionMatrix.clone(),a=e.eyeSep/2,o=a*e.near/e.focus,s=e.near*Math.tan(zu.DEG2RAD*e.fov*.5)/e.zoom;tf.elements[12]=-a,Kh.elements[12]=a,n=-s*e.aspect+o,i=s*e.aspect+o,r.elements[0]=2*e.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraL.projectionMatrix.copy(r),n=-s*e.aspect-o,i=s*e.aspect-o,r.elements[0]=2*e.near/(i-n),r.elements[8]=(i+n)/(i-n),this.cameraR.projectionMatrix.copy(r)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(tf),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Kh)}}),Object.assign(ea.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}});var ef=new c,nf=new u,rf=new c,af=new c;na.prototype=Object.assign(Object.create(p.prototype),{constructor:na,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(t){p.prototype.updateMatrixWorld.call(this,t);var e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ef,nf,rf),af.set(0,0,-1).applyQuaternion(nf),e.positionX){var i=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(ef.x,i),e.positionY.linearRampToValueAtTime(ef.y,i),e.positionZ.linearRampToValueAtTime(ef.z,i),e.forwardX.linearRampToValueAtTime(af.x,i),e.forwardY.linearRampToValueAtTime(af.y,i),e.forwardZ.linearRampToValueAtTime(af.z,i),e.upX.linearRampToValueAtTime(n.x,i),e.upY.linearRampToValueAtTime(n.y,i),e.upZ.linearRampToValueAtTime(n.z,i)}else e.setPosition(ef.x,ef.y,ef.z),e.setOrientation(af.x,af.y,af.z,n.x,n.y,n.z)}}),ia.prototype=Object.assign(Object.create(p.prototype),{constructor:ia,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setMediaStreamSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(t){if(void 0===t&&(t=0),!0!==this.isPlaying&&!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+t;var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this},stop:function(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1!==this.hasPlaybackControl&&this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this},setLoopStart:function(t){return this.loopStart=t,this},setLoopEnd:function(t){return this.loopEnd=t,this},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}});var of=new c,sf=new u,uf=new c,cf=new c;ra.prototype=Object.assign(Object.create(ia.prototype),{constructor:ra,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(t){if(p.prototype.updateMatrixWorld.call(this,t),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(of,sf,uf),cf.set(0,0,1).applyQuaternion(sf);var e=this.panner;if(e.positionX){var n=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(of.x,n),e.positionY.linearRampToValueAtTime(of.y,n),e.positionZ.linearRampToValueAtTime(of.z,n),e.orientationX.linearRampToValueAtTime(cf.x,n),e.orientationY.linearRampToValueAtTime(cf.y,n),e.orientationZ.linearRampToValueAtTime(cf.z,n)}else e.setPosition(of.x,of.y,of.z),e.setOrientation(cf.x,cf.y,cf.z)}}}),Object.assign(aa.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(oa.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,a=this.cumulativeWeight;if(0===a){for(var o=0;o!==i;++o)n[r+o]=n[o];a=e}else{var s=e/(a+=e);this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=a},accumulateAdditive:function(t){var e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,a=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){var s=e*this._origIndex;this._mixBufferRegion(n,i,s,1-r,e)}a>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(var u=e,c=e+e;u!==c;++u)if(n[u]!==n[u+e]){o.setValue(n,i);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(var r=n,a=i;r!==a;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){for(var t=this._addIndex*this.valueSize,e=t+this.valueSize,n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[4*this._addIndex+3]=1},_setAdditiveIdentityOther:function(){for(var t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize,n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,i,r){if(i>=.5)for(var a=0;a!==r;++a)t[e+a]=t[n+a]},_slerp:function(t,e,n,i){u.slerpFlat(t,e,t,e,t,n,i)},_slerpAdditive:function(t,e,n,i,r){var a=this._workIndex*r;u.multiplyQuaternionsFlat(t,a,t,e,t,n),u.slerpFlat(t,e,t,e,t,a,i)},_lerp:function(t,e,n,i,r){for(var a=1-i,o=0;o!==r;++o){var s=e+o;t[s]=t[s]*a+t[n+o]*i}},_lerpAdditive:function(t,e,n,i,r){for(var a=0;a!==r;++a){var o=e+a;t[o]=t[o]+t[n+a]*i}}});var lf="\\[\\]\\.:\\/",hf=new RegExp("["+lf+"]","g"),ff="[^"+lf+"]",pf="[^"+lf.replace("\\.","")+"]",df=/((?:WC+[\/:])*)/.source.replace("WC",ff),mf=/(WCOD+)?/.source.replace("WCOD",pf),vf=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ff),gf=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ff),yf=new RegExp("^"+df+mf+vf+gf+"$"),_f=["material","materials","bones"];Object.assign(sa.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(ua,{Composite:sa,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new ua.Composite(t,e,n):new ua(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(hf,"")},parseTrackName:function(t){var e=yf.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==_f.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var a=i(r.children);if(a)return a}return null},r=i(t.children);if(r)return r}return null}}),Object.assign(ua.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=ua.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var a=e.objectIndex;switch(n){case"materials":if(!t.material)return;if(!t.material.materials)return;t=t.material.materials;break;case"bones":if(!t.skeleton)return;t=t.skeleton.bones;for(var o=0;o<t.length;o++)if(t[o].name===a){a=o;break}break;default:if(void 0===t[n])return;t=t[n]}if(void 0!==a){if(void 0===t[a])return;t=t[a]}}var s=t[i];if(void 0!==s){var u=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?u=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(u=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return;if(!t.geometry.isBufferGeometry)return;if(!t.geometry.morphAttributes)return;void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][u]}else e.nodeName}},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(ua.prototype,{_getValue_unbound:ua.prototype.getValue,_setValue_unbound:ua.prototype.setValue}),Object.assign(ca.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,a=r.length,o=t.length,s=this.nCachedObjects_,u=0,c=arguments.length;u!==c;++u){var l=arguments[u],h=l.uuid,f=e[h];if(void 0===f){f=o++,e[h]=f,t.push(l);for(var p=0,d=a;p!==d;++p)r[p].push(new ua(l,n[p],i[p]))}else if(f<s){t[f];var m=--s,v=t[m];e[v.uuid]=f,t[f]=v,e[h]=m,t[m]=l;for(var g=0,y=a;g!==y;++g){var _=r[g],x=_[m],b=_[f];_[f]=x,void 0===b&&(b=new ua(l,n[g],i[g])),_[m]=b}}else t[f]}this.nCachedObjects_=s},remove:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=0,o=arguments.length;a!==o;++a){var s=arguments[a],u=s.uuid,c=e[u];if(void 0!==c&&c>=r){var l=r++,h=t[l];e[h.uuid]=c,t[c]=h,e[u]=l,t[l]=s;for(var f=0,p=i;f!==p;++f){var d=n[f],m=d[l],v=d[c];d[c]=m,d[l]=v}}}this.nCachedObjects_=r},uncache:function(){for(var t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length,r=this.nCachedObjects_,a=t.length,o=0,s=arguments.length;o!==s;++o){var u=arguments[o].uuid,c=e[u];if(void 0!==c)if(delete e[u],c<r){var l=--r,h=t[l],f=--a,p=t[f];e[h.uuid]=c,t[c]=h,e[p.uuid]=l,t[l]=p,t.pop();for(var d=0,m=i;d!==m;++d){var v=n[d],g=v[l],y=v[f];v[c]=g,v[l]=y,v.pop()}}else{var _=--a,x=t[_];e[x.uuid]=c,t[c]=x,t.pop();for(var b=0,w=i;b!==w;++b){var M=n[b];M[c]=M[_],M.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var a=this._paths,o=this._parsedPaths,s=this._objects,u=s.length,c=this.nCachedObjects_,l=new Array(u);i=r.length,n[t]=i,a.push(t),o.push(e),r.push(l);for(var h=c,f=s.length;h!==f;++h){var p=s[h];l[h]=new ua(p,t,e)}return l},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,a=this._bindings,o=a.length-1,s=a[o];e[t[o]]=n,a[n]=s,a.pop(),r[n]=r[o],r.pop(),i[n]=i[o],i.pop()}}}),Object.assign(la.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,a=r/i,o=i/r;t.warp(1,a,e),this.warp(o,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,a=this.timeScale,o=this._timeScaleInterpolant;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,u=o.sampleValues;return s[0]=r,s[1]=r+n,u[0]=t/a,u[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var a=(t-r)*n;if(a<0||0===n)return;this._startTime=null,e=n*a}e*=this._updateTimeScale(t);var o=this._updateTime(e),s=this._updateWeight(t);if(s>0){var u=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case 2501:for(var l=0,h=u.length;l!==h;++l)u[l].evaluate(o),c[l].accumulateAdditive(s);break;case yu:default:for(var f=0,p=u.length;f!==p;++f)u[f].evaluate(o),c[f].accumulate(i,s)}}}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n)e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this._clip.duration,n=this.loop,i=this.time+t,r=this._loopCount,a=2202===n;if(0===t)return-1===r?i:a&&1==(1&r)?e-i:i;if(2200===n){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,a)):this._setEndings(0===this.repetitions,!0,a)),i>=e||i<0){var o=Math.floor(i/e);i-=e*o,r+=Math.abs(o);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var u=t<0;this._setEndings(u,!u,a)}else this._setEndings(!1,!1,a);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o})}}else this.time=i;if(a&&1==(1&r))return e-i}return i},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=vu,i.endingEnd=vu):(i.endingStart=t?this.zeroSlopeAtStart?vu:mu:gu,i.endingEnd=e?this.zeroSlopeAtEnd?vu:mu:gu)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,a=this._weightInterpolant;null===a&&(a=i._lendControlInterpolant(),this._weightInterpolant=a);var o=a.parameterPositions,s=a.sampleValues;return o[0]=r,s[0]=e,o[1]=r+t,s[1]=n,this}}),ha.prototype=Object.assign(Object.create(e.prototype),{constructor:ha,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,a=t._propertyBindings,o=t._interpolants,s=n.uuid,u=this._bindingsByRootAndName,c=u[s];void 0===c&&(c={},u[s]=c);for(var l=0;l!==r;++l){var h=i[l],f=h.name,p=c[f];if(void 0!==p)a[l]=p;else{if(void 0!==(p=a[l])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,f));continue}var d=e&&e._propertyBindings[l].binding.parsedPath;++(p=new oa(ua.create(n,f,d),h.ValueTypeName,h.getValueSize())).referenceCount,this._addInactiveBinding(p,s,f),a[l]=p}o[l].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,a=0,o=r.length;a!==o;++a){var s=r[a];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,a=r[e];if(void 0===a)a={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=a;else{var o=a.knownActions;t._byClipCacheIndex=o.length,o.push(t)}t._cacheIndex=i.length,i.push(t),a.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,a=this._actionsByClip,o=a[r],s=o.knownActions,u=s[s.length-1],c=t._byClipCacheIndex;u._byClipCacheIndex=c,s[c]=u,s.pop(),t._byClipCacheIndex=null,delete o.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete a[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=this._bindings,a=i[e];void 0===a&&(a={},i[e]=a),a[n]=t,t._cacheIndex=r.length,r.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,a=this._bindingsByRootAndName,o=a[i],s=e[e.length-1],u=t._cacheIndex;s._cacheIndex=u,e[u]=s,e.pop(),delete o[r],0===Object.keys(o).length&&delete a[i]},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&((n=new Gi(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){var i=e||this._root,r=i.uuid,a="string"==typeof t?$i.findByName(i,t):t,o=null!==a?a.uuid:t,s=this._actionsByClip[o],u=null;if(void 0===n&&(n=null!==a?a.blendMode:yu),void 0!==s){var c=s.actionByRoot[r];if(void 0!==c&&c.blendMode===n)return c;u=s.knownActions[0],null===a&&(a=u._clip)}if(null===a)return null;var l=new la(this,a,e,n);return this._bindAction(l,u),this._addInactiveAction(l,o,r),l},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?$i.findByName(n,t):t,a=r?r.uuid:t,o=this._actionsByClip[a];return void 0!==o&&o.actionByRoot[i]||null},stopAllAction:function(){for(var t=this._actions,e=this._nActiveActions-1;e>=0;--e)t[e].stop();return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),a=this._accuIndex^=1,o=0;o!==n;++o){e[o]._update(i,t,r,a)}for(var s=this._bindings,u=this._nActiveBindings,c=0;c!==u;++c)s[c].apply(a);return this},setTime:function(t){this.time=0;for(var e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var a=r.knownActions,o=0,s=a.length;o!==s;++o){var u=a[o];this._deactivateAction(u);var c=u._cacheIndex,l=e[e.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,l._cacheIndex=c,e[c]=l,e.pop(),this._removeInactiveBindingsForAction(u)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot[e];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}var a=this._bindingsByRootAndName[e];if(void 0!==a)for(var o in a){var s=a[o];s.restoreOriginalState(),this._removeInactiveBinding(s)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),fa.prototype.clone=function(){return new fa(void 0===this.value.clone?this.value:this.value.clone())},pa.prototype=Object.assign(Object.create(Ze.prototype),{constructor:pa,isInstancedInterleavedBuffer:!0,copy:function(t){return Ze.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){var e=Ze.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){var e=Ze.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}),Object.assign(da.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera&&(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e)},intersectObject:function(t,e,n){var i=n||[];return va(t,this,i,e),i.sort(ma),i},intersectObjects:function(t,e,n){var i=n||[];if(!1===Array.isArray(t))return i;for(var r=0,a=t.length;r<a;r++)va(t[r],this,i,e);return i.sort(ma),i}});var xf=function(t,e,n){return void 0===t&&(t=1),void 0===e&&(e=0),void 0===n&&(n=0),this.radius=t,this.phi=e,this.theta=n,this};xf.prototype.set=function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},xf.prototype.clone=function(){return(new this.constructor).copy(this)},xf.prototype.copy=function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},xf.prototype.makeSafe=function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},xf.prototype.setFromVector3=function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},xf.prototype.setFromCartesianCoords=function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(zu.clamp(e/this.radius,-1,1))),this},Object.assign(ga.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}});var bf=new n;Object.assign(ya.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(t,e){var n=bf.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(t=new n),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(t=new n),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(e=new n),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(e=new n),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(t){return bf.copy(t).clamp(this.min,this.max).sub(t).length()},intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}});var wf=new c,Mf=new c;Object.assign(_a.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(t=new c),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(t=new c),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(e=new c),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(t,e){wf.subVectors(t,this.start),Mf.subVectors(this.end,this.start);var n=Mf.dot(Mf),i=Mf.dot(wf)/n;return e&&(i=zu.clamp(i,0,1)),i},closestPointToPoint:function(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(n=new c),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),xa.prototype=Object.create(p.prototype),xa.prototype.constructor=xa,xa.prototype.isImmediateRenderObject=!0;var Sf=new c;ba.prototype=Object.create(p.prototype),ba.prototype.constructor=ba,ba.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},ba.prototype.update=function(){this.light.updateMatrixWorld();var t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Sf.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Sf),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)};var Af=new c,Tf=new l,Pf=new l;wa.prototype=Object.create(cn.prototype),wa.prototype.constructor=wa,wa.prototype.isSkeletonHelper=!0,wa.prototype.updateMatrixWorld=function(t){var e=this.bones,n=this.geometry,i=n.getAttribute("position");Pf.getInverse(this.root.matrixWorld);for(var r=0,a=0;r<e.length;r++){var o=e[r];o.parent&&o.parent.isBone&&(Tf.multiplyMatrices(Pf,o.matrixWorld),Af.setFromMatrixPosition(Tf),i.setXYZ(a,Af.x,Af.y,Af.z),Tf.multiplyMatrices(Pf,o.parent.matrixWorld),Af.setFromMatrixPosition(Tf),i.setXYZ(a+1,Af.x,Af.y,Af.z),a+=2)}n.getAttribute("position").needsUpdate=!0,p.prototype.updateMatrixWorld.call(this,t)},Ma.prototype=Object.create(j.prototype),Ma.prototype.constructor=Ma,Ma.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Ma.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)};var Lf=new c,Ef=new b,Of=new b;Sa.prototype=Object.create(p.prototype),Sa.prototype.constructor=Sa,Sa.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Sa.prototype.update=function(){var t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var e=t.geometry.getAttribute("color");Ef.copy(this.light.color),Of.copy(this.light.groundColor);for(var n=0,i=e.count;n<i;n++){var r=n<i/2?Ef:Of;e.setXYZ(n,r.r,r.g,r.b)}e.needsUpdate=!0}t.lookAt(Lf.setFromMatrixPosition(this.light.matrixWorld).negate())},Aa.prototype=Object.create(cn.prototype),Aa.prototype.constructor=Aa,Ta.prototype=Object.create(cn.prototype),Ta.prototype.constructor=Ta;var Cf=new c,Ff=new c,If=new c;Pa.prototype=Object.create(p.prototype),Pa.prototype.constructor=Pa,Pa.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Pa.prototype.update=function(){Cf.setFromMatrixPosition(this.light.matrixWorld),Ff.setFromMatrixPosition(this.light.target.matrixWorld),If.subVectors(Ff,Cf),this.lightPlane.lookAt(Ff),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Ff),this.targetLine.scale.z=If.length()};var Nf=new c,Df=new Z;La.prototype=Object.create(cn.prototype),La.prototype.constructor=La,La.prototype.update=function(){var t=this.geometry,e=this.pointMap;Df.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ea("c",e,t,Df,0,0,-1),Ea("t",e,t,Df,0,0,1),Ea("n1",e,t,Df,-1,-1,-1),Ea("n2",e,t,Df,1,-1,-1),Ea("n3",e,t,Df,-1,1,-1),Ea("n4",e,t,Df,1,1,-1),Ea("f1",e,t,Df,-1,-1,1),Ea("f2",e,t,Df,1,-1,1),Ea("f3",e,t,Df,-1,1,1),Ea("f4",e,t,Df,1,1,1),Ea("u1",e,t,Df,.7,1.1,-1),Ea("u2",e,t,Df,-.7,1.1,-1),Ea("u3",e,t,Df,0,2,-1),Ea("cf1",e,t,Df,-1,0,1),Ea("cf2",e,t,Df,1,0,1),Ea("cf3",e,t,Df,0,-1,1),Ea("cf4",e,t,Df,0,1,1),Ea("cn1",e,t,Df,-1,0,-1),Ea("cn2",e,t,Df,1,0,-1),Ea("cn3",e,t,Df,0,-1,-1),Ea("cn4",e,t,Df,0,1,-1),t.getAttribute("position").needsUpdate=!0};var Rf=new m;Oa.prototype=Object.create(cn.prototype),Oa.prototype.constructor=Oa,Oa.prototype.update=function(t){if(void 0!==this.object&&Rf.setFromObject(this.object),!Rf.isEmpty()){var e=Rf.min,n=Rf.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}},Oa.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Oa.prototype.copy=function(t){return cn.prototype.copy.call(this,t),this.object=t.object,this},Ca.prototype=Object.create(cn.prototype),Ca.prototype.constructor=Ca,Ca.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),p.prototype.updateMatrixWorld.call(this,t))},Fa.prototype=Object.create(un.prototype),Fa.prototype.constructor=Fa,Fa.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?Ja:Za,this.lookAt(this.plane.normal),p.prototype.updateMatrixWorld.call(this,t)};var kf,zf,Uf=new c;Ia.prototype=Object.create(p.prototype),Ia.prototype.constructor=Ia,Ia.prototype.setDirection=function(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Uf.set(t.z,0,-t.x).normalize();var e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Uf,e)}},Ia.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},Ia.prototype.setColor=function(t){this.line.material.color.set(t),this.cone.material.color.set(t)},Ia.prototype.copy=function(t){return p.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},Na.prototype=Object.create(cn.prototype),Na.prototype.constructor=Na;var Bf=4,jf=8,Gf=Math.pow(2,jf),Vf=[.125,.215,.35,.446,.526,.582],Wf=jf-Bf+1+Vf.length,Hf=20,Xf={};Xf[_u]=0,Xf[xu]=1,Xf[wu]=2,Xf[Su]=3,Xf[Au]=4,Xf[Tu]=5,Xf[bu]=6;var Yf=new Nr,qf=function(){for(var t=[],e=[],n=[],i=jf,r=0;r<Wf;r++){var a=Math.pow(2,i);e.push(a);var o=1/a;r>jf-Bf?o=Vf[r-jf+Bf-1]:0==r&&(o=0),n.push(o);for(var s=1/(a-1),u=-s/2,c=1+s/2,l=[u,u,c,u,c,c,u,u,c,c,u,c],h=new Float32Array(108),f=new Float32Array(72),p=new Float32Array(36),d=0;d<6;d++){var m=d%3*2/3-1,v=d>2?0:-1,g=[m,v,0,m+2/3,v,0,m+2/3,v+1,0,m,v,0,m+2/3,v+1,0,m,v+1,0];h.set(g,18*d),f.set(l,12*d);var y=[d,d,d,d,d,d];p.set(y,6*d)}var _=new B;_.setAttribute("position",new L(h,3)),_.setAttribute("uv",new L(f,2)),_.setAttribute("faceIndex",new L(p,1)),t.push(_),i>Bf&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}(),Qf=qf._lodPlanes,Zf=qf._sizeLods,Jf=qf._sigmas,$f=null,Kf=(1+Math.sqrt(5))/2,tp=1/Kf,ep=[new c(1,1,1),new c(-1,1,1),new c(1,1,-1),new c(-1,1,-1),new c(0,Kf,tp),new c(0,Kf,-tp),new c(tp,0,Kf),new c(-tp,0,Kf),new c(Kf,tp,0),new c(-Kf,tp,0)];Da.prototype={constructor:Da,fromScene:function(t,e,n,i){void 0===e&&(e=0),void 0===n&&(n=.1),void 0===i&&(i=100),$f=this._renderer.getRenderTarget();var r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r},fromEquirectangular:function(t){return this._fromTexture(t)},fromCubemap:function(t){return this._fromTexture(t)},compileCubemapShader:function(){null===this._cubemapShader&&(this._cubemapShader=Ba(),this._compileMaterial(this._cubemapShader))},compileEquirectangularShader:function(){null===this._equirectShader&&(this._equirectShader=Ua(),this._compileMaterial(this._equirectShader))},dispose:function(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(var t=0;t<Qf.length;t++)Qf[t].dispose()},_cleanup:function(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget($f),t.scissorTest=!1,za(t,0,0,t.width,t.height)},_fromTexture:function(t){$f=this._renderer.getRenderTarget();var e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e},_allocateTargets:function(t){var e={magFilter:qo,minFilter:qo,generateMipmaps:!1,type:ts,format:gs,encoding:Ra(t)?t.encoding:wu,depthBuffer:!1,stencilBuffer:!1},n=ka(e);return n.depthBuffer=!t,this._pingPongRenderTarget=ka(e),n},_compileMaterial:function(t){var e=new j(Qf[0],t);this._renderer.compile(e,Yf)},_sceneToCubeUV:function(t,e,n,i){var r=new J(90,1,e,n),a=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],s=this._renderer,u=s.outputEncoding,c=s.toneMapping,l=s.getClearColor(),h=s.getClearAlpha();s.toneMapping=Io,s.outputEncoding=_u;var f=t.background;if(f&&f.isColor){f.convertSRGBToLinear();var p=Math.max(f.r,f.g,f.b),d=Math.min(Math.max(Math.ceil(Math.log2(p)),-128),127);f=f.multiplyScalar(Math.pow(2,-d));var m=(d+128)/255;s.setClearColor(f,m),t.background=null}for(var v=0;v<6;v++){var g=v%3;0==g?(r.up.set(0,a[v],0),r.lookAt(o[v],0,0)):1==g?(r.up.set(0,0,a[v]),r.lookAt(0,o[v],0)):(r.up.set(0,a[v],0),r.lookAt(0,0,o[v])),za(i,g*Gf,v>2?Gf:0,Gf,Gf),s.setRenderTarget(i),s.render(t,r)}s.toneMapping=c,s.outputEncoding=u,s.setClearColor(l,h)},_textureToCubeUV:function(t,e){var n=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=Ba()):null==this._equirectShader&&(this._equirectShader=Ua());var i=t.isCubeTexture?this._cubemapShader:this._equirectShader,r=new j(Qf[0],i),a=i.uniforms;a.envMap.value=t,t.isCubeTexture||a.texelSize.value.set(1/t.image.width,1/t.image.height),a.inputEncoding.value=Xf[t.encoding],a.outputEncoding.value=Xf[e.texture.encoding],za(e,0,0,3*Gf,2*Gf),n.setRenderTarget(e),n.render(r,Yf)},_applyPMREM:function(t){var e=this._renderer,n=e.autoClear;e.autoClear=!1;for(var i=1;i<Wf;i++){var r=Math.sqrt(Jf[i]*Jf[i]-Jf[i-1]*Jf[i-1]),a=ep[(i-1)%ep.length];this._blur(t,i-1,i,r,a)}e.autoClear=n},_blur:function(t,e,n,i,r){var a=this._pingPongRenderTarget;this._halfBlur(t,a,e,n,i,"latitudinal",r),this._halfBlur(a,t,n,n,i,"longitudinal",r)},_halfBlur:function(t,e,n,i,r,a,o){for(var s=this._renderer,u=this._blurMaterial,c=new j(Qf[i],u),l=u.uniforms,h=Zf[n]-1,f=isFinite(r)?Math.PI/(2*h):2*Math.PI/(2*Hf-1),p=r/f,d=isFinite(r)?1+Math.floor(3*p):Hf,m=[],v=0,g=0;g<Hf;++g){var y=g/p,_=Math.exp(-y*y/2);m.push(_),0==g?v+=_:g<d&&(v+=2*_)}for(var x=0;x<m.length;x++)m[x]=m[x]/v;l.envMap.value=t.texture,l.samples.value=d,l.weights.value=m,l.latitudinal.value="latitudinal"===a,o&&(l.poleAxis.value=o),l.dTheta.value=f,l.mipInt.value=jf-n,l.inputEncoding.value=Xf[t.texture.encoding],l.outputEncoding.value=Xf[t.texture.encoding];var b=Zf[i];za(e,3*Math.max(0,Gf-2*b),(0===i?0:2*Gf)+2*b*(i>jf-Bf?i-jf+Bf:0),3*b,2*b),s.setRenderTarget(e),s.render(c,Yf)}};cr.create=function(t,e){return t.prototype=Object.create(cr.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Sr.prototype,{createPointsGeometry:function(t){var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){for(var e=new W,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new c(r.x,r.y,r.z||0))}return e}}),Object.assign(Ar.prototype,{fromPoints:function(t){return this.setFromPoints(t)}}),ja.prototype=Object.create(pr.prototype),Ga.prototype=Object.create(pr.prototype),Va.prototype=Object.create(pr.prototype),Object.assign(Va.prototype,{initFromArray:function(){},getControlPointsArray:function(){},reparametrizeByArcLength:function(){}}),Aa.prototype.setColors=function(){},wa.prototype.update=function(){},Object.assign(er.prototype,{extractUrlBase:function(t){return Xh.extractUrlBase(t)}}),er.Handlers={add:function(){},get:function(){}},Object.assign(Hr.prototype,{setTexturePath:function(t){return this.setResourcePath(t)}}),Object.assign(ya.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},size:function(t){return this.getSize(t)}}),Object.assign(m.prototype,{center:function(t){return this.getCenter(t)},empty:function(){return this.isEmpty()},isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)},size:function(t){return this.getSize(t)}}),Object.assign(g.prototype,{empty:function(){return this.isEmpty()}}),et.prototype.setFromMatrix=function(t){return this.setFromProjectionMatrix(t)},_a.prototype.center=function(t){return this.getCenter(t)},Object.assign(zu,{random16:function(){return Math.random()},nearestPowerOfTwo:function(t){return zu.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return zu.ceilPowerOfTwo(t)}}),Object.assign(i.prototype,{flattenToArrayOffset:function(t,e){return this.toArray(t,e)},multiplyVector3:function(t){return t.applyMatrix3(this)},multiplyVector3Array:function(){},applyToBufferAttribute:function(t){return t.applyMatrix3(this)},applyToVector3Array:function(){}}),Object.assign(l.prototype,{extractPosition:function(t){return this.copyPosition(t)},flattenToArrayOffset:function(t,e){return this.toArray(t,e)},getPosition:function(){return(new c).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return this.makeRotationFromQuaternion(t)},multiplyToArray:function(){},multiplyVector3:function(t){return t.applyMatrix4(this)},multiplyVector4:function(t){return t.applyMatrix4(this)},multiplyVector3Array:function(){},rotateAxis:function(t){t.transformDirection(this)},crossVector:function(t){return t.applyMatrix4(this)},translate:function(){},rotateX:function(){},rotateY:function(){},rotateZ:function(){},rotateByAxis:function(){},applyToBufferAttribute:function(t){return t.applyMatrix4(this)},applyToVector3Array:function(){},makeFrustum:function(t,e,n,i,r,a){return this.makePerspective(t,e,i,n,r,a)}}),_.prototype.isIntersectionLine=function(t){return this.intersectsLine(t)},u.prototype.multiplyVector3=function(t){return t.applyQuaternion(this)},Object.assign(y.prototype,{isIntersectionBox:function(t){return this.intersectsBox(t)},isIntersectionPlane:function(t){return this.intersectsPlane(t)},isIntersectionSphere:function(t){return this.intersectsSphere(t)}}),Object.assign(x.prototype,{area:function(){return this.getArea()},barycoordFromPoint:function(t,e){return this.getBarycoord(t,e)},midpoint:function(t){return this.getMidpoint(t)},normal:function(t){return this.getNormal(t)},plane:function(t){return this.getPlane(t)}}),Object.assign(x,{barycoordFromPoint:function(t,e,n,i,r){return x.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return x.getNormal(t,e,n,i)}}),Object.assign(Tr.prototype,{extractAllPoints:function(t){return this.extractPoints(t)},extrude:function(t){return new ci(this,t)},makeGeometry:function(t){return new xi(this,t)}}),Object.assign(n.prototype,{fromAttribute:function(t,e,n){return this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return this.manhattanDistanceTo(t)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(c.prototype,{setEulerFromRotationMatrix:function(){},setEulerFromQuaternion:function(){},getPositionFromMatrix:function(t){return this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return this.setFromMatrixColumn(e,t)},applyProjection:function(t){return this.applyMatrix4(t)},fromAttribute:function(t,e,n){return this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return this.manhattanDistanceTo(t)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(a.prototype,{fromAttribute:function(t,e,n){return this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return this.manhattanLength()}}),Object.assign(W.prototype,{computeTangents:function(){},computeLineDistances:function(){},applyMatrix:function(t){return this.applyMatrix4(t)}}),Object.assign(p.prototype,{getChildByName:function(t){return this.getObjectByName(t)},renderDepth:function(){},translate:function(t,e){return this.translateOnAxis(e,t)},getWorldRotation:function(){},applyMatrix:function(t){return this.applyMatrix4(t)}}),Object.defineProperties(p.prototype,{eulerOrder:{get:function(){return this.rotation.order},set:function(t){this.rotation.order=t}},useQuaternion:{get:function(){},set:function(){}}}),Object.assign(j.prototype,{setDrawMode:function(){}}),Object.defineProperties(j.prototype,{drawMode:{get:function(){return 0},set:function(){}}}),Object.defineProperties(en.prototype,{objects:{get:function(){return this.levels}}}),Object.defineProperty(rn.prototype,"useVertexTexture",{get:function(){},set:function(){}}),nn.prototype.initBones=function(){},Object.defineProperty(cr.prototype,"__arcLengthDivisions",{get:function(){return this.arcLengthDivisions},set:function(t){this.arcLengthDivisions=t}}),J.prototype.setLens=function(t,e){void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Pr.prototype,{onlyShadow:{set:function(){}},shadowCameraFov:{set:function(t){this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){}},shadowBias:{set:function(t){this.shadow.bias=t}},shadowDarkness:{set:function(){}},shadowMapWidth:{set:function(t){this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){this.shadow.mapSize.height=t}}}),Object.defineProperties(L.prototype,{length:{get:function(){return this.array.length}},dynamic:{get:function(){return this.usage===Nu},set:function(){this.setUsage(Nu)}}}),Object.assign(L.prototype,{setDynamic:function(t){return this.setUsage(!0===t?Nu:Iu),this},copyIndicesArray:function(){},setArray:function(){}}),Object.assign(B.prototype,{addIndex:function(t){this.setIndex(t)},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(this.setIndex(e),this):this.setAttribute(t,e):this.setAttribute(t,new L(arguments[1],arguments[2]))},addDrawCall:function(t,e,n){this.addGroup(t,e)},clearDrawCalls:function(){this.clearGroups()},computeTangents:function(){},computeOffsets:function(){},removeAttribute:function(t){return this.deleteAttribute(t)},applyMatrix:function(t){return this.applyMatrix4(t)}}),Object.defineProperties(B.prototype,{drawcalls:{get:function(){return this.groups}},offsets:{get:function(){return this.groups}}}),Object.defineProperties(Gr.prototype,{maxInstancedCount:{get:function(){return this.instanceCount},set:function(t){this.instanceCount=t}}}),Object.defineProperties(da.prototype,{linePrecision:{get:function(){return this.params.Line.threshold},set:function(t){this.params.Line.threshold=t}}}),Object.defineProperties(Ze.prototype,{dynamic:{get:function(){return this.usage===Nu},set:function(t){this.setUsage(t)}}}),Object.assign(Ze.prototype,{setDynamic:function(t){return this.setUsage(!0===t?Nu:Iu),this},setArray:function(){}}),Object.assign(li.prototype,{getArrays:function(){},addShapeList:function(){},addShape:function(){}}),Object.defineProperties(fa.prototype,{dynamic:{set:function(){}},onUpdate:{value:function(){return this}}}),Object.defineProperties(T.prototype,{wrapAround:{get:function(){},set:function(){}},overdraw:{get:function(){},set:function(){}},wrapRGB:{get:function(){return new b}},shading:{get:function(){},set:function(t){this.flatShading=1===t}},stencilMask:{get:function(){return this.stencilFuncMask},set:function(t){this.stencilFuncMask=t}}}),Object.defineProperties(Ni.prototype,{metal:{get:function(){return!1},set:function(){}}}),Object.defineProperties(Ii.prototype,{transparency:{get:function(){return this.transmission},set:function(t){this.transmission=t}}}),Object.defineProperties(Q.prototype,{derivatives:{get:function(){return this.extensions.derivatives},set:function(t){this.extensions.derivatives=t}}}),Object.assign(Xe.prototype,{clearTarget:function(t,e,n,i){this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return this.getRenderTarget()},getMaxAnisotropy:function(){return this.capabilities.getMaxAnisotropy()},getPrecision:function(){return this.capabilities.precision},resetGLState:function(){return this.state.reset()},supportsFloatTextures:function(){return this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return this.capabilities.vertexTextures},supportsInstancedArrays:function(){return this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){this.setScissorTest(t)},initMaterial:function(){},addPrePlugin:function(){},addPostPlugin:function(){},updateShadowMap:function(){},setFaceCulling:function(){},allocTextureUnit:function(){},setTexture:function(){},setTexture2D:function(){},setTextureCube:function(){},getActiveMipMapLevel:function(){return this.getActiveMipmapLevel()}}),Object.defineProperties(Xe.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){this.shadowMap.type=t}},shadowMapCullFace:{get:function(){},set:function(){}},context:{get:function(){return this.getContext()}},vr:{get:function(){return this.xr}},gammaInput:{get:function(){return!1},set:function(){}},gammaOutput:{get:function(){return!1},set:function(t){this.outputEncoding=!0===t?xu:_u}},toneMappingWhitePoint:{get:function(){return 1},set:function(){}}}),Object.defineProperties(ke.prototype,{cullFace:{get:function(){},set:function(){}},renderReverseSided:{get:function(){},set:function(){}},renderSingleSided:{get:function(){},set:function(){}}}),Object.defineProperties(o.prototype,{wrapS:{get:function(){return this.texture.wrapS},set:function(t){this.texture.wrapS=t}},wrapT:{get:function(){return this.texture.wrapT},set:function(t){this.texture.wrapT=t}},magFilter:{get:function(){return this.texture.magFilter},set:function(t){this.texture.magFilter=t}},minFilter:{get:function(){return this.texture.minFilter},set:function(t){this.texture.minFilter=t}},anisotropy:{get:function(){return this.texture.anisotropy},set:function(t){this.texture.anisotropy=t}},offset:{get:function(){return this.texture.offset},set:function(t){this.texture.offset=t}},repeat:{get:function(){return this.texture.repeat},set:function(t){this.texture.repeat=t}},format:{get:function(){return this.texture.format},set:function(t){this.texture.format=t}},type:{get:function(){return this.texture.type},set:function(t){this.texture.type=t}},generateMipmaps:{get:function(){return this.texture.generateMipmaps},set:function(t){this.texture.generateMipmaps=t}}}),Object.defineProperties(ia.prototype,{load:{value:function(t){var e=this;return(new Jr).load(t,function(t){e.setBuffer(t)}),this}},startTime:{set:function(){}}}),aa.prototype.getData=function(){return this.getFrequencyData()},$.prototype.updateCubeMap=function(t,e){return this.update(t,e)};Bu.crossOrigin=void 0,Bu.loadTexture=function(t,e,n,i){var r=new ur;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},Bu.loadTextureCube=function(t,e,n,i){var r=new sr;r.setCrossOrigin(this.crossOrigin);var a=r.load(t,n,void 0,i);return e&&(a.mapping=e),a},Bu.loadCompressedTexture=function(){},Bu.loadCompressedTextureCube=function(){};"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:"119"}})),t.ACESFilmicToneMapping=ko,t.AddEquation=ao,t.AddOperation=Fo,t.AdditiveAnimationBlendMode=2501,t.AdditiveBlending=eo,t.AlphaFormat=fs,t.AlwaysDepth=Mo,t.AlwaysStencilFunc=Fu,t.AmbientLight=kr,t.AmbientLightProbe=Kr,t.AnimationClip=$i,t.AnimationLoader=ir,t.AnimationMixer=ha,t.AnimationObjectGroup=ca,t.AnimationUtils=kh,t.ArcCurve=hr,t.ArrayCamera=je,t.ArrowHelper=Ia,t.Audio=ia,t.AudioAnalyser=aa,t.AudioContext=$h,t.AudioListener=na,t.AudioLoader=Jr,t.AxesHelper=Na,t.AxisHelper=function(t){return new Na(t)},t.BackSide=Ja,t.BasicDepthPacking=Pu,t.BasicShadowMap=0,t.BinaryTextureLoader=function(t){return new ar(t)},t.Bone=an,t.BooleanKeyframeTrack=Hi,t.BoundingBoxHelper=function(t,e){return new Oa(t,e)},t.Box2=ya,t.Box3=m,t.Box3Helper=Ca,t.BoxBufferGeometry=X,t.BoxGeometry=H,t.BoxHelper=Oa,t.BufferAttribute=L,t.BufferGeometry=B,t.BufferGeometryLoader=Wr,t.ByteType=es,t.Cache=zh,t.Camera=Z,t.CameraHelper=La,t.CanvasRenderer=function(){},t.CanvasTexture=vn,t.CatmullRomCurve3=pr,t.CineonToneMapping=Ro,t.CircleBufferGeometry=Ei,t.CircleGeometry=Li,t.ClampToEdgeWrapping=Xo,t.Clock=ea,t.ClosedSplineCurve3=ja,t.Color=b,t.ColorKeyframeTrack=Xi,t.CompressedTexture=mn,t.CompressedTextureLoader=rr,t.ConeBufferGeometry=Pi,t.ConeGeometry=Ti,t.CubeCamera=$,t.CubeGeometry=H,t.CubeReflectionMapping=Uo,t.CubeRefractionMapping=Bo,t.CubeTexture=_t,t.CubeTextureLoader=sr,t.CubeUVReflectionMapping=Vo,t.CubeUVRefractionMapping=Wo,t.CubicBezierCurve=gr,t.CubicBezierCurve3=yr,t.CubicInterpolant=ji,t.CullFaceBack=Ha,t.CullFaceFront=Xa,t.CullFaceFrontBack=3,t.CullFaceNone=Wa,t.Curve=cr,t.CurvePath=Sr,t.CustomBlending=ro,t.CustomToneMapping=zo,t.CylinderBufferGeometry=Ai,t.CylinderGeometry=Si,t.Cylindrical=ga,t.DataTexture=tt,t.DataTexture2DArray=xt,t.DataTexture3D=bt,t.DataTextureLoader=ar,t.DecrementStencilOp=7683,t.DecrementWrapStencilOp=34056,t.DefaultLoadingManager=Uh,t.DepthFormat=ys,t.DepthStencilFormat=_s,t.DepthTexture=gn,t.DirectionalLight=Rr,t.DirectionalLightHelper=Pa,t.DirectionalLightShadow=Dr,t.DiscreteInterpolant=Vi,t.DodecahedronBufferGeometry=On,t.DodecahedronGeometry=En,t.DoubleSide=$a,t.DstAlphaFactor=go,t.DstColorFactor=_o,t.DynamicBufferAttribute=function(t,e){return new L(t,e).setUsage(Nu)},t.DynamicCopyUsage=35050,t.DynamicDrawUsage=Nu,t.DynamicReadUsage=35049,t.EdgesGeometry=Mi,t.EdgesHelper=function(t,e){return new cn(new Mi(t.geometry),new sn({color:void 0!==e?e:16777215}))},t.EllipseCurve=lr,t.EqualDepth=To,t.EqualStencilFunc=514,t.EquirectangularReflectionMapping=jo,t.EquirectangularRefractionMapping=Go,t.Euler=h,t.EventDispatcher=e,t.ExtrudeBufferGeometry=li,t.ExtrudeGeometry=ci,t.Face3=A,t.Face4=function(t,e,n,i,r,a,o){return new A(t,e,n,r,a,o)},t.FaceColors=1,t.FileLoader=nr,t.FlatShading=1,t.Float32Attribute=function(t,e){return new R(t,e)},t.Float32BufferAttribute=R,t.Float64Attribute=function(t,e){return new k(t,e)},t.Float64BufferAttribute=k,t.FloatType=os,t.Fog=Qe,t.FogExp2=qe,t.Font=qr,t.FontLoader=Zr,t.FrontSide=Za,t.Frustum=et,t.GammaEncoding=bu,t.Geometry=W,t.GeometryUtils={merge:function(t,e,n){var i;e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return t.center()}},t.GreaterDepth=Lo,t.GreaterEqualDepth=Po,t.GreaterEqualStencilFunc=518,t.GreaterStencilFunc=516,t.GridHelper=Aa,t.Group=Ge,t.HalfFloatType=ss,t.HemisphereLight=Lr,t.HemisphereLightHelper=Sa,t.HemisphereLightProbe=$r,t.IcosahedronBufferGeometry=Ln,t.IcosahedronGeometry=Pn,t.ImageBitmapLoader=Xr,t.ImageLoader=or,t.ImageUtils=Bu,t.ImmediateRenderObject=xa,t.IncrementStencilOp=7682,t.IncrementWrapStencilOp=34055,t.InstancedBufferAttribute=Vr,t.InstancedBufferGeometry=Gr,t.InstancedInterleavedBuffer=pa,t.InstancedMesh=on,t.Int16Attribute=function(t,e){return new F(t,e)},t.Int16BufferAttribute=F,t.Int32Attribute=function(t,e){return new N(t,e)},t.Int32BufferAttribute=N,t.Int8Attribute=function(t,e){return new E(t,e)},t.Int8BufferAttribute=E,t.IntType=rs,t.InterleavedBuffer=Ze,t.InterleavedBufferAttribute=Je,t.Interpolant=Bi,t.InterpolateDiscrete=pu,t.InterpolateLinear=du,t.InterpolateSmooth=2302,t.InvertStencilOp=5386,t.JSONLoader=function(){},t.KeepStencilOp=Cu,t.KeyframeTrack=Wi,t.LOD=en,t.LatheBufferGeometry=_i,t.LatheGeometry=yi,t.Layers=f,t.LensFlare=function(){},t.LessDepth=So,t.LessEqualDepth=Ao,t.LessEqualStencilFunc=515,t.LessStencilFunc=513,t.Light=Pr,t.LightProbe=Br,t.LightShadow=Er,t.Line=un,t.Line3=_a,t.LineBasicMaterial=sn,t.LineCurve=_r,t.LineCurve3=xr,t.LineDashedMaterial=Ui,t.LineLoop=ln,t.LinePieces=1,t.LineSegments=cn,t.LineStrip=0,t.LinearEncoding=_u,t.LinearFilter=Jo,t.LinearInterpolant=Gi,t.LinearMipMapLinearFilter=1008,t.LinearMipMapNearestFilter=1007,t.LinearMipmapLinearFilter=Ko,t.LinearMipmapNearestFilter=$o,t.LinearToneMapping=No,t.Loader=er,t.LoaderUtils=Xh,t.LoadingManager=tr,t.LogLuvEncoding=Mu,t.LoopOnce=2200,t.LoopPingPong=2202,t.LoopRepeat=fu,t.LuminanceAlphaFormat=vs,t.LuminanceFormat=ms,t.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},t.Material=T,t.MaterialLoader=jr,t.Math=zu,t.MathUtils=zu,t.Matrix3=i,t.Matrix4=l,t.MaxEquation=co,t.Mesh=j,t.MeshBasicMaterial=P,t.MeshDepthMaterial=De,t.MeshDistanceMaterial=Re,t.MeshFaceMaterial=function(t){return t},t.MeshLambertMaterial=ki,t.MeshMatcapMaterial=zi,t.MeshNormalMaterial=Ri,t.MeshPhongMaterial=Ni,t.MeshPhysicalMaterial=Ii,t.MeshStandardMaterial=Fi,t.MeshToonMaterial=Di,t.MinEquation=uo,t.MirroredRepeatWrapping=Yo,t.MixOperation=Co,t.MultiMaterial=function(t){return void 0===t&&(t=[]),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t},t.MultiplyBlending=io,t.MultiplyOperation=Oo,t.NearestFilter=qo,t.NearestMipMapLinearFilter=1005,t.NearestMipMapNearestFilter=1004,t.NearestMipmapLinearFilter=Zo,t.NearestMipmapNearestFilter=Qo,t.NeverDepth=wo,t.NeverStencilFunc=512,t.NoBlending=Ka,t.NoColors=0,t.NoToneMapping=Io,t.NormalAnimationBlendMode=yu,t.NormalBlending=to,t.NotEqualDepth=Eo,t.NotEqualStencilFunc=517,t.NumberKeyframeTrack=Yi,t.Object3D=p,t.ObjectLoader=Hr,t.ObjectSpaceNormalMap=Ou,t.OctahedronBufferGeometry=Tn,t.OctahedronGeometry=An,t.OneFactor=ho,t.OneMinusDstAlphaFactor=yo,t.OneMinusDstColorFactor=xo,t.OneMinusSrcAlphaFactor=vo,t.OneMinusSrcColorFactor=po,t.OrthographicCamera=Nr,t.PCFShadowMap=Ya,t.PCFSoftShadowMap=qa,t.PMREMGenerator=Da,t.ParametricBufferGeometry=xn,t.ParametricGeometry=_n,t.Particle=function(t){return new Ke(t)},t.ParticleBasicMaterial=function(t){return new hn(t)},t.ParticleSystem=function(t,e){return new fn(t,e)},t.ParticleSystemMaterial=function(t){return new hn(t)},t.Path=Ar,t.PerspectiveCamera=J,t.Plane=_,t.PlaneBufferGeometry=at,t.PlaneGeometry=rt,t.PlaneHelper=Fa,t.PointCloud=function(t,e){return new fn(t,e)},t.PointCloudMaterial=function(t){return new hn(t)},t.PointLight=Ir,t.PointLightHelper=Ma,t.Points=fn,t.PointsMaterial=hn,t.PolarGridHelper=Ta,t.PolyhedronBufferGeometry=wn,t.PolyhedronGeometry=bn,t.PositionalAudio=ra,t.PropertyBinding=ua,t.PropertyMixer=oa,t.QuadraticBezierCurve=br,t.QuadraticBezierCurve3=wr,t.Quaternion=u,t.QuaternionKeyframeTrack=Qi,t.QuaternionLinearInterpolant=qi,t.REVISION="119",t.RGBADepthPacking=Lu,t.RGBAFormat=ds,t.RGBAIntegerFormat=As,t.RGBA_ASTC_10x10_Format=qs,t.RGBA_ASTC_10x5_Format=Hs,t.RGBA_ASTC_10x6_Format=Xs,t.RGBA_ASTC_10x8_Format=Ys,t.RGBA_ASTC_12x10_Format=Qs,t.RGBA_ASTC_12x12_Format=Zs,t.RGBA_ASTC_4x4_Format=ks,t.RGBA_ASTC_5x4_Format=zs,t.RGBA_ASTC_5x5_Format=Us,t.RGBA_ASTC_6x5_Format=Bs,t.RGBA_ASTC_6x6_Format=js,t.RGBA_ASTC_8x5_Format=Gs,t.RGBA_ASTC_8x6_Format=Vs,t.RGBA_ASTC_8x8_Format=Ws,t.RGBA_BPTC_Format=Js,t.RGBA_ETC2_EAC_Format=Rs,t.RGBA_PVRTC_2BPPV1_Format=Is,t.RGBA_PVRTC_4BPPV1_Format=Fs,t.RGBA_S3TC_DXT1_Format=Ps,t.RGBA_S3TC_DXT3_Format=Ls,t.RGBA_S3TC_DXT5_Format=Es,t.RGBDEncoding=Tu,t.RGBEEncoding=wu,t.RGBEFormat=gs,t.RGBFormat=ps,t.RGBIntegerFormat=Ss,t.RGBM16Encoding=Au,t.RGBM7Encoding=Su,t.RGB_ETC1_Format=Ns,t.RGB_ETC2_Format=Ds,t.RGB_PVRTC_2BPPV1_Format=Cs,t.RGB_PVRTC_4BPPV1_Format=Os,t.RGB_S3TC_DXT1_Format=Ts,t.RGFormat=ws,t.RGIntegerFormat=Ms,t.RawShaderMaterial=Ci,t.Ray=y,t.Raycaster=da,t.RectAreaLight=zr,t.RedFormat=xs,t.RedIntegerFormat=bs,t.ReinhardToneMapping=Do,t.RepeatWrapping=Ho,t.ReplaceStencilOp=7681,t.ReverseSubtractEquation=so,t.RingBufferGeometry=gi,t.RingGeometry=vi,t.SRGB8_ALPHA8_ASTC_10x10_Format=cu,t.SRGB8_ALPHA8_ASTC_10x5_Format=ou,t.SRGB8_ALPHA8_ASTC_10x6_Format=su,t.SRGB8_ALPHA8_ASTC_10x8_Format=uu,t.SRGB8_ALPHA8_ASTC_12x10_Format=lu,t.SRGB8_ALPHA8_ASTC_12x12_Format=hu,t.SRGB8_ALPHA8_ASTC_4x4_Format=$s,t.SRGB8_ALPHA8_ASTC_5x4_Format=Ks,t.SRGB8_ALPHA8_ASTC_5x5_Format=tu,t.SRGB8_ALPHA8_ASTC_6x5_Format=eu,t.SRGB8_ALPHA8_ASTC_6x6_Format=nu,t.SRGB8_ALPHA8_ASTC_8x5_Format=iu,t.SRGB8_ALPHA8_ASTC_8x6_Format=ru,t.SRGB8_ALPHA8_ASTC_8x8_Format=au,t.Scene=d,t.SceneUtils={createMultiMaterialObject:function(){},detach:function(){},attach:function(){}},t.ShaderChunk=Nl,t.ShaderLib=Dl,t.ShaderMaterial=Q,t.ShadowMaterial=Oi,t.Shape=Tr,t.ShapeBufferGeometry=bi,t.ShapeGeometry=xi,t.ShapePath=Yr,t.ShapeUtils=Ih,t.ShortType=ns,t.Skeleton=rn,t.SkeletonHelper=wa,t.SkinnedMesh=nn,t.SmoothShading=2,t.Sphere=g,t.SphereBufferGeometry=mi,t.SphereGeometry=di,t.Spherical=xf,t.SphericalHarmonics3=Ur,t.Spline=Va,t.SplineCurve=Mr,t.SplineCurve3=Ga,t.SpotLight=Cr,t.SpotLightHelper=ba,t.SpotLightShadow=Or,t.Sprite=Ke,t.SpriteMaterial=$e,t.SrcAlphaFactor=mo,t.SrcAlphaSaturateFactor=bo,t.SrcColorFactor=fo,t.StaticCopyUsage=35046,t.StaticDrawUsage=Iu,t.StaticReadUsage=35045,t.StereoCamera=ta,t.StreamCopyUsage=35042,t.StreamDrawUsage=35040,t.StreamReadUsage=35041,t.StringKeyframeTrack=Zi,t.SubtractEquation=oo,t.SubtractiveBlending=no,t.TOUCH={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},t.TangentSpaceNormalMap=Eu,t.TetrahedronBufferGeometry=Sn,t.TetrahedronGeometry=Mn,t.TextBufferGeometry=pi,t.TextGeometry=fi,t.Texture=r,t.TextureLoader=ur,t.TorusBufferGeometry=Rn,t.TorusGeometry=Dn,t.TorusKnotBufferGeometry=Nn,t.TorusKnotGeometry=In,t.Triangle=x,t.TriangleFanDrawMode=2,t.TriangleStripDrawMode=1,t.TrianglesDrawMode=0,t.TubeBufferGeometry=Fn,t.TubeGeometry=Cn,t.UVMapping=300,t.Uint16Attribute=function(t,e){return new I(t,e)},t.Uint16BufferAttribute=I,t.Uint32Attribute=function(t,e){return new D(t,e)},t.Uint32BufferAttribute=D,t.Uint8Attribute=function(t,e){return new O(t,e)},t.Uint8BufferAttribute=O,t.Uint8ClampedAttribute=function(t,e){return new C(t,e)},t.Uint8ClampedBufferAttribute=C,t.Uniform=fa,t.UniformsLib=Il,t.UniformsUtils=Tl,t.UnsignedByteType=ts,t.UnsignedInt248Type=hs,t.UnsignedIntType=as,t.UnsignedShort4444Type=us,t.UnsignedShort5551Type=cs,t.UnsignedShort565Type=ls,t.UnsignedShortType=is,t.VSMShadowMap=Qa,t.Vector2=n,t.Vector3=c,t.Vector4=a,t.VectorKeyframeTrack=Ji,t.Vertex=function(t,e,n){return new c(t,e,n)},t.VertexColors=2,t.VideoTexture=dn,t.WebGL1Renderer=Ye,t.WebGLCubeRenderTarget=K,t.WebGLMultisampleRenderTarget=s,t.WebGLRenderTarget=o,t.WebGLRenderTargetCube=function(t,e,n){return new K(t,n)},t.WebGLRenderer=Xe,t.WebGLUtils=Be,t.WireframeGeometry=yn,t.WireframeHelper=function(t,e){return new cn(new yn(t.geometry),new sn({color:void 0!==e?e:16777215}))},t.WrapAroundEnding=gu,t.XHRLoader=function(t){return new nr(t)},t.ZeroCurvatureEnding=mu,t.ZeroFactor=lo,t.ZeroSlopeEnding=vu,t.ZeroStencilOp=0,t.sRGBEncoding=xu,Object.defineProperty(t,"__esModule",{value:!0})})},{}],6:[function(t,e,n){function i(){this._events&&Object.prototype.hasOwnProperty.call(this,"_events")||(this._events=h(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0}function r(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function a(t,e,n,i){var a,o,s;if("function"!=typeof n)throw new TypeError('"listener" argument must be a function');if((o=t._events)?(o.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),o=t._events),s=o[e]):(o=t._events=h(null),t._eventsCount=0),s){if("function"==typeof s?s=o[e]=i?[n,s]:[s,n]:i?s.unshift(n):s.push(n),!s.warned&&((a=r(t))&&a>0&&s.length>a)){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+' "'+String(e)+'" listeners added. Use emitter.setMaxListeners() to increase limit.');u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,"object"==typeof console&&console.warn}}else s=o[e]=n,++t._eventsCount;return t}function o(){if(!this.fired)switch(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:for(var t=new Array(arguments.length),e=0;e<t.length;++e)t[e]=arguments[e];this.listener.apply(this.target,t)}}function s(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=p.call(o,i);return r.listener=n,i.wrapFn=r,r}function u(t,e,n){var i=t._events;if(!i)return[];var r=i[e];return r?"function"==typeof r?n?[r.listener||r]:[r]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(r):l(r,r.length):[]}function c(t){var e=this._events;if(e){var n=e[t];if("function"==typeof n)return 1;if(n)return n.length}return 0}function l(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}var h=Object.create||function(t){var e=function(){};return e.prototype=t,new e},f=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return n},p=Function.prototype.bind||function(t){var e=this;return function(){return e.apply(t,arguments)}};e.exports=i,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._maxListeners=void 0;var d,m=10;try{var v={};Object.defineProperty&&Object.defineProperty(v,"x",{value:0}),d=0===v.x}catch(t){d=!1}d?Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return m},set:function(t){if("number"!=typeof t||t<0||t!=t)throw new TypeError('"defaultMaxListeners" must be a positive number');m=t}}):i.defaultMaxListeners=m,i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||isNaN(t))throw new TypeError('"n" argument must be a positive number');return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return r(this)},i.prototype.emit=function(t){var e,n,i,r,a,o,s="error"===t;if(o=this._events)s=s&&null==o.error;else if(!s)return!1;if(s){if(arguments.length>1&&(e=arguments[1]),e instanceof Error)throw e;var u=new Error('Unhandled "error" event. ('+e+")");throw u.context=e,u}if(!(n=o[t]))return!1;var c="function"==typeof n;switch(i=arguments.length){case 1:!function(t,e,n){if(e)t.call(n);else for(var i=t.length,r=l(t,i),a=0;a<i;++a)r[a].call(n)}(n,c,this);break;case 2:!function(t,e,n,i){if(e)t.call(n,i);else for(var r=t.length,a=l(t,r),o=0;o<r;++o)a[o].call(n,i)}(n,c,this,arguments[1]);break;case 3:!function(t,e,n,i,r){if(e)t.call(n,i,r);else for(var a=t.length,o=l(t,a),s=0;s<a;++s)o[s].call(n,i,r)}(n,c,this,arguments[1],arguments[2]);break;case 4:!function(t,e,n,i,r,a){if(e)t.call(n,i,r,a);else for(var o=t.length,s=l(t,o),u=0;u<o;++u)s[u].call(n,i,r,a)}(n,c,this,arguments[1],arguments[2],arguments[3]);break;default:for(r=new Array(i-1),a=1;a<i;a++)r[a-1]=arguments[a];!function(t,e,n,i){if(e)t.apply(n,i);else for(var r=t.length,a=l(t,r),o=0;o<r;++o)a[o].apply(n,i)}(n,c,this,r)}return!0},i.prototype.addListener=function(t,e){return a(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return a(this,t,e,!0)},i.prototype.once=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.on(t,s(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');return this.prependListener(t,s(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,i,r,a,o;if("function"!=typeof e)throw new TypeError('"listener" argument must be a function');if(!(i=this._events))return this;if(!(n=i[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=h(null):(delete i[t],i.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(r=-1,a=n.length-1;a>=0;a--)if(n[a]===e||n[a].listener===e){o=n[a].listener,r=a;break}if(r<0)return this;0===r?n.shift():function(t,e){for(var n=e,i=n+1,r=t.length;i<r;n+=1,i+=1)t[n]=t[i];t.pop()}(n,r),1===n.length&&(i[t]=n[0]),i.removeListener&&this.emit("removeListener",t,o||e)}return this},i.prototype.removeAllListeners=function(t){var e,n,i;if(!(n=this._events))return this;if(!n.removeListener)return 0===arguments.length?(this._events=h(null),this._eventsCount=0):n[t]&&(0==--this._eventsCount?this._events=h(null):delete n[t]),this;if(0===arguments.length){var r,a=f(n);for(i=0;i<a.length;++i)"removeListener"!==(r=a[i])&&this.removeAllListeners(r);return this.removeAllListeners("removeListener"),this._events=h(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(e)for(i=e.length-1;i>=0;i--)this.removeListener(t,e[i]);return this},i.prototype.listeners=function(t){return u(this,t,!0)},i.prototype.rawListeners=function(t){return u(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):c.call(t,e)},i.prototype.listenerCount=c,i.prototype.eventNames=function(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]}},{}],7:[function(t,e,n){!function(t,i){"object"==typeof n&&void 0!==e?i(n):"function"==typeof define&&define.amd?define(["exports"],i):i((t=t||self).window=t.window||{})}(this,function(t){"use strict";function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function n(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var i,r,a,o,s,u,c,l,h={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},f={duration:.5,overwrite:!1,delay:0},p=1e8,d=1/p,m=2*Math.PI,v=m/4,g=0,y=Math.sqrt,_=Math.cos,x=Math.sin,b=function(t){return"string"==typeof t},w=function(t){return"function"==typeof t},M=function(t){return"number"==typeof t},S=function(t){return void 0===t},A=function(t){return"object"==typeof t},T=function(t){return!1!==t},P=function(){return"undefined"!=typeof window},L=function(t){return w(t)||b(t)},E=Array.isArray,O=/(?:-?\.?\d|\.)+/gi,C=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,F=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,I=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,N=/\(([^()]+)\)/i,D=/[+-]=-?[\.\d]+/,R=/[#\-+.]*\b[a-z\d-=+%.]+/gi,k={},z={},U=function(t){return(z=lt(t,k))&&Ve},B=function(t,e){return!e&&void 0},j=function(t,e){return t&&(k[t]=e)&&z&&(z[t]=e)||k},G=function(){return 0},V={},W=[],H={},X={},Y={},q=30,Q=[],Z="",J=function(t){var e,n,i=t[0];if(A(i)||w(i)||(t=[t]),!(e=(i._gsap||{}).harness)){for(n=Q.length;n--&&!Q[n].targetTest(i););e=Q[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new me(t[n],e)))||t.splice(n,1);return t},$=function(t){return t._gsap||J(Dt(t))[0]._gsap},K=function(t,e){var n=t[e];return w(n)?t[e]():S(n)&&t.getAttribute(e)||n},tt=function(t,e){return(t=t.split(",")).forEach(e)||t},et=function(t){return Math.round(1e5*t)/1e5||0},nt=function(t,e){for(var n=e.length,i=0;t.indexOf(e[i])<0&&++i<n;);return i<n},it=function(t,e,n){var i,r=M(t[1]),a=(r?2:1)+(e<2?0:1),o=t[a];if(r&&(o.duration=t[1]),o.parent=n,e){for(i=o;n&&!("immediateRender"in i);)i=n.vars.defaults||{},n=T(n.vars.inherit)&&n.parent;o.immediateRender=T(i.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return o},rt=function(){var t,e,n=W.length,i=W.slice(0);for(H={},W.length=0,t=0;t<n;t++)(e=i[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},at=function(t,e,n,i){W.length&&rt(),t.render(e,n,i),W.length&&rt()},ot=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(R).length<2?e:t},st=function(t){return t},ut=function(t,e){for(var n in e)n in t||(t[n]=e[n]);return t},ct=function(t,e){for(var n in e)n in t||"duration"===n||"ease"===n||(t[n]=e[n])},lt=function(t,e){for(var n in e)t[n]=e[n];return t},ht=function t(e,n){for(var i in n)e[i]=A(n[i])?t(e[i]||(e[i]={}),n[i]):n[i];return e},ft=function(t,e){var n,i={};for(n in t)n in e||(i[n]=t[n]);return i},pt=function(t){var e=t.parent||i,n=t.keyframes?ct:ut;if(T(t.inherit))for(;e;)n(t,e.vars.defaults),e=e.parent||e._dp;return t},dt=function(t,e,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=e._prev,a=e._next;r?r._next=a:t[n]===e&&(t[n]=a),a?a._prev=r:t[i]===e&&(t[i]=r),e._next=e._prev=e.parent=null},mt=function(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0},vt=function(t){for(var e=t;e;)e._dirty=1,e=e.parent;return t},gt=function t(e){return!e||e._ts&&t(e.parent)},yt=function(t){return t._repeat?_t(t._tTime,t=t.duration()+t._rDelay)*t:0},_t=function(t,e){return(t/=e)&&~~t===t?~~t-1:~~t},xt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},bt=function(t){return t._end=et(t._start+(t._tDur/Math.abs(t._ts||t._rts||d)||0))},wt=function(t,e){var n;if((e._time||e._initted&&!e._dur)&&(n=xt(t.rawTime(),e),(!e._dur||Ct(0,e.totalDuration(),n)-e._tTime>d)&&e.render(n,!0)),vt(t)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(n=t;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;t._zTime=-d}},Mt=function(t,e,n,i){return e.parent&&mt(e),e._start=et(n+e._delay),e._end=et(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var a,o=t[i];if(r)for(a=e[r];o&&o[r]>a;)o=o._prev;o?(e._next=o._next,o._next=e):(e._next=t[n],t[n]=e),e._next?e._next._prev=e:t[i]=e,e._prev=o,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,i||wt(t,e),t},St=function(t,e){return k.ScrollTrigger?k.ScrollTrigger.create(e,t):void 0},At=function(t,e,n,i){return be(t,e),t._initted?!n&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&u!==ne.frame?(W.push(t),t._lazy=[e,i],1):void 0:1},Tt=function(t,e,n){var i=t._repeat,r=et(e)||0;return t._dur=r,t._tDur=i?i<0?1e10:et(r*(i+1)+t._rDelay*i):r,t._time>r&&(t._time=r,t._tTime=Math.min(t._tTime,t._tDur)),!n&&vt(t.parent),t.parent&&bt(t),t},Pt=function(t){return t instanceof ge?vt(t):Tt(t,t._dur)},Lt={_start:0,endTime:G},Et=function t(e,n){var i,r,a=e.labels,o=e._recent||Lt,s=e.duration()>=p?o.endTime(!1):e._dur;return b(n)&&(isNaN(n)||n in a)?"<"===(i=n.charAt(0))||">"===i?("<"===i?o._start:o.endTime(o._repeat>=0))+(parseFloat(n.substr(1))||0):(i=n.indexOf("="))<0?(n in a||(a[n]=s),a[n]):(r=+(n.charAt(i-1)+n.substr(i+1)),i>1?t(e,n.substr(0,i-1))+r:s+r):null==n?s:+n},Ot=function(t,e){return t||0===t?e(t):e},Ct=function(t,e,n){return n<t?t:n>e?e:n},Ft=function(t){return(t+"").substr((parseFloat(t)+"").length)},It=[].slice,Nt=function(t,e){return t&&A(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&A(t[0]))&&!t.nodeType&&t!==r},Dt=function(t,e){return!b(t)||e||!a&&ie()?E(t)?function(t,e,n){return void 0===n&&(n=[]),t.forEach(function(t){var i;return b(t)&&!e||Nt(t,1)?(i=n).push.apply(i,Dt(t)):n.push(t)})||n}(t,e):Nt(t)?It.call(t,0):t?[t]:[]:It.call(o.querySelectorAll(t),0)},Rt=function(t){return t.sort(function(){return.5-Math.random()})},kt=function(t){if(w(t))return t;var e=A(t)?t:{each:t},n=le(e.ease),i=e.from||0,r=parseFloat(e.base)||0,a={},o=i>0&&i<1,s=isNaN(i)||o,u=e.axis,c=i,l=i;return b(i)?c=l={center:.5,edges:.5,end:1}[i]||0:!o&&s&&(c=i[0],l=i[1]),function(t,o,h){var f,d,m,v,g,_,x,b,w,M=(h||e).length,S=a[M];if(!S){if(!(w="auto"===e.grid?0:(e.grid||[1,p])[1])){for(x=-p;x<(x=h[w++].getBoundingClientRect().left)&&w<M;);w--}for(S=a[M]=[],f=s?Math.min(w,M)*c-.5:i%w,d=s?M*l/w-.5:i/w|0,x=0,b=p,_=0;_<M;_++)m=_%w-f,v=d-(_/w|0),S[_]=g=u?Math.abs("y"===u?v:m):y(m*m+v*v),g>x&&(x=g),g<b&&(b=g);"random"===i&&Rt(S),S.max=x-b,S.min=b,S.v=M=(parseFloat(e.amount)||parseFloat(e.each)*(w>M?M-1:u?"y"===u?M/w:w:Math.max(w,M/w))||0)*("edges"===i?-1:1),S.b=M<0?r-M:r,S.u=Ft(e.amount||e.each)||0,n=n&&M<0?ue(n):n}return M=(S[t]-S.min)/S.max||0,et(S.b+(n?n(M):M)*S.v)+S.u}},zt=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(n){return Math.floor(Math.round(parseFloat(n)/t)*t*e)/e+(M(n)?0:Ft(n))}},Ut=function(t,e){var n,i,r=E(t);return!r&&A(t)&&(n=r=t.radius||p,t.values?(t=Dt(t.values),(i=!M(t[0]))&&(n*=n)):t=zt(t.increment)),Ot(e,r?w(t)?function(e){return i=t(e),Math.abs(i-e)<=n?i:e}:function(e){for(var r,a,o=parseFloat(i?e.x:e),s=parseFloat(i?e.y:0),u=p,c=0,l=t.length;l--;)i?r=(r=t[l].x-o)*r+(a=t[l].y-s)*a:r=Math.abs(t[l]-o),r<u&&(u=r,c=l);return c=!n||u<=n?t[c]:e,i||c===e||M(e)?c:c+Ft(e)}:zt(t))},Bt=function(t,e,n,i){return Ot(E(t)?!e:!0===n?!!(n=0):!i,function(){return E(t)?t[~~(Math.random()*t.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((t+Math.random()*(e-t))/n)*n*i)/i})},jt=function(t,e,n){return Ot(n,function(n){return t[~~e(n)]})},Gt=function(t){for(var e,n,i,r,a=0,o="";~(e=t.indexOf("random(",a));)i=t.indexOf(")",e),r="["===t.charAt(e+7),n=t.substr(e+7,i-e-7).match(r?R:O),o+=t.substr(a,e-a)+Bt(r?n:+n[0],+n[1],+n[2]||1e-5),a=i+1;return o+t.substr(a,t.length-a)},Vt=function(t,e,n,i,r){var a=e-t,o=i-n;return Ot(r,function(e){return n+((e-t)/a*o||0)})},Wt=function(t,e,n){var i,r,a,o=t.labels,s=p;for(i in o)(r=o[i]-e)<0==!!n&&r&&s>(r=Math.abs(r))&&(a=i,s=r);return a},Ht=function(t,e,n){var i,r,a=t.vars,o=a[e];if(o)return i=a[e+"Params"],r=a.callbackScope||t,n&&W.length&&rt(),i?o.apply(r,i):o.call(r)},Xt=function(t){return mt(t),t.progress()<1&&Ht(t,"onInterrupt"),t},Yt=255,qt={aqua:[0,Yt,Yt],lime:[0,Yt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Yt],navy:[0,0,128],white:[Yt,Yt,Yt],olive:[128,128,0],yellow:[Yt,Yt,0],orange:[Yt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Yt,0,0],pink:[Yt,192,203],cyan:[0,Yt,Yt],transparent:[Yt,Yt,Yt,0]},Qt=function(t,e,n){return(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(n-e)*t*6:t<.5?n:3*t<2?e+(n-e)*(2/3-t)*6:e)*Yt+.5|0},Zt=function(t,e,n){var i,r,a,o,s,u,c,l,h,f,p=t?M(t)?[t>>16,t>>8&Yt,t&Yt]:0:qt.black;if(!p){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),qt[t])p=qt[t];else if("#"===t.charAt(0))4===t.length&&(i=t.charAt(1),r=t.charAt(2),a=t.charAt(3),t="#"+i+i+r+r+a+a),p=[(t=parseInt(t.substr(1),16))>>16,t>>8&Yt,t&Yt];else if("hsl"===t.substr(0,3))if(p=f=t.match(O),e){if(~t.indexOf("="))return p=t.match(C),n&&p.length<4&&(p[3]=1),p}else o=+p[0]%360/360,s=+p[1]/100,i=2*(u=+p[2]/100)-(r=u<=.5?u*(s+1):u+s-u*s),p.length>3&&(p[3]*=1),p[0]=Qt(o+1/3,i,r),p[1]=Qt(o,i,r),p[2]=Qt(o-1/3,i,r);else p=t.match(O)||qt.transparent;p=p.map(Number)}return e&&!f&&(i=p[0]/Yt,r=p[1]/Yt,a=p[2]/Yt,u=((c=Math.max(i,r,a))+(l=Math.min(i,r,a)))/2,c===l?o=s=0:(h=c-l,s=u>.5?h/(2-c-l):h/(c+l),o=c===i?(r-a)/h+(r<a?6:0):c===r?(a-i)/h+2:(i-r)/h+4,o*=60),p[0]=~~(o+.5),p[1]=~~(100*s+.5),p[2]=~~(100*u+.5)),n&&p.length<4&&(p[3]=1),p},Jt=function(t){var e=[],n=[],i=-1;return t.split(Kt).forEach(function(t){var r=t.match(F)||[];e.push.apply(e,r),n.push(i+=r.length+1)}),e.c=n,e},$t=function(t,e,n){var i,r,a,o,s="",u=(t+s).match(Kt),c=e?"hsla(":"rgba(",l=0;if(!u)return t;if(u=u.map(function(t){return(t=Zt(t,e,1))&&c+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"}),n&&(a=Jt(t),(i=n.c).join(s)!==a.c.join(s)))for(o=(r=t.replace(Kt,"1").split(F)).length-1;l<o;l++)s+=r[l]+(~i.indexOf(l)?u.shift()||c+"0,0,0,0)":(a.length?a:u.length?u:n).shift());if(!r)for(o=(r=t.split(Kt)).length-1;l<o;l++)s+=r[l]+u[l];return s+r[o]},Kt=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in qt)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),te=/hsl[a]?\(/,ee=function(t){var e,n=t.join(" ");if(Kt.lastIndex=0,Kt.test(n))return e=te.test(n),t[1]=$t(t[1],e),t[0]=$t(t[0],e,Jt(t[1])),!0},ne=function(){var t,e,n,i,u=Date.now,c=500,h=33,f=u(),p=f,m=1/240,v=m,g=[],y=function n(r){var a,o,s=u()-p,l=!0===r;s>c&&(f+=s-h),p+=s,i.time=(p-f)/1e3,((a=i.time-v)>0||l)&&(i.frame++,v+=a+(a>=m?.004:m-a),o=1),l||(t=e(n)),o&&g.forEach(function(t){return t(i.time,s,i.frame,r)})};return i={time:0,frame:0,tick:function(){y(!0)},wake:function(){s&&(!a&&P()&&(r=a=window,o=r.document||{},k.gsap=Ve,(r.gsapVersions||(r.gsapVersions=[])).push(Ve.version),U(z||r.GreenSockGlobals||!r.gsap&&r||{}),n=r.requestAnimationFrame),t&&i.sleep(),e=n||function(t){return setTimeout(t,1e3*(v-i.time)+1|0)},l=1,y(2))},sleep:function(){(n?r.cancelAnimationFrame:clearTimeout)(t),l=0,e=G},lagSmoothing:function(t,e){c=t||1/d,h=Math.min(e,c,0)},fps:function(t){m=1/(t||240),v=i.time+m},add:function(t){g.indexOf(t)<0&&g.push(t),ie()},remove:function(t){var e;~(e=g.indexOf(t))&&g.splice(e,1)},_listeners:g}}(),ie=function(){return!l&&ne.wake()},re={},ae=/^[\d.\-M][\d.\-,\s]/,oe=/["']/g,se=function(t){for(var e,n,i,r={},a=t.substr(1,t.length-3).split(":"),o=a[0],s=1,u=a.length;s<u;s++)n=a[s],e=s!==u-1?n.lastIndexOf(","):n.length,i=n.substr(0,e),r[o]=isNaN(i)?i.replace(oe,"").trim():+i,o=n.substr(e+1).trim();return r},ue=function(t){return function(e){return 1-t(1-e)}},ce=function t(e,n){for(var i,r=e._first;r;)r instanceof ge?t(r,n):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===n||(r.timeline?t(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},le=function(t,e){return t&&(w(t)?t:re[t]||function(t){var e=(t+"").split("("),n=re[e[0]];return n&&e.length>1&&n.config?n.config.apply(null,~t.indexOf("{")?[se(e[1])]:N.exec(t)[1].split(",").map(ot)):re._CE&&ae.test(t)?re._CE("",t):n}(t))||e},he=function(t,e,n,i){void 0===n&&(n=function(t){return 1-e(1-t)}),void 0===i&&(i=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var r,a={easeIn:e,easeOut:n,easeInOut:i};return tt(t,function(t){for(var e in re[t]=k[t]=a,re[r=t.toLowerCase()]=n,a)re[r+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=re[t+"."+e]=a[e]}),a},fe=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},pe=function t(e,n,i){var r=n>=1?n:1,a=(i||(e?.3:.45))/(n<1?n:1),o=a/m*(Math.asin(1/r)||0),s=function(t){return 1===t?1:r*Math.pow(2,-10*t)*x((t-o)*a)+1},u="out"===e?s:"in"===e?function(t){return 1-s(1-t)}:fe(s);return a=m/a,u.config=function(n,i){return t(e,n,i)},u},de=function t(e,n){void 0===n&&(n=1.70158);var i=function(t){return t?--t*t*((n+1)*t+n)+1:0},r="out"===e?i:"in"===e?function(t){return 1-i(1-t)}:fe(i);return r.config=function(n){return t(e,n)},r};tt("Linear,Quad,Cubic,Quart,Quint,Strong",function(t,e){var n=e<5?e+1:e;he(t+",Power"+(n-1),e?function(t){return Math.pow(t,n)}:function(t){return t},function(t){return 1-Math.pow(1-t,n)},function(t){return t<.5?Math.pow(2*t,n)/2:1-Math.pow(2*(1-t),n)/2})}),re.Linear.easeNone=re.none=re.Linear.easeIn,he("Elastic",pe("in"),pe("out"),pe()),function(t,e){var n=1/e,i=function(i){return i<n?t*i*i:i<.7272727272727273?t*Math.pow(i-1.5/e,2)+.75:i<.9090909090909092?t*(i-=2.25/e)*i+.9375:t*Math.pow(i-2.625/e,2)+.984375};he("Bounce",function(t){return 1-i(1-t)},i)}(7.5625,2.75),he("Expo",function(t){return t?Math.pow(2,10*(t-1)):0}),he("Circ",function(t){return-(y(1-t*t)-1)}),he("Sine",function(t){return 1===t?1:1-_(t*v)}),he("Back",de("in"),de("out"),de()),re.SteppedEase=re.steps=k.SteppedEase={config:function(t,e){void 0===t&&(t=1);var n=1/t,i=t+(e?0:1),r=e?1:0,a=1-d;return function(t){return((i*Ct(0,a,t)|0)+r)*n}}},f.ease=re["quad.out"],tt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(t){return Z+=t+","+t+"Params,"});var me=function(t,e){this.id=g++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:K,this.set=e?e.getSetter:Oe},ve=function(){function t(t,e){var n=t.parent||i;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Tt(this,+t.duration,1),this.data=t.data,l||ne.wake(),n&&Mt(n,this,e||0===e?e:n._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Tt(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(ie(),!arguments.length)return this._tTime;var n=this.parent||this._dp;if(n&&n.smoothChildTiming&&this._ts){for(this._start=et(n._time-(this._ts>0?t/this._ts:((this._dirty?this.totalDuration():this._tDur)-t)/-this._ts)),bt(this),n._dirty||vt(n);n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Mt(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===d||!t&&!this._initted)&&(this._ts||(this._pTime=t),at(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+yt(this))%this._dur||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+yt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*n,e):this._repeat?_t(this._tTime,n)+1:1},e.timeScale=function(t){if(!arguments.length)return this._rts===-d?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?xt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-d?0:this._rts,function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t}(this.totalTime(Ct(0,this._tDur,e),!0))},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(ie(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=d)&&Math.abs(this._zTime)!==d))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Mt(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(T(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?xt(e.rawTime(t),this):this._tTime:this._tTime},e.repeat=function(t){return arguments.length?(this._repeat=t,Pt(this)):this._repeat},e.repeatDelay=function(t){return arguments.length?(this._rDelay=t,Pt(this)):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(Et(this,t),T(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,T(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-d:0)),this):this._rts<0},e.invalidate=function(){return this._initted=0,this._zTime=-d,this},e.isActive=function(t){var e,n=this.parent||this._dp,i=this._start;return!(n&&!(this._ts&&(this._initted||!t)&&n.isActive(t)&&(e=n.rawTime(!0))>=i&&e<this.endTime(!0)-d))},e.eventCallback=function(t,e,n){var i=this.vars;return arguments.length>1?(e?(i[t]=e,n&&(i[t+"Params"]=n),"onUpdate"===t&&(this._onUpdate=e)):delete i[t],this):i[t]},e.then=function(t){var e=this;return new Promise(function(n){var i=w(t)?t:st,r=function(){var t=e.then;e.then=null,w(i)&&(i=i(e))&&(i.then||i===e)&&(e.then=t),n(i),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?r():e._prom=r})},e.kill=function(){Xt(this)},t}();ut(ve.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-d,_prom:0,_ps:!1,_rts:1});var ge=function(t){function r(e,i){var r;return void 0===e&&(e={}),(r=t.call(this,e,i)||this).labels={},r.smoothChildTiming=!!e.smoothChildTiming,r.autoRemoveChildren=!!e.autoRemoveChildren,r._sort=T(e.sortChildren),r.parent&&wt(r.parent,n(r)),e.scrollTrigger&&St(n(r),e.scrollTrigger),r}e(r,t);var a=r.prototype;return a.to=function(t,e,n){return new Ae(t,it(arguments,0,this),Et(this,M(e)?arguments[3]:n)),this},a.from=function(t,e,n){return new Ae(t,it(arguments,1,this),Et(this,M(e)?arguments[3]:n)),this},a.fromTo=function(t,e,n,i){return new Ae(t,it(arguments,2,this),Et(this,M(e)?arguments[4]:i)),this},a.set=function(t,e,n){return e.duration=0,e.parent=this,pt(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new Ae(t,e,Et(this,n),1),this},a.call=function(t,e,n){return Mt(this,Ae.delayedCall(0,t,e),Et(this,n))},a.staggerTo=function(t,e,n,i,r,a,o){return n.duration=e,n.stagger=n.stagger||i,n.onComplete=a,n.onCompleteParams=o,n.parent=this,new Ae(t,n,Et(this,r)),this},a.staggerFrom=function(t,e,n,i,r,a,o){return n.runBackwards=1,pt(n).immediateRender=T(n.immediateRender),this.staggerTo(t,e,n,i,r,a,o)},a.staggerFromTo=function(t,e,n,i,r,a,o,s){return i.startAt=n,pt(i).immediateRender=T(i.immediateRender),this.staggerTo(t,e,i,r,a,o,s)},a.render=function(t,e,n){var r,a,o,s,u,c,l,h,f,p,m,v,g=this._time,y=this._dirty?this.totalDuration():this._tDur,_=this._dur,x=this!==i&&t>y-d&&t>=0?y:t<d?0:t,b=this._zTime<0!=t<0&&(this._initted||!_);if(x!==this._tTime||n||b){if(g!==this._time&&_&&(x+=this._time-g,t+=this._time-g),r=x,f=this._start,c=!(h=this._ts),b&&(_||(g=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat&&(m=this._yoyo,u=_+this._rDelay,((r=et(x%u))>_||y===x)&&(r=_),(s=~~(x/u))&&s===x/u&&(r=_,s--),p=_t(this._tTime,u),!g&&this._tTime&&p!==s&&(p=s),m&&1&s&&(r=_-r,v=1),s!==p&&!this._lock)){var w=m&&1&p,M=w===(m&&1&s);if(s<p&&(w=!w),g=w?0:_,this._lock=1,this.render(g||(v?0:et(s*u)),e,!_)._lock=0,!e&&this.parent&&Ht(this,"onRepeat"),this.vars.repeatRefresh&&!v&&(this.invalidate()._lock=1),g!==this._time||c!==!this._ts)return this;if(M&&(this._lock=2,g=w?_+1e-4:-1e-4,this.render(g,!0),this.vars.repeatRefresh&&!v&&this.invalidate()),this._lock=0,!this._ts&&!c)return this;ce(this,v)}if(this._hasPause&&!this._forcing&&this._lock<2&&((l=function(t,e,n){var i;if(n>e)for(i=t._first;i&&i._start<=n;){if(!i._dur&&"isPause"===i.data&&i._start>e)return i;i=i._next}else for(i=t._last;i&&i._start>=n;){if(!i._dur&&"isPause"===i.data&&i._start<e)return i;i=i._prev}}(this,et(g),et(r)))&&(x-=r-(r=l._start))),this._tTime=x,this._time=r,this._act=!h,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t),g||!r||e||Ht(this,"onStart"),r>=g&&t>=0)for(a=this._first;a;){if(o=a._next,(a._act||r>=a._start)&&a._ts&&l!==a){if(a.parent!==this)return this.render(t,e,n);if(a.render(a._ts>0?(r-a._start)*a._ts:(a._dirty?a.totalDuration():a._tDur)+(r-a._start)*a._ts,e,n),r!==this._time||!this._ts&&!c){l=0,o&&(x+=this._zTime=-d);break}}a=o}else{a=this._last;for(var S=t<0?t:r;a;){if(o=a._prev,(a._act||S<=a._end)&&a._ts&&l!==a){if(a.parent!==this)return this.render(t,e,n);if(a.render(a._ts>0?(S-a._start)*a._ts:(a._dirty?a.totalDuration():a._tDur)+(S-a._start)*a._ts,e,n),r!==this._time||!this._ts&&!c){l=0,o&&(x+=this._zTime=S?-d:d);break}}a=o}}if(l&&!e&&(this.pause(),l.render(r>=g?0:-d)._zTime=r>=g?1:-1,this._ts))return this._start=f,bt(this),this.render(t,e,n);this._onUpdate&&!e&&Ht(this,"onUpdate",!0),(x===y&&y>=this.totalDuration()||!x&&g)&&(f!==this._start&&Math.abs(h)===Math.abs(this._ts)||this._lock||((t||!_)&&(x===y&&this._ts>0||!x&&this._ts<0)&&mt(this,1),e||t<0&&!g||!x&&!g||(Ht(this,x===y?"onComplete":"onReverseComplete",!0),this._prom&&!(x<y&&this.timeScale()>0)&&this._prom())))}return this},a.add=function(t,e){var n=this;if(M(e)||(e=Et(this,e)),!(t instanceof ve)){if(E(t))return t.forEach(function(t){return n.add(t,e)}),vt(this);if(b(t))return this.addLabel(t,e);if(!w(t))return this;t=Ae.delayedCall(0,t)}return this!==t?Mt(this,t,e):this},a.getChildren=function(t,e,n,i){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),void 0===i&&(i=-p);for(var r=[],a=this._first;a;)a._start>=i&&(a instanceof Ae?e&&r.push(a):(n&&r.push(a),t&&r.push.apply(r,a.getChildren(!0,e,n)))),a=a._next;return r},a.getById=function(t){for(var e=this.getChildren(1,1,1),n=e.length;n--;)if(e[n].vars.id===t)return e[n]},a.remove=function(t){return b(t)?this.removeLabel(t):w(t)?this.killTweensOf(t):(dt(this,t),t===this._recent&&(this._recent=this._last),vt(this))},a.totalTime=function(e,n){return arguments.length?(this._forcing=1,this.parent||this._dp||!this._ts||(this._start=et(ne.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,n),this._forcing=0,this):this._tTime},a.addLabel=function(t,e){return this.labels[t]=Et(this,e),this},a.removeLabel=function(t){return delete this.labels[t],this},a.addPause=function(t,e,n){var i=Ae.delayedCall(0,e||G,n);return i.data="isPause",this._hasPause=1,Mt(this,i,Et(this,t))},a.removePause=function(t){var e=this._first;for(t=Et(this,t);e;)e._start===t&&"isPause"===e.data&&mt(e),e=e._next},a.killTweensOf=function(t,e,n){for(var i=this.getTweensOf(t,n),r=i.length;r--;)ye!==i[r]&&i[r].kill(t,e);return this},a.getTweensOf=function(t,e){for(var n,i=[],r=Dt(t),a=this._first;a;)a instanceof Ae?!nt(a._targets,r)||e&&!a.isActive("started"===e)||i.push(a):(n=a.getTweensOf(r,e)).length&&i.push.apply(i,n),a=a._next;return i},a.tweenTo=function(t,e){e=e||{};var n=this,i=Et(n,t),r=e,a=r.startAt,o=r.onStart,s=r.onStartParams,u=Ae.to(n,ut(e,{ease:"none",lazy:!1,time:i,duration:e.duration||Math.abs((i-(a&&"time"in a?a.time:n._time))/n.timeScale())||d,onStart:function(){n.pause();var t=e.duration||Math.abs((i-n._time)/n.timeScale());u._dur!==t&&Tt(u,t).render(u._time,!0,!0),o&&o.apply(u,s||[])}}));return u},a.tweenFromTo=function(t,e,n){return this.tweenTo(e,ut({startAt:{time:Et(this,t)}},n))},a.recent=function(){return this._recent},a.nextLabel=function(t){return void 0===t&&(t=this._time),Wt(this,Et(this,t))},a.previousLabel=function(t){return void 0===t&&(t=this._time),Wt(this,Et(this,t),1)},a.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+d)},a.shiftChildren=function(t,e,n){void 0===n&&(n=0);for(var i,r=this._first,a=this.labels;r;)r._start>=n&&(r._start+=t),r=r._next;if(e)for(i in a)a[i]>=n&&(a[i]+=t);return vt(this)},a.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},a.clear=function(t){void 0===t&&(t=!0);for(var e,n=this._first;n;)e=n._next,this.remove(n),n=e;return this._time=this._tTime=this._pTime=0,t&&(this.labels={}),vt(this)},a.totalDuration=function(t){var e,n,r,a,o=0,s=this,u=s._last,c=p;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-t:t));if(s._dirty){for(a=s.parent;u;)e=u._prev,u._dirty&&u.totalDuration(),(r=u._start)>c&&s._sort&&u._ts&&!s._lock?(s._lock=1,Mt(s,u,r-u._delay,1)._lock=0):c=r,r<0&&u._ts&&(o-=r,(!a&&!s._dp||a&&a.smoothChildTiming)&&(s._start+=r/s._ts,s._time-=r,s._tTime-=r),s.shiftChildren(-r,!1,-1/0),c=0),(n=bt(u))>o&&u._ts&&(o=n),u=e;Tt(s,s===i&&s._time>o?s._time:o,1),s._dirty=0}return s._tDur},r.updateRoot=function(t){if(i._ts&&(at(i,xt(t,i)),u=ne.frame),ne.frame>=q){q+=h.autoSleep||120;var e=i._first;if((!e||!e._ts)&&h.autoSleep&&ne._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||ne.sleep()}}},r}(ve);ut(ge.prototype,{_lock:0,_hasPause:0,_forcing:0});var ye,_e=function(t,e,n,i,r,a,o,s,u){w(i)&&(i=i(r||0,t,a));var c,l=t[e],f="get"!==n?n:w(l)?u?t[e.indexOf("set")||!w(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():l,p=w(l)?u?Le:Pe:Te;if(b(i)&&(~i.indexOf("random(")&&(i=Gt(i)),"="===i.charAt(1)&&(i=parseFloat(f)+parseFloat(i.substr(2))*("-"===i.charAt(0)?-1:1)+(Ft(f)||0))),f!==i)return isNaN(f+i)?function(t,e,n,i,r,a,o){var s,u,c,l,h,f,p,d,m=new Ue(this._pt,t,e,0,1,Ie,null,r),v=0,g=0;for(m.b=n,m.e=i,n+="",(p=~(i+="").indexOf("random("))&&(i=Gt(i)),a&&(a(d=[n,i],t,e),n=d[0],i=d[1]),u=n.match(I)||[];s=I.exec(i);)l=s[0],h=i.substring(v,s.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),l!==u[g++]&&(f=parseFloat(u[g-1])||0,m._pt={_next:m._pt,p:h||1===g?h:",",s:f,c:"="===l.charAt(1)?parseFloat(l.substr(2))*("-"===l.charAt(0)?-1:1):parseFloat(l)-f,m:c&&c<4?Math.round:0},v=I.lastIndex);return m.c=v<i.length?i.substring(v,i.length):"",m.fp=o,(D.test(i)||p)&&(m.e=0),this._pt=m,m}.call(this,t,e,f,i,p,s||h.stringFilter,u):(c=new Ue(this._pt,t,e,+f||0,i-(f||0),"boolean"==typeof l?Fe:Ce,0,p),u&&(c.fp=u),o&&c.modifier(o,this,t),this._pt=c)},xe=function(t,e,n,i,r,a){var o,s,u,l;if(X[t]&&!1!==(o=new X[t]).init(r,o.rawVars?e[t]:function(t,e,n,i,r){if(w(t)&&(t=we(t,r,e,n,i)),!A(t)||t.style&&t.nodeType||E(t))return b(t)?we(t,r,e,n,i):t;var a,o={};for(a in t)o[a]=we(t[a],r,e,n,i);return o}(e[t],i,r,a,n),n,i,a)&&(n._pt=s=new Ue(n._pt,r,t,0,1,o.render,o,0,o.priority),n!==c))for(u=n._ptLookup[n._targets.indexOf(r)],l=o._props.length;l--;)u[o._props[l]]=s;return o},be=function t(e,n){var r,a,o,s,u,c,l,h,p,m,v,g,y=e.vars,_=y.ease,x=y.startAt,b=y.immediateRender,w=y.lazy,M=y.onUpdate,S=y.onUpdateParams,A=y.callbackScope,P=y.runBackwards,L=y.yoyoEase,E=y.keyframes,O=y.autoRevert,C=e._dur,F=e._startAt,I=e._targets,N=e.parent,D=N&&"nested"===N.data?N.parent._targets:I,R="auto"===e._overwrite,k=e.timeline;if(k&&(!E||!_)&&(_="none"),e._ease=le(_,f.ease),e._yEase=L?ue(le(!0===L?_:L,f.ease)):0,L&&e._yoyo&&!e._repeat&&(L=e._yEase,e._yEase=e._ease,e._ease=L),!k){if(g=(h=I[0]?$(I[0]).harness:0)&&y[h.prop],r=ft(y,V),F&&F.render(-1,!0).kill(),x){if(mt(e._startAt=Ae.set(I,ut({data:"isStart",overwrite:!1,parent:N,immediateRender:!0,lazy:T(w),startAt:null,delay:0,onUpdate:M,onUpdateParams:S,callbackScope:A,stagger:0},x))),b)if(n>0)!O&&(e._startAt=0);else if(C)return}else if(P&&C)if(F)!O&&(e._startAt=0);else if(n&&(b=!1),o=lt(r,{overwrite:!1,data:"isFromStart",lazy:b&&T(w),immediateRender:b,stagger:0,parent:N}),g&&(o[h.prop]=g),mt(e._startAt=Ae.set(I,o)),b){if(!n)return}else t(e._startAt,d);for(e._pt=0,w=C&&T(w)||w&&!C,a=0;a<I.length;a++){if(l=(u=I[a])._gsap||J(I)[a]._gsap,e._ptLookup[a]=m={},H[l.id]&&rt(),v=D===I?a:D.indexOf(u),h&&!1!==(p=new h).init(u,g||r,e,v,D)&&(e._pt=s=new Ue(e._pt,u,p.name,0,1,p.render,p,0,p.priority),p._props.forEach(function(t){m[t]=s}),p.priority&&(c=1)),!h||g)for(o in r)X[o]&&(p=xe(o,r,e,v,u,D))?p.priority&&(c=1):m[o]=s=_e.call(e,u,o,"get",r[o],v,D,0,y.stringFilter);e._op&&e._op[a]&&e.kill(u,e._op[a]),R&&e._pt&&(ye=e,i.killTweensOf(u,m,"started"),ye=0),e._pt&&w&&(H[l.id]=1)}c&&ze(e),e._onInit&&e._onInit(e)}e._from=!k&&!!y.runBackwards,e._onUpdate=M,e._initted=!!e.parent},we=function(t,e,n,i,r){return w(t)?t.call(e,n,i,r):b(t)&&~t.indexOf("random(")?Gt(t):t},Me=Z+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Se=(Me+",id,stagger,delay,duration,paused,scrollTrigger").split(","),Ae=function(t){function r(e,r,a,o){var s;"number"==typeof r&&(a.duration=r,r=a,a=null);var u,c,l,f,p,m,v,g,y=(s=t.call(this,o?r:pt(r),a)||this).vars,_=y.duration,x=y.delay,b=y.immediateRender,w=y.stagger,S=y.overwrite,P=y.keyframes,O=y.defaults,C=y.scrollTrigger,F=y.yoyoEase,I=s.parent,N=(E(e)?M(e[0]):"length"in r)?[e]:Dt(e);if(s._targets=N.length?J(N):B("GSAP target "+e+" not found. https://greensock.com",!h.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=S,P||w||L(_)||L(x)){if(r=s.vars,(u=s.timeline=new ge({data:"nested",defaults:O||{}})).kill(),u.parent=n(s),P)ut(u.vars.defaults,{ease:"none"}),P.forEach(function(t){return u.to(N,t,">")});else{if(f=N.length,v=w?kt(w):G,A(w))for(p in w)~Me.indexOf(p)&&(g||(g={}),g[p]=w[p]);for(c=0;c<f;c++){for(p in l={},r)Se.indexOf(p)<0&&(l[p]=r[p]);l.stagger=0,F&&(l.yoyoEase=F),g&&lt(l,g),m=N[c],l.duration=+we(_,n(s),c,m,N),l.delay=(+we(x,n(s),c,m,N)||0)-s._delay,!w&&1===f&&l.delay&&(s._delay=x=l.delay,s._start+=x,l.delay=0),u.to(m,l,v(c,m,N))}u.duration()?_=x=0:s.timeline=0}_||s.duration(_=u.duration())}else s.timeline=0;return!0===S&&(ye=n(s),i.killTweensOf(N),ye=0),I&&wt(I,n(s)),(b||!_&&!P&&s._start===et(I._time)&&T(b)&&gt(n(s))&&"nested"!==I.data)&&(s._tTime=-d,s.render(Math.max(0,-x))),C&&St(n(s),C),s}e(r,t);var a=r.prototype;return a.render=function(t,e,n){var i,r,a,o,s,u,c,l,h,f=this._time,p=this._tDur,m=this._dur,v=t>p-d&&t>=0?p:t<d?0:t;if(m){if(v!==this._tTime||!t||n||this._startAt&&this._zTime<0!=t<0){if(i=v,l=this.timeline,this._repeat){if(o=m+this._rDelay,((i=et(v%o))>m||p===v)&&(i=m),(a=~~(v/o))&&a===v/o&&(i=m,a--),(u=this._yoyo&&1&a)&&(h=this._yEase,i=m-i),s=_t(this._tTime,o),i===f&&!n&&this._initted)return this;a!==s&&(l&&this._yEase&&ce(l,u),!this.vars.repeatRefresh||u||this._lock||(this._lock=n=1,this.render(et(o*a),!0).invalidate()._lock=0))}if(!this._initted){if(At(this,i,n,e))return this._tTime=0,this;if(m!==this._dur)return this.render(t,e,n)}for(this._tTime=v,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(i/m),this._from&&(this.ratio=c=1-c),i&&!f&&!e&&Ht(this,"onStart"),r=this._pt;r;)r.r(c,r.d),r=r._next;l&&l.render(t<0?t:!i&&u?-d:l._dur*c,e,n)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,n),Ht(this,"onUpdate")),this._repeat&&a!==s&&this.vars.onRepeat&&!e&&this.parent&&Ht(this,"onRepeat"),v!==this._tDur&&v||this._tTime!==v||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,!0),(t||!m)&&(v===this._tDur&&this._ts>0||!v&&this._ts<0)&&mt(this,1),e||t<0&&!f||!v&&!f||(Ht(this,v===p?"onComplete":"onReverseComplete",!0),this._prom&&!(v<p&&this.timeScale()>0)&&this._prom()))}}else!function(t,e,n,i){var r,a,o=t.ratio,s=e<0||!e&&o&&!t._start&&t._zTime>d&&!t._dp._lock||t._ts<0||t._dp._ts<0?0:1,u=t._rDelay,c=0;if(u&&t._repeat&&(c=Ct(0,t._tDur,e),_t(c,u)!==(a=_t(t._tTime,u))&&(o=1-s,t.vars.repeatRefresh&&t._initted&&t.invalidate())),t._initted||!At(t,e,i,n))if(s!==o||i||t._zTime===d||!e&&t._zTime){for(a=t._zTime,t._zTime=e||(n?d:0),n||(n=e&&!a),t.ratio=s,t._from&&(s=1-s),t._time=0,t._tTime=c,n||Ht(t,"onStart"),r=t._pt;r;)r.r(s,r.d),r=r._next;t._startAt&&e<0&&t._startAt.render(e,!0,!0),t._onUpdate&&!n&&Ht(t,"onUpdate"),c&&t._repeat&&!n&&t.parent&&Ht(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===s&&(s&&mt(t,1),n||(Ht(t,s?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)}(this,t,e,n);return this},a.targets=function(){return this._targets},a.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},a.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e)&&(this._lazy=0,this.parent))return Xt(this);if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,ye&&!0!==ye.vars.overwrite)._first||Xt(this),this.parent&&n!==this.timeline.totalDuration()&&Tt(this,this._dur*this.timeline._tDur/n),this}var i,r,a,o,s,u,c,l=this._targets,h=t?Dt(t):l,f=this._ptLookup,p=this._pt;if((!e||"all"===e)&&function(t,e){for(var n=t.length,i=n===e.length;i&&n--&&t[n]===e[n];);return n<0}(l,h))return Xt(this);for(i=this._op=this._op||[],"all"!==e&&(b(e)&&(s={},tt(e,function(t){return s[t]=1}),e=s),e=function(t,e){var n,i,r,a,o=t[0]?$(t[0]).harness:0,s=o&&o.aliases;if(!s)return e;for(i in n=lt({},e),s)if(i in n)for(r=(a=s[i].split(",")).length;r--;)n[a[r]]=n[i];return n}(l,e)),c=l.length;c--;)if(~h.indexOf(l[c]))for(s in r=f[c],"all"===e?(i[c]=e,o=r,a={}):(a=i[c]=i[c]||{},o=e),o)(u=r&&r[s])&&("kill"in u.d&&!0!==u.d.kill(s)||dt(this,u,"_pt"),delete r[s]),"all"!==a&&(a[s]=1);return this._initted&&!this._pt&&p&&Xt(this),this},r.to=function(t,e){return new r(t,e,arguments[2])},r.from=function(t,e){return new r(t,it(arguments,1))},r.delayedCall=function(t,e,n,i){return new r(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:i})},r.fromTo=function(t,e,n){return new r(t,it(arguments,2))},r.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new r(t,e)},r.killTweensOf=function(t,e,n){return i.killTweensOf(t,e,n)},r}(ve);ut(Ae.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),tt("staggerTo,staggerFrom,staggerFromTo",function(t){Ae[t]=function(){var e=new ge,n=It.call(arguments,0);return n.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,n)}});var Te=function(t,e,n){return t[e]=n},Pe=function(t,e,n){return t[e](n)},Le=function(t,e,n,i){return t[e](i.fp,n)},Ee=function(t,e,n){return t.setAttribute(e,n)},Oe=function(t,e){return w(t[e])?Pe:S(t[e])&&t.setAttribute?Ee:Te},Ce=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},Fe=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},Ie=function(t,e){var n=e._pt,i="";if(!t&&e.b)i=e.b;else if(1===t&&e.e)i=e.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*t):Math.round(1e4*(n.s+n.c*t))/1e4)+i,n=n._next;i+=e.c}e.set(e.t,e.p,i,e)},Ne=function(t,e){for(var n=e._pt;n;)n.r(t,n.d),n=n._next},De=function(t,e,n,i){for(var r,a=this._pt;a;)r=a._next,a.p===i&&a.modifier(t,e,n),a=r},Re=function(t){for(var e,n,i=this._pt;i;)n=i._next,i.p===t&&!i.op||i.op===t?dt(this,i,"_pt"):i.dep||(e=1),i=n;return!e},ke=function(t,e,n,i){i.mSet(t,e,i.m.call(i.tween,n,i.mt),i)},ze=function(t){for(var e,n,i,r,a=t._pt;a;){for(e=a._next,n=i;n&&n.pr>a.pr;)n=n._next;(a._prev=n?n._prev:r)?a._prev._next=a:i=a,(a._next=n)?n._prev=a:r=a,a=e}t._pt=i},Ue=function(){function t(t,e,n,i,r,a,o,s,u){this.t=e,this.s=i,this.c=r,this.p=n,this.r=a||Ce,this.d=o||this,this.set=s||Te,this.pr=u||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,n){this.mSet=this.mSet||this.set,this.set=ke,this.m=t,this.mt=n,this.tween=e},t}();tt(Z+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(t){return V[t]=1}),k.TweenMax=k.TweenLite=Ae,k.TimelineLite=k.TimelineMax=ge,i=new ge({sortChildren:!1,defaults:f,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),h.stringFilter=ee;var Be={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e.forEach(function(t){return function(t){var e=(t=!t.name&&t.default||t).name,n=w(t),i=e&&!n&&t.init?function(){this._props=[]}:t,r={init:G,render:Ne,add:_e,kill:Re,modifier:De,rawVars:0},a={targetTest:0,get:0,getSetter:Oe,aliases:{},register:0};if(ie(),t!==i){if(X[e])return;ut(i,ut(ft(t,r),a)),lt(i.prototype,lt(r,ft(t,a))),X[i.prop=e]=i,t.targetTest&&(Q.push(i),V[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}j(e,i),t.register&&t.register(Ve,i,Ue)}(t)})},timeline:function(t){return new ge(t)},getTweensOf:function(t,e){return i.getTweensOf(t,e)},getProperty:function(t,e,n,i){b(t)&&(t=Dt(t)[0]);var r=$(t||{}).get,a=n?st:ot;return"native"===n&&(n=""),t?e?a((X[e]&&X[e].get||r)(t,e,n,i)):function(e,n,i){return a((X[e]&&X[e].get||r)(t,e,n,i))}:t},quickSetter:function(t,e,n){if((t=Dt(t)).length>1){var i=t.map(function(t){return Ve.quickSetter(t,e,n)}),r=i.length;return function(t){for(var e=r;e--;)i[e](t)}}t=t[0]||{};var a=X[e],o=$(t),s=o.harness&&(o.harness.aliases||{})[e]||e,u=a?function(e){var i=new a;c._pt=0,i.init(t,n?e+n:e,c,0,[t]),i.render(1,i),c._pt&&Ne(1,c)}:o.set(t,s);return a?u:function(e){return u(t,s,n?e+n:e,o,1)}},isTweening:function(t){return i.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=le(t.ease,f.ease)),ht(f,t||{})},config:function(t){return ht(h,t||{})},registerEffect:function(t){var e=t.name,n=t.effect,i=t.plugins,r=t.defaults,a=t.extendTimeline;(i||"").split(",").forEach(function(t){return t&&!X[t]&&!k[t]&&B(e+" effect requires "+t+" plugin.")}),Y[e]=function(t,e,i){return n(Dt(t),ut(e||{},r),i)},a&&(ge.prototype[e]=function(t,n,i){return this.add(Y[e](t,A(n)?n:(i=n)&&{},this),i)})},registerEase:function(t,e){re[t]=le(e)},parseEase:function(t,e){return arguments.length?le(t,e):re},getById:function(t){return i.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var n,r,a=new ge(t);for(a.smoothChildTiming=T(t.smoothChildTiming),i.remove(a),a._dp=0,a._time=a._tTime=i._time,n=i._first;n;)r=n._next,!e&&!n._dur&&n instanceof Ae&&n.vars.onComplete===n._targets[0]||Mt(a,n,n._start-n._delay),n=r;return Mt(i,a,0),a},utils:{wrap:function t(e,n,i){var r=n-e;return E(e)?jt(e,t(0,e.length),n):Ot(i,function(t){return(r+(t-e)%r)%r+e})},wrapYoyo:function t(e,n,i){var r=n-e,a=2*r;return E(e)?jt(e,t(0,e.length-1),n):Ot(i,function(t){return e+((t=(a+(t-e)%a)%a||0)>r?a-t:t)})},distribute:kt,random:Bt,snap:Ut,normalize:function(t,e,n){return Vt(t,e,0,1,n)},getUnit:Ft,clamp:function(t,e,n){return Ot(n,function(n){return Ct(t,e,n)})},splitColor:Zt,toArray:Dt,mapRange:Vt,pipe:function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){return e.reduce(function(t,e){return e(t)},t)}},unitize:function(t,e){return function(n){return t(parseFloat(n))+(e||Ft(n))}},interpolate:function t(e,n,i,r){var a=isNaN(e+n)?0:function(t){return(1-t)*e+t*n};if(!a){var o,s,u,c,l,h=b(e),f={};if(!0===i&&(r=1)&&(i=null),h)e={p:e},n={p:n};else if(E(e)&&!E(n)){for(u=[],c=e.length,l=c-2,s=1;s<c;s++)u.push(t(e[s-1],e[s]));c--,a=function(t){t*=c;var e=Math.min(l,~~t);return u[e](t-e)},i=n}else r||(e=lt(E(e)?[]:{},e));if(!u){for(o in n)_e.call(f,e,o,"get",n[o]);a=function(t){return Ne(t,f)||(h?e.p:e)}}}return Ot(i,a)},shuffle:Rt},install:U,effects:Y,ticker:ne,updateRoot:ge.updateRoot,plugins:X,globalTimeline:i,core:{PropTween:Ue,globals:j,Tween:Ae,Timeline:ge,Animation:ve,getCache:$,_removeLinkedListItem:dt}};tt("to,from,fromTo,delayedCall,set,killTweensOf",function(t){return Be[t]=Ae[t]}),ne.add(ge.updateRoot),c=Be.to({},{duration:0});var je=function(t,e){for(var n=t._pt;n&&n.p!==e&&n.op!==e&&n.fp!==e;)n=n._next;return n},Ge=function(t,e){return{name:t,rawVars:1,init:function(t,n,i){i._onInit=function(t){var i,r;if(b(n)&&(i={},tt(n,function(t){return i[t]=1}),n=i),e){for(r in i={},n)i[r]=e(n[r]);n=i}!function(t,e){var n,i,r,a=t._targets;for(n in e)for(i=a.length;i--;)(r=t._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=je(r,n)),r&&r.modifier&&r.modifier(e[n],t,a[i],n))}(t,n)}}}},Ve=Be.registerPlugin({name:"attr",init:function(t,e,n,i,r){var a,o;for(a in e)(o=this.add(t,"setAttribute",(t.getAttribute(a)||0)+"",e[a],i,r,0,0,a))&&(o.op=a),this._props.push(a)}},{name:"endArray",init:function(t,e){for(var n=e.length;n--;)this.add(t,n,t[n]||0,e[n])}},Ge("roundProps",zt),Ge("modifiers"),Ge("snap",Ut))||Be;Ae.version=ge.version=Ve.version="3.3.3",s=1,P()&&ie();var We,He,Xe,Ye,qe,Qe,Ze,Je,$e=re.Power0,Ke=re.Power1,tn=re.Power2,en=re.Power3,nn=re.Power4,rn=re.Linear,an=re.Quad,on=re.Cubic,sn=re.Quart,un=re.Quint,cn=re.Strong,ln=re.Elastic,hn=re.Back,fn=re.SteppedEase,pn=re.Bounce,dn=re.Sine,mn=re.Expo,vn=re.Circ,gn={},yn=180/Math.PI,_n=Math.PI/180,xn=Math.atan2,bn=/([A-Z])/g,wn=/(?:left|right|width|margin|padding|x)/i,Mn=/[\s,\(]\S/,Sn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},An=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Tn=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},Pn=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},Ln=function(t,e){var n=e.s+e.c*t;e.set(e.t,e.p,~~(n+(n<0?-.5:.5))+e.u,e)},En=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},On=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Cn=function(t,e,n){return t.style[e]=n},Fn=function(t,e,n){return t.style.setProperty(e,n)},In=function(t,e,n){return t._gsap[e]=n},Nn=function(t,e,n){return t._gsap.scaleX=t._gsap.scaleY=n},Dn=function(t,e,n,i,r){var a=t._gsap;a.scaleX=a.scaleY=n,a.renderTransform(r,a)},Rn=function(t,e,n,i,r){var a=t._gsap;a[e]=n,a.renderTransform(r,a)},kn="transform",zn=kn+"Origin",Un=function(t,e){var n=He.createElementNS?He.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):He.createElement(t);return n.style?n:He.createElement(t)},Bn=function t(e,n,i){var r=getComputedStyle(e);return r[n]||r.getPropertyValue(n.replace(bn,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&t(e,Gn(n)||n,1)||""},jn="O,Moz,ms,Ms,Webkit".split(","),Gn=function(t,e,n){var i=(e||qe).style,r=5;if(t in i&&!n)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);r--&&!(jn[r]+t in i););return r<0?null:(3===r?"ms":r>=0?jn[r]:"")+t},Vn=function(){"undefined"!=typeof window&&window.document&&(We=window,He=We.document,Xe=He.documentElement,qe=Un("div")||{style:{}},Qe=Un("div"),kn=Gn(kn),zn=Gn(zn),qe.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",Je=!!Gn("perspective"),Ye=1)},Wn=function t(e){var n,i=Un("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,a=this.nextSibling,o=this.style.cssText;if(Xe.appendChild(i),i.appendChild(this),this.style.display="block",e)try{n=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(n=this._gsapBBox());return r&&(a?r.insertBefore(this,a):r.appendChild(this)),Xe.removeChild(i),this.style.cssText=o,n},Hn=function(t,e){for(var n=e.length;n--;)if(t.hasAttribute(e[n]))return t.getAttribute(e[n])},Xn=function(t){var e;try{e=t.getBBox()}catch(n){e=Wn.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Wn||(e=Wn.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+Hn(t,["x","cx","x1"])||0,y:+Hn(t,["y","cy","y1"])||0,width:0,height:0}},Yn=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Xn(t))},qn=function(t,e){if(e){var n=t.style;e in gn&&(e=kn),n.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),n.removeProperty(e.replace(bn,"-$1").toLowerCase())):n.removeAttribute(e)}},Qn=function(t,e,n,i,r,a){var o=new Ue(t._pt,e,n,0,1,a?On:En);return t._pt=o,o.b=i,o.e=r,t._props.push(n),o},Zn={deg:1,rad:1,turn:1},Jn=function t(e,n,i,r){var a,o,s,u,c=parseFloat(i)||0,l=(i+"").trim().substr((c+"").length)||"px",h=qe.style,f=wn.test(n),p="svg"===e.tagName.toLowerCase(),d=(p?"client":"offset")+(f?"Width":"Height"),m=100,v="px"===r,g="%"===r;return r===l||!c||Zn[r]||Zn[l]?c:("px"!==l&&!v&&(c=t(e,n,i,"px")),u=e.getCTM&&Yn(e),g&&(gn[n]||~n.indexOf("adius"))?et(c/(u?e.getBBox()[f?"width":"height"]:e[d])*m):(h[f?"width":"height"]=m+(v?l:r),o=~n.indexOf("adius")||"em"===r&&e.appendChild&&!p?e:e.parentNode,u&&(o=(e.ownerSVGElement||{}).parentNode),o&&o!==He&&o.appendChild||(o=He.body),(s=o._gsap)&&g&&s.width&&f&&s.time===ne.time?et(c/s.width*m):((g||"%"===l)&&(h.position=Bn(e,"position")),o===e&&(h.position="static"),o.appendChild(qe),a=qe[d],o.removeChild(qe),h.position="absolute",f&&g&&((s=$(o)).time=ne.time,s.width=o[d]),et(v?a*c/m:a&&c?m/a*c:0))))},$n=function(t,e,n,i){var r;return Ye||Vn(),e in Sn&&"transform"!==e&&(~(e=Sn[e]).indexOf(",")&&(e=e.split(",")[0])),gn[e]&&"transform"!==e?(r=li(t,i),r="transformOrigin"!==e?r[e]:hi(Bn(t,zn))+" "+r.zOrigin+"px"):(!(r=t.style[e])||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=ii[e]&&ii[e](t,e,n)||Bn(t,e)||K(t,e)||("opacity"===e?1:0)),n&&!~(r+"").indexOf(" ")?Jn(t,e,r,n)+n:r},Kn=function(t,e,n,i){if(!n||"none"===n){var r=Gn(e,t,1),a=r&&Bn(t,r,1);a&&a!==n&&(e=r,n=a)}var o,s,u,c,l,f,p,d,m,v,g,y,_=new Ue(this._pt,t.style,e,0,1,Ie),x=0,b=0;if(_.b=n,_.e=i,n+="","auto"===(i+="")&&(t.style[e]=i,i=Bn(t,e)||i,t.style[e]=n),ee(o=[n,i]),i=o[1],u=(n=o[0]).match(F)||[],(i.match(F)||[]).length){for(;s=F.exec(i);)p=s[0],m=i.substring(x,s.index),l?l=(l+1)%5:"rgba("!==m.substr(-5)&&"hsla("!==m.substr(-5)||(l=1),p!==(f=u[b++]||"")&&(c=parseFloat(f)||0,g=f.substr((c+"").length),(y="="===p.charAt(1)?+(p.charAt(0)+"1"):0)&&(p=p.substr(2)),d=parseFloat(p),v=p.substr((d+"").length),x=F.lastIndex-v.length,v||(v=v||h.units[e]||g,x===i.length&&(i+=v,_.e+=v)),g!==v&&(c=Jn(t,e,f,v)||0),_._pt={_next:_._pt,p:m||1===b?m:",",s:c,c:y?y*d:d-c,m:l&&l<4?Math.round:0});_.c=x<i.length?i.substring(x,i.length):""}else _.r="display"===e&&"none"===i?On:En;return D.test(i)&&(_.e=0),this._pt=_,_},ti={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},ei=function(t){var e=t.split(" "),n=e[0],i=e[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==i&&"right"!==i||(t=n,n=i,i=t),e[0]=ti[n]||n,e[1]=ti[i]||i,e.join(" ")},ni=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var n,i,r,a=e.t,o=a.style,s=e.u,u=a._gsap;if("all"===s||!0===s)o.cssText="",i=1;else for(r=(s=s.split(",")).length;--r>-1;)n=s[r],gn[n]&&(i=1,n="transformOrigin"===n?zn:kn),qn(a,n);i&&(qn(a,kn),u&&(u.svg&&a.removeAttribute("transform"),li(a,1),u.uncache=1))}},ii={clearProps:function(t,e,n,i,r){if("isFromStart"!==r.data){var a=t._pt=new Ue(t._pt,e,n,0,0,ni);return a.u=i,a.pr=-10,a.tween=r,t._props.push(n),1}}},ri=[1,0,0,1,0,0],ai={},oi=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},si=function(t){var e=Bn(t,kn);return oi(e)?ri:e.substr(7).match(C).map(et)},ui=function(t,e){var n,i,r,a,o=t._gsap||$(t),s=t.style,u=si(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(r=t.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?ri:u:(u!==ri||t.offsetParent||t===Xe||o.svg||(r=s.display,s.display="block",(n=t.parentNode)&&t.offsetParent||(a=1,i=t.nextSibling,Xe.appendChild(t)),u=si(t),r?s.display=r:qn(t,"display"),a&&(i?n.insertBefore(t,i):n?n.appendChild(t):Xe.removeChild(t))),e&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},ci=function(t,e,n,i,r,a){var o,s,u,c=t._gsap,l=r||ui(t,!0),h=c.xOrigin||0,f=c.yOrigin||0,p=c.xOffset||0,d=c.yOffset||0,m=l[0],v=l[1],g=l[2],y=l[3],_=l[4],x=l[5],b=e.split(" "),w=parseFloat(b[0])||0,M=parseFloat(b[1])||0;n?l!==ri&&(s=m*y-v*g)&&(u=w*(-v/s)+M*(m/s)-(m*x-v*_)/s,w=w*(y/s)+M*(-g/s)+(g*x-y*_)/s,M=u):(w=(o=Xn(t)).x+(~b[0].indexOf("%")?w/100*o.width:w),M=o.y+(~(b[1]||b[0]).indexOf("%")?M/100*o.height:M)),i||!1!==i&&c.smooth?(_=w-h,x=M-f,c.xOffset=p+(_*m+x*g)-_,c.yOffset=d+(_*v+x*y)-x):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=M,c.smooth=!!i,c.origin=e,c.originIsAbsolute=!!n,t.style[zn]="0px 0px",a&&(Qn(a,c,"xOrigin",h,w),Qn(a,c,"yOrigin",f,M),Qn(a,c,"xOffset",p,c.xOffset),Qn(a,c,"yOffset",d,c.yOffset)),t.setAttribute("data-svg-origin",w+" "+M)},li=function(t,e){var n=t._gsap||new me(t);if("x"in n&&!e&&!n.uncache)return n;var i,r,a,o,s,u,c,l,f,p,d,m,v,g,y,_,x,b,w,M,S,A,T,P,L,E,O,C,F,I,N,D,R=t.style,k=n.scaleX<0,z="px",U="deg",B=Bn(t,zn)||"0";return i=r=a=u=c=l=f=p=d=0,o=s=1,n.svg=!(!t.getCTM||!Yn(t)),g=ui(t,n.svg),n.svg&&(P=!n.uncache&&t.getAttribute("data-svg-origin"),ci(t,P||B,!!P||n.originIsAbsolute,!1!==n.smooth,g)),m=n.xOrigin||0,v=n.yOrigin||0,g!==ri&&(b=g[0],w=g[1],M=g[2],S=g[3],i=A=g[4],r=T=g[5],6===g.length?(o=Math.sqrt(b*b+w*w),s=Math.sqrt(S*S+M*M),u=b||w?xn(w,b)*yn:0,(f=M||S?xn(M,S)*yn+u:0)&&(s*=Math.cos(f*_n)),n.svg&&(i-=m-(m*b+v*M),r-=v-(m*w+v*S))):(D=g[6],I=g[7],O=g[8],C=g[9],F=g[10],N=g[11],i=g[12],r=g[13],a=g[14],c=(y=xn(D,F))*yn,y&&(P=A*(_=Math.cos(-y))+O*(x=Math.sin(-y)),L=T*_+C*x,E=D*_+F*x,O=A*-x+O*_,C=T*-x+C*_,F=D*-x+F*_,N=I*-x+N*_,A=P,T=L,D=E),l=(y=xn(-M,F))*yn,y&&(_=Math.cos(-y),N=S*(x=Math.sin(-y))+N*_,b=P=b*_-O*x,w=L=w*_-C*x,M=E=M*_-F*x),u=(y=xn(w,b))*yn,y&&(P=b*(_=Math.cos(y))+w*(x=Math.sin(y)),L=A*_+T*x,w=w*_-b*x,T=T*_-A*x,b=P,A=L),c&&Math.abs(c)+Math.abs(u)>359.9&&(c=u=0,l=180-l),o=et(Math.sqrt(b*b+w*w+M*M)),s=et(Math.sqrt(T*T+D*D)),y=xn(A,T),f=Math.abs(y)>2e-4?y*yn:0,d=N?1/(N<0?-N:N):0),n.svg&&(P=t.getAttribute("transform"),n.forceCSS=t.setAttribute("transform","")||!oi(Bn(t,kn)),P&&t.setAttribute("transform",P))),Math.abs(f)>90&&Math.abs(f)<270&&(k?(o*=-1,f+=u<=0?180:-180,u+=u<=0?180:-180):(s*=-1,f+=f<=0?180:-180)),n.x=((n.xPercent=i&&Math.round(t.offsetWidth/2)===Math.round(-i)?-50:0)?0:i)+z,n.y=((n.yPercent=r&&Math.round(t.offsetHeight/2)===Math.round(-r)?-50:0)?0:r)+z,n.z=a+z,n.scaleX=et(o),n.scaleY=et(s),n.rotation=et(u)+U,n.rotationX=et(c)+U,n.rotationY=et(l)+U,n.skewX=f+U,n.skewY=p+U,n.transformPerspective=d+z,(n.zOrigin=parseFloat(B.split(" ")[2])||0)&&(R[zn]=hi(B)),n.xOffset=n.yOffset=0,n.force3D=h.force3D,n.renderTransform=n.svg?yi:Je?gi:pi,n.uncache=0,n},hi=function(t){return(t=t.split(" "))[0]+" "+t[1]},fi=function(t,e,n){var i=Ft(e);return et(parseFloat(e)+parseFloat(Jn(t,"x",n+"px",i)))+i},pi=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,gi(t,e)},di="0deg",mi="0px",vi=") ",gi=function(t,e){var n=e||this,i=n.xPercent,r=n.yPercent,a=n.x,o=n.y,s=n.z,u=n.rotation,c=n.rotationY,l=n.rotationX,h=n.skewX,f=n.skewY,p=n.scaleX,d=n.scaleY,m=n.transformPerspective,v=n.force3D,g=n.target,y=n.zOrigin,_="",x="auto"===v&&t&&1!==t||!0===v;if(y&&(l!==di||c!==di)){var b,w=parseFloat(c)*_n,M=Math.sin(w),S=Math.cos(w);w=parseFloat(l)*_n,b=Math.cos(w),a=fi(g,a,M*b*-y),o=fi(g,o,-Math.sin(w)*-y),s=fi(g,s,S*b*-y+y)}m!==mi&&(_+="perspective("+m+vi),(i||r)&&(_+="translate("+i+"%, "+r+"%) "),(x||a!==mi||o!==mi||s!==mi)&&(_+=s!==mi||x?"translate3d("+a+", "+o+", "+s+") ":"translate("+a+", "+o+vi),u!==di&&(_+="rotate("+u+vi),c!==di&&(_+="rotateY("+c+vi),l!==di&&(_+="rotateX("+l+vi),h===di&&f===di||(_+="skew("+h+", "+f+vi),1===p&&1===d||(_+="scale("+p+", "+d+vi),g.style[kn]=_||"translate(0, 0)"},yi=function(t,e){var n,i,r,a,o,s=e||this,u=s.xPercent,c=s.yPercent,l=s.x,h=s.y,f=s.rotation,p=s.skewX,d=s.skewY,m=s.scaleX,v=s.scaleY,g=s.target,y=s.xOrigin,_=s.yOrigin,x=s.xOffset,b=s.yOffset,w=s.forceCSS,M=parseFloat(l),S=parseFloat(h);f=parseFloat(f),p=parseFloat(p),(d=parseFloat(d))&&(p+=d=parseFloat(d),f+=d),f||p?(f*=_n,p*=_n,n=Math.cos(f)*m,i=Math.sin(f)*m,r=Math.sin(f-p)*-v,a=Math.cos(f-p)*v,p&&(d*=_n,o=Math.tan(p-d),r*=o=Math.sqrt(1+o*o),a*=o,d&&(o=Math.tan(d),n*=o=Math.sqrt(1+o*o),i*=o)),n=et(n),i=et(i),r=et(r),a=et(a)):(n=m,a=v,i=r=0),(M&&!~(l+"").indexOf("px")||S&&!~(h+"").indexOf("px"))&&(M=Jn(g,"x",l,"px"),S=Jn(g,"y",h,"px")),(y||_||x||b)&&(M=et(M+y-(y*n+_*r)+x),S=et(S+_-(y*i+_*a)+b)),(u||c)&&(o=g.getBBox(),M=et(M+u/100*o.width),S=et(S+c/100*o.height)),o="matrix("+n+","+i+","+r+","+a+","+M+","+S+")",g.setAttribute("transform",o),w&&(g.style[kn]=o)},_i=function(t,e,n,i,r,a){var o,s,u=360,c=b(r),l=parseFloat(r)*(c&&~r.indexOf("rad")?yn:1),h=a?l*a:l-i,f=i+h+"deg";return c&&("short"===(o=r.split("_")[1])&&((h%=u)!==h%180&&(h+=h<0?u:-u)),"cw"===o&&h<0?h=(h+36e9)%u-~~(h/u)*u:"ccw"===o&&h>0&&(h=(h-36e9)%u-~~(h/u)*u)),t._pt=s=new Ue(t._pt,e,n,i,h,Tn),s.e=f,s.u="deg",t._props.push(n),s},xi=function(t,e,n){var i,r,a,o,s,u,c,l=Qe.style,h=n._gsap;for(r in l.cssText=getComputedStyle(n).cssText+";position:absolute;display:block;",l[kn]=e,He.body.appendChild(Qe),i=li(Qe,1),gn)(a=h[r])!==(o=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(s=Ft(a)!==(c=Ft(o))?Jn(n,r,a,c):parseFloat(a),u=parseFloat(o),t._pt=new Ue(t._pt,h,r,s,u-s,An),t._pt.u=c||0,t._props.push(r));He.body.removeChild(Qe)};tt("padding,margin,Width,Radius",function(t,e){var n="Top",i="Right",r="Bottom",a="Left",o=(e<3?[n,i,r,a]:[n+a,n+i,r+i,r+a]).map(function(n){return e<2?t+n:"border"+n+t});ii[e>1?"border"+t:t]=function(t,e,n,i,r){var a,s;return arguments.length<4?(a=o.map(function(e){return $n(t,e,n)}),5===(s=a.join(" ")).split(a[0]).length?a[0]:s):(a=(i+"").split(" "),s={},o.forEach(function(t,e){return s[t]=a[e]=a[e]||a[(e-1)/2|0]}),void t.init(e,s,r))}});var bi={name:"css",register:Vn,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,n,i,r){var a,o,s,u,c,l,f,p,d,m,v,g,y,_,x,b=this._props,w=t.style;for(f in Ye||Vn(),e)if("autoRound"!==f&&(o=e[f],!X[f]||!xe(f,e,n,i,t,r)))if(c=typeof o,l=ii[f],"function"===c&&(c=typeof(o=o.call(n,i,t,r))),"string"===c&&~o.indexOf("random(")&&(o=Gt(o)),l)l(this,t,f,o,n)&&(x=1);else if("--"===f.substr(0,2))this.add(w,"setProperty",getComputedStyle(t).getPropertyValue(f)+"",o+"",i,r,0,0,f);else{if(a=$n(t,f),u=parseFloat(a),(m="string"===c&&"="===o.charAt(1)?+(o.charAt(0)+"1"):0)&&(o=o.substr(2)),s=parseFloat(o),f in Sn&&("autoAlpha"===f&&(1===u&&"hidden"===$n(t,"visibility")&&s&&(u=0),Qn(this,w,"visibility",u?"inherit":"hidden",s?"inherit":"hidden",!s)),"scale"!==f&&"transform"!==f&&(~(f=Sn[f]).indexOf(",")&&(f=f.split(",")[0]))),v=f in gn)if(g||((y=t._gsap).renderTransform||li(t),_=!1!==e.smoothOrigin&&y.smooth,(g=this._pt=new Ue(this._pt,w,kn,0,1,y.renderTransform,y,0,-1)).dep=1),"scale"===f)this._pt=new Ue(this._pt,y,"scaleY",y.scaleY,m?m*s:s-y.scaleY),b.push("scaleY",f),f+="X";else{if("transformOrigin"===f){o=ei(o),y.svg?ci(t,o,0,_,0,this):((d=parseFloat(o.split(" ")[2])||0)!==y.zOrigin&&Qn(this,y,"zOrigin",y.zOrigin,d),Qn(this,w,f,hi(a),hi(o)));continue}if("svgOrigin"===f){ci(t,o,1,_,0,this);continue}if(f in ai){_i(this,y,f,u,o,m);continue}if("smoothOrigin"===f){Qn(this,y,"smooth",y.smooth,o);continue}if("force3D"===f){y[f]=o;continue}if("transform"===f){xi(this,o,t);continue}}else f in w||(f=Gn(f)||f);if(v||(s||0===s)&&(u||0===u)&&!Mn.test(o)&&f in w)s||(s=0),(p=(a+"").substr((u+"").length))!==(d=(o+"").substr((s+"").length)||(f in h.units?h.units[f]:p))&&(u=Jn(t,f,a,d)),this._pt=new Ue(this._pt,v?y:w,f,u,m?m*s:s-u,"px"!==d||!1===e.autoRound||v?An:Ln),this._pt.u=d||0,p!==d&&(this._pt.b=a,this._pt.r=Pn);else if(f in w)Kn.call(this,t,f,a,o);else{if(!(f in t))continue;this.add(t,f,t[f],o,i,r)}b.push(f)}x&&ze(this)},get:$n,aliases:Sn,getSetter:function(t,e,n){var i=Sn[e];return i&&i.indexOf(",")<0&&(e=i),e in gn&&e!==zn&&(t._gsap.x||$n(t,"x"))?n&&Ze===n?"scale"===e?Nn:In:(Ze=n||{})&&("scale"===e?Dn:Rn):t.style&&!S(t.style[e])?Cn:~e.indexOf("-")?Fn:Oe(t,e)},core:{_removeProperty:qn,_getMatrix:ui}};Ve.utils.checkPrefix=Gn,function(t,e,n,i){var r=tt(t+","+e+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(t){gn[t]=1});tt(e,function(t){h.units[t]="deg",ai[t]=1}),Sn[r[13]]=t+","+e,tt("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(t){var e=t.split(":");Sn[e[1]]=r[e[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),tt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(t){h.units[t]="px"}),Ve.registerPlugin(bi);var wi=Ve.registerPlugin(bi)||Ve,Mi=wi.core.Tween;t.Back=hn,t.Bounce=pn,t.CSSPlugin=bi,t.Circ=vn,t.Cubic=on,t.Elastic=ln,t.Expo=mn,t.Linear=rn,t.Power0=$e,t.Power1=Ke,t.Power2=tn,t.Power3=en,t.Power4=nn,t.Quad=an,t.Quart=sn,t.Quint=un,t.Sine=dn,t.SteppedEase=fn,t.Strong=cn,t.TimelineLite=ge,t.TimelineMax=ge,t.TweenLite=Ae,t.TweenMax=Mi,t.default=wi,t.gsap=wi,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete window.default})},{}],8:[function(t,e,n){(function(t){!function(t,i){"object"==typeof n&&void 0!==e?e.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).LocomotiveScroll=i()}(this,function(){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function i(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?a(Object(n),!0).forEach(function(e){r(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?c(t):e}function h(t,e,n){return(h="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=u(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(n):r.value}})(t,e,n||t)}function f(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(t,e){return t(e={exports:{}},e.exports),e.exports}function d(){}function m(t,e){return function(){return t.apply(e,arguments)}}function v(t){B(this,"_onWheel","_onMouseWheel","_onTouchStart","_onTouchMove","_onKeyDown"),this.el=window,t&&t.el&&(this.el=t.el,delete t.el),this.options=N({mouseMultiplier:1,touchMultiplier:2,firefoxMultiplier:15,keyStep:120,preventTouch:!1,unpreventTouchClass:"vs-touchmove-allowed",limitInertia:!1,useKeyboard:!0,useTouch:!0},t),this.options.limitInertia&&(this._lethargy=new j),this._emitter=new D,this._event={y:0,x:0,deltaX:0,deltaY:0},this.touchStartX=null,this.touchStartY=null,this.bodyTouchAction=null,void 0!==this.options.passive&&(this.listenerOptions={passive:this.options.passive})}function g(t,e,n){return(1-n)*t+n*e}function y(t){var e={};if(window.getComputedStyle){var n=getComputedStyle(t),i=n.transform||n.webkitTransform||n.mozTransform,r=i.match(/^matrix3d\((.+)\)$/);return r?(e.x=r?parseFloat(r[1].split(", ")[12]):0,e.y=r?parseFloat(r[1].split(", ")[13]):0):(r=i.match(/^matrix\((.+)\)$/),e.x=r?parseFloat(r[1].split(", ")[4]):0,e.y=r?parseFloat(r[1].split(", ")[5]):0),e}}function _(t){for(var e=[];t&&t!==document;t=t.parentNode)e.push(t);return e}function x(t,e){return 1-3*e+3*t}function b(t,e){return 3*e-6*t}function w(t){return 3*t}function M(t,e,n){return((x(e,n)*t+b(e,n))*t+w(e))*t}function S(t,e,n){return 3*x(e,n)*t*t+2*b(e,n)*t+w(e)}function A(t){return t}var T={el:document,elMobile:document,name:"scroll",offset:[0,0],repeat:!1,smooth:!1,smoothMobile:!1,direction:"vertical",lerp:.1,class:"is-inview",scrollbarClass:"c-scrollbar",scrollingClass:"has-scroll-scrolling",draggingClass:"has-scroll-dragging",smoothClass:"has-scroll-smooth",initClass:"has-scroll-init",getSpeed:!1,getDirection:!1,multiplier:1,firefoxMultiplier:50,touchMultiplier:2,scrollFromAnywhere:!1},P=function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),Object.assign(this,T,n),this.namespace="locomotive",this.html=document.documentElement,this.windowHeight=window.innerHeight,this.windowMiddle=this.windowHeight/2,this.els=[],this.listeners={},this.hasScrollTicking=!1,this.hasCallEventSet=!1,this.checkScroll=this.checkScroll.bind(this),this.checkResize=this.checkResize.bind(this),this.checkEvent=this.checkEvent.bind(this),this.instance={scroll:{x:0,y:0},limit:this.html.offsetHeight},this.getDirection&&(this.instance.direction=null),this.getDirection&&(this.instance.speed=0),this.html.classList.add(this.initClass),window.addEventListener("resize",this.checkResize,!1)}return i(t,[{key:"init",value:function(){this.initEvents()}},{key:"checkScroll",value:function(){this.dispatchScroll()}},{key:"checkResize",value:function(){var t=this;this.resizeTick||(this.resizeTick=!0,requestAnimationFrame(function(){t.resize(),t.resizeTick=!1}))}},{key:"resize",value:function(){}},{key:"initEvents",value:function(){var t=this;this.scrollToEls=this.el.querySelectorAll("[data-".concat(this.name,"-to]")),this.setScrollTo=this.setScrollTo.bind(this),this.scrollToEls.forEach(function(e){e.addEventListener("click",t.setScrollTo,!1)})}},{key:"setScrollTo",value:function(t){t.preventDefault(),this.scrollTo(t.currentTarget.getAttribute("data-".concat(this.name,"-href"))||t.currentTarget.getAttribute("href"),t.currentTarget.getAttribute("data-".concat(this.name,"-offset")))}},{key:"addElements",value:function(){}},{key:"detectElements",value:function(t){var e=this,n=this.instance.scroll.y,i=n+this.windowHeight;this.els.forEach(function(r,a){!r||r.inView&&!t||i>=r.top&&n<r.bottom&&e.setInView(r,a),r&&r.inView&&(i<r.top||n>r.bottom)&&e.setOutOfView(r,a)}),this.els=this.els.filter(function(t,e){return null!==t}),this.hasScrollTicking=!1}},{key:"setInView",value:function(t,e){this.els[e].inView=!0,t.el.classList.add(t.class),t.call&&this.hasCallEventSet&&(this.dispatchCall(t,"enter"),t.repeat||(this.els[e].call=!1)),t.repeat||t.speed||t.sticky||(!t.call||t.call&&this.hasCallEventSet)&&(this.els[e]=null)}},{key:"setOutOfView",value:function(t,e){(t.repeat||void 0!==t.speed)&&(this.els[e].inView=!1),t.call&&this.hasCallEventSet&&this.dispatchCall(t,"exit"),t.repeat&&t.el.classList.remove(t.class)}},{key:"dispatchCall",value:function(t,e){this.callWay=e,this.callValue=t.call.split(",").map(function(t){return t.trim()}),this.callObj=t,1==this.callValue.length&&(this.callValue=this.callValue[0]);var n=new Event(this.namespace+"call");this.el.dispatchEvent(n)}},{key:"dispatchScroll",value:function(){var t=new Event(this.namespace+"scroll");this.el.dispatchEvent(t)}},{key:"setEvents",value:function(t,e){this.listeners[t]||(this.listeners[t]=[]);var n=this.listeners[t];n.push(e),1===n.length&&this.el.addEventListener(this.namespace+t,this.checkEvent,!1),"call"===t&&(this.hasCallEventSet=!0,this.detectElements(!0))}},{key:"unsetEvents",value:function(t,e){if(this.listeners[t]){var n=this.listeners[t],i=n.indexOf(e);i<0||(n.splice(i,1),0===n.index&&this.el.removeEventListener(this.namespace+t,this.checkEvent,!1))}}},{key:"checkEvent",value:function(t){var e=this,n=t.type.replace(this.namespace,""),i=this.listeners[n];i&&0!==i.length&&i.forEach(function(t){switch(n){case"scroll":return t(e.instance);case"call":return t(e.callValue,e.callWay,e.callObj);default:return t()}})}},{key:"startScroll",value:function(){}},{key:"stopScroll",value:function(){}},{key:"setScroll",value:function(t,e){this.instance.scroll={x:0,y:0}}},{key:"destroy",value:function(){var t=this;window.removeEventListener("resize",this.checkResize,!1),Object.keys(this.listeners).forEach(function(e){t.el.removeEventListener(t.namespace+e,t.checkEvent,!1)}),this.listeners={},this.scrollToEls.forEach(function(e){e.removeEventListener("click",t.setScrollTo,!1)})}}]),t}(),L="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},E=p(function(t,e){!function(){t.exports={polyfill:function(){function t(t,e){this.scrollLeft=t,this.scrollTop=e}function e(t){if(null===t||"object"!=typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return!0;if("object"==typeof t&&"smooth"===t.behavior)return!1;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}function n(t,e){return"Y"===e?t.clientHeight+p<t.scrollHeight:"X"===e?t.clientWidth+p<t.scrollWidth:void 0}function i(t,e){var n=s.getComputedStyle(t,null)["overflow"+e];return"auto"===n||"scroll"===n}function r(t){var e=n(t,"Y")&&i(t,"Y"),r=n(t,"X")&&i(t,"X");return e||r}function a(t){var e,n,i,r=(f()-t.startTime)/l;e=function(t){return.5*(1-Math.cos(Math.PI*t))}(r=r>1?1:r),n=t.startX+(t.x-t.startX)*e,i=t.startY+(t.y-t.startY)*e,t.method.call(t.scrollable,n,i),n===t.x&&i===t.y||s.requestAnimationFrame(a.bind(s,t))}function o(e,n,i){var r,o,c,l,p=f();e===u.body?(r=s,o=s.scrollX||s.pageXOffset,c=s.scrollY||s.pageYOffset,l=h.scroll):(r=e,o=e.scrollLeft,c=e.scrollTop,l=t),a({scrollable:r,method:l,startTime:p,startX:o,startY:c,x:n,y:i})}var s=window,u=document;if(!("scrollBehavior"in u.documentElement.style&&!0!==s.__forceSmoothScrollPolyfill__)){var c=s.HTMLElement||s.Element,l=468,h={scroll:s.scroll||s.scrollTo,scrollBy:s.scrollBy,elementScroll:c.prototype.scroll||t,scrollIntoView:c.prototype.scrollIntoView},f=s.performance&&s.performance.now?s.performance.now.bind(s.performance):Date.now,p=function(t){return new RegExp(["MSIE ","Trident/","Edge/"].join("|")).test(t)}(s.navigator.userAgent)?1:0;s.scroll=s.scrollTo=function(){if(void 0!==arguments[0])return!0===e(arguments[0])?void h.scroll.call(s,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:s.scrollX||s.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:s.scrollY||s.pageYOffset):void o.call(s,u.body,void 0!==arguments[0].left?~~arguments[0].left:s.scrollX||s.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:s.scrollY||s.pageYOffset)},s.scrollBy=function(){if(void 0!==arguments[0])return e(arguments[0])?void h.scrollBy.call(s,void 0!==arguments[0].left?arguments[0].left:"object"!=typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):void o.call(s,u.body,~~arguments[0].left+(s.scrollX||s.pageXOffset),~~arguments[0].top+(s.scrollY||s.pageYOffset))},c.prototype.scroll=c.prototype.scrollTo=function(){if(void 0!==arguments[0]){if(!0===e(arguments[0])){if("number"==typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");return void h.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!=typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}var t=arguments[0].left,n=arguments[0].top;o.call(this,this,void 0===t?this.scrollLeft:~~t,void 0===n?this.scrollTop:~~n)}},c.prototype.scrollBy=function(){if(void 0!==arguments[0])return!0===e(arguments[0])?void h.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop):void this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})},c.prototype.scrollIntoView=function(){if(!0!==e(arguments[0])){var t=function(t){for(;t!==u.body&&!1===r(t);)t=t.parentNode||t.host;return t}(this),n=t.getBoundingClientRect(),i=this.getBoundingClientRect();t!==u.body?(o.call(this,t,t.scrollLeft+i.left-n.left,t.scrollTop+i.top-n.top),"fixed"!==s.getComputedStyle(t).position&&s.scrollBy({left:n.left,top:n.top,behavior:"smooth"})):s.scrollBy({left:i.left,top:i.top,behavior:"smooth"})}else h.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}}}}()}),O=(E.polyfill,function(t){function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(this,n),t=l(this,u(n).call(this,i)),window.addEventListener("scroll",t.checkScroll,!1),E.polyfill(),t}return s(n,P),i(n,[{key:"init",value:function(){this.instance.scroll.y=window.pageYOffset,this.addElements(),this.detectElements(),h(u(n.prototype),"init",this).call(this)}},{key:"checkScroll",value:function(){var t=this;h(u(n.prototype),"checkScroll",this).call(this),this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.timestamp=Date.now()),this.instance.scroll.y=window.pageYOffset,this.els.length&&(this.hasScrollTicking||(requestAnimationFrame(function(){t.detectElements()}),this.hasScrollTicking=!0))}},{key:"addDirection",value:function(){window.pageYOffset>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):window.pageYOffset<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up")}},{key:"addSpeed",value:function(){window.pageYOffset!=this.instance.scroll.y?this.instance.speed=(window.pageYOffset-this.instance.scroll.y)/(Date.now()-this.timestamp):this.instance.speed=0}},{key:"resize",value:function(){this.els.length&&(this.windowHeight=window.innerHeight,this.updateElements())}},{key:"addElements",value:function(){var t=this;this.els=[],this.el.querySelectorAll("[data-"+this.name+"]").forEach(function(e,n){var i=e.dataset[t.name+"Class"]||t.class,r=e.getBoundingClientRect().top+t.instance.scroll.y,a=r+e.offsetHeight,o="string"==typeof e.dataset[t.name+"Offset"]?e.dataset[t.name+"Offset"].split(","):t.offset,s=e.dataset[t.name+"Repeat"],u=e.dataset[t.name+"Call"];s="false"!=s&&(null!=s||t.repeat);var c=t.getRelativeOffset(o),l={el:e,id:n,class:i,top:r+c[0],bottom:a-c[1],offset:o,repeat:s,inView:!!e.classList.contains(i),call:u};t.els.push(l)})}},{key:"updateElements",value:function(){var t=this;this.els.forEach(function(e,n){var i=e.el.getBoundingClientRect().top+t.instance.scroll.y,r=i+e.el.offsetHeight,a=t.getRelativeOffset(e.offset);t.els[n].top=i+a[0],t.els[n].bottom=r-a[1]}),this.hasScrollTicking=!1}},{key:"getRelativeOffset",value:function(t){var e=[0,0];if(t)for(var n=0;n<t.length;n++)"string"==typeof t[n]?t[n].includes("%")?e[n]=parseInt(t[n].replace("%","")*this.windowHeight/100):e[n]=parseInt(t[n]):e[n]=t[n];return e}},{key:"scrollTo",value:function(t,e,n,i,r,a){var o,s=e?parseInt(e):0;if("string"==typeof t){if("top"===t)o=this.html;else if("bottom"===t)o=this.html.offsetHeight-window.innerHeight;else if(!(o=document.querySelector(t)))return}else if("number"==typeof t)o=parseInt(t);else{if(!t||!t.tagName)return;o=t}if(s="number"!=typeof o?o.getBoundingClientRect().top+s+this.instance.scroll.y:o+s,a){s=s.toFixed();window.addEventListener("scroll",function t(){window.pageYOffset.toFixed()===s&&(window.removeEventListener("scroll",t),a())})}window.scrollTo({top:s,behavior:"smooth"})}},{key:"update",value:function(){this.addElements(),this.detectElements()}},{key:"destroy",value:function(){h(u(n.prototype),"destroy",this).call(this),window.removeEventListener("scroll",this.checkScroll,!1)}}]),n}()),C=Object.getOwnPropertySymbols,F=Object.prototype.hasOwnProperty,I=Object.prototype.propertyIsEnumerable,N=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var n,i,r=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),a=1;a<arguments.length;a++){for(var o in n=Object(arguments[a]))F.call(n,o)&&(r[o]=n[o]);if(C){i=C(n);for(var s=0;s<i.length;s++)I.call(n,i[s])&&(r[i[s]]=n[i[s]])}}return r};d.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){function i(){r.off(t,i),e.apply(n,arguments)}var r=this;return i._=e,this.on(t,i,n)},emit:function(t){for(var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var a=0,o=i.length;a<o;a++)i[a].fn!==e&&i[a].fn._!==e&&r.push(i[a]);return r.length?n[t]=r:delete n[t],this}};var D=d,R=p(function(t,e){(function(){(null!==e?e:this).Lethargy=function(){function t(t,e,n,i){this.stability=null!=t?Math.abs(t):8,this.sensitivity=null!=e?1+Math.abs(e):100,this.tolerance=null!=n?1+Math.abs(n):1.1,this.delay=null!=i?i:150,this.lastUpDeltas=function(){var t,e,n;for(n=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)n.push(null);return n}.call(this),this.lastDownDeltas=function(){var t,e,n;for(n=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)n.push(null);return n}.call(this),this.deltasTimestamp=function(){var t,e,n;for(n=[],t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)n.push(null);return n}.call(this)}return t.prototype.check=function(t){var e;return null!=(t=t.originalEvent||t).wheelDelta?e=t.wheelDelta:null!=t.deltaY?e=-40*t.deltaY:null==t.detail&&0!==t.detail||(e=-40*t.detail),this.deltasTimestamp.push(Date.now()),this.deltasTimestamp.shift(),e>0?(this.lastUpDeltas.push(e),this.lastUpDeltas.shift(),this.isInertia(1)):(this.lastDownDeltas.push(e),this.lastDownDeltas.shift(),this.isInertia(-1))},t.prototype.isInertia=function(t){var e,n,i,r,a,o,s;return null===(e=-1===t?this.lastDownDeltas:this.lastUpDeltas)[0]?t:!(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&e[0]===e[2*this.stability-1])&&(i=e.slice(0,this.stability),n=e.slice(this.stability,2*this.stability),s=i.reduce(function(t,e){return t+e}),a=n.reduce(function(t,e){return t+e}),o=s/i.length,r=a/n.length,Math.abs(o)<Math.abs(r*this.tolerance)&&this.sensitivity<Math.abs(r)&&t)},t.prototype.showLastUpDeltas=function(){return this.lastUpDeltas},t.prototype.showLastDownDeltas=function(){return this.lastDownDeltas},t}()}).call(L)}),k={hasWheelEvent:"onwheel"in document,hasMouseWheelEvent:"onmousewheel"in document,hasTouch:"ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,hasTouchWin:navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,hasPointer:!!window.navigator.msPointerEnabled,hasKeyDown:"onkeydown"in document,isFirefox:navigator.userAgent.indexOf("Firefox")>-1},z=Object.prototype.toString,U=Object.prototype.hasOwnProperty,B=function(t){if(t){var e=Array.prototype.slice.call(arguments,1);if(0===e.length)for(var n in t)U.call(t,n)&&"function"==typeof t[n]&&"[object Function]"==z.call(t[n])&&e.push(n);for(var i=0;i<e.length;i++){var r=e[i];t[r]=m(t[r],t)}}},j=R.Lethargy,G="virtualscroll",V=v,W=37,H=38,X=39,Y=40,q=32;v.prototype._notify=function(t){var e=this._event;e.x+=e.deltaX,e.y+=e.deltaY,this._emitter.emit(G,{x:e.x,y:e.y,deltaX:e.deltaX,deltaY:e.deltaY,originalEvent:t})},v.prototype._onWheel=function(t){var e=this.options;if(!this._lethargy||!1!==this._lethargy.check(t)){var n=this._event;n.deltaX=t.wheelDeltaX||-1*t.deltaX,n.deltaY=t.wheelDeltaY||-1*t.deltaY,k.isFirefox&&1==t.deltaMode&&(n.deltaX*=e.firefoxMultiplier,n.deltaY*=e.firefoxMultiplier),n.deltaX*=e.mouseMultiplier,n.deltaY*=e.mouseMultiplier,this._notify(t)}},v.prototype._onMouseWheel=function(t){if(!this.options.limitInertia||!1!==this._lethargy.check(t)){var e=this._event;e.deltaX=t.wheelDeltaX?t.wheelDeltaX:0,e.deltaY=t.wheelDeltaY?t.wheelDeltaY:t.wheelDelta,this._notify(t)}},v.prototype._onTouchStart=function(t){var e=t.targetTouches?t.targetTouches[0]:t;this.touchStartX=e.pageX,this.touchStartY=e.pageY},v.prototype._onTouchMove=function(t){var e=this.options;e.preventTouch&&!t.target.classList.contains(e.unpreventTouchClass)&&t.preventDefault();var n=this._event,i=t.targetTouches?t.targetTouches[0]:t;n.deltaX=(i.pageX-this.touchStartX)*e.touchMultiplier,n.deltaY=(i.pageY-this.touchStartY)*e.touchMultiplier,this.touchStartX=i.pageX,this.touchStartY=i.pageY,this._notify(t)},v.prototype._onKeyDown=function(t){var e=this._event;e.deltaX=e.deltaY=0;var n=window.innerHeight-40;switch(t.keyCode){case W:case H:e.deltaY=this.options.keyStep;break;case X:case Y:e.deltaY=-this.options.keyStep;break;case t.shiftKey:e.deltaY=n;break;case q:e.deltaY=-n;break;default:return}this._notify(t)},v.prototype._bind=function(){k.hasWheelEvent&&this.el.addEventListener("wheel",this._onWheel,this.listenerOptions),k.hasMouseWheelEvent&&this.el.addEventListener("mousewheel",this._onMouseWheel,this.listenerOptions),k.hasTouch&&this.options.useTouch&&(this.el.addEventListener("touchstart",this._onTouchStart,this.listenerOptions),this.el.addEventListener("touchmove",this._onTouchMove,this.listenerOptions)),k.hasPointer&&k.hasTouchWin&&(this.bodyTouchAction=document.body.style.msTouchAction,document.body.style.msTouchAction="none",this.el.addEventListener("MSPointerDown",this._onTouchStart,!0),this.el.addEventListener("MSPointerMove",this._onTouchMove,!0)),k.hasKeyDown&&this.options.useKeyboard&&document.addEventListener("keydown",this._onKeyDown)},v.prototype._unbind=function(){k.hasWheelEvent&&this.el.removeEventListener("wheel",this._onWheel),k.hasMouseWheelEvent&&this.el.removeEventListener("mousewheel",this._onMouseWheel),k.hasTouch&&(this.el.removeEventListener("touchstart",this._onTouchStart),this.el.removeEventListener("touchmove",this._onTouchMove)),k.hasPointer&&k.hasTouchWin&&(document.body.style.msTouchAction=this.bodyTouchAction,this.el.removeEventListener("MSPointerDown",this._onTouchStart,!0),this.el.removeEventListener("MSPointerMove",this._onTouchMove,!0)),k.hasKeyDown&&this.options.useKeyboard&&document.removeEventListener("keydown",this._onKeyDown)},v.prototype.on=function(t,e){this._emitter.on(G,t,e);var n=this._emitter.e;n&&n[G]&&1===n[G].length&&this._bind()},v.prototype.off=function(t,e){this._emitter.off(G,t,e);var n=this._emitter.e;(!n[G]||n[G].length<=0)&&this._unbind()},v.prototype.reset=function(){var t=this._event;t.x=0,t.y=0},v.prototype.destroy=function(){this._emitter.off(),this._unbind()};var Q=4,Z=.001,J=1e-7,$=10,K=11,tt=1/(K-1),et="function"==typeof Float32Array,nt=function(t,e,n,i){function r(e){for(var i=0,r=1,o=K-1;r!==o&&a[r]<=e;++r)i+=tt;var s=i+(e-a[--r])/(a[r+1]-a[r])*tt,u=S(s,t,n);return u>=Z?function(t,e,n,i){for(var r=0;r<Q;++r){var a=S(e,n,i);if(0===a)return e;e-=(M(e,n,i)-t)/a}return e}(e,s,t,n):0===u?s:function(t,e,n,i,r){var a,o,s=0;do{(a=M(o=e+(n-e)/2,i,r)-t)>0?n=o:e=o}while(Math.abs(a)>J&&++s<$);return o}(e,i,i+tt,t,n)}if(!(0<=t&&t<=1&&0<=n&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&n===i)return A;for(var a=et?new Float32Array(K):new Array(K),o=0;o<K;++o)a[o]=M(o*tt,t,n);return function(t){return 0===t?0:1===t?1:M(r(t),e,i)}},it=38,rt=40,at=32,ot=9,st=33,ut=34,ct=36,lt=35,ht=function(t){function n(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e(this,n),window.scrollTo(0,0),history.scrollRestoration="manual",(t=l(this,u(n).call(this,i))).inertia&&(t.lerp=.1*t.inertia),t.isScrolling=!1,t.isDraggingScrollbar=!1,t.isTicking=!1,t.hasScrollTicking=!1,t.parallaxElements=[],t.stop=!1,t.checkKey=t.checkKey.bind(c(t)),window.addEventListener("keydown",t.checkKey,!1),t}return s(n,P),i(n,[{key:"init",value:function(){var t=this;this.html.classList.add(this.smoothClass),this.instance=o({delta:{x:0,y:0}},this.instance),this.vs=new V({el:this.scrollFromAnywhere?document:this.el,mouseMultiplier:navigator.platform.indexOf("Win")>-1?1:.4,firefoxMultiplier:this.firefoxMultiplier,touchMultiplier:this.touchMultiplier,useKeyboard:!1,passive:!0}),this.vs.on(function(e){t.stop||(t.isTicking||t.isDraggingScrollbar||(requestAnimationFrame(function(){t.updateDelta(e),t.isScrolling||t.startScrolling()}),t.isTicking=!0),t.isTicking=!1)}),this.setScrollLimit(),this.initScrollBar(),this.addSections(),this.addElements(),this.detectElements(),this.transformElements(!0,!0),this.checkScroll(!0),h(u(n.prototype),"init",this).call(this)}},{key:"setScrollLimit",value:function(){this.instance.limit=this.el.offsetHeight-this.windowHeight}},{key:"startScrolling",value:function(){this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}},{key:"stopScrolling",value:function(){this.scrollToRaf&&(cancelAnimationFrame(this.scrollToRaf),this.scrollToRaf=null),this.isScrolling=!1,this.instance.scroll.y=Math.round(this.instance.scroll.y),this.html.classList.remove(this.scrollingClass)}},{key:"checkKey",value:function(t){var e=this;if(this.stop)t.keyCode==ot&&requestAnimationFrame(function(){e.html.scrollTop=0,document.body.scrollTop=0});else{switch(t.keyCode){case ot:requestAnimationFrame(function(){e.html.scrollTop=0,document.body.scrollTop=0,e.scrollTo(document.activeElement,-window.innerHeight/2)});break;case it:this.instance.delta.y-=240;break;case rt:this.instance.delta.y+=240;break;case st:this.instance.delta.y-=window.innerHeight;break;case ut:this.instance.delta.y+=window.innerHeight;break;case ct:this.instance.delta.y-=this.instance.limit;break;case lt:this.instance.delta.y+=this.instance.limit;break;case at:document.activeElement instanceof HTMLInputElement||document.activeElement instanceof HTMLTextAreaElement||(t.shiftKey?this.instance.delta.y-=window.innerHeight:this.instance.delta.y+=window.innerHeight);break;default:return}this.instance.delta.y<0&&(this.instance.delta.y=0),this.instance.delta.y>this.instance.limit&&(this.instance.delta.y=this.instance.limit),this.isScrolling=!0,this.checkScroll(),this.html.classList.add(this.scrollingClass)}}},{key:"checkScroll",value:function(){var t=this;if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this.isScrolling||this.isDraggingScrollbar){this.hasScrollTicking||(requestAnimationFrame(function(){return t.checkScroll()}),this.hasScrollTicking=!0),this.updateScroll();var e=Math.abs(this.instance.delta.y-this.instance.scroll.y);!this.animatingScroll&&(e<.5&&0!=this.instance.delta.y||e<.5&&0==this.instance.delta.y)&&this.stopScrolling();for(var i=this.sections.length-1;i>=0;i--)this.sections[i].persistent||this.instance.scroll.y>this.sections[i].offset&&this.instance.scroll.y<this.sections[i].limit?(this.transform(this.sections[i].el,0,-this.instance.scroll.y),this.sections[i].inView||(this.sections[i].inView=!0,this.sections[i].el.style.opacity=1,this.sections[i].el.style.pointerEvents="all",this.sections[i].el.setAttribute("data-".concat(this.name,"-section-inview"),""))):(this.sections[i].inView&&(this.sections[i].inView=!1,this.sections[i].el.style.opacity=0,this.sections[i].el.style.pointerEvents="none",this.sections[i].el.removeAttribute("data-".concat(this.name,"-section-inview"))),this.transform(this.sections[i].el,0,0));this.getDirection&&this.addDirection(),this.getSpeed&&(this.addSpeed(),this.timestamp=Date.now()),this.detectElements(),this.transformElements();var r=this.instance.scroll.y/this.instance.limit*this.scrollBarLimit;this.transform(this.scrollbarThumb,0,r),h(u(n.prototype),"checkScroll",this).call(this),this.hasScrollTicking=!1}}},{key:"resize",value:function(){this.windowHeight=window.innerHeight,this.windowMiddle=this.windowHeight/2,this.update()}},{key:"updateDelta",value:function(t){this.instance.delta.y-=t.deltaY*this.multiplier,this.instance.delta.y<0&&(this.instance.delta.y=0),this.instance.delta.y>this.instance.limit&&(this.instance.delta.y=this.instance.limit)}},{key:"updateScroll",value:function(t){this.isScrolling||this.isDraggingScrollbar?this.instance.scroll.y=g(this.instance.scroll.y,this.instance.delta.y,this.lerp):this.instance.scroll.y>this.instance.limit?this.setScroll(this.instance.scroll.x,this.instance.limit):this.instance.scroll.y<0?this.setScroll(this.instance.scroll.x,0):this.setScroll(this.instance.scroll.x,this.instance.delta.y)}},{key:"addDirection",value:function(){this.instance.delta.y>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):this.instance.delta.y<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up")}},{key:"addSpeed",value:function(){this.instance.delta.y!=this.instance.scroll.y?this.instance.speed=(this.instance.delta.y-this.instance.scroll.y)/Math.max(1,Date.now()-this.timestamp):this.instance.speed=0}},{key:"initScrollBar",value:function(){this.scrollbar=document.createElement("span"),this.scrollbarThumb=document.createElement("span"),this.scrollbar.classList.add("".concat(this.scrollbarClass)),this.scrollbarThumb.classList.add("".concat(this.scrollbarClass,"_thumb")),this.scrollbar.append(this.scrollbarThumb),document.body.append(this.scrollbar),this.getScrollBar=this.getScrollBar.bind(this),this.releaseScrollBar=this.releaseScrollBar.bind(this),this.moveScrollBar=this.moveScrollBar.bind(this),this.scrollbarThumb.addEventListener("mousedown",this.getScrollBar),window.addEventListener("mouseup",this.releaseScrollBar),window.addEventListener("mousemove",this.moveScrollBar),this.instance.limit+this.windowHeight<=this.windowHeight||(this.scrollbarHeight=this.scrollbar.getBoundingClientRect().height,this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit+this.scrollbarHeight),"px"),this.scrollBarLimit=this.scrollbarHeight-this.scrollbarThumb.getBoundingClientRect().height)}},{key:"reinitScrollBar",value:function(){this.instance.limit+this.windowHeight<=this.windowHeight||(this.scrollbarHeight=this.scrollbar.getBoundingClientRect().height,this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit+this.scrollbarHeight),"px"),this.scrollBarLimit=this.scrollbarHeight-this.scrollbarThumb.getBoundingClientRect().height)}},{key:"destroyScrollBar",value:function(){this.scrollbarThumb.removeEventListener("mousedown",this.getScrollBar),window.removeEventListener("mouseup",this.releaseScrollBar),window.removeEventListener("mousemove",this.moveScrollBar),this.scrollbar.remove()}},{key:"getScrollBar",value:function(t){this.isDraggingScrollbar=!0,this.checkScroll(),this.html.classList.remove(this.scrollingClass),this.html.classList.add(this.draggingClass)}},{key:"releaseScrollBar",value:function(t){this.isDraggingScrollbar=!1,this.html.classList.add(this.scrollingClass),this.html.classList.remove(this.draggingClass)}},{key:"moveScrollBar",value:function(t){var e=this;!this.isTicking&&this.isDraggingScrollbar&&(requestAnimationFrame(function(){var n=100*t.clientY/e.scrollbarHeight*e.instance.limit/100;n>0&&n<e.instance.limit&&(e.instance.delta.y=n)}),this.isTicking=!0),this.isTicking=!1}},{key:"addElements",value:function(){var t=this;this.els=[],this.parallaxElements=[],this.sections.forEach(function(e,n){t.sections[n].el.querySelectorAll("[data-".concat(t.name,"]")).forEach(function(e,i){var r,a,o=e.dataset[t.name+"Class"]||t.class,s=e.dataset[t.name+"Repeat"],u=e.dataset[t.name+"Call"],c=e.dataset[t.name+"Position"],l=e.dataset[t.name+"Delay"],h=e.dataset[t.name+"Direction"],f="string"==typeof e.dataset[t.name+"Sticky"],p=!!e.dataset[t.name+"Speed"]&&parseFloat(e.dataset[t.name+"Speed"])/10,d="string"==typeof e.dataset[t.name+"Offset"]?e.dataset[t.name+"Offset"].split(","):t.offset,m=e.dataset[t.name+"Target"];a=void 0!==m?document.querySelector("".concat(m)):e;var v=(r=t.sections[n].inView?a.getBoundingClientRect().top+t.instance.scroll.y-y(a).y:a.getBoundingClientRect().top-y(t.sections[n].el).y-y(a).y)+a.offsetHeight,g=(v-r)/2+r;if(f){var _=e.getBoundingClientRect().top,x=_-r;r+=window.innerHeight,g=((v=_+a.offsetHeight-e.offsetHeight-x)-r)/2+r}s="false"!=s&&(null!=s||t.repeat);var b=[0,0];if(d)for(var w=0;w<d.length;w++)"string"==typeof d[w]?d[w].includes("%")?b[w]=parseInt(d[w].replace("%","")*t.windowHeight/100):b[w]=parseInt(d[w]):b[w]=d[w];var M={el:e,id:i,class:o,top:r+b[0],middle:g,bottom:v-b[1],offset:d,repeat:s,inView:!!e.classList.contains(o),call:u,speed:p,delay:l,position:c,target:a,direction:h,sticky:f};t.els.push(M),(!1!==p||f)&&t.parallaxElements.push(M)})})}},{key:"addSections",value:function(){var t=this;this.sections=[];var e=this.el.querySelectorAll("[data-".concat(this.name,"-section]"));0===e.length&&(e=[this.el]),e.forEach(function(e,n){var i=e.getBoundingClientRect().top-1.5*window.innerHeight-y(e).y,r=i+e.getBoundingClientRect().height+2*window.innerHeight,a={el:e,offset:i,limit:r,inView:!1,persistent:"string"==typeof e.dataset[t.name+"Persistent"]};t.sections[n]=a})}},{key:"transform",value:function(t,e,n,i){var r;if(i){var a=y(t),o=g(a.x,e,i),s=g(a.y,n,i);r="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(o,",").concat(s,",0,1)")}else r="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(e,",").concat(n,",0,1)");t.style.webkitTransform=r,t.style.msTransform=r,t.style.transform=r}},{key:"transformElements",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.instance.scroll.y+this.windowHeight,r=this.instance.scroll.y+this.windowMiddle;this.parallaxElements.forEach(function(a,o){var s=!1;if(t&&(s=0),a.inView||n)switch(a.position){case"top":s=e.instance.scroll.y*-a.speed;break;case"elementTop":s=(i-a.top)*-a.speed;break;case"bottom":s=(e.instance.limit-i+e.windowHeight)*a.speed;break;default:s=(r-a.middle)*-a.speed}a.sticky&&(s=a.inView?e.instance.scroll.y-a.top+window.innerHeight:e.instance.scroll.y<a.top-window.innerHeight&&e.instance.scroll.y<a.top-window.innerHeight/2?0:e.instance.scroll.y>a.bottom&&e.instance.scroll.y>a.bottom+100&&a.bottom-a.top+window.innerHeight),!1!==s&&("horizontal"===a.direction?e.transform(a.el,s,0,!t&&a.delay):e.transform(a.el,0,s,!t&&a.delay))})}},{key:"scrollTo",value:function(t,e){var n,i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[.25,0,.35,1],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5?arguments[5]:void 0,u=e?parseInt(e):0;if(a=nt.apply(void 0,f(a)),"string"==typeof t){if("top"===t)n=0;else if("bottom"===t)n=this.instance.limit;else if(!(n=document.querySelector(t)))return}else if("number"==typeof t)n=parseInt(t);else{if(!t||!t.tagName)return;n=t}if("number"!=typeof n){if(!_(n).includes(this.el))return;var c=n.getBoundingClientRect().top,l=_(n).find(function(t){return i.sections.find(function(e){return e.el==t})}),h=0;l&&(h=y(l).y),u=c+u-h}else u=n+u;var p=parseFloat(this.instance.delta.y),d=Math.max(0,Math.min(u,this.instance.limit))-p,m=function(t){o?i.setScroll(i.instance.delta.x,p+d*t):i.instance.delta.y=p+d*t};this.animatingScroll=!0,this.stopScrolling(),this.startScrolling();var v=Date.now();!function t(){var e=(Date.now()-v)/r;e>1?(m(1),i.animatingScroll=!1,0==r&&i.update(),s&&s()):(i.scrollToRaf=requestAnimationFrame(t),m(a(e)))}()}},{key:"update",value:function(){this.setScrollLimit(),this.addSections(),this.addElements(),this.detectElements(),this.updateScroll(),this.transformElements(!0),this.reinitScrollBar(),this.checkScroll(!0)}},{key:"startScroll",value:function(){this.stop=!1}},{key:"stopScroll",value:function(){this.stop=!0}},{key:"setScroll",value:function(t,e){this.instance=o({},this.instance,{scroll:{x:t,y:e},delta:{x:t,y:e},speed:0})}},{key:"destroy",value:function(){h(u(n.prototype),"destroy",this).call(this),this.stopScrolling(),this.html.classList.remove(this.smoothClass),this.vs.destroy(),this.destroyScrollBar(),window.removeEventListener("keydown",this.checkKey,!1)}}]),n}();return function(){function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,t),this.options=n,Object.assign(this,T,n),this.init()}return i(t,[{key:"init",value:function(){if(this.smoothMobile||(this.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),!0!==this.smooth||this.isMobile?this.scroll=new O(this.options):this.scroll=new ht(this.options),this.scroll.init(),window.location.hash){var t=window.location.hash.slice(1,window.location.hash.length),e=document.getElementById(t);e&&this.scroll.scrollTo(e)}}},{key:"update",value:function(){this.scroll.update()}},{key:"start",value:function(){this.scroll.startScroll()}},{key:"stop",value:function(){this.scroll.stopScroll()}},{key:"scrollTo",value:function(t,e,n,i,r,a){this.scroll.scrollTo(t,e,n,i,r,a)}},{key:"setScroll",value:function(t,e){this.scroll.setScroll(t,e)}},{key:"on",value:function(t,e){this.scroll.setEvents(t,e)}},{key:"off",value:function(t,e){this.scroll.unsetEvents(t,e)}},{key:"destroy",value:function(){this.scroll.destroy()}}]),t}()})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(t,e,n){function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=o,this.__views__=[]}var r=t("./_baseCreate"),a=t("./_baseLodash"),o=4294967295;i.prototype=r(a.prototype),i.prototype.constructor=i,e.exports=i},{"./_baseCreate":16,"./_baseLodash":22}],10:[function(t,e,n){function i(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=void 0}var r=t("./_baseCreate"),a=t("./_baseLodash");i.prototype=r(a.prototype),i.prototype.constructor=i,e.exports=i},{"./_baseCreate":16,"./_baseLodash":22}],11:[function(t,e,n){var i=t("./_root").Symbol;e.exports=i},{"./_root":58}],12:[function(t,e,n){var i=t("./_getNative")(t("./_root"),"WeakMap");e.exports=i},{"./_getNative":43,"./_root":58}],13:[function(t,e,n){e.exports=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}},{}],14:[function(t,e,n){e.exports=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}},{}],15:[function(t,e,n){var i=t("./_baseIndexOf");e.exports=function(t,e){return!(null==t||!t.length)&&i(t,e,0)>-1}},{"./_baseIndexOf":19}],16:[function(t,e,n){var i=t("./isObject"),r=Object.create,a=function(){function t(){}return function(e){if(!i(e))return{};if(r)return r(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();e.exports=a},{"./isObject":73}],17:[function(t,e,n){e.exports=function(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}},{}],18:[function(t,e,n){var i=t("./_Symbol"),r=t("./_getRawTag"),a=t("./_objectToString"),o="[object Null]",s="[object Undefined]",u=i?i.toStringTag:void 0;e.exports=function(t){return null==t?void 0===t?s:o:u&&u in Object(t)?r(t):a(t)}},{"./_Symbol":11,"./_getRawTag":44,"./_objectToString":53}],19:[function(t,e,n){var i=t("./_baseFindIndex"),r=t("./_baseIsNaN"),a=t("./_strictIndexOf");e.exports=function(t,e,n){return e==e?a(t,e,n):i(t,r,n)}},{"./_baseFindIndex":17,"./_baseIsNaN":20,"./_strictIndexOf":63}],20:[function(t,e,n){e.exports=function(t){return t!=t}},{}],21:[function(t,e,n){var i=t("./isFunction"),r=t("./_isMasked"),a=t("./isObject"),o=t("./_toSource"),s=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,l=u.toString,h=c.hasOwnProperty,f=RegExp("^"+l.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(t){return!(!a(t)||r(t))&&(i(t)?f:s).test(o(t))}},{"./_isMasked":50,"./_toSource":64,"./isFunction":72,"./isObject":73}],22:[function(t,e,n){e.exports=function(){}},{}],23:[function(t,e,n){var i=t("./identity"),r=t("./_overRest"),a=t("./_setToString");e.exports=function(t,e){return a(r(t,e,i),t+"")}},{"./_overRest":54,"./_setToString":60,"./identity":70}],24:[function(t,e,n){var i=t("./identity"),r=t("./_metaMap"),a=r?function(t,e){return r.set(t,e),t}:i;e.exports=a},{"./_metaMap":52,"./identity":70}],25:[function(t,e,n){var i=t("./constant"),r=t("./_defineProperty"),a=t("./identity"),o=r?function(t,e){return r(t,"toString",{configurable:!0,enumerable:!1,value:i(e),writable:!0})}:a;e.exports=o},{"./_defineProperty":38,"./constant":68,"./identity":70}],26:[function(t,e,n){var i=Math.max;e.exports=function(t,e,n,r){for(var a=-1,o=t.length,s=n.length,u=-1,c=e.length,l=i(o-s,0),h=Array(c+l),f=!r;++u<c;)h[u]=e[u];for(;++a<s;)(f||a<o)&&(h[n[a]]=t[a]);for(;l--;)h[u++]=t[a++];return h}},{}],27:[function(t,e,n){var i=Math.max;e.exports=function(t,e,n,r){for(var a=-1,o=t.length,s=-1,u=n.length,c=-1,l=e.length,h=i(o-u,0),f=Array(h+l),p=!r;++a<h;)f[a]=t[a];for(var d=a;++c<l;)f[d+c]=e[c];for(;++s<u;)(p||a<o)&&(f[d+n[s]]=t[a++]);return f}},{}],28:[function(t,e,n){e.exports=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}},{}],29:[function(t,e,n){var i=t("./_root")["__core-js_shared__"];e.exports=i},{"./_root":58}],30:[function(t,e,n){e.exports=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}},{}],31:[function(t,e,n){var i=t("./_createCtor"),r=t("./_root"),a=1;e.exports=function(t,e,n){var o=e&a,s=i(t);return function e(){return(this&&this!==r&&this instanceof e?s:t).apply(o?n:this,arguments)}}},{"./_createCtor":32,"./_root":58}],32:[function(t,e,n){var i=t("./_baseCreate"),r=t("./isObject");e.exports=function(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=i(t.prototype),a=t.apply(n,e);return r(a)?a:n}}},{"./_baseCreate":16,"./isObject":73}],33:[function(t,e,n){var i=t("./_apply"),r=t("./_createCtor"),a=t("./_createHybrid"),o=t("./_createRecurry"),s=t("./_getHolder"),u=t("./_replaceHolders"),c=t("./_root");e.exports=function(t,e,n){var l=r(t);return function r(){for(var h=arguments.length,f=Array(h),p=h,d=s(r);p--;)f[p]=arguments[p];var m=h<3&&f[0]!==d&&f[h-1]!==d?[]:u(f,d);return(h-=m.length)<n?o(t,e,a,r.placeholder,void 0,f,m,void 0,void 0,n-h):i(this&&this!==c&&this instanceof r?l:t,this,f)}}},{"./_apply":13,"./_createCtor":32,"./_createHybrid":34,"./_createRecurry":36,"./_getHolder":42,"./_replaceHolders":57,"./_root":58}],34:[function(t,e,n){var i=t("./_composeArgs"),r=t("./_composeArgsRight"),a=t("./_countHolders"),o=t("./_createCtor"),s=t("./_createRecurry"),u=t("./_getHolder"),c=t("./_reorder"),l=t("./_replaceHolders"),h=t("./_root"),f=1,p=2,d=8,m=16,v=128,g=512;e.exports=function t(e,n,y,_,x,b,w,M,S,A){var T=n&v,P=n&f,L=n&p,E=n&(d|m),O=n&g,C=L?void 0:o(e);return function f(){for(var p=arguments.length,d=Array(p),m=p;m--;)d[m]=arguments[m];if(E)var v=u(f),g=a(d,v);if(_&&(d=i(d,_,x,E)),b&&(d=r(d,b,w,E)),p-=g,E&&p<A){var F=l(d,v);return s(e,n,t,f.placeholder,y,d,F,M,S,A-p)}var I=P?y:this,N=L?I[e]:e;return p=d.length,M?d=c(d,M):O&&p>1&&d.reverse(),T&&S<p&&(d.length=S),this&&this!==h&&this instanceof f&&(N=C||o(N)),N.apply(I,d)}}},{"./_composeArgs":26,"./_composeArgsRight":27,"./_countHolders":30,"./_createCtor":32,"./_createRecurry":36,"./_getHolder":42,"./_reorder":56,"./_replaceHolders":57,"./_root":58}],35:[function(t,e,n){var i=t("./_apply"),r=t("./_createCtor"),a=t("./_root"),o=1;e.exports=function(t,e,n,s){var u=e&o,c=r(t);return function e(){for(var r=-1,o=arguments.length,l=-1,h=s.length,f=Array(h+o),p=this&&this!==a&&this instanceof e?c:t;++l<h;)f[l]=s[l];for(;o--;)f[l++]=arguments[++r];return i(p,u?n:this,f)}}},{"./_apply":13,"./_createCtor":32,"./_root":58}],36:[function(t,e,n){var i=t("./_isLaziable"),r=t("./_setData"),a=t("./_setWrapToString"),o=1,s=2,u=4,c=8,l=32,h=64;e.exports=function(t,e,n,f,p,d,m,v,g,y){var _=e&c;e|=_?l:h,(e&=~(_?h:l))&u||(e&=~(o|s));var x=[t,e,p,_?d:void 0,_?m:void 0,_?void 0:d,_?void 0:m,v,g,y],b=n.apply(void 0,x);return i(t)&&r(b,x),b.placeholder=f,a(b,t,e)}},{"./_isLaziable":49,"./_setData":59,"./_setWrapToString":61}],37:[function(t,e,n){var i=t("./_baseSetData"),r=t("./_createBind"),a=t("./_createCurry"),o=t("./_createHybrid"),s=t("./_createPartial"),u=t("./_getData"),c=t("./_mergeData"),l=t("./_setData"),h=t("./_setWrapToString"),f=t("./toInteger"),p="Expected a function",d=1,m=2,v=8,g=16,y=32,_=64,x=Math.max;e.exports=function(t,e,n,b,w,M,S,A){var T=e&m;if(!T&&"function"!=typeof t)throw new TypeError(p);var P=b?b.length:0;if(P||(e&=~(y|_),b=w=void 0),S=void 0===S?S:x(f(S),0),A=void 0===A?A:f(A),P-=w?w.length:0,e&_){var L=b,E=w;b=w=void 0}var O=T?void 0:u(t),C=[t,e,n,b,w,L,E,M,S,A];if(O&&c(C,O),t=C[0],e=C[1],n=C[2],b=C[3],w=C[4],!(A=C[9]=void 0===C[9]?T?0:t.length:x(C[9]-P,0))&&e&(v|g)&&(e&=~(v|g)),e&&e!=d)F=e==v||e==g?a(t,e,A):e!=y&&e!=(d|y)||w.length?o.apply(void 0,C):s(t,e,n,b);else var F=r(t,e,n);return h((O?i:l)(F,C),t,e)}},{"./_baseSetData":24,"./_createBind":31,"./_createCurry":33,"./_createHybrid":34,"./_createPartial":35,"./_getData":40,"./_mergeData":51,"./_setData":59,"./_setWrapToString":61,"./toInteger":81}],38:[function(t,e,n){var i=t("./_getNative"),r=function(){try{var t=i(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();e.exports=r},{"./_getNative":43}],39:[function(t,e,n){(function(t){var n="object"==typeof t&&t&&t.Object===Object&&t;e.exports=n}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],40:[function(t,e,n){var i=t("./_metaMap"),r=t("./noop"),a=i?function(t){return i.get(t)}:r;e.exports=a},{"./_metaMap":52,"./noop":77}],41:[function(t,e,n){var i=t("./_realNames"),r=Object.prototype.hasOwnProperty;e.exports=function(t){for(var e=t.name+"",n=i[e],a=r.call(i,e)?n.length:0;a--;){var o=n[a],s=o.func;if(null==s||s==t)return o.name}return e}},{"./_realNames":55}],42:[function(t,e,n){e.exports=function(t){return t.placeholder}},{}],43:[function(t,e,n){var i=t("./_baseIsNative"),r=t("./_getValue");e.exports=function(t,e){var n=r(t,e);return i(n)?n:void 0}},{"./_baseIsNative":21,"./_getValue":45}],44:[function(t,e,n){var i=t("./_Symbol"),r=Object.prototype,a=r.hasOwnProperty,o=r.toString,s=i?i.toStringTag:void 0;e.exports=function(t){var e=a.call(t,s),n=t[s];try{t[s]=void 0;var i=!0}catch(t){}var r=o.call(t);return i&&(e?t[s]=n:delete t[s]),r}},{"./_Symbol":11}],45:[function(t,e,n){e.exports=function(t,e){return null==t?void 0:t[e]}},{}],46:[function(t,e,n){var i=/\{\n\/\* \[wrapped with (.+)\] \*/,r=/,? & /;e.exports=function(t){var e=t.match(i);return e?e[1].split(r):[]}},{}],47:[function(t,e,n){var i=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;e.exports=function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(n>1?"& ":"")+e[r],e=e.join(n>2?", ":" "),t.replace(i,"{\n/* [wrapped with "+e+"] */\n")}},{}],48:[function(t,e,n){var i=9007199254740991,r=/^(?:0|[1-9]\d*)$/;e.exports=function(t,e){var n=typeof t;return!!(e=null==e?i:e)&&("number"==n||"symbol"!=n&&r.test(t))&&t>-1&&t%1==0&&t<e}},{}],49:[function(t,e,n){var i=t("./_LazyWrapper"),r=t("./_getData"),a=t("./_getFuncName"),o=t("./wrapperLodash");e.exports=function(t){var e=a(t),n=o[e];if("function"!=typeof n||!(e in i.prototype))return!1;if(t===n)return!0;var s=r(n);return!!s&&t===s[0]}},{"./_LazyWrapper":9,"./_getData":40,"./_getFuncName":41,"./wrapperLodash":83}],50:[function(t,e,n){var i=t("./_coreJsData"),r=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();e.exports=function(t){return!!r&&r in t}},{"./_coreJsData":29}],51:[function(t,e,n){var i=t("./_composeArgs"),r=t("./_composeArgsRight"),a=t("./_replaceHolders"),o="__lodash_placeholder__",s=1,u=2,c=4,l=8,h=128,f=256,p=Math.min;e.exports=function(t,e){var n=t[1],d=e[1],m=n|d,v=m<(s|u|h),g=d==h&&n==l||d==h&&n==f&&t[7].length<=e[8]||d==(h|f)&&e[7].length<=e[8]&&n==l;if(!v&&!g)return t;d&s&&(t[2]=e[2],m|=n&s?0:c);var y=e[3];if(y){var _=t[3];t[3]=_?i(_,y,e[4]):y,t[4]=_?a(t[3],o):e[4]}return(y=e[5])&&(_=t[5],t[5]=_?r(_,y,e[6]):y,t[6]=_?a(t[5],o):e[6]),(y=e[7])&&(t[7]=y),d&h&&(t[8]=null==t[8]?e[8]:p(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=m,t}},{"./_composeArgs":26,"./_composeArgsRight":27,"./_replaceHolders":57}],52:[function(t,e,n){var i=t("./_WeakMap"),r=i&&new i;e.exports=r},{"./_WeakMap":12}],53:[function(t,e,n){var i=Object.prototype.toString;e.exports=function(t){return i.call(t)}},{}],54:[function(t,e,n){var i=t("./_apply"),r=Math.max;e.exports=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var a=arguments,o=-1,s=r(a.length-e,0),u=Array(s);++o<s;)u[o]=a[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=a[o];return c[e]=n(u),i(t,this,c)}}},{"./_apply":13}],55:[function(t,e,n){e.exports={}},{}],56:[function(t,e,n){var i=t("./_copyArray"),r=t("./_isIndex"),a=Math.min;e.exports=function(t,e){for(var n=t.length,o=a(e.length,n),s=i(t);o--;){var u=e[o];t[o]=r(u,n)?s[u]:void 0}return t}},{"./_copyArray":28,"./_isIndex":48}],57:[function(t,e,n){var i="__lodash_placeholder__";e.exports=function(t,e){for(var n=-1,r=t.length,a=0,o=[];++n<r;){var s=t[n];s!==e&&s!==i||(t[n]=i,o[a++]=n)}return o}},{}],58:[function(t,e,n){var i=t("./_freeGlobal"),r="object"==typeof self&&self&&self.Object===Object&&self,a=i||r||Function("return this")();e.exports=a},{"./_freeGlobal":39}],59:[function(t,e,n){var i=t("./_baseSetData"),r=t("./_shortOut")(i);e.exports=r},{"./_baseSetData":24,"./_shortOut":62}],60:[function(t,e,n){var i=t("./_baseSetToString"),r=t("./_shortOut")(i);e.exports=r},{"./_baseSetToString":25,"./_shortOut":62}],61:[function(t,e,n){var i=t("./_getWrapDetails"),r=t("./_insertWrapDetails"),a=t("./_setToString"),o=t("./_updateWrapDetails");e.exports=function(t,e,n){var s=e+"";return a(t,r(s,o(i(s),n)))}},{"./_getWrapDetails":46,"./_insertWrapDetails":47,"./_setToString":60,"./_updateWrapDetails":65}],62:[function(t,e,n){var i=800,r=16,a=Date.now;e.exports=function(t){var e=0,n=0;return function(){var o=a(),s=r-(o-n);if(n=o,s>0){if(++e>=i)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}},{}],63:[function(t,e,n){e.exports=function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}},{}],64:[function(t,e,n){var i=Function.prototype.toString;e.exports=function(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},{}],65:[function(t,e,n){var i=t("./_arrayEach"),r=t("./_arrayIncludes"),a=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];e.exports=function(t,e){return i(a,function(n){var i="_."+n[0];e&n[1]&&!r(t,i)&&t.push(i)}),t.sort()}},{"./_arrayEach":14,"./_arrayIncludes":15}],66:[function(t,e,n){var i=t("./_LazyWrapper"),r=t("./_LodashWrapper"),a=t("./_copyArray");e.exports=function(t){if(t instanceof i)return t.clone();var e=new r(t.__wrapped__,t.__chain__);return e.__actions__=a(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}},{"./_LazyWrapper":9,"./_LodashWrapper":10,"./_copyArray":28}],67:[function(t,e,n){var i=t("./_baseRest"),r=t("./_createWrap"),a=t("./_getHolder"),o=t("./_replaceHolders"),s=i(function(t,e,n){var i=1;if(n.length){var u=o(n,a(s));i|=32}return r(t,i,e,n,u)});s.placeholder={},e.exports=s},{"./_baseRest":23,"./_createWrap":37,"./_getHolder":42,"./_replaceHolders":57}],68:[function(t,e,n){e.exports=function(t){return function(){return t}}},{}],69:[function(t,e,n){var i=t("./isObject"),r=t("./now"),a=t("./toNumber"),o="Expected a function",s=Math.max,u=Math.min;e.exports=function(t,e,n){function c(e){var n=d,i=m;return d=m=void 0,x=e,g=t.apply(i,n)}function l(t){var n=t-_;return void 0===_||n>=e||n<0||w&&t-x>=v}function h(){var t=r();return l(t)?f(t):void(y=setTimeout(h,function(t){var n=e-(t-_);return w?u(n,v-(t-x)):n}(t)))}function f(t){return y=void 0,M&&d?c(t):(d=m=void 0,g)}function p(){var t=r(),n=l(t);if(d=arguments,m=this,_=t,n){if(void 0===y)return function(t){return x=t,y=setTimeout(h,e),b?c(t):g}(_);if(w)return clearTimeout(y),y=setTimeout(h,e),c(_)}return void 0===y&&(y=setTimeout(h,e)),g}var d,m,v,g,y,_,x=0,b=!1,w=!1,M=!0;if("function"!=typeof t)throw new TypeError(o);return e=a(e)||0,i(n)&&(b=!!n.leading,v=(w="maxWait"in n)?s(a(n.maxWait)||0,e):v,M="trailing"in n?!!n.trailing:M),p.cancel=function(){void 0!==y&&clearTimeout(y),x=0,d=_=m=y=void 0},p.flush=function(){return void 0===y?g:f(r())},p}},{"./isObject":73,"./now":78,"./toNumber":82}],70:[function(t,e,n){e.exports=function(t){return t}},{}],71:[function(t,e,n){var i=Array.isArray;e.exports=i},{}],72:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isObject"),a="[object AsyncFunction]",o="[object Function]",s="[object GeneratorFunction]",u="[object Proxy]";e.exports=function(t){if(!r(t))return!1;var e=i(t);return e==o||e==s||e==a||e==u}},{"./_baseGetTag":18,"./isObject":73}],73:[function(t,e,n){e.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},{}],74:[function(t,e,n){e.exports=function(t){return null!=t&&"object"==typeof t}},{}],75:[function(t,e,n){var i=t("./_baseGetTag"),r=t("./isObjectLike"),a="[object Symbol]";e.exports=function(t){return"symbol"==typeof t||r(t)&&i(t)==a}},{"./_baseGetTag":18,"./isObjectLike":74}],76:[function(t,e,n){(function(t){(function(){function i(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function r(t,e,n,i){for(var r=-1,a=null==t?0:t.length;++r<a;){var o=t[r];e(i,o,n(o),t)}return i}function a(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t}function o(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function s(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(!e(t[n],n,t))return!1;return!0}function u(t,e){for(var n=-1,i=null==t?0:t.length,r=0,a=[];++n<i;){var o=t[n];e(o,n,t)&&(a[r++]=o)}return a}function c(t,e){return!!(null==t?0:t.length)&&_(t,e,0)>-1}function l(t,e,n){for(var i=-1,r=null==t?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function h(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}function f(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}function p(t,e,n,i){var r=-1,a=null==t?0:t.length;for(i&&a&&(n=t[++r]);++r<a;)n=e(n,t[r],r,t);return n}function d(t,e,n,i){var r=null==t?0:t.length;for(i&&r&&(n=t[--r]);r--;)n=e(n,t[r],r,t);return n}function m(t,e){for(var n=-1,i=null==t?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function v(t){return t.match(Ae)||[]}function g(t,e,n){var i;return n(t,function(t,n,r){if(e(t,n,r))return i=n,!1}),i}function y(t,e,n,i){for(var r=t.length,a=n+(i?1:-1);i?a--:++a<r;)if(e(t[a],a,t))return a;return-1}function _(t,e,n){return e==e?function(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}(t,e,n):y(t,b,n)}function x(t,e,n,i){for(var r=n-1,a=t.length;++r<a;)if(i(t[r],e))return r;return-1}function b(t){return t!=t}function w(t,e){var n=null==t?0:t.length;return n?T(t,e)/n:xt}function M(t){return function(e){return null==e?V:e[t]}}function S(t){return function(e){return null==t?V:t[e]}}function A(t,e,n,i,r){return r(t,function(t,r,a){n=i?(i=!1,t):e(n,t,r,a)}),n}function T(t,e){for(var n,i=-1,r=t.length;++i<r;){var a=e(t[i]);a!==V&&(n=n===V?a:n+a)}return n}function P(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}function L(t){return function(e){return t(e)}}function E(t,e){return h(e,function(e){return t[e]})}function O(t,e){return t.has(e)}function C(t,e){for(var n=-1,i=t.length;++n<i&&_(e,t[n],0)>-1;);return n}function F(t,e){for(var n=t.length;n--&&_(e,t[n],0)>-1;);return n}function I(t){return"\\"+Sn[t]}function N(t){return yn.test(t)}function D(t){return _n.test(t)}function R(t){var e=-1,n=Array(t.size);return t.forEach(function(t,i){n[++e]=[i,t]}),n}function k(t,e){return function(n){return t(e(n))}}function z(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n];o!==e&&o!==Q||(t[n]=Q,a[r++]=n)}return a}function U(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function B(t){return N(t)?function(t){for(var e=vn.lastIndex=0;vn.test(t);)++e;return e}(t):jn(t)}function j(t){return N(t)?function(t){return t.match(vn)||[]}(t):function(t){return t.split("")}(t)}function G(t){return t.match(gn)||[]}var V,W=200,H="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",X="Expected a function",Y="__lodash_hash_undefined__",q=500,Q="__lodash_placeholder__",Z=1,J=2,$=4,K=1,tt=2,et=1,nt=2,it=4,rt=8,at=16,ot=32,st=64,ut=128,ct=256,lt=512,ht=30,ft="...",pt=800,dt=16,mt=1,vt=2,gt=1/0,yt=9007199254740991,_t=1.7976931348623157e308,xt=NaN,bt=4294967295,wt=bt-1,Mt=bt>>>1,St=[["ary",ut],["bind",et],["bindKey",nt],["curry",rt],["curryRight",at],["flip",lt],["partial",ot],["partialRight",st],["rearg",ct]],At="[object Arguments]",Tt="[object Array]",Pt="[object AsyncFunction]",Lt="[object Boolean]",Et="[object Date]",Ot="[object DOMException]",Ct="[object Error]",Ft="[object Function]",It="[object GeneratorFunction]",Nt="[object Map]",Dt="[object Number]",Rt="[object Null]",kt="[object Object]",zt="[object Promise]",Ut="[object Proxy]",Bt="[object RegExp]",jt="[object Set]",Gt="[object String]",Vt="[object Symbol]",Wt="[object Undefined]",Ht="[object WeakMap]",Xt="[object WeakSet]",Yt="[object ArrayBuffer]",qt="[object DataView]",Qt="[object Float32Array]",Zt="[object Float64Array]",Jt="[object Int8Array]",$t="[object Int16Array]",Kt="[object Int32Array]",te="[object Uint8Array]",ee="[object Uint8ClampedArray]",ne="[object Uint16Array]",ie="[object Uint32Array]",re=/\b__p \+= '';/g,ae=/\b(__p \+=) '' \+/g,oe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,se=/&(?:amp|lt|gt|quot|#39);/g,ue=/[&<>"']/g,ce=RegExp(se.source),le=RegExp(ue.source),he=/<%-([\s\S]+?)%>/g,fe=/<%([\s\S]+?)%>/g,pe=/<%=([\s\S]+?)%>/g,de=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,me=/^\w*$/,ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ge=/[\\^$.*+?()[\]{}|]/g,ye=RegExp(ge.source),_e=/^\s+|\s+$/g,xe=/^\s+/,be=/\s+$/,we=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Me=/\{\n\/\* \[wrapped with (.+)\] \*/,Se=/,? & /,Ae=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Te=/\\(\\)?/g,Pe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Le=/\w*$/,Ee=/^[-+]0x[0-9a-f]+$/i,Oe=/^0b[01]+$/i,Ce=/^\[object .+?Constructor\]$/,Fe=/^0o[0-7]+$/i,Ie=/^(?:0|[1-9]\d*)$/,Ne=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,De=/($^)/,Re=/['\n\r\u2028\u2029\\]/g,ke="\\ud800-\\udfff",ze="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Ue="\\u2700-\\u27bf",Be="a-z\\xdf-\\xf6\\xf8-\\xff",je="A-Z\\xc0-\\xd6\\xd8-\\xde",Ge="\\ufe0e\\ufe0f",Ve="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",We="['â€™]",He="["+ke+"]",Xe="["+Ve+"]",Ye="["+ze+"]",qe="\\d+",Qe="["+Ue+"]",Ze="["+Be+"]",Je="[^"+ke+Ve+qe+Ue+Be+je+"]",$e="\\ud83c[\\udffb-\\udfff]",Ke="[^"+ke+"]",tn="(?:\\ud83c[\\udde6-\\uddff]){2}",en="[\\ud800-\\udbff][\\udc00-\\udfff]",nn="["+je+"]",rn="\\u200d",an="(?:"+Ze+"|"+Je+")",on="(?:"+nn+"|"+Je+")",sn="(?:['â€™](?:d|ll|m|re|s|t|ve))?",un="(?:['â€™](?:D|LL|M|RE|S|T|VE))?",cn="(?:"+Ye+"|"+$e+")"+"?",ln="["+Ge+"]?",hn=ln+cn+("(?:"+rn+"(?:"+[Ke,tn,en].join("|")+")"+ln+cn+")*"),fn="(?:"+[Qe,tn,en].join("|")+")"+hn,pn="(?:"+[Ke+Ye+"?",Ye,tn,en,He].join("|")+")",dn=RegExp(We,"g"),mn=RegExp(Ye,"g"),vn=RegExp($e+"(?="+$e+")|"+pn+hn,"g"),gn=RegExp([nn+"?"+Ze+"+"+sn+"(?="+[Xe,nn,"$"].join("|")+")",on+"+"+un+"(?="+[Xe,nn+an,"$"].join("|")+")",nn+"?"+an+"+"+sn,nn+"+"+un,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qe,fn].join("|"),"g"),yn=RegExp("["+rn+ke+ze+Ge+"]"),_n=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,xn=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],bn=-1,wn={};wn[Qt]=wn[Zt]=wn[Jt]=wn[$t]=wn[Kt]=wn[te]=wn[ee]=wn[ne]=wn[ie]=!0,wn[At]=wn[Tt]=wn[Yt]=wn[Lt]=wn[qt]=wn[Et]=wn[Ct]=wn[Ft]=wn[Nt]=wn[Dt]=wn[kt]=wn[Bt]=wn[jt]=wn[Gt]=wn[Ht]=!1;var Mn={};Mn[At]=Mn[Tt]=Mn[Yt]=Mn[qt]=Mn[Lt]=Mn[Et]=Mn[Qt]=Mn[Zt]=Mn[Jt]=Mn[$t]=Mn[Kt]=Mn[Nt]=Mn[Dt]=Mn[kt]=Mn[Bt]=Mn[jt]=Mn[Gt]=Mn[Vt]=Mn[te]=Mn[ee]=Mn[ne]=Mn[ie]=!0,Mn[Ct]=Mn[Ft]=Mn[Ht]=!1;var Sn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},An=parseFloat,Tn=parseInt,Pn="object"==typeof t&&t&&t.Object===Object&&t,Ln="object"==typeof self&&self&&self.Object===Object&&self,En=Pn||Ln||Function("return this")(),On="object"==typeof n&&n&&!n.nodeType&&n,Cn=On&&"object"==typeof e&&e&&!e.nodeType&&e,Fn=Cn&&Cn.exports===On,In=Fn&&Pn.process,Nn=function(){try{var t=Cn&&Cn.require&&Cn.require("util").types;return t||In&&In.binding&&In.binding("util")}catch(t){}}(),Dn=Nn&&Nn.isArrayBuffer,Rn=Nn&&Nn.isDate,kn=Nn&&Nn.isMap,zn=Nn&&Nn.isRegExp,Un=Nn&&Nn.isSet,Bn=Nn&&Nn.isTypedArray,jn=M("length"),Gn=S({"Ã€":"A","Ã":"A","Ã‚":"A","Ãƒ":"A","Ã„":"A","Ã…":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã‡":"C","Ã§":"c","Ã":"D","Ã°":"d","Ãˆ":"E","Ã‰":"E","ÃŠ":"E","Ã‹":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","ÃŒ":"I","Ã":"I","ÃŽ":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã‘":"N","Ã±":"n","Ã’":"O","Ã“":"O","Ã”":"O","Ã•":"O","Ã–":"O","Ã˜":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã™":"U","Ãš":"U","Ã›":"U","Ãœ":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã†":"Ae","Ã¦":"ae","Ãž":"Th","Ã¾":"th","ÃŸ":"ss","Ä€":"A","Ä‚":"A","Ä„":"A","Ä":"a","Äƒ":"a","Ä…":"a","Ä†":"C","Äˆ":"C","ÄŠ":"C","ÄŒ":"C","Ä‡":"c","Ä‰":"c","Ä‹":"c","Ä":"c","ÄŽ":"D","Ä":"D","Ä":"d","Ä‘":"d","Ä’":"E","Ä”":"E","Ä–":"E","Ä˜":"E","Äš":"E","Ä“":"e","Ä•":"e","Ä—":"e","Ä™":"e","Ä›":"e","Äœ":"G","Äž":"G","Ä ":"G","Ä¢":"G","Ä":"g","ÄŸ":"g","Ä¡":"g","Ä£":"g","Ä¤":"H","Ä¦":"H","Ä¥":"h","Ä§":"h","Ä¨":"I","Äª":"I","Ä¬":"I","Ä®":"I","Ä°":"I","Ä©":"i","Ä«":"i","Ä­":"i","Ä¯":"i","Ä±":"i","Ä´":"J","Äµ":"j","Ä¶":"K","Ä·":"k","Ä¸":"k","Ä¹":"L","Ä»":"L","Ä½":"L","Ä¿":"L","Å":"L","Äº":"l","Ä¼":"l","Ä¾":"l","Å€":"l","Å‚":"l","Åƒ":"N","Å…":"N","Å‡":"N","ÅŠ":"N","Å„":"n","Å†":"n","Åˆ":"n","Å‹":"n","ÅŒ":"O","ÅŽ":"O","Å":"O","Å":"o","Å":"o","Å‘":"o","Å”":"R","Å–":"R","Å˜":"R","Å•":"r","Å—":"r","Å™":"r","Åš":"S","Åœ":"S","Åž":"S","Å ":"S","Å›":"s","Å":"s","ÅŸ":"s","Å¡":"s","Å¢":"T","Å¤":"T","Å¦":"T","Å£":"t","Å¥":"t","Å§":"t","Å¨":"U","Åª":"U","Å¬":"U","Å®":"U","Å°":"U","Å²":"U","Å©":"u","Å«":"u","Å­":"u","Å¯":"u","Å±":"u","Å³":"u","Å´":"W","Åµ":"w","Å¶":"Y","Å·":"y","Å¸":"Y","Å¹":"Z","Å»":"Z","Å½":"Z","Åº":"z","Å¼":"z","Å¾":"z","Ä²":"IJ","Ä³":"ij","Å’":"Oe","Å“":"oe","Å‰":"'n","Å¿":"s"}),Vn=S({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),Wn=S({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),Hn=function t(e){function n(t){if(la(t)&&!tu(t)&&!(t instanceof ke)){if(t instanceof Ae)return t;if(Ka.call(t,"__wrapped__"))return Rr(t)}return new Ae(t)}function S(){}function Ae(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=V}function ke(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=bt,this.__views__=[]}function ze(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Ue(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function Be(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}function je(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new Be;++e<n;)this.add(t[e])}function Ge(t){var e=this.__data__=new Ue(t);this.size=e.size}function Ve(t,e){var n=tu(t),i=!n&&Ks(t),r=!n&&!i&&nu(t),a=!n&&!i&&!r&&su(t),o=n||i||r||a,s=o?P(t.length,Xa):[],u=s.length;for(var c in t)!e&&!Ka.call(t,c)||o&&("length"==c||r&&("offset"==c||"parent"==c)||a&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||br(c,u))||s.push(c);return s}function We(t){var e=t.length;return e?t[ri(0,e-1)]:V}function He(t,e){return Ir(Di(t),tn(e,0,t.length))}function Xe(t){return Ir(Di(t))}function Ye(t,e,n){(n===V||na(t[e],n))&&(n!==V||e in t)||$e(t,e,n)}function qe(t,e,n){var i=t[e];Ka.call(t,e)&&na(i,n)&&(n!==V||e in t)||$e(t,e,n)}function Qe(t,e){for(var n=t.length;n--;)if(na(t[n][0],e))return n;return-1}function Ze(t,e,n,i){return $o(t,function(t,r,a){e(i,t,n(t),a)}),i}function Je(t,e){return t&&Ri(e,Sa(e),t)}function $e(t,e,n){"__proto__"==e&&yo?yo(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function Ke(t,e){for(var n=-1,i=e.length,r=Ua(i),a=null==t;++n<i;)r[n]=a?V:wa(t,e[n]);return r}function tn(t,e,n){return t==t&&(n!==V&&(t=t<=n?t:n),e!==V&&(t=t>=e?t:e)),t}function en(t,e,n,i,r,o){var s,u=e&Z,c=e&J,l=e&$;if(n&&(s=r?n(t,i,r,o):n(t)),s!==V)return s;if(!ca(t))return t;var h=tu(t);if(h){if(s=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Ka.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(t),!u)return Di(t,s)}else{var f=ls(t),p=f==Ft||f==It;if(nu(t))return Ei(t,u);if(f==kt||f==At||p&&!r){if(s=c||p?{}:_r(t),!u)return c?function(t,e){return Ri(t,cs(t),e)}(t,function(t,e){return t&&Ri(e,Aa(e),t)}(s,t)):function(t,e){return Ri(t,us(t),e)}(t,Je(s,t))}else{if(!Mn[f])return r?t:{};s=function(t,e,n){var i=t.constructor;switch(e){case Yt:return Oi(t);case Lt:case Et:return new i(+t);case qt:return function(t,e){var n=e?Oi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case Qt:case Zt:case Jt:case $t:case Kt:case te:case ee:case ne:case ie:return Ci(t,n);case Nt:return new i;case Dt:case Gt:return new i(t);case Bt:return function(t){var e=new t.constructor(t.source,Le.exec(t));return e.lastIndex=t.lastIndex,e}(t);case jt:return new i;case Vt:return function(t){return Qo?Wa(Qo.call(t)):{}}(t)}}(t,f,u)}}o||(o=new Ge);var d=o.get(t);if(d)return d;o.set(t,s),ou(t)?t.forEach(function(i){s.add(en(i,e,n,i,t,o))}):ru(t)&&t.forEach(function(i,r){s.set(r,en(i,e,n,r,t,o))});var m=h?V:(l?c?hr:lr:c?Aa:Sa)(t);return a(m||t,function(i,r){m&&(i=t[r=i]),qe(s,r,en(i,e,n,r,t,o))}),s}function nn(t,e,n){var i=n.length;if(null==t)return!i;for(t=Wa(t);i--;){var r=n[i],a=e[r],o=t[r];if(o===V&&!(r in t)||!a(o))return!1}return!0}function rn(t,e,n){if("function"!=typeof t)throw new Ya(X);return ps(function(){t.apply(V,n)},e)}function an(t,e,n,i){var r=-1,a=c,o=!0,s=t.length,u=[],f=e.length;if(!s)return u;n&&(e=h(e,L(n))),i?(a=l,o=!1):e.length>=W&&(a=O,o=!1,e=new je(e));t:for(;++r<s;){var p=t[r],d=null==n?p:n(p);if(p=i||0!==p?p:0,o&&d==d){for(var m=f;m--;)if(e[m]===d)continue t;u.push(p)}else a(e,d,i)||u.push(p)}return u}function on(t,e){var n=!0;return $o(t,function(t,i,r){return n=!!e(t,i,r)}),n}function sn(t,e,n){for(var i=-1,r=t.length;++i<r;){var a=t[i],o=e(a);if(null!=o&&(s===V?o==o&&!da(o):n(o,s)))var s=o,u=a}return u}function un(t,e){var n=[];return $o(t,function(t,i,r){e(t,i,r)&&n.push(t)}),n}function cn(t,e,n,i,r){var a=-1,o=t.length;for(n||(n=xr),r||(r=[]);++a<o;){var s=t[a];e>0&&n(s)?e>1?cn(s,e-1,n,i,r):f(r,s):i||(r[r.length]=s)}return r}function ln(t,e){return t&&ts(t,e,Sa)}function hn(t,e){return t&&es(t,e,Sa)}function fn(t,e){return u(e,function(e){return oa(t[e])})}function pn(t,e){for(var n=0,i=(e=Pi(e,t)).length;null!=t&&n<i;)t=t[Nr(e[n++])];return n&&n==i?t:V}function vn(t,e,n){var i=e(t);return tu(t)?i:f(i,n(t))}function gn(t){return null==t?t===V?Wt:Rt:go&&go in Wa(t)?function(t){var e=Ka.call(t,go),n=t[go];try{t[go]=V;var i=!0}catch(t){}var r=no.call(t);return i&&(e?t[go]=n:delete t[go]),r}(t):function(t){return no.call(t)}(t)}function yn(t,e){return t>e}function _n(t,e){return null!=t&&Ka.call(t,e)}function Sn(t,e){return null!=t&&e in Wa(t)}function Pn(t,e,n){for(var i=n?l:c,r=t[0].length,a=t.length,o=a,s=Ua(a),u=1/0,f=[];o--;){var p=t[o];o&&e&&(p=h(p,L(e))),u=Oo(p.length,u),s[o]=!n&&(e||r>=120&&p.length>=120)?new je(o&&p):V}p=t[0];var d=-1,m=s[0];t:for(;++d<r&&f.length<u;){var v=p[d],g=e?e(v):v;if(v=n||0!==v?v:0,!(m?O(m,g):i(f,g,n))){for(o=a;--o;){var y=s[o];if(!(y?O(y,g):i(t[o],g,n)))continue t}m&&m.push(g),f.push(v)}}return f}function Ln(t,e,n){var r=null==(t=Er(t,e=Pi(e,t)))?t:t[Nr(jr(e))];return null==r?V:i(r,t,n)}function On(t){return la(t)&&gn(t)==At}function Cn(t,e,n,i,r){return t===e||(null==t||null==e||!la(t)&&!la(e)?t!=t&&e!=e:function(t,e,n,i,r,a){var o=tu(t),s=tu(e),u=o?Tt:ls(t),c=s?Tt:ls(e),l=(u=u==At?kt:u)==kt,h=(c=c==At?kt:c)==kt,f=u==c;if(f&&nu(t)){if(!nu(e))return!1;o=!0,l=!1}if(f&&!l)return a||(a=new Ge),o||su(t)?ur(t,e,n,i,r,a):function(t,e,n,i,r,a,o){switch(n){case qt:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case Yt:return!(t.byteLength!=e.byteLength||!a(new uo(t),new uo(e)));case Lt:case Et:case Dt:return na(+t,+e);case Ct:return t.name==e.name&&t.message==e.message;case Bt:case Gt:return t==e+"";case Nt:var s=R;case jt:var u=i&K;if(s||(s=U),t.size!=e.size&&!u)return!1;var c=o.get(t);if(c)return c==e;i|=tt,o.set(t,e);var l=ur(s(t),s(e),i,r,a,o);return o.delete(t),l;case Vt:if(Qo)return Qo.call(t)==Qo.call(e)}return!1}(t,e,u,n,i,r,a);if(!(n&K)){var p=l&&Ka.call(t,"__wrapped__"),d=h&&Ka.call(e,"__wrapped__");if(p||d){var m=p?t.value():t,v=d?e.value():e;return a||(a=new Ge),r(m,v,n,i,a)}}return!!f&&(a||(a=new Ge),function(t,e,n,i,r,a){var o=n&K,s=lr(t),u=s.length,c=lr(e).length;if(u!=c&&!o)return!1;for(var l=u;l--;){var h=s[l];if(!(o?h in e:Ka.call(e,h)))return!1}var f=a.get(t),p=a.get(e);if(f&&p)return f==e&&p==t;var d=!0;a.set(t,e),a.set(e,t);for(var m=o;++l<u;){h=s[l];var v=t[h],g=e[h];if(i)var y=o?i(g,v,h,e,t,a):i(v,g,h,t,e,a);if(!(y===V?v===g||r(v,g,n,i,a):y)){d=!1;break}m||(m="constructor"==h)}if(d&&!m){var _=t.constructor,x=e.constructor;_!=x&&"constructor"in t&&"constructor"in e&&!("function"==typeof _&&_ instanceof _&&"function"==typeof x&&x instanceof x)&&(d=!1)}return a.delete(t),a.delete(e),d}(t,e,n,i,r,a))}(t,e,n,i,Cn,r))}function In(t,e,n,i){var r=n.length,a=r,o=!i;if(null==t)return!a;for(t=Wa(t);r--;){var s=n[r];if(o&&s[2]?s[1]!==t[s[0]]:!(s[0]in t))return!1}for(;++r<a;){var u=(s=n[r])[0],c=t[u],l=s[1];if(o&&s[2]){if(c===V&&!(u in t))return!1}else{var h=new Ge;if(i)var f=i(c,l,u,t,e,h);if(!(f===V?Cn(l,c,K|tt,i,h):f))return!1}}return!0}function Nn(t){return!(!ca(t)||function(t){return!!eo&&eo in t}(t))&&(oa(t)?ao:Ce).test(Dr(t))}function jn(t){return"function"==typeof t?t:null==t?Fa:"object"==typeof t?tu(t)?Jn(t[0],t[1]):Zn(t):Ra(t)}function Xn(t){if(!Ar(t))return Lo(t);var e=[];for(var n in Wa(t))Ka.call(t,n)&&"constructor"!=n&&e.push(n);return e}function Yn(t){if(!ca(t))return function(t){var e=[];if(null!=t)for(var n in Wa(t))e.push(n);return e}(t);var e=Ar(t),n=[];for(var i in t)("constructor"!=i||!e&&Ka.call(t,i))&&n.push(i);return n}function qn(t,e){return t<e}function Qn(t,e){var n=-1,i=ia(t)?Ua(t.length):[];return $o(t,function(t,r,a){i[++n]=e(t,r,a)}),i}function Zn(t){var e=vr(t);return 1==e.length&&e[0][2]?Pr(e[0][0],e[0][1]):function(n){return n===t||In(n,t,e)}}function Jn(t,e){return Mr(t)&&Tr(e)?Pr(Nr(t),e):function(n){var i=wa(n,t);return i===V&&i===e?Ma(n,t):Cn(e,i,K|tt)}}function $n(t,e,n,i,r){t!==e&&ts(e,function(a,o){if(r||(r=new Ge),ca(a))!function(t,e,n,i,r,a,o){var s=Or(t,n),u=Or(e,n),c=o.get(u);if(c)Ye(t,n,c);else{var l=a?a(s,u,n+"",t,e,o):V,h=l===V;if(h){var f=tu(u),p=!f&&nu(u),d=!f&&!p&&su(u);l=u,f||p||d?tu(s)?l=s:ra(s)?l=Di(s):p?(h=!1,l=Ei(u,!0)):d?(h=!1,l=Ci(u,!0)):l=[]:fa(u)||Ks(u)?(l=s,Ks(s)?l=xa(s):ca(s)&&!oa(s)||(l=_r(u))):h=!1}h&&(o.set(u,l),r(l,u,i,a,o),o.delete(u)),Ye(t,n,l)}}(t,e,o,n,$n,i,r);else{var s=i?i(Or(t,o),a,o+"",t,e,r):V;s===V&&(s=a),Ye(t,o,s)}},Aa)}function Kn(t,e){var n=t.length;if(n)return br(e+=e<0?n:0,n)?t[e]:V}function ti(t,e,n){e=e.length?h(e,function(t){return tu(t)?function(e){return pn(e,1===t.length?t[0]:t)}:t}):[Fa];var i=-1;return e=h(e,L(dr())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(Qn(t,function(t,n,r){return{criteria:h(e,function(e){return e(t)}),index:++i,value:t}}),function(t,e){return function(t,e,n){for(var i=-1,r=t.criteria,a=e.criteria,o=r.length,s=n.length;++i<o;){var u=Fi(r[i],a[i]);if(u){if(i>=s)return u;var c=n[i];return u*("desc"==c?-1:1)}}return t.index-e.index}(t,e,n)})}function ei(t,e,n){for(var i=-1,r=e.length,a={};++i<r;){var o=e[i],s=pn(t,o);n(s,o)&&ci(a,Pi(o,t),s)}return a}function ni(t,e,n,i){var r=i?x:_,a=-1,o=e.length,s=t;for(t===e&&(e=Di(e)),n&&(s=h(t,L(n)));++a<o;)for(var u=0,c=e[a],l=n?n(c):c;(u=r(s,l,u,i))>-1;)s!==t&&po.call(s,u,1),po.call(t,u,1);return t}function ii(t,e){for(var n=t?e.length:0,i=n-1;n--;){var r=e[n];if(n==i||r!==a){var a=r;br(r)?po.call(t,r,1):_i(t,r)}}return t}function ri(t,e){return t+Mo(Io()*(e-t+1))}function ai(t,e){var n="";if(!t||e<1||e>yt)return n;do{e%2&&(n+=t),(e=Mo(e/2))&&(t+=t)}while(e);return n}function oi(t,e){return ds(Lr(t,e,Fa),t+"")}function si(t){return We(Pa(t))}function ui(t,e){var n=Pa(t);return Ir(n,tn(e,0,n.length))}function ci(t,e,n,i){if(!ca(t))return t;for(var r=-1,a=(e=Pi(e,t)).length,o=a-1,s=t;null!=s&&++r<a;){var u=Nr(e[r]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(r!=o){var l=s[u];(c=i?i(l,u,s):V)===V&&(c=ca(l)?l:br(e[r+1])?[]:{})}qe(s,u,c),s=s[u]}return t}function li(t){return Ir(Pa(t))}function hi(t,e,n){var i=-1,r=t.length;e<0&&(e=-e>r?0:r+e),(n=n>r?r:n)<0&&(n+=r),r=e>n?0:n-e>>>0,e>>>=0;for(var a=Ua(r);++i<r;)a[i]=t[i+e];return a}function fi(t,e){var n;return $o(t,function(t,i,r){return!(n=e(t,i,r))}),!!n}function pi(t,e,n){var i=0,r=null==t?i:t.length;if("number"==typeof e&&e==e&&r<=Mt){for(;i<r;){var a=i+r>>>1,o=t[a];null!==o&&!da(o)&&(n?o<=e:o<e)?i=a+1:r=a}return r}return di(t,e,Fa,n)}function di(t,e,n,i){var r=0,a=null==t?0:t.length;if(0===a)return 0;for(var o=(e=n(e))!=e,s=null===e,u=da(e),c=e===V;r<a;){var l=Mo((r+a)/2),h=n(t[l]),f=h!==V,p=null===h,d=h==h,m=da(h);if(o)var v=i||d;else v=c?d&&(i||f):s?d&&f&&(i||!p):u?d&&f&&!p&&(i||!m):!p&&!m&&(i?h<=e:h<e);v?r=l+1:a=l}return Oo(a,wt)}function mi(t,e){for(var n=-1,i=t.length,r=0,a=[];++n<i;){var o=t[n],s=e?e(o):o;if(!n||!na(s,u)){var u=s;a[r++]=0===o?0:o}}return a}function vi(t){return"number"==typeof t?t:da(t)?xt:+t}function gi(t){if("string"==typeof t)return t;if(tu(t))return h(t,gi)+"";if(da(t))return Zo?Zo.call(t):"";var e=t+"";return"0"==e&&1/t==-gt?"-0":e}function yi(t,e,n){var i=-1,r=c,a=t.length,o=!0,s=[],u=s;if(n)o=!1,r=l;else if(a>=W){var h=e?null:os(t);if(h)return U(h);o=!1,r=O,u=new je}else u=e?[]:s;t:for(;++i<a;){var f=t[i],p=e?e(f):f;if(f=n||0!==f?f:0,o&&p==p){for(var d=u.length;d--;)if(u[d]===p)continue t;e&&u.push(p),s.push(f)}else r(u,p,n)||(u!==s&&u.push(p),s.push(f))}return s}function _i(t,e){return null==(t=Er(t,e=Pi(e,t)))||delete t[Nr(jr(e))]}function xi(t,e,n,i){return ci(t,e,n(pn(t,e)),i)}function bi(t,e,n,i){for(var r=t.length,a=i?r:-1;(i?a--:++a<r)&&e(t[a],a,t););return n?hi(t,i?0:a,i?a+1:r):hi(t,i?a+1:0,i?r:a)}function wi(t,e){var n=t;return n instanceof ke&&(n=n.value()),p(e,function(t,e){return e.func.apply(e.thisArg,f([t],e.args))},n)}function Mi(t,e,n){var i=t.length;if(i<2)return i?yi(t[0]):[];for(var r=-1,a=Ua(i);++r<i;)for(var o=t[r],s=-1;++s<i;)s!=r&&(a[r]=an(a[r]||o,t[s],e,n));return yi(cn(a,1),e,n)}function Si(t,e,n){for(var i=-1,r=t.length,a=e.length,o={};++i<r;){var s=i<a?e[i]:V;n(o,t[i],s)}return o}function Ai(t){return ra(t)?t:[]}function Ti(t){return"function"==typeof t?t:Fa}function Pi(t,e){return tu(t)?t:Mr(t,e)?[t]:ms(ba(t))}function Li(t,e,n){var i=t.length;return n=n===V?i:n,!e&&n>=i?t:hi(t,e,n)}function Ei(t,e){if(e)return t.slice();var n=t.length,i=co?co(n):new t.constructor(n);return t.copy(i),i}function Oi(t){var e=new t.constructor(t.byteLength);return new uo(e).set(new uo(t)),e}function Ci(t,e){var n=e?Oi(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}function Fi(t,e){if(t!==e){var n=t!==V,i=null===t,r=t==t,a=da(t),o=e!==V,s=null===e,u=e==e,c=da(e);if(!s&&!c&&!a&&t>e||a&&o&&u&&!s&&!c||i&&o&&u||!n&&u||!r)return 1;if(!i&&!a&&!c&&t<e||c&&n&&r&&!i&&!a||s&&n&&r||!o&&r||!u)return-1}return 0}function Ii(t,e,n,i){for(var r=-1,a=t.length,o=n.length,s=-1,u=e.length,c=Eo(a-o,0),l=Ua(u+c),h=!i;++s<u;)l[s]=e[s];for(;++r<o;)(h||r<a)&&(l[n[r]]=t[r]);for(;c--;)l[s++]=t[r++];return l}function Ni(t,e,n,i){for(var r=-1,a=t.length,o=-1,s=n.length,u=-1,c=e.length,l=Eo(a-s,0),h=Ua(l+c),f=!i;++r<l;)h[r]=t[r];for(var p=r;++u<c;)h[p+u]=e[u];for(;++o<s;)(f||r<a)&&(h[p+n[o]]=t[r++]);return h}function Di(t,e){var n=-1,i=t.length;for(e||(e=Ua(i));++n<i;)e[n]=t[n];return e}function Ri(t,e,n,i){var r=!n;n||(n={});for(var a=-1,o=e.length;++a<o;){var s=e[a],u=i?i(n[s],t[s],s,n,t):V;u===V&&(u=t[s]),r?$e(n,s,u):qe(n,s,u)}return n}function ki(t,e){return function(n,i){var a=tu(n)?r:Ze,o=e?e():{};return a(n,t,dr(i,2),o)}}function zi(t){return oi(function(e,n){var i=-1,r=n.length,a=r>1?n[r-1]:V,o=r>2?n[2]:V;for(a=t.length>3&&"function"==typeof a?(r--,a):V,o&&wr(n[0],n[1],o)&&(a=r<3?V:a,r=1),e=Wa(e);++i<r;){var s=n[i];s&&t(e,s,i,a)}return e})}function Ui(t,e){return function(n,i){if(null==n)return n;if(!ia(n))return t(n,i);for(var r=n.length,a=e?r:-1,o=Wa(n);(e?a--:++a<r)&&!1!==i(o[a],a,o););return n}}function Bi(t){return function(e,n,i){for(var r=-1,a=Wa(e),o=i(e),s=o.length;s--;){var u=o[t?s:++r];if(!1===n(a[u],u,a))break}return e}}function ji(t){return function(e){var n=N(e=ba(e))?j(e):V,i=n?n[0]:e.charAt(0),r=n?Li(n,1).join(""):e.slice(1);return i[t]()+r}}function Gi(t){return function(e){return p(Oa(Ea(e).replace(dn,"")),t,"")}}function Vi(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Jo(t.prototype),i=t.apply(n,e);return ca(i)?i:n}}function Wi(t,e,n){var r=Vi(t);return function a(){for(var o=arguments.length,s=Ua(o),u=o,c=pr(a);u--;)s[u]=arguments[u];var l=o<3&&s[0]!==c&&s[o-1]!==c?[]:z(s,c);return(o-=l.length)<n?er(t,e,Yi,a.placeholder,V,s,l,V,V,n-o):i(this&&this!==En&&this instanceof a?r:t,this,s)}}function Hi(t){return function(e,n,i){var r=Wa(e);if(!ia(e)){var a=dr(n,3);e=Sa(e),n=function(t){return a(r[t],t,r)}}var o=t(e,n,i);return o>-1?r[a?e[o]:o]:V}}function Xi(t){return cr(function(e){var n=e.length,i=n,r=Ae.prototype.thru;for(t&&e.reverse();i--;){var a=e[i];if("function"!=typeof a)throw new Ya(X);if(r&&!o&&"wrapper"==fr(a))var o=new Ae([],!0)}for(i=o?i:n;++i<n;){var s=fr(a=e[i]),u="wrapper"==s?ss(a):V;o=u&&Sr(u[0])&&u[1]==(ut|rt|ot|ct)&&!u[4].length&&1==u[9]?o[fr(u[0])].apply(o,u[3]):1==a.length&&Sr(a)?o[s]():o.thru(a)}return function(){var t=arguments,i=t[0];if(o&&1==t.length&&tu(i))return o.plant(i).value();for(var r=0,a=n?e[r].apply(this,t):i;++r<n;)a=e[r].call(this,a);return a}})}function Yi(t,e,n,i,r,a,o,s,u,c){var l=e&ut,h=e&et,f=e&nt,p=e&(rt|at),d=e&lt,m=f?V:Vi(t);return function v(){for(var g=arguments.length,y=Ua(g),_=g;_--;)y[_]=arguments[_];if(p)var x=pr(v),b=function(t,e){for(var n=t.length,i=0;n--;)t[n]===e&&++i;return i}(y,x);if(i&&(y=Ii(y,i,r,p)),a&&(y=Ni(y,a,o,p)),g-=b,p&&g<c){var w=z(y,x);return er(t,e,Yi,v.placeholder,n,y,w,s,u,c-g)}var M=h?n:this,S=f?M[t]:t;return g=y.length,s?y=function(t,e){for(var n=t.length,i=Oo(e.length,n),r=Di(t);i--;){var a=e[i];t[i]=br(a,n)?r[a]:V}return t}(y,s):d&&g>1&&y.reverse(),l&&u<g&&(y.length=u),this&&this!==En&&this instanceof v&&(S=m||Vi(S)),S.apply(M,y)}}function qi(t,e){return function(n,i){return function(t,e,n,i){return ln(t,function(t,r,a){e(i,n(t),r,a)}),i}(n,t,e(i),{})}}function Qi(t,e){return function(n,i){var r;if(n===V&&i===V)return e;if(n!==V&&(r=n),i!==V){if(r===V)return i;"string"==typeof n||"string"==typeof i?(n=gi(n),i=gi(i)):(n=vi(n),i=vi(i)),r=t(n,i)}return r}}function Zi(t){return cr(function(e){return e=h(e,L(dr())),oi(function(n){var r=this;return t(e,function(t){return i(t,r,n)})})})}function Ji(t,e){var n=(e=e===V?" ":gi(e)).length;if(n<2)return n?ai(e,t):e;var i=ai(e,wo(t/B(e)));return N(e)?Li(j(i),0,t).join(""):i.slice(0,t)}function $i(t,e,n,r){var a=e&et,o=Vi(t);return function e(){for(var s=-1,u=arguments.length,c=-1,l=r.length,h=Ua(l+u),f=this&&this!==En&&this instanceof e?o:t;++c<l;)h[c]=r[c];for(;u--;)h[c++]=arguments[++s];return i(f,a?n:this,h)}}function Ki(t){return function(e,n,i){return i&&"number"!=typeof i&&wr(e,n,i)&&(n=i=V),e=va(e),n===V?(n=e,e=0):n=va(n),function(t,e,n,i){for(var r=-1,a=Eo(wo((e-t)/(n||1)),0),o=Ua(a);a--;)o[i?a:++r]=t,t+=n;return o}(e,n,i=i===V?e<n?1:-1:va(i),t)}}function tr(t){return function(e,n){return"string"==typeof e&&"string"==typeof n||(e=_a(e),n=_a(n)),t(e,n)}}function er(t,e,n,i,r,a,o,s,u,c){var l=e&rt;e|=l?ot:st,(e&=~(l?st:ot))&it||(e&=~(et|nt));var h=[t,e,r,l?a:V,l?o:V,l?V:a,l?V:o,s,u,c],f=n.apply(V,h);return Sr(t)&&fs(f,h),f.placeholder=i,Cr(f,t,e)}function nr(t){var e=Va[t];return function(t,n){if(t=_a(t),(n=null==n?0:Oo(ga(n),292))&&To(t)){var i=(ba(t)+"e").split("e");return+((i=(ba(e(i[0]+"e"+(+i[1]+n)))+"e").split("e"))[0]+"e"+(+i[1]-n))}return e(t)}}function ir(t){return function(e){var n=ls(e);return n==Nt?R(e):n==jt?function(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=[t,t]}),n}(e):function(t,e){return h(e,function(e){return[e,t[e]]})}(e,t(e))}}function rr(t,e,n,i,r,a,o,s){var u=e&nt;if(!u&&"function"!=typeof t)throw new Ya(X);var c=i?i.length:0;if(c||(e&=~(ot|st),i=r=V),o=o===V?o:Eo(ga(o),0),s=s===V?s:ga(s),c-=r?r.length:0,e&st){var l=i,h=r;i=r=V}var f=u?V:ss(t),p=[t,e,n,i,r,l,h,a,o,s];if(f&&function(t,e){var n=t[1],i=e[1],r=n|i,a=r<(et|nt|ut),o=i==ut&&n==rt||i==ut&&n==ct&&t[7].length<=e[8]||i==(ut|ct)&&e[7].length<=e[8]&&n==rt;if(!a&&!o)return t;i&et&&(t[2]=e[2],r|=n&et?0:it);var s=e[3];if(s){var u=t[3];t[3]=u?Ii(u,s,e[4]):s,t[4]=u?z(t[3],Q):e[4]}(s=e[5])&&(u=t[5],t[5]=u?Ni(u,s,e[6]):s,t[6]=u?z(t[5],Q):e[6]),(s=e[7])&&(t[7]=s),i&ut&&(t[8]=null==t[8]?e[8]:Oo(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=r}(p,f),t=p[0],e=p[1],n=p[2],i=p[3],r=p[4],!(s=p[9]=p[9]===V?u?0:t.length:Eo(p[9]-c,0))&&e&(rt|at)&&(e&=~(rt|at)),e&&e!=et)d=e==rt||e==at?Wi(t,e,s):e!=ot&&e!=(et|ot)||r.length?Yi.apply(V,p):$i(t,e,n,i);else var d=function(t,e,n){var i=e&et,r=Vi(t);return function e(){return(this&&this!==En&&this instanceof e?r:t).apply(i?n:this,arguments)}}(t,e,n);return Cr((f?ns:fs)(d,p),t,e)}function ar(t,e,n,i){return t===V||na(t,Za[n])&&!Ka.call(i,n)?e:t}function or(t,e,n,i,r,a){return ca(t)&&ca(e)&&(a.set(e,t),$n(t,e,V,or,a),a.delete(e)),t}function sr(t){return fa(t)?V:t}function ur(t,e,n,i,r,a){var o=n&K,s=t.length,u=e.length;if(s!=u&&!(o&&u>s))return!1;var c=a.get(t),l=a.get(e);if(c&&l)return c==e&&l==t;var h=-1,f=!0,p=n&tt?new je:V;for(a.set(t,e),a.set(e,t);++h<s;){var d=t[h],v=e[h];if(i)var g=o?i(v,d,h,e,t,a):i(d,v,h,t,e,a);if(g!==V){if(g)continue;f=!1;break}if(p){if(!m(e,function(t,e){if(!O(p,e)&&(d===t||r(d,t,n,i,a)))return p.push(e)})){f=!1;break}}else if(d!==v&&!r(d,v,n,i,a)){f=!1;break}}return a.delete(t),a.delete(e),f}function cr(t){return ds(Lr(t,V,Ur),t+"")}function lr(t){return vn(t,Sa,us)}function hr(t){return vn(t,Aa,cs)}function fr(t){for(var e=t.name+"",n=Go[e],i=Ka.call(Go,e)?n.length:0;i--;){var r=n[i],a=r.func;if(null==a||a==t)return r.name}return e}function pr(t){return(Ka.call(n,"placeholder")?n:t).placeholder}function dr(){var t=n.iteratee||Ia;return t=t===Ia?jn:t,arguments.length?t(arguments[0],arguments[1]):t}function mr(t,e){var n=t.__data__;return function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}(e)?n["string"==typeof e?"string":"hash"]:n.map}function vr(t){for(var e=Sa(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,Tr(r)]}return e}function gr(t,e){var n=function(t,e){return null==t?V:t[e]}(t,e);return Nn(n)?n:V}function yr(t,e,n){for(var i=-1,r=(e=Pi(e,t)).length,a=!1;++i<r;){var o=Nr(e[i]);if(!(a=null!=t&&n(t,o)))break;t=t[o]}return a||++i!=r?a:!!(r=null==t?0:t.length)&&ua(r)&&br(o,r)&&(tu(t)||Ks(t))}function _r(t){return"function"!=typeof t.constructor||Ar(t)?{}:Jo(lo(t))}function xr(t){return tu(t)||Ks(t)||!!(mo&&t&&t[mo])}function br(t,e){var n=typeof t;return!!(e=null==e?yt:e)&&("number"==n||"symbol"!=n&&Ie.test(t))&&t>-1&&t%1==0&&t<e}function wr(t,e,n){if(!ca(n))return!1;var i=typeof e;return!!("number"==i?ia(n)&&br(e,n.length):"string"==i&&e in n)&&na(n[e],t)}function Mr(t,e){if(tu(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!da(t))||me.test(t)||!de.test(t)||null!=e&&t in Wa(e)}function Sr(t){var e=fr(t),i=n[e];if("function"!=typeof i||!(e in ke.prototype))return!1;if(t===i)return!0;var r=ss(i);return!!r&&t===r[0]}function Ar(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Za)}function Tr(t){return t==t&&!ca(t)}function Pr(t,e){return function(n){return null!=n&&n[t]===e&&(e!==V||t in Wa(n))}}function Lr(t,e,n){return e=Eo(e===V?t.length-1:e,0),function(){for(var r=arguments,a=-1,o=Eo(r.length-e,0),s=Ua(o);++a<o;)s[a]=r[e+a];a=-1;for(var u=Ua(e+1);++a<e;)u[a]=r[a];return u[e]=n(s),i(t,this,u)}}function Er(t,e){return e.length<2?t:pn(t,hi(e,0,-1))}function Or(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}function Cr(t,e,n){var i=e+"";return ds(t,function(t,e){var n=e.length;if(!n)return t;var i=n-1;return e[i]=(n>1?"& ":"")+e[i],e=e.join(n>2?", ":" "),t.replace(we,"{\n/* [wrapped with "+e+"] */\n")}(i,function(t,e){return a(St,function(n){var i="_."+n[0];e&n[1]&&!c(t,i)&&t.push(i)}),t.sort()}(function(t){var e=t.match(Me);return e?e[1].split(Se):[]}(i),n)))}function Fr(t){var e=0,n=0;return function(){var i=Co(),r=dt-(i-n);if(n=i,r>0){if(++e>=pt)return arguments[0]}else e=0;return t.apply(V,arguments)}}function Ir(t,e){var n=-1,i=t.length,r=i-1;for(e=e===V?i:e;++n<e;){var a=ri(n,r),o=t[a];t[a]=t[n],t[n]=o}return t.length=e,t}function Nr(t){if("string"==typeof t||da(t))return t;var e=t+"";return"0"==e&&1/t==-gt?"-0":e}function Dr(t){if(null!=t){try{return $a.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Rr(t){if(t instanceof ke)return t.clone();var e=new Ae(t.__wrapped__,t.__chain__);return e.__actions__=Di(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}function kr(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ga(n);return r<0&&(r=Eo(i+r,0)),y(t,dr(e,3),r)}function zr(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i-1;return n!==V&&(r=ga(n),r=n<0?Eo(i+r,0):Oo(r,i-1)),y(t,dr(e,3),r,!0)}function Ur(t){return null!=t&&t.length?cn(t,1):[]}function Br(t){return t&&t.length?t[0]:V}function jr(t){var e=null==t?0:t.length;return e?t[e-1]:V}function Gr(t,e){return t&&t.length&&e&&e.length?ni(t,e):t}function Vr(t){return null==t?t:No.call(t)}function Wr(t){if(!t||!t.length)return[];var e=0;return t=u(t,function(t){if(ra(t))return e=Eo(t.length,e),!0}),P(e,function(e){return h(t,M(e))})}function Hr(t,e){if(!t||!t.length)return[];var n=Wr(t);return null==e?n:h(n,function(t){return i(e,V,t)})}function Xr(t){var e=n(t);return e.__chain__=!0,e}function Yr(t,e){return e(t)}function qr(t,e){return(tu(t)?a:$o)(t,dr(e,3))}function Qr(t,e){return(tu(t)?o:Ko)(t,dr(e,3))}function Zr(t,e){return(tu(t)?h:Qn)(t,dr(e,3))}function Jr(t,e,n){return e=n?V:e,e=t&&null==e?t.length:e,rr(t,ut,V,V,V,V,e)}function $r(t,e){var n;if("function"!=typeof e)throw new Ya(X);return t=ga(t),function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=V),n}}function Kr(t,e,n){function i(e){var n=u,i=c;return u=c=V,d=e,h=t.apply(i,n)}function r(t){var n=t-p;return p===V||n>=e||n<0||v&&t-d>=l}function a(){var t=Gs();return r(t)?o(t):void(f=ps(a,function(t){var n=e-(t-p);return v?Oo(n,l-(t-d)):n}(t)))}function o(t){return f=V,g&&u?i(t):(u=c=V,h)}function s(){var t=Gs(),n=r(t);if(u=arguments,c=this,p=t,n){if(f===V)return function(t){return d=t,f=ps(a,e),m?i(t):h}(p);if(v)return as(f),f=ps(a,e),i(p)}return f===V&&(f=ps(a,e)),h}var u,c,l,h,f,p,d=0,m=!1,v=!1,g=!0;if("function"!=typeof t)throw new Ya(X);return e=_a(e)||0,ca(n)&&(m=!!n.leading,l=(v="maxWait"in n)?Eo(_a(n.maxWait)||0,e):l,g="trailing"in n?!!n.trailing:g),s.cancel=function(){f!==V&&as(f),d=0,u=p=c=f=V},s.flush=function(){return f===V?h:o(Gs())},s}function ta(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Ya(X);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],a=n.cache;if(a.has(r))return a.get(r);var o=t.apply(this,i);return n.cache=a.set(r,o)||a,o};return n.cache=new(ta.Cache||Be),n}function ea(t){if("function"!=typeof t)throw new Ya(X);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}function na(t,e){return t===e||t!=t&&e!=e}function ia(t){return null!=t&&ua(t.length)&&!oa(t)}function ra(t){return la(t)&&ia(t)}function aa(t){if(!la(t))return!1;var e=gn(t);return e==Ct||e==Ot||"string"==typeof t.message&&"string"==typeof t.name&&!fa(t)}function oa(t){if(!ca(t))return!1;var e=gn(t);return e==Ft||e==It||e==Pt||e==Ut}function sa(t){return"number"==typeof t&&t==ga(t)}function ua(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=yt}function ca(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function la(t){return null!=t&&"object"==typeof t}function ha(t){return"number"==typeof t||la(t)&&gn(t)==Dt}function fa(t){if(!la(t)||gn(t)!=kt)return!1;var e=lo(t);if(null===e)return!0;var n=Ka.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&$a.call(n)==io}function pa(t){return"string"==typeof t||!tu(t)&&la(t)&&gn(t)==Gt}function da(t){return"symbol"==typeof t||la(t)&&gn(t)==Vt}function ma(t){if(!t)return[];if(ia(t))return pa(t)?j(t):Di(t);if(vo&&t[vo])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[vo]());var e=ls(t);return(e==Nt?R:e==jt?U:Pa)(t)}function va(t){return t?(t=_a(t))===gt||t===-gt?(t<0?-1:1)*_t:t==t?t:0:0===t?t:0}function ga(t){var e=va(t),n=e%1;return e==e?n?e-n:e:0}function ya(t){return t?tn(ga(t),0,bt):0}function _a(t){if("number"==typeof t)return t;if(da(t))return xt;if(ca(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=ca(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(_e,"");var n=Oe.test(t);return n||Fe.test(t)?Tn(t.slice(2),n?2:8):Ee.test(t)?xt:+t}function xa(t){return Ri(t,Aa(t))}function ba(t){return null==t?"":gi(t)}function wa(t,e,n){var i=null==t?V:pn(t,e);return i===V?n:i}function Ma(t,e){return null!=t&&yr(t,e,Sn)}function Sa(t){return ia(t)?Ve(t):Xn(t)}function Aa(t){return ia(t)?Ve(t,!0):Yn(t)}function Ta(t,e){if(null==t)return{};var n=h(hr(t),function(t){return[t]});return e=dr(e),ei(t,n,function(t,n){return e(t,n[0])})}function Pa(t){return null==t?[]:E(t,Sa(t))}function La(t){return Iu(ba(t).toLowerCase())}function Ea(t){return(t=ba(t))&&t.replace(Ne,Gn).replace(mn,"")}function Oa(t,e,n){return t=ba(t),(e=n?V:e)===V?D(t)?G(t):v(t):t.match(e)||[]}function Ca(t){return function(){return t}}function Fa(t){return t}function Ia(t){return jn("function"==typeof t?t:en(t,Z))}function Na(t,e,n){var i=Sa(e),r=fn(e,i);null!=n||ca(e)&&(r.length||!i.length)||(n=e,e=t,t=this,r=fn(e,Sa(e)));var o=!(ca(n)&&"chain"in n&&!n.chain),s=oa(t);return a(r,function(n){var i=e[n];t[n]=i,s&&(t.prototype[n]=function(){var e=this.__chain__;if(o||e){var n=t(this.__wrapped__);return(n.__actions__=Di(this.__actions__)).push({func:i,args:arguments,thisArg:t}),n.__chain__=e,n}return i.apply(t,f([this.value()],arguments))})}),t}function Da(){}function Ra(t){return Mr(t)?M(Nr(t)):function(t){return function(e){return pn(e,t)}}(t)}function ka(){return[]}function za(){return!1}var Ua=(e=null==e?En:Hn.defaults(En.Object(),e,Hn.pick(En,xn))).Array,Ba=e.Date,ja=e.Error,Ga=e.Function,Va=e.Math,Wa=e.Object,Ha=e.RegExp,Xa=e.String,Ya=e.TypeError,qa=Ua.prototype,Qa=Ga.prototype,Za=Wa.prototype,Ja=e["__core-js_shared__"],$a=Qa.toString,Ka=Za.hasOwnProperty,to=0,eo=function(){var t=/[^.]+$/.exec(Ja&&Ja.keys&&Ja.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),no=Za.toString,io=$a.call(Wa),ro=En._,ao=Ha("^"+$a.call(Ka).replace(ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),oo=Fn?e.Buffer:V,so=e.Symbol,uo=e.Uint8Array,co=oo?oo.allocUnsafe:V,lo=k(Wa.getPrototypeOf,Wa),ho=Wa.create,fo=Za.propertyIsEnumerable,po=qa.splice,mo=so?so.isConcatSpreadable:V,vo=so?so.iterator:V,go=so?so.toStringTag:V,yo=function(){try{var t=gr(Wa,"defineProperty");return t({},"",{}),t}catch(t){}}(),_o=e.clearTimeout!==En.clearTimeout&&e.clearTimeout,xo=Ba&&Ba.now!==En.Date.now&&Ba.now,bo=e.setTimeout!==En.setTimeout&&e.setTimeout,wo=Va.ceil,Mo=Va.floor,So=Wa.getOwnPropertySymbols,Ao=oo?oo.isBuffer:V,To=e.isFinite,Po=qa.join,Lo=k(Wa.keys,Wa),Eo=Va.max,Oo=Va.min,Co=Ba.now,Fo=e.parseInt,Io=Va.random,No=qa.reverse,Do=gr(e,"DataView"),Ro=gr(e,"Map"),ko=gr(e,"Promise"),zo=gr(e,"Set"),Uo=gr(e,"WeakMap"),Bo=gr(Wa,"create"),jo=Uo&&new Uo,Go={},Vo=Dr(Do),Wo=Dr(Ro),Ho=Dr(ko),Xo=Dr(zo),Yo=Dr(Uo),qo=so?so.prototype:V,Qo=qo?qo.valueOf:V,Zo=qo?qo.toString:V,Jo=function(){function t(){}return function(e){if(!ca(e))return{};if(ho)return ho(e);t.prototype=e;var n=new t;return t.prototype=V,n}}();n.templateSettings={escape:he,evaluate:fe,interpolate:pe,variable:"",imports:{_:n}},n.prototype=S.prototype,n.prototype.constructor=n,Ae.prototype=Jo(S.prototype),Ae.prototype.constructor=Ae,ke.prototype=Jo(S.prototype),ke.prototype.constructor=ke,ze.prototype.clear=function(){this.__data__=Bo?Bo(null):{},this.size=0},ze.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ze.prototype.get=function(t){var e=this.__data__;if(Bo){var n=e[t];return n===Y?V:n}return Ka.call(e,t)?e[t]:V},ze.prototype.has=function(t){var e=this.__data__;return Bo?e[t]!==V:Ka.call(e,t)},ze.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Bo&&e===V?Y:e,this},Ue.prototype.clear=function(){this.__data__=[],this.size=0},Ue.prototype.delete=function(t){var e=this.__data__,n=Qe(e,t);return!(n<0||(n==e.length-1?e.pop():po.call(e,n,1),--this.size,0))},Ue.prototype.get=function(t){var e=this.__data__,n=Qe(e,t);return n<0?V:e[n][1]},Ue.prototype.has=function(t){return Qe(this.__data__,t)>-1},Ue.prototype.set=function(t,e){var n=this.__data__,i=Qe(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this},Be.prototype.clear=function(){this.size=0,this.__data__={hash:new ze,map:new(Ro||Ue),string:new ze}},Be.prototype.delete=function(t){var e=mr(this,t).delete(t);return this.size-=e?1:0,e},Be.prototype.get=function(t){return mr(this,t).get(t)},Be.prototype.has=function(t){return mr(this,t).has(t)},Be.prototype.set=function(t,e){var n=mr(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this},je.prototype.add=je.prototype.push=function(t){return this.__data__.set(t,Y),this},je.prototype.has=function(t){return this.__data__.has(t)},Ge.prototype.clear=function(){this.__data__=new Ue,this.size=0},Ge.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},Ge.prototype.get=function(t){return this.__data__.get(t)},Ge.prototype.has=function(t){return this.__data__.has(t)},Ge.prototype.set=function(t,e){var n=this.__data__;if(n instanceof Ue){var i=n.__data__;if(!Ro||i.length<W-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new Be(i)}return n.set(t,e),this.size=n.size,this};var $o=Ui(ln),Ko=Ui(hn,!0),ts=Bi(),es=Bi(!0),ns=jo?function(t,e){return jo.set(t,e),t}:Fa,is=yo?function(t,e){return yo(t,"toString",{configurable:!0,enumerable:!1,value:Ca(e),writable:!0})}:Fa,rs=oi,as=_o||function(t){return En.clearTimeout(t)},os=zo&&1/U(new zo([,-0]))[1]==gt?function(t){return new zo(t)}:Da,ss=jo?function(t){return jo.get(t)}:Da,us=So?function(t){return null==t?[]:(t=Wa(t),u(So(t),function(e){return fo.call(t,e)}))}:ka,cs=So?function(t){for(var e=[];t;)f(e,us(t)),t=lo(t);return e}:ka,ls=gn;(Do&&ls(new Do(new ArrayBuffer(1)))!=qt||Ro&&ls(new Ro)!=Nt||ko&&ls(ko.resolve())!=zt||zo&&ls(new zo)!=jt||Uo&&ls(new Uo)!=Ht)&&(ls=function(t){var e=gn(t),n=e==kt?t.constructor:V,i=n?Dr(n):"";if(i)switch(i){case Vo:return qt;case Wo:return Nt;case Ho:return zt;case Xo:return jt;case Yo:return Ht}return e});var hs=Ja?oa:za,fs=Fr(ns),ps=bo||function(t,e){return En.setTimeout(t,e)},ds=Fr(is),ms=function(t){var e=ta(t,function(t){return n.size===q&&n.clear(),t}),n=e.cache;return e}(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ve,function(t,n,i,r){e.push(i?r.replace(Te,"$1"):n||t)}),e}),vs=oi(function(t,e){return ra(t)?an(t,cn(e,1,ra,!0)):[]}),gs=oi(function(t,e){var n=jr(e);return ra(n)&&(n=V),ra(t)?an(t,cn(e,1,ra,!0),dr(n,2)):[]}),ys=oi(function(t,e){var n=jr(e);return ra(n)&&(n=V),ra(t)?an(t,cn(e,1,ra,!0),V,n):[]}),_s=oi(function(t){var e=h(t,Ai);return e.length&&e[0]===t[0]?Pn(e):[]}),xs=oi(function(t){var e=jr(t),n=h(t,Ai);return e===jr(n)?e=V:n.pop(),n.length&&n[0]===t[0]?Pn(n,dr(e,2)):[]}),bs=oi(function(t){var e=jr(t),n=h(t,Ai);return(e="function"==typeof e?e:V)&&n.pop(),n.length&&n[0]===t[0]?Pn(n,V,e):[]}),ws=oi(Gr),Ms=cr(function(t,e){var n=null==t?0:t.length,i=Ke(t,e);return ii(t,h(e,function(t){return br(t,n)?+t:t}).sort(Fi)),i}),Ss=oi(function(t){return yi(cn(t,1,ra,!0))}),As=oi(function(t){var e=jr(t);return ra(e)&&(e=V),yi(cn(t,1,ra,!0),dr(e,2))}),Ts=oi(function(t){var e=jr(t);return e="function"==typeof e?e:V,yi(cn(t,1,ra,!0),V,e)}),Ps=oi(function(t,e){return ra(t)?an(t,e):[]}),Ls=oi(function(t){return Mi(u(t,ra))}),Es=oi(function(t){var e=jr(t);return ra(e)&&(e=V),Mi(u(t,ra),dr(e,2))}),Os=oi(function(t){var e=jr(t);return e="function"==typeof e?e:V,Mi(u(t,ra),V,e)}),Cs=oi(Wr),Fs=oi(function(t){var e=t.length,n=e>1?t[e-1]:V;return n="function"==typeof n?(t.pop(),n):V,Hr(t,n)}),Is=cr(function(t){var e=t.length,n=e?t[0]:0,i=this.__wrapped__,r=function(e){return Ke(e,t)};return!(e>1||this.__actions__.length)&&i instanceof ke&&br(n)?((i=i.slice(n,+n+(e?1:0))).__actions__.push({func:Yr,args:[r],thisArg:V}),new Ae(i,this.__chain__).thru(function(t){return e&&!t.length&&t.push(V),t})):this.thru(r)}),Ns=ki(function(t,e,n){Ka.call(t,n)?++t[n]:$e(t,n,1)}),Ds=Hi(kr),Rs=Hi(zr),ks=ki(function(t,e,n){Ka.call(t,n)?t[n].push(e):$e(t,n,[e])}),zs=oi(function(t,e,n){var r=-1,a="function"==typeof e,o=ia(t)?Ua(t.length):[];return $o(t,function(t){o[++r]=a?i(e,t,n):Ln(t,e,n)}),o}),Us=ki(function(t,e,n){$e(t,n,e)}),Bs=ki(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),js=oi(function(t,e){if(null==t)return[];var n=e.length;return n>1&&wr(t,e[0],e[1])?e=[]:n>2&&wr(e[0],e[1],e[2])&&(e=[e[0]]),ti(t,cn(e,1),[])}),Gs=xo||function(){return En.Date.now()},Vs=oi(function(t,e,n){var i=et;if(n.length){var r=z(n,pr(Vs));i|=ot}return rr(t,i,e,n,r)}),Ws=oi(function(t,e,n){var i=et|nt;if(n.length){var r=z(n,pr(Ws));i|=ot}return rr(e,i,t,n,r)}),Hs=oi(function(t,e){return rn(t,1,e)}),Xs=oi(function(t,e,n){return rn(t,_a(e)||0,n)});ta.Cache=Be;var Ys=rs(function(t,e){var n=(e=1==e.length&&tu(e[0])?h(e[0],L(dr())):h(cn(e,1),L(dr()))).length;return oi(function(r){for(var a=-1,o=Oo(r.length,n);++a<o;)r[a]=e[a].call(this,r[a]);return i(t,this,r)})}),qs=oi(function(t,e){var n=z(e,pr(qs));return rr(t,ot,V,e,n)}),Qs=oi(function(t,e){var n=z(e,pr(Qs));return rr(t,st,V,e,n)}),Zs=cr(function(t,e){return rr(t,ct,V,V,V,e)}),Js=tr(yn),$s=tr(function(t,e){return t>=e}),Ks=On(function(){return arguments}())?On:function(t){return la(t)&&Ka.call(t,"callee")&&!fo.call(t,"callee")},tu=Ua.isArray,eu=Dn?L(Dn):function(t){return la(t)&&gn(t)==Yt},nu=Ao||za,iu=Rn?L(Rn):function(t){return la(t)&&gn(t)==Et},ru=kn?L(kn):function(t){return la(t)&&ls(t)==Nt},au=zn?L(zn):function(t){return la(t)&&gn(t)==Bt},ou=Un?L(Un):function(t){return la(t)&&ls(t)==jt},su=Bn?L(Bn):function(t){return la(t)&&ua(t.length)&&!!wn[gn(t)]},uu=tr(qn),cu=tr(function(t,e){return t<=e}),lu=zi(function(t,e){if(Ar(e)||ia(e))Ri(e,Sa(e),t);else for(var n in e)Ka.call(e,n)&&qe(t,n,e[n])}),hu=zi(function(t,e){Ri(e,Aa(e),t)}),fu=zi(function(t,e,n,i){Ri(e,Aa(e),t,i)}),pu=zi(function(t,e,n,i){Ri(e,Sa(e),t,i)}),du=cr(Ke),mu=oi(function(t,e){t=Wa(t);var n=-1,i=e.length,r=i>2?e[2]:V;for(r&&wr(e[0],e[1],r)&&(i=1);++n<i;)for(var a=e[n],o=Aa(a),s=-1,u=o.length;++s<u;){var c=o[s],l=t[c];(l===V||na(l,Za[c])&&!Ka.call(t,c))&&(t[c]=a[c])}return t}),vu=oi(function(t){return t.push(V,or),i(bu,V,t)}),gu=qi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=no.call(e)),t[e]=n},Ca(Fa)),yu=qi(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=no.call(e)),Ka.call(t,e)?t[e].push(n):t[e]=[n]},dr),_u=oi(Ln),xu=zi(function(t,e,n){$n(t,e,n)}),bu=zi(function(t,e,n,i){$n(t,e,n,i)}),wu=cr(function(t,e){var n={};if(null==t)return n;var i=!1;e=h(e,function(e){return e=Pi(e,t),i||(i=e.length>1),e}),Ri(t,hr(t),n),i&&(n=en(n,Z|J|$,sr));for(var r=e.length;r--;)_i(n,e[r]);return n}),Mu=cr(function(t,e){return null==t?{}:function(t,e){return ei(t,e,function(e,n){return Ma(t,n)})}(t,e)}),Su=ir(Sa),Au=ir(Aa),Tu=Gi(function(t,e,n){return e=e.toLowerCase(),t+(n?La(e):e)}),Pu=Gi(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Lu=Gi(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),Eu=ji("toLowerCase"),Ou=Gi(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Cu=Gi(function(t,e,n){return t+(n?" ":"")+Iu(e)}),Fu=Gi(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Iu=ji("toUpperCase"),Nu=oi(function(t,e){try{return i(t,V,e)}catch(t){return aa(t)?t:new ja(t)}}),Du=cr(function(t,e){return a(e,function(e){e=Nr(e),$e(t,e,Vs(t[e],t))}),t}),Ru=Xi(),ku=Xi(!0),zu=oi(function(t,e){return function(n){return Ln(n,t,e)}}),Uu=oi(function(t,e){return function(n){return Ln(t,n,e)}}),Bu=Zi(h),ju=Zi(s),Gu=Zi(m),Vu=Ki(),Wu=Ki(!0),Hu=Qi(function(t,e){return t+e},0),Xu=nr("ceil"),Yu=Qi(function(t,e){return t/e},1),qu=nr("floor"),Qu=Qi(function(t,e){return t*e},1),Zu=nr("round"),Ju=Qi(function(t,e){return t-e},0);return n.after=function(t,e){if("function"!=typeof e)throw new Ya(X);return t=ga(t),function(){if(--t<1)return e.apply(this,arguments)}},n.ary=Jr,n.assign=lu,n.assignIn=hu,n.assignInWith=fu,n.assignWith=pu,n.at=du,n.before=$r,n.bind=Vs,n.bindAll=Du,n.bindKey=Ws,n.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return tu(t)?t:[t]},n.chain=Xr,n.chunk=function(t,e,n){e=(n?wr(t,e,n):e===V)?1:Eo(ga(e),0);var i=null==t?0:t.length;if(!i||e<1)return[];for(var r=0,a=0,o=Ua(wo(i/e));r<i;)o[a++]=hi(t,r,r+=e);return o},n.compact=function(t){for(var e=-1,n=null==t?0:t.length,i=0,r=[];++e<n;){var a=t[e];a&&(r[i++]=a)}return r},n.concat=function(){var t=arguments.length;if(!t)return[];for(var e=Ua(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return f(tu(n)?Di(n):[n],cn(e,1))},n.cond=function(t){var e=null==t?0:t.length,n=dr();return t=e?h(t,function(t){if("function"!=typeof t[1])throw new Ya(X);return[n(t[0]),t[1]]}):[],oi(function(n){for(var r=-1;++r<e;){var a=t[r];if(i(a[0],this,n))return i(a[1],this,n)}})},n.conforms=function(t){return function(t){var e=Sa(t);return function(n){return nn(n,t,e)}}(en(t,Z))},n.constant=Ca,n.countBy=Ns,n.create=function(t,e){var n=Jo(t);return null==e?n:Je(n,e)},n.curry=function t(e,n,i){var r=rr(e,rt,V,V,V,V,V,n=i?V:n);return r.placeholder=t.placeholder,r},n.curryRight=function t(e,n,i){var r=rr(e,at,V,V,V,V,V,n=i?V:n);return r.placeholder=t.placeholder,r},n.debounce=Kr,n.defaults=mu,n.defaultsDeep=vu,n.defer=Hs,n.delay=Xs,n.difference=vs,n.differenceBy=gs,n.differenceWith=ys,n.drop=function(t,e,n){var i=null==t?0:t.length;return i?hi(t,(e=n||e===V?1:ga(e))<0?0:e,i):[]},n.dropRight=function(t,e,n){var i=null==t?0:t.length;return i?hi(t,0,(e=i-(e=n||e===V?1:ga(e)))<0?0:e):[]},n.dropRightWhile=function(t,e){return t&&t.length?bi(t,dr(e,3),!0,!0):[]},n.dropWhile=function(t,e){return t&&t.length?bi(t,dr(e,3),!0):[]},n.fill=function(t,e,n,i){var r=null==t?0:t.length;return r?(n&&"number"!=typeof n&&wr(t,e,n)&&(n=0,i=r),function(t,e,n,i){var r=t.length;for((n=ga(n))<0&&(n=-n>r?0:r+n),(i=i===V||i>r?r:ga(i))<0&&(i+=r),i=n>i?0:ya(i);n<i;)t[n++]=e;return t}(t,e,n,i)):[]},n.filter=function(t,e){return(tu(t)?u:un)(t,dr(e,3))},n.flatMap=function(t,e){return cn(Zr(t,e),1)},n.flatMapDeep=function(t,e){return cn(Zr(t,e),gt)},n.flatMapDepth=function(t,e,n){return n=n===V?1:ga(n),cn(Zr(t,e),n)},n.flatten=Ur,n.flattenDeep=function(t){return null!=t&&t.length?cn(t,gt):[]},n.flattenDepth=function(t,e){return null!=t&&t.length?cn(t,e=e===V?1:ga(e)):[]},n.flip=function(t){return rr(t,lt)},n.flow=Ru,n.flowRight=ku,n.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,i={};++e<n;){var r=t[e];i[r[0]]=r[1]}return i},n.functions=function(t){return null==t?[]:fn(t,Sa(t))},n.functionsIn=function(t){return null==t?[]:fn(t,Aa(t))},n.groupBy=ks,n.initial=function(t){return null!=t&&t.length?hi(t,0,-1):[]},n.intersection=_s,n.intersectionBy=xs,n.intersectionWith=bs,n.invert=gu,n.invertBy=yu,n.invokeMap=zs,n.iteratee=Ia,n.keyBy=Us,n.keys=Sa,n.keysIn=Aa,n.map=Zr,n.mapKeys=function(t,e){var n={};return e=dr(e,3),ln(t,function(t,i,r){$e(n,e(t,i,r),t)}),n},n.mapValues=function(t,e){var n={};return e=dr(e,3),ln(t,function(t,i,r){$e(n,i,e(t,i,r))}),n},n.matches=function(t){return Zn(en(t,Z))},n.matchesProperty=function(t,e){return Jn(t,en(e,Z))},n.memoize=ta,n.merge=xu,n.mergeWith=bu,n.method=zu,n.methodOf=Uu,n.mixin=Na,n.negate=ea,n.nthArg=function(t){return t=ga(t),oi(function(e){return Kn(e,t)})},n.omit=wu,n.omitBy=function(t,e){return Ta(t,ea(dr(e)))},n.once=function(t){return $r(2,t)},n.orderBy=function(t,e,n,i){return null==t?[]:(tu(e)||(e=null==e?[]:[e]),tu(n=i?V:n)||(n=null==n?[]:[n]),ti(t,e,n))},n.over=Bu,n.overArgs=Ys,n.overEvery=ju,n.overSome=Gu,n.partial=qs,n.partialRight=Qs,n.partition=Bs,n.pick=Mu,n.pickBy=Ta,n.property=Ra,n.propertyOf=function(t){return function(e){return null==t?V:pn(t,e)}},n.pull=ws,n.pullAll=Gr,n.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?ni(t,e,dr(n,2)):t},n.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?ni(t,e,V,n):t},n.pullAt=Ms,n.range=Vu,n.rangeRight=Wu,n.rearg=Zs,n.reject=function(t,e){return(tu(t)?u:un)(t,ea(dr(e,3)))},n.remove=function(t,e){var n=[];if(!t||!t.length)return n;var i=-1,r=[],a=t.length;for(e=dr(e,3);++i<a;){var o=t[i];e(o,i,t)&&(n.push(o),r.push(i))}return ii(t,r),n},n.rest=function(t,e){if("function"!=typeof t)throw new Ya(X);return oi(t,e=e===V?e:ga(e))},n.reverse=Vr,n.sampleSize=function(t,e,n){return e=(n?wr(t,e,n):e===V)?1:ga(e),(tu(t)?He:ui)(t,e)},n.set=function(t,e,n){return null==t?t:ci(t,e,n)},n.setWith=function(t,e,n,i){return i="function"==typeof i?i:V,null==t?t:ci(t,e,n,i)},n.shuffle=function(t){return(tu(t)?Xe:li)(t)},n.slice=function(t,e,n){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&wr(t,e,n)?(e=0,n=i):(e=null==e?0:ga(e),n=n===V?i:ga(n)),hi(t,e,n)):[]},n.sortBy=js,n.sortedUniq=function(t){return t&&t.length?mi(t):[]},n.sortedUniqBy=function(t,e){return t&&t.length?mi(t,dr(e,2)):[]},n.split=function(t,e,n){return n&&"number"!=typeof n&&wr(t,e,n)&&(e=n=V),(n=n===V?bt:n>>>0)?(t=ba(t))&&("string"==typeof e||null!=e&&!au(e))&&!(e=gi(e))&&N(t)?Li(j(t),0,n):t.split(e,n):[]},n.spread=function(t,e){if("function"!=typeof t)throw new Ya(X);return e=null==e?0:Eo(ga(e),0),oi(function(n){var r=n[e],a=Li(n,0,e);return r&&f(a,r),i(t,this,a)})},n.tail=function(t){var e=null==t?0:t.length;return e?hi(t,1,e):[]},n.take=function(t,e,n){return t&&t.length?hi(t,0,(e=n||e===V?1:ga(e))<0?0:e):[]},n.takeRight=function(t,e,n){var i=null==t?0:t.length;return i?hi(t,(e=i-(e=n||e===V?1:ga(e)))<0?0:e,i):[]},n.takeRightWhile=function(t,e){return t&&t.length?bi(t,dr(e,3),!1,!0):[]},n.takeWhile=function(t,e){return t&&t.length?bi(t,dr(e,3)):[]},n.tap=function(t,e){return e(t),t},n.throttle=function(t,e,n){var i=!0,r=!0;if("function"!=typeof t)throw new Ya(X);return ca(n)&&(i="leading"in n?!!n.leading:i,r="trailing"in n?!!n.trailing:r),Kr(t,e,{leading:i,maxWait:e,trailing:r})},n.thru=Yr,n.toArray=ma,n.toPairs=Su,n.toPairsIn=Au,n.toPath=function(t){return tu(t)?h(t,Nr):da(t)?[t]:Di(ms(ba(t)))},n.toPlainObject=xa,n.transform=function(t,e,n){var i=tu(t),r=i||nu(t)||su(t);if(e=dr(e,4),null==n){var o=t&&t.constructor;n=r?i?new o:[]:ca(t)&&oa(o)?Jo(lo(t)):{}}return(r?a:ln)(t,function(t,i,r){return e(n,t,i,r)}),n},n.unary=function(t){return Jr(t,1)},n.union=Ss,n.unionBy=As,n.unionWith=Ts,n.uniq=function(t){return t&&t.length?yi(t):[]},n.uniqBy=function(t,e){return t&&t.length?yi(t,dr(e,2)):[]},n.uniqWith=function(t,e){return e="function"==typeof e?e:V,t&&t.length?yi(t,V,e):[]},n.unset=function(t,e){return null==t||_i(t,e)},n.unzip=Wr,n.unzipWith=Hr,n.update=function(t,e,n){return null==t?t:xi(t,e,Ti(n))},n.updateWith=function(t,e,n,i){return i="function"==typeof i?i:V,null==t?t:xi(t,e,Ti(n),i)},n.values=Pa,n.valuesIn=function(t){return null==t?[]:E(t,Aa(t))},n.without=Ps,n.words=Oa,n.wrap=function(t,e){return qs(Ti(e),t)},n.xor=Ls,n.xorBy=Es,n.xorWith=Os,n.zip=Cs,n.zipObject=function(t,e){return Si(t||[],e||[],qe)},n.zipObjectDeep=function(t,e){return Si(t||[],e||[],ci)},n.zipWith=Fs,n.entries=Su,n.entriesIn=Au,n.extend=hu,n.extendWith=fu,Na(n,n),n.add=Hu,n.attempt=Nu,n.camelCase=Tu,n.capitalize=La,n.ceil=Xu,n.clamp=function(t,e,n){return n===V&&(n=e,e=V),n!==V&&(n=(n=_a(n))==n?n:0),e!==V&&(e=(e=_a(e))==e?e:0),tn(_a(t),e,n)},n.clone=function(t){return en(t,$)},n.cloneDeep=function(t){return en(t,Z|$)},n.cloneDeepWith=function(t,e){return en(t,Z|$,e="function"==typeof e?e:V)},n.cloneWith=function(t,e){return en(t,$,e="function"==typeof e?e:V)},n.conformsTo=function(t,e){return null==e||nn(t,e,Sa(e))},n.deburr=Ea,n.defaultTo=function(t,e){return null==t||t!=t?e:t},n.divide=Yu,n.endsWith=function(t,e,n){t=ba(t),e=gi(e);var i=t.length,r=n=n===V?i:tn(ga(n),0,i);return(n-=e.length)>=0&&t.slice(n,r)==e},n.eq=na,n.escape=function(t){return(t=ba(t))&&le.test(t)?t.replace(ue,Vn):t},n.escapeRegExp=function(t){return(t=ba(t))&&ye.test(t)?t.replace(ge,"\\$&"):t},n.every=function(t,e,n){var i=tu(t)?s:on;return n&&wr(t,e,n)&&(e=V),i(t,dr(e,3))},n.find=Ds,n.findIndex=kr,n.findKey=function(t,e){return g(t,dr(e,3),ln)},n.findLast=Rs,n.findLastIndex=zr,n.findLastKey=function(t,e){return g(t,dr(e,3),hn)},n.floor=qu,n.forEach=qr,n.forEachRight=Qr,n.forIn=function(t,e){return null==t?t:ts(t,dr(e,3),Aa)},n.forInRight=function(t,e){return null==t?t:es(t,dr(e,3),Aa)},n.forOwn=function(t,e){return t&&ln(t,dr(e,3))},n.forOwnRight=function(t,e){return t&&hn(t,dr(e,3))},n.get=wa,n.gt=Js,n.gte=$s,n.has=function(t,e){return null!=t&&yr(t,e,_n)},n.hasIn=Ma,n.head=Br,n.identity=Fa,n.includes=function(t,e,n,i){t=ia(t)?t:Pa(t),n=n&&!i?ga(n):0;var r=t.length;return n<0&&(n=Eo(r+n,0)),pa(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&_(t,e,n)>-1},n.indexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=null==n?0:ga(n);return r<0&&(r=Eo(i+r,0)),_(t,e,r)},n.inRange=function(t,e,n){return e=va(e),n===V?(n=e,e=0):n=va(n),function(t,e,n){return t>=Oo(e,n)&&t<Eo(e,n)}(t=_a(t),e,n)},n.invoke=_u,n.isArguments=Ks,n.isArray=tu,n.isArrayBuffer=eu,n.isArrayLike=ia,n.isArrayLikeObject=ra,n.isBoolean=function(t){return!0===t||!1===t||la(t)&&gn(t)==Lt},n.isBuffer=nu,n.isDate=iu,n.isElement=function(t){return la(t)&&1===t.nodeType&&!fa(t)},n.isEmpty=function(t){if(null==t)return!0;if(ia(t)&&(tu(t)||"string"==typeof t||"function"==typeof t.splice||nu(t)||su(t)||Ks(t)))return!t.length;var e=ls(t);if(e==Nt||e==jt)return!t.size;if(Ar(t))return!Xn(t).length;for(var n in t)if(Ka.call(t,n))return!1;return!0},n.isEqual=function(t,e){return Cn(t,e)},n.isEqualWith=function(t,e,n){var i=(n="function"==typeof n?n:V)?n(t,e):V;return i===V?Cn(t,e,V,n):!!i},n.isError=aa,n.isFinite=function(t){return"number"==typeof t&&To(t)},n.isFunction=oa,n.isInteger=sa,n.isLength=ua,n.isMap=ru,n.isMatch=function(t,e){return t===e||In(t,e,vr(e))},n.isMatchWith=function(t,e,n){return n="function"==typeof n?n:V,In(t,e,vr(e),n)},n.isNaN=function(t){return ha(t)&&t!=+t},n.isNative=function(t){if(hs(t))throw new ja(H);return Nn(t)},n.isNil=function(t){return null==t},n.isNull=function(t){return null===t},n.isNumber=ha,n.isObject=ca,n.isObjectLike=la,n.isPlainObject=fa,n.isRegExp=au,n.isSafeInteger=function(t){return sa(t)&&t>=-yt&&t<=yt},n.isSet=ou,n.isString=pa,n.isSymbol=da,n.isTypedArray=su,n.isUndefined=function(t){return t===V},n.isWeakMap=function(t){return la(t)&&ls(t)==Ht},n.isWeakSet=function(t){return la(t)&&gn(t)==Xt},n.join=function(t,e){return null==t?"":Po.call(t,e)},n.kebabCase=Pu,n.last=jr,n.lastIndexOf=function(t,e,n){var i=null==t?0:t.length;if(!i)return-1;var r=i;return n!==V&&(r=(r=ga(n))<0?Eo(i+r,0):Oo(r,i-1)),e==e?function(t,e,n){for(var i=n+1;i--;)if(t[i]===e)return i;return i}(t,e,r):y(t,b,r,!0)},n.lowerCase=Lu,n.lowerFirst=Eu,n.lt=uu,n.lte=cu,n.max=function(t){return t&&t.length?sn(t,Fa,yn):V},n.maxBy=function(t,e){return t&&t.length?sn(t,dr(e,2),yn):V},n.mean=function(t){return w(t,Fa)},n.meanBy=function(t,e){return w(t,dr(e,2))},n.min=function(t){return t&&t.length?sn(t,Fa,qn):V},n.minBy=function(t,e){return t&&t.length?sn(t,dr(e,2),qn):V},n.stubArray=ka,n.stubFalse=za,n.stubObject=function(){return{}},n.stubString=function(){return""},n.stubTrue=function(){return!0},n.multiply=Qu,n.nth=function(t,e){return t&&t.length?Kn(t,ga(e)):V},n.noConflict=function(){return En._===this&&(En._=ro),this},n.noop=Da,n.now=Gs,n.pad=function(t,e,n){t=ba(t);var i=(e=ga(e))?B(t):0;if(!e||i>=e)return t;var r=(e-i)/2;return Ji(Mo(r),n)+t+Ji(wo(r),n)},n.padEnd=function(t,e,n){t=ba(t);var i=(e=ga(e))?B(t):0;return e&&i<e?t+Ji(e-i,n):t},n.padStart=function(t,e,n){t=ba(t);var i=(e=ga(e))?B(t):0;return e&&i<e?Ji(e-i,n)+t:t},n.parseInt=function(t,e,n){return n||null==e?e=0:e&&(e=+e),Fo(ba(t).replace(xe,""),e||0)},n.random=function(t,e,n){if(n&&"boolean"!=typeof n&&wr(t,e,n)&&(e=n=V),n===V&&("boolean"==typeof e?(n=e,e=V):"boolean"==typeof t&&(n=t,t=V)),t===V&&e===V?(t=0,e=1):(t=va(t),e===V?(e=t,t=0):e=va(e)),t>e){var i=t;t=e,e=i}if(n||t%1||e%1){var r=Io();return Oo(t+r*(e-t+An("1e-"+((r+"").length-1))),e)}return ri(t,e)},n.reduce=function(t,e,n){var i=tu(t)?p:A,r=arguments.length<3;return i(t,dr(e,4),n,r,$o)},n.reduceRight=function(t,e,n){var i=tu(t)?d:A,r=arguments.length<3;return i(t,dr(e,4),n,r,Ko)},n.repeat=function(t,e,n){return e=(n?wr(t,e,n):e===V)?1:ga(e),ai(ba(t),e)},n.replace=function(){var t=arguments,e=ba(t[0]);return t.length<3?e:e.replace(t[1],t[2])},n.result=function(t,e,n){var i=-1,r=(e=Pi(e,t)).length;for(r||(r=1,t=V);++i<r;){var a=null==t?V:t[Nr(e[i])];a===V&&(i=r,a=n),t=oa(a)?a.call(t):a}return t},n.round=Zu,n.runInContext=t,n.sample=function(t){return(tu(t)?We:si)(t)},n.size=function(t){if(null==t)return 0;if(ia(t))return pa(t)?B(t):t.length;var e=ls(t);return e==Nt||e==jt?t.size:Xn(t).length},n.snakeCase=Ou,n.some=function(t,e,n){var i=tu(t)?m:fi;return n&&wr(t,e,n)&&(e=V),i(t,dr(e,3))},n.sortedIndex=function(t,e){return pi(t,e)},n.sortedIndexBy=function(t,e,n){return di(t,e,dr(n,2))},n.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var i=pi(t,e);if(i<n&&na(t[i],e))return i}return-1},n.sortedLastIndex=function(t,e){return pi(t,e,!0)},n.sortedLastIndexBy=function(t,e,n){return di(t,e,dr(n,2),!0)},n.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var n=pi(t,e,!0)-1;if(na(t[n],e))return n}return-1},n.startCase=Cu,n.startsWith=function(t,e,n){return t=ba(t),n=null==n?0:tn(ga(n),0,t.length),e=gi(e),t.slice(n,n+e.length)==e},n.subtract=Ju,n.sum=function(t){return t&&t.length?T(t,Fa):0},n.sumBy=function(t,e){return t&&t.length?T(t,dr(e,2)):0},n.template=function(t,e,i){var r=n.templateSettings;i&&wr(t,e,i)&&(e=V),t=ba(t),e=fu({},e,r,ar);var a,o,s=fu({},e.imports,r.imports,ar),u=Sa(s),c=E(s,u),l=0,h=e.interpolate||De,f="__p += '",p=Ha((e.escape||De).source+"|"+h.source+"|"+(h===pe?Pe:De).source+"|"+(e.evaluate||De).source+"|$","g"),d="//# sourceURL="+(Ka.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++bn+"]")+"\n";t.replace(p,function(e,n,i,r,s,u){return i||(i=r),f+=t.slice(l,u).replace(Re,I),n&&(a=!0,f+="' +\n__e("+n+") +\n'"),s&&(o=!0,f+="';\n"+s+";\n__p += '"),i&&(f+="' +\n((__t = ("+i+")) == null ? '' : __t) +\n'"),l=u+e.length,e}),f+="';\n";var m=Ka.call(e,"variable")&&e.variable;m||(f="with (obj) {\n"+f+"\n}\n"),f=(o?f.replace(re,""):f).replace(ae,"$1").replace(oe,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=Nu(function(){return Ga(u,d+"return "+f).apply(V,c)});if(v.source=f,aa(v))throw v;return v},n.times=function(t,e){if((t=ga(t))<1||t>yt)return[];var n=bt,i=Oo(t,bt);e=dr(e),t-=bt;for(var r=P(i,e);++n<t;)e(n);return r},n.toFinite=va,n.toInteger=ga,n.toLength=ya,n.toLower=function(t){return ba(t).toLowerCase()},n.toNumber=_a,n.toSafeInteger=function(t){return t?tn(ga(t),-yt,yt):0===t?t:0},n.toString=ba,n.toUpper=function(t){return ba(t).toUpperCase()},n.trim=function(t,e,n){if((t=ba(t))&&(n||e===V))return t.replace(_e,"");if(!t||!(e=gi(e)))return t;var i=j(t),r=j(e);return Li(i,C(i,r),F(i,r)+1).join("")},n.trimEnd=function(t,e,n){if((t=ba(t))&&(n||e===V))return t.replace(be,"");if(!t||!(e=gi(e)))return t;var i=j(t);return Li(i,0,F(i,j(e))+1).join("")},n.trimStart=function(t,e,n){if((t=ba(t))&&(n||e===V))return t.replace(xe,"");if(!t||!(e=gi(e)))return t;var i=j(t);return Li(i,C(i,j(e))).join("")},n.truncate=function(t,e){var n=ht,i=ft;if(ca(e)){var r="separator"in e?e.separator:r;n="length"in e?ga(e.length):n,i="omission"in e?gi(e.omission):i}var a=(t=ba(t)).length;if(N(t)){var o=j(t);a=o.length}if(n>=a)return t;var s=n-B(i);if(s<1)return i;var u=o?Li(o,0,s).join(""):t.slice(0,s);if(r===V)return u+i;if(o&&(s+=u.length-s),au(r)){if(t.slice(s).search(r)){var c,l=u;for(r.global||(r=Ha(r.source,ba(Le.exec(r))+"g")),r.lastIndex=0;c=r.exec(l);)var h=c.index;u=u.slice(0,h===V?s:h)}}else if(t.indexOf(gi(r),s)!=s){var f=u.lastIndexOf(r);f>-1&&(u=u.slice(0,f))}return u+i},n.unescape=function(t){return(t=ba(t))&&ce.test(t)?t.replace(se,Wn):t},n.uniqueId=function(t){var e=++to;return ba(t)+e},n.upperCase=Fu,n.upperFirst=Iu,n.each=qr,n.eachRight=Qr,n.first=Br,Na(n,function(){var t={};return ln(n,function(e,i){Ka.call(n.prototype,i)||(t[i]=e)}),t}(),{chain:!1}),n.VERSION="4.17.19",a(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){n[t].placeholder=n}),a(["drop","take"],function(t,e){ke.prototype[t]=function(n){n=n===V?1:Eo(ga(n),0);var i=this.__filtered__&&!e?new ke(this):this.clone();return i.__filtered__?i.__takeCount__=Oo(n,i.__takeCount__):i.__views__.push({size:Oo(n,bt),type:t+(i.__dir__<0?"Right":"")}),i},ke.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),a(["filter","map","takeWhile"],function(t,e){var n=e+1,i=n==mt||3==n;ke.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:dr(t,3),type:n}),e.__filtered__=e.__filtered__||i,e}}),a(["head","last"],function(t,e){var n="take"+(e?"Right":"");ke.prototype[t]=function(){return this[n](1).value()[0]}}),a(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");ke.prototype[t]=function(){return this.__filtered__?new ke(this):this[n](1)}}),ke.prototype.compact=function(){return this.filter(Fa)},ke.prototype.find=function(t){return this.filter(t).head()},ke.prototype.findLast=function(t){return this.reverse().find(t)},ke.prototype.invokeMap=oi(function(t,e){return"function"==typeof t?new ke(this):this.map(function(n){return Ln(n,t,e)})}),ke.prototype.reject=function(t){return this.filter(ea(dr(t)))},ke.prototype.slice=function(t,e){t=ga(t);var n=this;return n.__filtered__&&(t>0||e<0)?new ke(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==V&&(n=(e=ga(e))<0?n.dropRight(-e):n.take(e-t)),n)},ke.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},ke.prototype.toArray=function(){return this.take(bt)},ln(ke.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),a=n[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);a&&(n.prototype[e]=function(){var e=this.__wrapped__,s=r?[1]:arguments,u=e instanceof ke,c=s[0],l=u||tu(e),h=function(t){var e=a.apply(n,f([t],s));return r&&p?e[0]:e};l&&i&&"function"==typeof c&&1!=c.length&&(u=l=!1);var p=this.__chain__,d=!!this.__actions__.length,m=o&&!p,v=u&&!d;if(!o&&l){e=v?e:new ke(this);var g=t.apply(e,s);return g.__actions__.push({func:Yr,args:[h],thisArg:V}),new Ae(g,p)}return m&&v?t.apply(this,s):(g=this.thru(h),m?r?g.value()[0]:g.value():g)})}),a(["pop","push","shift","sort","splice","unshift"],function(t){var e=qa[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);n.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var n=this.value();return e.apply(tu(n)?n:[],t)}return this[i](function(n){return e.apply(tu(n)?n:[],t)})}}),ln(ke.prototype,function(t,e){var i=n[e];if(i){var r=i.name+"";Ka.call(Go,r)||(Go[r]=[]),Go[r].push({name:e,func:i})}}),Go[Yi(V,nt).name]=[{name:"wrapper",func:V}],ke.prototype.clone=function(){var t=new ke(this.__wrapped__);return t.__actions__=Di(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Di(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Di(this.__views__),t},ke.prototype.reverse=function(){if(this.__filtered__){var t=new ke(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},ke.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=tu(t),i=e<0,r=n?t.length:0,a=function(t,e,n){for(var i=-1,r=n.length;++i<r;){var a=n[i],o=a.size;switch(a.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=Oo(e,t+o);break;case"takeRight":t=Eo(t,e-o)}}return{start:t,end:e}}(0,r,this.__views__),o=a.start,s=a.end,u=s-o,c=i?s:o-1,l=this.__iteratees__,h=l.length,f=0,p=Oo(u,this.__takeCount__);if(!n||!i&&r==u&&p==u)return wi(t,this.__actions__);var d=[];t:for(;u--&&f<p;){for(var m=-1,v=t[c+=e];++m<h;){var g=l[m],y=g.iteratee,_=g.type,x=y(v);if(_==vt)v=x;else if(!x){if(_==mt)continue t;break t}}d[f++]=v}return d},n.prototype.at=Is,n.prototype.chain=function(){return Xr(this)},n.prototype.commit=function(){return new Ae(this.value(),this.__chain__)},n.prototype.next=function(){this.__values__===V&&(this.__values__=ma(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?V:this.__values__[this.__index__++]}},n.prototype.plant=function(t){for(var e,n=this;n instanceof S;){var i=Rr(n);i.__index__=0,i.__values__=V,e?r.__wrapped__=i:e=i;var r=i;n=n.__wrapped__}return r.__wrapped__=t,e},n.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof ke){var e=t;return this.__actions__.length&&(e=new ke(this)),(e=e.reverse()).__actions__.push({func:Yr,args:[Vr],thisArg:V}),new Ae(e,this.__chain__)}return this.thru(Vr)},n.prototype.toJSON=n.prototype.valueOf=n.prototype.value=function(){return wi(this.__wrapped__,this.__actions__)},n.prototype.first=n.prototype.head,vo&&(n.prototype[vo]=function(){return this}),n}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(En._=Hn,define(function(){return Hn})):Cn?((Cn.exports=Hn)._=Hn,On._=Hn):En._=Hn}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],77:[function(t,e,n){e.exports=function(){}},{}],78:[function(t,e,n){var i=t("./_root");e.exports=function(){return i.Date.now()}},{"./_root":58}],79:[function(t,e,n){var i=t("./debounce"),r=t("./isObject"),a="Expected a function";e.exports=function(t,e,n){var o=!0,s=!0;if("function"!=typeof t)throw new TypeError(a);return r(n)&&(o="leading"in n?!!n.leading:o,s="trailing"in n?!!n.trailing:s),i(t,e,{leading:o,maxWait:e,trailing:s})}},{"./debounce":69,"./isObject":73}],80:[function(t,e,n){var i=t("./toNumber"),r=1/0,a=1.7976931348623157e308;e.exports=function(t){return t?(t=i(t))===r||t===-r?(t<0?-1:1)*a:t==t?t:0:0===t?t:0}},{"./toNumber":82}],81:[function(t,e,n){var i=t("./toFinite");e.exports=function(t){var e=i(t),n=e%1;return e==e?n?e-n:e:0}},{"./toFinite":80}],82:[function(t,e,n){var i=t("./isObject"),r=t("./isSymbol"),a=NaN,o=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,u=/^0b[01]+$/i,c=/^0o[0-7]+$/i,l=parseInt;e.exports=function(t){if("number"==typeof t)return t;if(r(t))return a;if(i(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=i(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var n=u.test(t);return n||c.test(t)?l(t.slice(2),n?2:8):s.test(t)?a:+t}},{"./isObject":73,"./isSymbol":75}],83:[function(t,e,n){function i(t){if(u(t)&&!s(t)&&!(t instanceof r)){if(t instanceof a)return t;if(l.call(t,"__wrapped__"))return c(t)}return new a(t)}var r=t("./_LazyWrapper"),a=t("./_LodashWrapper"),o=t("./_baseLodash"),s=t("./isArray"),u=t("./isObjectLike"),c=t("./_wrapperClone"),l=Object.prototype.hasOwnProperty;i.prototype=o.prototype,i.prototype.constructor=i,e.exports=i},{"./_LazyWrapper":9,"./_LodashWrapper":10,"./_baseLodash":22,"./_wrapperClone":66,"./isArray":71,"./isObjectLike":74}],84:[function(t,e,n){(function(n){var i,r=t("sister");i=function t(e){var i,a;return this instanceof t?(a=r(),this,this.on=a.on,(e=e||{}).noChangeCountToEnd=e.noChangeCountToEnd||100,e.noEndTimeout=1e3,e.debug=e.debug||!1,void n.addEventListener("orientationchange",function(){var t,r,o,s,u,c;o=function(e){clearInterval(t),clearTimeout(r),t=null,r=null,e&&a.trigger("orientationchangeend")},i&&i(!1),i=o,t=setInterval(function(){n.innerWidth===s&&n.innerHeight===u?++c===e.noChangeCountToEnd&&(e.debug,o(!0)):(s=n.innerWidth,u=n.innerHeight,c=0)}),r=setTimeout(function(){e.debug,o(!0)},e.noEndTimeout)})):new t(e)},n.gajus=n.gajus||{},n.gajus.orientationchangeend=i,e.exports=i}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{sister:87}],85:[function(t,e,n){function i(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(l===setTimeout)return setTimeout(t,0);if((l===i||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function o(){m&&p&&(m=!1,p.length?d=p.concat(d):v=-1,d.length&&s())}function s(){if(!m){var t=a(o);m=!0;for(var e=d.length;e;){for(p=d,d=[];++v<e;)p&&p[v].run();v=-1,e=d.length}p=null,m=!1,function(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}(t)}}function u(t,e){this.fun=t,this.array=e}function c(){}var l,h,f=e.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:i}catch(t){l=i}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}();var p,d=[],m=!1,v=-1;f.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new u(t,e)),1!==d.length||m||a(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=c,f.addListener=c,f.once=c,f.off=c,f.removeListener=c,f.removeAllListeners=c,f.emit=c,f.prependListener=c,f.prependOnceListener=c,f.listeners=function(t){return[]},f.binding=function(t){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(t){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},{}],86:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0});var r=i(t("sister")),a=(0,i(t("orientationchangeend")).default)();n.default=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e={},n=(0,r.default)();return t.width=t.width||{},t.width.portrait||(t.width.portrait=window.screen.width),t.width.landscape||(t.width.landscape=window.screen.width),void 0===t.viewport&&(t.viewport=!0),e.isIOS13=function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var t=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return 13===parseInt(t[1])}return!1},e.manageViewport=function(){return t.viewport},e.getViewportWidth=function(){return t.width[e.getOrientation()]},e.getViewportHeight=function(){return Math.round(e.getScreenHeight()/e.getScale())},e.getScale=function(){return e.getScreenWidth()/e.getViewportWidth()},e.getOrientation=function(){return 0===window.orientation||180===window.orientation?"portrait":"landscape"},e.getScreenWidth=function(){return window.screen["portrait"===e.getOrientation()?"width":"height"]},e.getScreenHeight=function(){return window.screen["portrait"===e.getOrientation()?"height":"width"]},e.updateViewport=function(){if(e.manageViewport()){var t=e.getViewportWidth(),n=e.getScale(),i=e.getNotchPadding(),r="width="+t+", initial-scale="+n+", minimum-scale="+n+", maximum-scale="+n+", user-scalable=0, viewport-fit=cover";i>0&&(r="width="+(t-i)+", initial-scale="+n+", minimum-scale="+n+", maximum-scale="+n+", user-scalable=0");var a=document.createElement("meta");a.name="viewport",a.content=r;var o=window.document.head.querySelector('meta[name="viewport"]');o?(setTimeout(function(t,n){e.getNotchPadding()>0&&t!==n&&e.updateViewport()},2e3,r,o.getAttribute("content")),o.parentNode.removeChild(o)):setTimeout(function(){e.updateViewport()},1e3),window.document.head.appendChild(a)}},e.deviceSpec=function(){var t=void 0,n=void 0,i=e.isIOS13()?[[1280,1764,1920,1280,320,480,2,"iPhone 4/4s (iOS 13)"],[1280,2116,2272,1280,320,568,2,"iPhone 5/5c/5s/SE and 6/6s (Zoomed) (iOS 13)"],[1500,2512,2668,1500,375,667,2,"iPhone 6/6s/7/8 (iOS 13)"],[1656,2788,2944,1656,414,736,3,"iPhone 6+/6s+/7+/8+ (iOS 13)"],[1500,2512,2668,1500,375,667,3,"iPhone 6+/6s+/7+/8+ (Zoomed) (iOS 13)"],[3072,3940,4096,3166,768,1024,2,"iPad Air/Retina/Pro (9.7-inch) (iOS 13)"],[3336,4276,4448,3164,834,1112,2,"iPad Pro (10.5-inch) (iOS 13)"],[3336,4604,4776,3164,834,1194,2,"iPad Pro (11-inch) (iOS 13)"],[4096,5308,5464,3940,1024,1366,2,"iPad Pro (12.9-inch) (iOS 13)"],[4096,5292,5464,3924,1024,1366,2,"iPad Pro (12.9-inch) 3rd generation (iOS 13)"],[1656,3332,3584,1656,414,896,2,"iPhone XR (iOS 13)"],[1500,2996,3248,1500,375,812,3,"iPhone X/XS (iOS 13)"],[1656,3332,3584,1656,414,896,3,"iPhone XS Max (iOS 13)"]]:[[1280,1762,1920,1280,320,480,2,"iPhone 4/4s"],[1280,2114,2272,1280,320,568,2,"iPhone 5/5c/5s/SE and 6/6s (Zoomed)"],[1500,2510,2668,1500,375,667,2,"iPhone 6/6s/7/8"],[1656,2785,2944,1656,414,736,3,"iPhone 6+/6s+/7+/8+"],[1500,2509,2668,1500,375,667,3,"iPhone 6+/6s+/7+/8+ (Zoomed)"],[3072,3936,4096,2912,768,1024,1,"iPad 2"],[3072,3938,4096,2914,768,1024,2,"iPad Air/Retina/Pro (9.7-inch)"],[3336,4290,4448,3178,834,1112,2,"iPad Pro (10.5-inch)"],[3336,4602,4776,3162,834,1194,2,"iPad Pro (11-inch)"],[4096,5306,5464,3938,1024,1366,2,"iPad Pro (12.9-inch)"],[4096,5290,5464,3922,1024,1366,2,"iPad Pro (12.9-inch) 3rd generation"],[1656,3330,3584,1656,414,896,2,"iPhone XR"],[1500,2993,3248,1500,375,812,3,"iPhone X/XS"],[1656,3329,3584,1656,414,896,3,"iPhone XS Max"]];for(t=i.length;t--;)if(window.screen.width===i[t][4]&&window.screen.height===i[t][5]&&window.devicePixelRatio===i[t][6]){n=i[t];break}return n},e.getMinimalViewHeight=function(){var t=e.getOrientation(),n=e.deviceSpec();if(!n)throw new Error("Not a known iOS device. If you are using an iOS device, report it to https://github.com/gajus/scream/issues/1.");return"portrait"===t?Math.round(e.getViewportWidth()*n[1]/n[0]):Math.round(e.getViewportWidth()*n[3]/n[2])},e.getMinimalViewSize=function(){var t=e.getViewportWidth();return{height:e.getMinimalViewHeight(),width:t}},e.getNotchPadding=function(){var t=!1,e=document.createElement("div");if(CSS.supports("padding-left: env(safe-area-inset-left)")&&CSS.supports("padding-left: env(safe-area-inset-right)")?(e.style.paddingLeft="env(safe-area-inset-left)",e.style.paddingRight="env(safe-area-inset-right)",t=!0):CSS.supports("padding-left: constant(safe-area-inset-left)")&&CSS.supports("padding-left: constant(safe-area-inset-right)")&&(e.style.paddingLeft="constant(safe-area-inset-left)",e.style.paddingRight="constant(safe-area-inset-right)",t=!0),t){document.body.appendChild(e);var n=parseInt(window.getComputedStyle(e).paddingLeft),i=parseInt(window.getComputedStyle(e).paddingRight);return document.body.removeChild(e),n+i}return 0},e.isMinimalView=function(){return window.innerHeight===e.getMinimalViewSize().height},e.detectViewChange=function(){var t=void 0;return e.deviceSpec()?function(){var i=e.isMinimalView()?"minimal":"full";t!==i&&(n.trigger("viewchange",{viewName:i}),t=i)}:function(){}},e.detectViewChange=e.detectViewChange(),e.setupDOMEventListeners=function(){var t=void 0;window.matchMedia("(orientation: portrait)").addListener(function(){t=!0}),a.on("orientationchangeend",function(){t=!1,e.updateViewport(),e.detectViewChange(),n.trigger("orientationchangeend")}),window.addEventListener("orientationchange",function(){e.updateViewport()}),window.addEventListener("resize",function(){t||e.detectViewChange()}),window.addEventListener("scroll",function(){t||e.detectViewChange()}),setTimeout(function(){e.detectViewChange()})},e.updateViewport(),e.setupDOMEventListeners(),e.on=n.on,e.off=n.off,e},e.exports=n.default},{orientationchangeend:84,sister:87}],87:[function(t,e,n){"use strict";var i;i=function(){var t={},e={};return t.on=function(t,n){var i={name:t,handler:n};return e[t]=e[t]||[],e[t].unshift(i),i},t.off=function(t){var n=e[t.name].indexOf(t);-1!==n&&e[t.name].splice(n,1)},t.trigger=function(t,n){var i,r=e[t];if(r)for(i=r.length;i--;)r[i].handler(n)},t},e.exports=i},{}],88:[function(t,e,n){(function(){"use strict";function i(){this.positions=[],this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],this.counters=[],this.geometry=new u.BufferGeometry,this.widthCallback=null,this.matrixWorld=new u.Matrix4}function r(t,e,n,i,r){var a;if(t=t.subarray||t.slice?t:t.buffer,n=n.subarray||n.slice?n:n.buffer,t=e?t.subarray?t.subarray(e,r&&e+r):t.slice(e,r&&e+r):t,n.set)n.set(t,i);else for(a=0;a<t.length;a++)n[a+i]=t[a];return n}function a(t){u.ShaderMaterial.call(this,{uniforms:Object.assign({},u.UniformsLib.fog,{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new u.Color(16777215)},opacity:{value:1},resolution:{value:new u.Vector2(1,1)},sizeAttenuation:{value:1},near:{value:1},far:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new u.Vector2(1,1)}}),vertexShader:u.ShaderChunk.meshline_vert,fragmentShader:u.ShaderChunk.meshline_frag}),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get:function(){return this.uniforms.lineWidth.value},set:function(t){this.uniforms.lineWidth.value=t}},map:{enumerable:!0,get:function(){return this.uniforms.map.value},set:function(t){this.uniforms.map.value=t}},useMap:{enumerable:!0,get:function(){return this.uniforms.useMap.value},set:function(t){this.uniforms.useMap.value=t}},alphaMap:{enumerable:!0,get:function(){return this.uniforms.alphaMap.value},set:function(t){this.uniforms.alphaMap.value=t}},useAlphaMap:{enumerable:!0,get:function(){return this.uniforms.useAlphaMap.value},set:function(t){this.uniforms.useAlphaMap.value=t}},color:{enumerable:!0,get:function(){return this.uniforms.color.value},set:function(t){this.uniforms.color.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get:function(){return this.uniforms.sizeAttenuation.value},set:function(t){this.uniforms.sizeAttenuation.value=t}},near:{enumerable:!0,get:function(){return this.uniforms.near.value},set:function(t){this.uniforms.near.value=t}},far:{enumerable:!0,get:function(){return this.uniforms.far.value},set:function(t){this.uniforms.far.value=t}},dashArray:{enumerable:!0,get:function(){return this.uniforms.dashArray.value},set:function(t){this.uniforms.dashArray.value=t,this.useDash=0!==t?1:0}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},dashRatio:{enumerable:!0,get:function(){return this.uniforms.dashRatio.value},set:function(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get:function(){return this.uniforms.useDash.value},set:function(t){this.uniforms.useDash.value=t}},visibility:{enumerable:!0,get:function(){return this.uniforms.visibility.value},set:function(t){this.uniforms.visibility.value=t}},alphaTest:{enumerable:!0,get:function(){return this.uniforms.alphaTest.value},set:function(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get:function(){return this.uniforms.repeat.value},set:function(t){this.uniforms.repeat.value.copy(t)}}}),this.setValues(t)}var o=this,s=void 0!==t,u=o.THREE||s&&t("three");if(!u)throw new Error("MeshLine requires three.js");i.prototype.setMatrixWorld=function(t){this.matrixWorld=t},i.prototype.setGeometry=function(t,e){if(this.widthCallback=e,this.positions=[],this.counters=[],t instanceof u.Geometry)for(var n=0;n<t.vertices.length;n++){var i=t.vertices[n];e=n/t.vertices.length;this.positions.push(i.x,i.y,i.z),this.positions.push(i.x,i.y,i.z),this.counters.push(e),this.counters.push(e)}if(u.BufferGeometry,t instanceof Float32Array||t instanceof Array)for(n=0;n<t.length;n+=3){e=n/t.length;this.positions.push(t[n],t[n+1],t[n+2]),this.positions.push(t[n],t[n+1],t[n+2]),this.counters.push(e),this.counters.push(e)}this.process()},i.prototype.raycast=function(){var t=new u.Matrix4,e=new u.Ray,n=new u.Sphere;return function(i,r){var a=i.linePrecision,o=a*a,s=this.geometry;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(this.matrixWorld),!1!==i.ray.intersectSphere(n)){t.getInverse(this.matrixWorld),e.copy(i.ray).applyMatrix4(t);var c=new u.Vector3,l=new u.Vector3,h=new u.Vector3,f=new u.Vector3,p=this instanceof u.LineSegments?2:1;if(s instanceof u.BufferGeometry){var d=s.index,m=s.attributes;if(null!==d)for(var v=d.array,g=m.position.array,y=0,_=v.length-1;y<_;y+=p){var x=v[y],b=v[y+1];if(c.fromArray(g,3*x),l.fromArray(g,3*b),!(e.distanceSqToSegment(c,l,f,h)>o))f.applyMatrix4(this.matrixWorld),(S=i.ray.origin.distanceTo(f))<i.near||S>i.far||r.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}else for(y=0,_=(g=m.position.array).length/3-1;y<_;y+=p){if(c.fromArray(g,3*y),l.fromArray(g,3*y+3),!(e.distanceSqToSegment(c,l,f,h)>o))f.applyMatrix4(this.matrixWorld),(S=i.ray.origin.distanceTo(f))<i.near||S>i.far||r.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}else if(s instanceof u.Geometry){var w=s.vertices,M=w.length;for(y=0;y<M-1;y+=p){var S;if(!(e.distanceSqToSegment(w[y],w[y+1],f,h)>o))f.applyMatrix4(this.matrixWorld),(S=i.ray.origin.distanceTo(f))<i.near||S>i.far||r.push({distance:S,point:h.clone().applyMatrix4(this.matrixWorld),index:y,face:null,faceIndex:null,object:this})}}}}}(),i.prototype.compareV3=function(t,e){var n=6*t,i=6*e;return this.positions[n]===this.positions[i]&&this.positions[n+1]===this.positions[i+1]&&this.positions[n+2]===this.positions[i+2]},i.prototype.copyV3=function(t){var e=6*t;return[this.positions[e],this.positions[e+1],this.positions[e+2]]},i.prototype.process=function(){var t,e=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];for(var n=0;n<e;n++)this.side.push(1),this.side.push(-1);var i;for(n=0;n<e;n++)i=this.widthCallback?this.widthCallback(n/(e-1)):1,this.width.push(i),this.width.push(i);for(n=0;n<e;n++)this.uvs.push(n/(e-1),0),this.uvs.push(n/(e-1),1);t=this.compareV3(0,e-1)?this.copyV3(e-2):this.copyV3(0),this.previous.push(t[0],t[1],t[2]),this.previous.push(t[0],t[1],t[2]);for(n=0;n<e-1;n++)t=this.copyV3(n),this.previous.push(t[0],t[1],t[2]),this.previous.push(t[0],t[1],t[2]);for(n=1;n<e;n++)t=this.copyV3(n),this.next.push(t[0],t[1],t[2]),this.next.push(t[0],t[1],t[2]);t=this.compareV3(e-1,0)?this.copyV3(1):this.copyV3(e-1),this.next.push(t[0],t[1],t[2]),this.next.push(t[0],t[1],t[2]);for(n=0;n<e-1;n++){var r=2*n;this.indices_array.push(r,r+1,r+2),this.indices_array.push(r+2,r+1,r+3)}this.attributes?(this.attributes.position.copyArray(new Float32Array(this.positions)),this.attributes.position.needsUpdate=!0,this.attributes.previous.copyArray(new Float32Array(this.previous)),this.attributes.previous.needsUpdate=!0,this.attributes.next.copyArray(new Float32Array(this.next)),this.attributes.next.needsUpdate=!0,this.attributes.side.copyArray(new Float32Array(this.side)),this.attributes.side.needsUpdate=!0,this.attributes.width.copyArray(new Float32Array(this.width)),this.attributes.width.needsUpdate=!0,this.attributes.uv.copyArray(new Float32Array(this.uvs)),this.attributes.uv.needsUpdate=!0,this.attributes.index.copyArray(new Uint16Array(this.indices_array)),this.attributes.index.needsUpdate=!0):this.attributes={position:new u.BufferAttribute(new Float32Array(this.positions),3),previous:new u.BufferAttribute(new Float32Array(this.previous),3),next:new u.BufferAttribute(new Float32Array(this.next),3),side:new u.BufferAttribute(new Float32Array(this.side),1),width:new u.BufferAttribute(new Float32Array(this.width),1),uv:new u.BufferAttribute(new Float32Array(this.uvs),2),index:new u.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new u.BufferAttribute(new Float32Array(this.counters),1)},this.geometry.setAttribute("position",this.attributes.position),this.geometry.setAttribute("previous",this.attributes.previous),this.geometry.setAttribute("next",this.attributes.next),this.geometry.setAttribute("side",this.attributes.side),this.geometry.setAttribute("width",this.attributes.width),this.geometry.setAttribute("uv",this.attributes.uv),this.geometry.setAttribute("counters",this.attributes.counters),this.geometry.setIndex(this.attributes.index)},i.prototype.advance=function(t){var e=this.attributes.position.array,n=this.attributes.previous.array,i=this.attributes.next.array,a=e.length;r(e,0,n,0,a),r(e,6,e,0,a-6),e[a-6]=t.x,e[a-5]=t.y,e[a-4]=t.z,e[a-3]=t.x,e[a-2]=t.y,e[a-1]=t.z,r(e,6,i,0,a-6),i[a-6]=t.x,i[a-5]=t.y,i[a-4]=t.z,i[a-3]=t.x,i[a-2]=t.y,i[a-1]=t.z,this.attributes.position.needsUpdate=!0,this.attributes.previous.needsUpdate=!0,this.attributes.next.needsUpdate=!0},u.ShaderChunk.meshline_vert=["",u.ShaderChunk.logdepthbuf_pars_vertex,u.ShaderChunk.fog_pars_vertex,"","attribute vec3 previous;","attribute vec3 next;","attribute float side;","attribute float width;","attribute float counters;","","uniform vec2 resolution;","uniform float lineWidth;","uniform vec3 color;","uniform float opacity;","uniform float near;","uniform float far;","uniform float sizeAttenuation;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","vec2 fix( vec4 i, float aspect ) {","","    vec2 res = i.xy / i.w;","    res.x *= aspect;","\t vCounters = counters;","    return res;","","}","","void main() {","","    float aspect = resolution.x / resolution.y;","    float pixelWidthRatio = 1. / (resolution.x * projectionMatrix[0][0]);","","    vColor = vec4( color, opacity );","    vUV = uv;","","    mat4 m = projectionMatrix * modelViewMatrix;","    vec4 finalPosition = m * vec4( position, 1.0 );","    vec4 prevPos = m * vec4( previous, 1.0 );","    vec4 nextPos = m * vec4( next, 1.0 );","","    vec2 currentP = fix( finalPosition, aspect );","    vec2 prevP = fix( prevPos, aspect );","    vec2 nextP = fix( nextPos, aspect );","","    float pixelWidth = finalPosition.w * pixelWidthRatio;","    float w = 1.8 * pixelWidth * lineWidth * width;","","    if( sizeAttenuation == 1. ) {","        w = 1.8 * lineWidth * width;","    }","","    vec2 dir;","    if( nextP == currentP ) dir = normalize( currentP - prevP );","    else if( prevP == currentP ) dir = normalize( nextP - currentP );","    else {","        vec2 dir1 = normalize( currentP - prevP );","        vec2 dir2 = normalize( nextP - currentP );","        dir = normalize( dir1 + dir2 );","","        vec2 perp = vec2( -dir1.y, dir1.x );","        vec2 miter = vec2( -dir.y, dir.x );","        //w = clamp( w / dot( miter, perp ), 0., 4. * lineWidth * width );","","    }","","    //vec2 normal = ( cross( vec3( dir, 0. ), vec3( 0., 0., 1. ) ) ).xy;","    vec2 normal = vec2( -dir.y, dir.x );","    normal.x /= aspect;","    normal *= .5 * w;","","    vec4 offset = vec4( normal * side, 0.0, 1.0 );","    finalPosition.xy += offset.xy;","","    gl_Position = finalPosition;","",u.ShaderChunk.logdepthbuf_vertex,u.ShaderChunk.fog_vertex&&"    vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",u.ShaderChunk.fog_vertex,"}"].join("\r\n"),u.ShaderChunk.meshline_frag=["",u.ShaderChunk.fog_pars_fragment,u.ShaderChunk.logdepthbuf_pars_fragment,"","uniform sampler2D map;","uniform sampler2D alphaMap;","uniform float useMap;","uniform float useAlphaMap;","uniform float useDash;","uniform float dashArray;","uniform float dashOffset;","uniform float dashRatio;","uniform float visibility;","uniform float alphaTest;","uniform vec2 repeat;","","varying vec2 vUV;","varying vec4 vColor;","varying float vCounters;","","void main() {","",u.ShaderChunk.logdepthbuf_fragment,"","    vec4 c = vColor;","    if( useMap == 1. ) c *= texture2D( map, vUV * repeat );","    if( useAlphaMap == 1. ) c.a *= texture2D( alphaMap, vUV * repeat ).a;","    if( c.a < alphaTest ) discard;","    if( useDash == 1. ){","        c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));","    }","    gl_FragColor = c;","    gl_FragColor.a *= step(vCounters, visibility);","",u.ShaderChunk.fog_fragment,"}"].join("\r\n"),a.prototype=Object.create(u.ShaderMaterial.prototype),a.prototype.constructor=a,a.prototype.isMeshLineMaterial=!0,a.prototype.copy=function(t){return u.ShaderMaterial.prototype.copy.call(this,t),this.lineWidth=t.lineWidth,this.map=t.map,this.useMap=t.useMap,this.alphaMap=t.alphaMap,this.useAlphaMap=t.useAlphaMap,this.color.copy(t.color),this.opacity=t.opacity,this.resolution.copy(t.resolution),this.sizeAttenuation=t.sizeAttenuation,this.near=t.near,this.far=t.far,this.dashArray.copy(t.dashArray),this.dashOffset.copy(t.dashOffset),this.dashRatio.copy(t.dashRatio),this.useDash=t.useDash,this.visibility=t.visibility,this.alphaTest=t.alphaTest,this.repeat.copy(t.repeat),this},void 0!==n?(void 0!==e&&e.exports&&(n=e.exports={MeshLine:i,MeshLineMaterial:a}),n.MeshLine=i,n.MeshLineMaterial=a):(o.MeshLine=i,o.MeshLineMaterial=a)}).call(this)},{three:89}],89:[function(t,e,n){arguments[4][5][0].apply(n,arguments)},{dup:5}],90:[function(t,e,n){(function(e,i){function r(t,e){this._id=t,this._clearFn=e}var a=t("process/browser.js").nextTick,o=Function.prototype.apply,s=Array.prototype.slice,u={},c=0;n.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},n.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},n.clearTimeout=n.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},n.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},n.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},n._unrefActive=n.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n.setImmediate="function"==typeof e?e:function(t){var e=c++,i=!(arguments.length<2)&&s.call(arguments,1);return u[e]=!0,a(function(){u[e]&&(i?t.apply(null,i):t.call(null),n.clearImmediate(e))}),e},n.clearImmediate="function"==typeof i?i:function(t){delete u[t]}}).call(this,t("timers").setImmediate,t("timers").clearImmediate)},{"process/browser.js":85,timers:90}],91:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){new a.default,new r.default;var t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e),void 0===document.ontouchstart&&document.body.classList.add("noTouchEvent")};var r=i(t("./common/Header")),a=i(t("./common/Transition"))},{"./common/Header":94,"./common/Transition":98}],92:[function(t,e,n){"use strict";var i=t("three"),r=t("gsap"),a=t("./util/UA")();e.exports={assetPath:"/lionsnews/assets/",base3D:null,currentScene:"",currentLang:"",isTransition:!0,PI:Math.PI/180,backgroundColors:{default:new i.Color(15856370),article:new i.Color(2236962)},color:{home:"#fff",about:"#ddd"},lionScale:a.isSmartPhone?.35:.6,mouseDownUpThresholdTime:200,debugDisplay:{papers:!1},naviColors:[],stageSize:{width:100,height:100},paperOption:{pc:{size:{width:360,height:500},margin:{x:150,y:0},bend:4e3},sp:{size:{width:460,height:650},margin:{x:90,y:0},bend:2e3}},scenePosition:{intro:{height:1080,position:new i.Vector3(0,0,0),camera:new i.Vector3(0,0,0)},home:{height:a.isPC?768:1132,position:new i.Vector3(0,0,3e3),camera:new i.Vector3(0,0,0)},history:{height:a.isPC?768:1132,position:new i.Vector3(0,0,2500),camera:new i.Vector3(0,0,0)},navi:{height:a.isPC?768:616,position:new i.Vector3(0,0,a.isPC?3500:4500),camera:new i.Vector3(0,0,0)},article:{height:a.isPC?768:1132,position:new i.Vector3(0,0,3e3),camera:new i.Vector3(0,0,0)},about:{height:768,position:new i.Vector3(0,0,-1e3),camera:new i.Vector3(0,0,0)}},sceneCameraPosition:{intro:new i.Vector3(0,0,0),home:new i.Vector3(0,0,0),history:new i.Vector3(0,0,0),navi:new i.Vector3(0,0,0),article:new i.Vector3(0,0,0),about:new i.Vector3(0,0,0)},sceneOffset:{intro:{papers:28},history:{depthZ:900,opacity:0}},animation:{intro:{spreadTime:3},navi:{cycle:4,duration:4,fromY:2e3},paper:{zoomOption:{delay:0,duration:1.5,ease:r.Power4.easeInOut},textureChange:{delay:0,duration:1.5,ease:r.Power4.easeInOut,ampY:30},jump:{delay:0,duration:1.5,ease:r.Power4.easeInOut}}}}},{"./util/UA":132,gsap:7,three:89}],93:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=(function(t){t&&t.__esModule}(t("../util/Easing")),t("../util/SvgPathDraw")),a=function(){function t(e){var n=this;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance?t.instance:(this.closed=!1,this.mode="loading",this.delaySpeed=.1,this.loadingSpeed=.5/60,this.loadingProgress=0,this.$cursor=document.querySelector(".cursor"),this.$cursor1=this.$cursor.querySelector(".cursor-graphic1"),this.$cursorCircle=this.$cursor.querySelector(".cursor-graphic1 .circlePath"),this.$cursorLoading=this.$cursor.querySelector(".cursor-graphic1 .loadingPath"),this.$cursor.classList.add("ready"),this.modeOld="",this.mouse={x:.5*window.innerWidth,y:.5*window.innerHeight},this.mouseDealy={x:.5*window.innerWidth,y:.5*window.innerHeight},this.drawPath_circle=new r(this.$cursorCircle),this.drawPath_loading=new r(this.$cursorLoading),this.drawPath_circle.update(-1),this.drawPath_loading.update(-1),this.update(),document.body.addEventListener("mousemove",function(t){var e=t.clientX,i=t.clientY;n.mouse.x=e,n.mouse.y=i}),void(t.instance=this))}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"close",value:function(){this.closed=!0,this.$cursor.setAttribute("data-close",this.closed),this.drawPath_circle.to(1,1),this.drawPath_loading.to(1,1)}},{key:"loading",value:function(t){this.drawPath_circle.update(t-1)}},{key:"changeColor",value:function(t){this.$cursorLoading.style.stroke=t}},{key:"changeMode",value:function(t){this.closed||(this.mode=t,this.modeOld=t,"loading"==t?(this.drawPath_loading.update(-1),this.drawPath_loading.fromTo(-1,-.5,.5)):this.drawPath_loading.to(0,1),this.$cursor.setAttribute("data-mode",t))}},{key:"changeScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"big";this.$cursor.setAttribute("data-scale",t)}},{key:"hoverIn",value:function(){this.$cursor.setAttribute("data-scale","hover")}},{key:"hoverOut",value:function(){this.$cursor.setAttribute("data-scale",this.modeOld)}},{key:"update",value:function(){this.mouseDealy.x+=(this.mouse.x-this.mouseDealy.x)*this.delaySpeed,this.mouseDealy.y+=(this.mouse.y-this.mouseDealy.y)*this.delaySpeed,this.mouseDealy.x=Math.round(100*this.mouseDealy.x)/100,this.mouseDealy.y=Math.round(100*this.mouseDealy.y)/100,this.loadingProgress+=this.loadingSpeed,this.loadingProgress>1&&(this.loadingProgress=0),this.$cursor1.style.transform="translate3d(-50%,-50%,0) rotate(".concat(360*this.loadingProgress,"deg)"),this.$cursor.style.transform="translate3d(".concat(this.mouseDealy.x,"px,").concat(this.mouseDealy.y,"px,0)")}}]),t}();n.default=a},{"../util/Easing":126,"../util/SvgPathDraw":131}],94:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var h=i(t("events")),f=i(t("./Cursor")),p=t("../util/UA")(),d=function(t){function e(){var t;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),e.instance)return u(t,e.instance);var i=new f.default;return t=n.call(this),e.instance=c(t),t.isDown=!1,t.$header=document.querySelector("header"),t.$message=t.$header.querySelector(".message"),t.$langJa=t.$header.querySelector(".lang-ja"),t.$langEn=t.$header.querySelector(".lang-en"),t.$about=t.$header.querySelector(".header-about-link"),t.$headerLogo=t.$header.querySelector(".header-logo-link"),t.$btnNaviOpen=t.$header.querySelector(".btn-naviOpen"),t.$btnNaviClose=t.$header.querySelector(".btn-naviClose"),t.$btnBackToTop=t.$header.querySelector(".btn-backToTop"),t.$headerLine=t.$header.querySelector(".border-line"),t.$indicator=t.$header.querySelector(".indicator"),t.btns=[t.$langJa,t.$langEn,t.$about,t.$headerLogo,t.$btnNaviOpen,t.$btnNaviClose,t.$btnBackToTop],p.isPC&&t.btns.forEach(function(t){t.addEventListener("mouseenter",function(){i.hoverIn()}),t.addEventListener("mouseleave",function(){i.hoverOut()})}),t.$btnNaviOpen.addEventListener("click",function(){t.emit("naviOpen")}),t.$btnNaviClose.addEventListener("click",function(){t.emit("naviClose")}),u(t,c(t))}o(e,h["default"]);var n=s(e);return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(e,[{key:"moveIndication",value:function(t){window.innerWidth<=720&&(this.$indicator.style.transform="translate3d(".concat(100*-t,"%,0,0)"))}},{key:"show",value:function(){var t=this;arguments.length>0&&void 0!==arguments[0]&&arguments[0],this.$headerLine.classList.remove("-hide"),setTimeout(function(){t.$headerLogo.classList.remove("-hide"),t.$langJa.classList.remove("-hide"),t.$langEn.classList.remove("-hide"),t.$about.classList.remove("-hide"),t.$indicator.classList.remove("-hide")},300)}},{key:"hide",value:function(){this.$message.classList.add("-hide"),this.$headerLogo.classList.add("-hide"),this.$langJa.classList.add("-hide"),this.$langEn.classList.add("-hide"),this.$about.classList.add("-hide"),this.$headerLine.classList.add("-hide"),this.$indicator.classList.add("-hide"),this.$btnBackToTop.classList.add("-hide")}},{key:"hideElement",value:function(t){switch(t){case"message":this.$message.classList.add("-hide");break;case"naviOpen":this.$btnNaviOpen.classList.add("-hide");break;case"naviClose":this.$btnNaviClose.classList.add("-hide");break;case"backToTop":this.$btnBackToTop.classList.add("-hide")}}},{key:"showElement",value:function(t){switch(t){case"message":this.$message.classList.remove("-hide");break;case"naviOpen":this.$btnNaviOpen.classList.remove("-hide");break;case"naviClose":this.$btnNaviClose.classList.remove("-hide");break;case"backToTop":this.$btnBackToTop.classList.remove("-hide")}}},{key:"hideCenterCotents",value:function(){this.hideElement("message"),this.hideElement("naviOpen"),this.hideElement("naviClose"),this.hideElement("backToTop")}},{key:"toggle",value:function(){var t=this;"navi"==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"navi")?(this.$message.classList.add("-hide"),setTimeout(function(){t.$btnNaviOpen.classList.remove("-hide")},500)):(setTimeout(function(){t.$message.classList.remove("-hide")},500),this.$btnNaviOpen.classList.add("-hide"))}},{key:"onScroll",value:function(t){var e=this;window.innerWidth<768&&(this.scrollTicking||(requestAnimationFrame(function(){e.scrollTicking=!1,e.scrollY=window.scrollY||window.pageYOffset,e.scrollDirection=e.scrollY-e.scrollYOld<0?-1:1,e.scrollYOld=e.scrollY,e.scrollDirection>0&&e.scrollY>60?(e.isHeadHide||e.$header.classList.add("hide"),e.isHeadHide=!0):(e.isHeadHide&&e.$header.classList.remove("hide"),e.isHeadHide=!1)}),this.scrollTicking=!0))}},{key:"_checkDirection",value:function(t,e){t<e?this.isDown||(this.isUp=!1,this.isDown=!0,this.$header.classList.add("is-hide")):this.isUp||(this.isDown=!1,this.isUp=!0,this.$header.classList.remove("is-hide"))}},{key:"changeColor",value:function(){"white"==(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"white")?document.body.setAttribute("data-color-theme","white"):document.body.setAttribute("data-color-theme","black")}}]),e}();n.default=d},{"../util/UA":132,"./Cursor":93,events:6}],95:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e){var n=e.replace("en/",""),i=n,r="/en"+("/"==n?n+"lionsnews/":n);document.querySelector(".header-logo-link").setAttribute("href","ja"==t?"/lionsnews/":"/en/lionsnews/"),document.querySelector(".header-about-link").setAttribute("href","ja"==t?"/lionsnews/about/":"/en/lionsnews/about/"),document.querySelector(".btn-backToTop").setAttribute("href","ja"==t?"/lionsnews/":"/en/lionsnews/"),document.querySelector(".lang-en").setAttribute("href",r),document.querySelector(".lang-ja").setAttribute("href",i)}},{}],96:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=t.querySelector(".slogan");return e.classList.add("-in"),{destroy:function(){return new Promise(function(t){e.classList.add("-out"),setTimeout(function(){t()},500)})}}},function(t){t&&t.__esModule}(t("../Config"))},{"../Config":92}],97:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t,e,n){function i(){w.forEach(function(t){switch(t.type){case"bbc":t.videoCon.innerHTML="";break;case"youtube":t.api&&(t.api.destroy(),t.api=null);break;case"vimeo":t.api&&(t.api.destroy(),t.api=null)}})}var f=new a.default,p=new c.default,d=f.papers.getPaperByName(t),m=e.getAttribute("page_isInterview"),v={inHistory:!1,historyProgress:1},g=e.querySelector(".article-next a"),y=new l.default,_=e.querySelectorAll(".scroll-anim"),x=[];_.forEach(function(t,e){var n=t.querySelector(".scroll-anim__inner"),i=new r.default(t,n,{nonestop:1==e});0==e&&i.show(),i.start(),x.push(i)}),h.isPC&&(g.addEventListener("mouseenter",function(){x[2].speedUp(),y.hoverIn()}),g.addEventListener("mouseleave",function(){x[2].speedDown(),y.hoverOut()}));var b=e.querySelectorAll(".__video"),w=[];b.forEach(function(t,e){var n=t.getAttribute("data-video-type"),r=t.getAttribute("data-video-id"),a=t.querySelector("button"),u=t.querySelector("._videoContainer"),c={type:n,api:null,videoCon:u};w[e]=c,a.addEventListener("click",function(){switch(t.classList.add("video-loading"),i(),n){case"youtube":if(c.api)return;u.id="yt_"+r,c.api=new s.default({videoId:r,containerId:u.id,width:"100%",height:"100%",playerVars:{autoplay:!0}});break;case"vimeo":if(c.api)return;u.id="vm_"+r,c.api=new o.default(u.id,{id:r,title:!1,byline:!1,portrait:!1,autoplay:!0});break;case"bbc":var e='<iframe width="400" height="500" frameborder="0" scrolling="no" src='.concat(r,"></iframe>");u.innerHTML=e}}),h.isPC&&(t.addEventListener("mouseenter",function(){y.hoverIn()}),t.addEventListener("mouseleave",function(){y.hoverOut()}))});var M=e.querySelector(".history-trigger-top"),S=e.querySelector(".history-trigger-bottom"),A=1;n.on("scroll",function(t){t.scroll.y,m||function(t){if(M){var e=1,n=0;if(M.classList.contains("is-inview")){var i=M.getBoundingClientRect(),r=i.top,a=i.height;e=1-(.5*window.innerHeight-r)/a,A=e,e>=1&&T.classList.add("-white")}else 0==e&&T.classList.remove("-white");if(S.classList.contains("is-inview")){var o=S.getBoundingClientRect(),s=o.top,c=o.height;n=(.5*window.innerHeight-s)/c,A=n}A<0&&(A=0),A>1&&(A=1),v.inHistory=1!=A,v.historyProgress=A,0!=A||T.classList.contains("-white")||(T.classList.add("-white"),p.changeColor("white"),f.changeNoise({duration:1,noise:.1})),1==A&&T.classList.contains("-white")&&(f.changeNoise({duration:1,noise:.05}),T.classList.remove("-white"),p.changeColor("black")),d.setOpacity(u.default.sceneOffset.history.opacity+(1-u.default.sceneOffset.history.opacity)*A)}}(),t.scroll.y});var T=_[1];return f.addRenderObject("pageAnim",function(){x.forEach(function(t){t.update()})}),{status:v,setOpacity:function(){d.setOpacity(u.default.sceneOffset.history.opacity+(1-u.default.sceneOffset.history.opacity)*A)},destroy:function(){return new Promise(function(t){f.removeRenderObject("pageAnim"),x.forEach(function(t){t.destroy()}),i(),t()})}}};var r=i(t("../util/ScrollText")),a=i(t("../common/navi/Navi")),o=i(t("@vimeo/player")),s=(t("lodash"),i(t("../util/YoutubePlayer"))),u=i(t("../Config")),c=i(t("./Header")),l=i(t("./Cursor")),h=t("../util/UA")()},{"../Config":92,"../common/navi/Navi":108,"../util/ScrollText":129,"../util/UA":132,"../util/YoutubePlayer":133,"./Cursor":93,"./Header":94,"@vimeo/player":4,lodash:76}],98:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=i(t("@barba/core")),a=(i(t("@barba/css")),i(t("@barba/prefetch"))),o=i(t("../util/ReplaceHeadTags")),s=i(t("../util/SmoothScroll")),u=i(t("../common/navi/Navi")),c=i(t("../Config")),l=i(t("./LangLink")),h=i(t("./Header")),f=i(t("./PageArticleAnim")),p=i(t("./PageAboutAnim")),d=(i(t("./navi/util/Dat")),i(t("./Cursor")));n.default=function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance)return t.instance;t.instance=this,c.default.currentLang=document.querySelector("html").getAttribute("lang");var e=new h.default,n=new u.default,i=n.papers,m=n.histories,v=document.body,g=new d.default,y=new s.default,_="",x=null,b=null,w="#ddd",M=-1,S=null,A=!1,T=!1,P={lang:c.default.currentLang,changed:!1};n.ready().then(function(){return n.load()}).then(function(){r.default.use(a.default),r.default.init({timeout:5e3,debug:!1,views:[{namespace:"home",beforeLeave:function(t){}},{namespace:"article",beforeLeave:function(t){}},{namespace:"about",beforeLeave:function(t){},beforeEnter:function(){n.lineAnimation.active()},afterLeave:function(){}}],transitions:[{name:"default-transition",once:function(t){var e=(t.current,t.next);switch(e.namespace){case"home":n.viewTop().then(function(){L(e)});break;case"article":_=e.container.getAttribute("data-page-namespace"),n.sceneMoveSmooth("article"),n.viewNavi(_).then(function(){L(e)});break;case"about":n.sceneMoveSmooth("about"),n.viewAbout().then(function(){L(e)})}(0,l.default)(document.querySelector("html").getAttribute("lang"),e.url.path)},beforeLeave:function(t){var n=t.current;t.next,i.bendOn(),C(!0),c.default.isTransition=!0;var r=i.active(-1);switch(m.active(r),e.hideCenterCotents(),i.articleHeaderToggle(!1),E(n.container,!1),b=null,n.namespace){case"home":break;case"article":var a=(n.container.getAttribute("data-page-namespace"),i.getPaperByName(_));return new Promise(function(t){a.zoomOut({delay:0,duration:T?2:1.5}),setTimeout(function(){t()},500)})}},leave:function(t){return t.current,t.next,n.changeBgColor("default"),O()},beforeEnter:function(t){var e=(t.current,t.next);switch("about"==e.namespace&&n.lineAnimation.active(),P=(0,o.default)(e),_=e.container.getAttribute("data-page-namespace"),e.namespace){case"article":w=i.getPaperColor(_);break;default:w=c.default.color[e.namespace]}return(0,l.default)(P.lang,e.url.path),g.changeColor(w),new Promise(function(t){"article"==e.namespace?(i.getPaperByName(_),i.jump(_,{delay:.5,duration:1.5}),setTimeout(function(){t()},T?0:1e3)):t()})},enter:function(t){var e=(t.current,t.next);return new Promise(function(t){n.sceneMoveSmooth(e.namespace,{duration:1.5}).then(function(){switch(e.namespace){case"home":P.changed&&i.changeTxuture(P.lang),L(e),t();break;case"article":var n=e.container.getAttribute("data-page-namespace"),r=i.getPaperByName(n);P.changed&&i.changeTxuture(P.lang),r.zoomIn({delay:P.changed?1:0}).then(function(){L(e),t(),T&&(T=!1)});break;case"about":P.changed&&i.changeTxuture(P.lang),L(e),t()}})})},afterEnter:function(t){var e=t.current,i=t.next;"about"==e.namespace&&"about"!=i.namespace&&n.lineAnimation.inActive(),c.default.isTransition=!1,y.update(),window.dispatchEvent(new Event("resize"))}}]})}),n.renderStart(),document.querySelectorAll("a[href]").forEach(function(t){t.addEventListener("click",function(t){t.currentTarget.href===window.location.href&&(t.preventDefault(),t.stopPropagation())})}),e.on("naviOpen",function(){A||T||(T||(T=!0,E(b,!1),document.body.classList.add("-inNaviMode"),g.changeMode("loading"),S&&S.zoomOut(),n.changeBgColor("default",{duration:.5}),n.sceneMoveSmooth("navi"),i.active(-1),m.active(-1),e.hideElement("naviOpen"),i.articleHeaderToggle(!0),e.changeColor("black"),i.bendOff().then(function(){g.changeMode("home"),setTimeout(function(){e.showElement("naviClose")},500)})),A=!0,setTimeout(function(){A=!1},2e3))}),e.on("naviClose",function(){!A&&T&&(T=!1,n.sceneMoveSmooth("article",{duration:1.5}),i.bendOn(),e.hideElement("naviClose"),i.articleHeaderToggle(!1),i.jump(_,{delay:0,duration:1}),S.zoomIn({delay:1}).then(function(){i.active(_),E(b,!0),g.changeMode("article"),setTimeout(function(){e.showElement("naviOpen")},500),n.changeBgColor("article",{duration:.5}),m.active(M),x.status.inHistory&&(e.changeColor("white"),x.setOpacity())}),document.body.classList.remove("-inNaviMode"),A=!0,setTimeout(function(){A=!1},2e3))});var L=function(t){switch(t.namespace,document.body.classList.remove("-inNaviMode"),y.destroy(),y.set(t.container.querySelector("[data-scroll-container]")),window.scrollTo(0,0),e.changeColor("black"),e.show(),t.namespace){case"home":e.showElement("message"),i.articleHeaderToggle(!0);break;case"article":e.showElement("naviOpen"),E(t.container,!0),x=(0,f.default)(_,t.container,y._scroll);break;case"about":e.showElement("backToTop"),E(t.container,!0),x=(0,p.default)(t.container)}if("article"==t.namespace){n.changeBgColor("article",{duration:.5}),b=t.container;var r=t.container.getAttribute("data-page-namespace"),a=i.active(r);S=i.getPaperByName(r),m.active(a),M=a}else n.changeBgColor("default",{duration:.5});c.default.isTransition=!1,C(!1,t.namespace)},E=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1]?t.classList.remove("-hide"):t.classList.add("-hide")},O=function(){if(x)return x.destroy()},C=function(t,e){t?(v.classList.add("-inLoading"),g.changeMode("loading")):(v.classList.remove("-inLoading"),g.changeMode(e))};return t.instance=this}},{"../Config":92,"../common/navi/Navi":108,"../util/ReplaceHeadTags":128,"../util/SmoothScroll":130,"./Cursor":93,"./Header":94,"./LangLink":95,"./PageAboutAnim":96,"./PageArticleAnim":97,"./navi/util/Dat":120,"@barba/core":1,"@barba/css":2,"@barba/prefetch":3}],99:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t("three"),o=(i(t("./objects/LineGenerator")),i(t("./objects/AnimatedMeshLine"))),s=i(t("../../Config")),u=(i(t("../navi/util/Dat")),i(t("./utils/getRandomFloat"))),c=function(){function t(){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance)return t.instance;this.container=new a.Object3D,this.line=null,this.lines=[];for(var e=s.default.naviColors.map(function(t){return new a.Color(t)}),n=0;n<20;n++){var i=e[n%e.length],r=new o.default({nbrOfPoints:5,length:(0,u.default)(50,70),visibleLength:(0,u.default)(.05,.15),color:i,opacity:.5,lineWidth:(0,u.default)(.5,1.5),position:new a.Vector3((0,u.default)(-5,-2),(0,u.default)(-2,-2),0).multiplyScalar((0,u.default)(10,10)),turbulence:new a.Vector3((0,u.default)(-4,2),(0,u.default)(-1,1),(0,u.default)(-10,10)),orientation:new a.Vector3((0,u.default)(-.2,2.8),(0,u.default)(1,2.8),(0,u.default)(-.8,.8)),speed:(0,u.default)(.001,.004)});this.lines[n]=r,this.container.add(r),r.position.z=480}return this.container.visible=!1,t.instance=this,this}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"active",value:function(){this.container.visible=!0}},{key:"inActive",value:function(){this.container.visible=!1}},{key:"update",value:function(){"about"==s.default.currentScene&&this.lines.forEach(function(t,e){t.update()})}}]),t}();n.default=c},{"../../Config":92,"../navi/util/Dat":120,"./objects/AnimatedMeshLine":100,"./objects/LineGenerator":101,"./utils/getRandomFloat":102,three:89}],100:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=t("three"),h=t("three.meshline"),f=function(t){return t&&t.__esModule?t:{default:t}}(t("../utils/getRandomFloat")),p=function(t){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=i.width,a=void 0===r?.1:r,o=i.speed,s=void 0===o?.01:o,c=i.visibleLength,p=void 0===c?.5:c,d=i.color,m=void 0===d?new l.Color("#000000"):d,v=i.opacity,g=void 0===v?1:v,y=i.position,_=void 0===y?new l.Vector3(0,0,0):y,x=i.points,b=void 0!==x&&x,w=i.length,M=void 0===w?2:w,S=i.nbrOfPoints,A=void 0===S?3:S,T=i.orientation,P=void 0===T?new l.Vector3(1,0,0):T,L=i.turbulence,E=void 0===L?new l.Vector3(0,0,0):L,O=i.transformLineMethod,C=void 0!==O&&O;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var F=[];if(b)F=b;else{var I=new l.Vector3,N=P.normalize().multiplyScalar(M/A);F.push(I.clone());for(var D=0;D<A-1;D++)I.add(N),F.push(I.clone().set(I.x+(0,f.default)(-E.x,E.x),I.y+(0,f.default)(-E.y,E.y),I.z+(0,f.default)(-E.z,E.z)));F.push(I.add(N).clone());var R=new l.SplineCurve(F);F=(new l.Geometry).setFromPoints(R.getPoints(100))}var k=new h.MeshLine;k.setGeometry(F,C);var z=k.geometry,U=1-.5*p,B=new h.MeshLineMaterial({lineWidth:a,dashArray:2,dashOffset:0,dashRatio:U,opacity:g,transparent:!0,depthWrite:!1,color:m});return(t=n.call(this,z,B)).position.copy(_),t.speed=s,t.voidLength=2*U,t.dashLength=2-t.voidLength,t.dyingAt=1,t.diedAt=t.dyingAt+t.dashLength,t.update=t.update.bind(u(t)),t}a(e,l.Mesh);var n=o(e);return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"update",value:function(){this.material.uniforms.dashOffset.value-=this.speed,this.isDied()&&(this.material.uniforms.dashOffset.value=0),this.isDying()}},{key:"isDied",value:function(){return this.material.uniforms.dashOffset.value<-this.diedAt}},{key:"isDying",value:function(){return this.material.uniforms.dashOffset.value<-this.dyingAt}}]),e}();n.default=p},{"../utils/getRandomFloat":102,three:89,"three.meshline":88}],101:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=c(t);if(e){var r=c(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?u(t):e}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function c(t){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var l=t("three"),h=function(t){return t&&t.__esModule?t:{default:t}}(t("./AnimatedMeshLine")),f=function(t){function e(){var t,i=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).frequency,r=void 0===i?.1:i,a=arguments.length>1?arguments[1]:void 0;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=n.call(this)).frequency=r,t.lineStaticProps=a,t.isStarted=!1,t.i=0,t.lines=[],t.nbrOfLines=-1,t.update=t.update.bind(u(t)),t.start=t.start.bind(u(t)),t.start=t.start.bind(u(t)),t.stop=t.stop.bind(u(t)),t}a(e,l.Object3D);var n=o(e);return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"start",value:function(){this.isStarted=!0}},{key:"stop",value:function(t){this.isStarted=!1}},{key:"addLine",value:function(t){var e=new h.default(Object.assign({},this.lineStaticProps,t));return this.lines.push(e),this.add(e),this.nbrOfLines++,e}},{key:"removeLine",value:function(t){this.remove(t),this.nbrOfLines--}},{key:"update",value:function(){for(this.isStarted&&Math.random()<this.frequency&&this.addLine(),this.i=this.nbrOfLines;this.i>=0;this.i--)this.lines[this.i].update();var t=[];for(this.i=this.nbrOfLines;this.i>=0;this.i--)this.lines[this.i].isDied()?this.removeLine(this.lines[this.i]):t.push(this.lines[this.i]);this.lines=t}}]),e}();n.default=f},{"./AnimatedMeshLine":100,three:89}],102:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default=function(t,e){return Math.random()*(e-t)+t}},{}],103:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function s(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return u(this,n)}}function u(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?c(t):e}function c(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l(t){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var h=t("three"),f=i(t("events")),p=i(t("lodash/debounce")),d=(t("./util/OrbitControls"),i(t("./util/Dat")),i(t("scream"))),m=t("../../util/UA")(),v=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=n.call(this)).scream=(0,d.default)({viewport:!1,width:{portrait:screen.width,landscape:screen.height}}),i.stage={width:window.innerWidth,height:m.isIOS?i.scream.getScreenHeight():window.innerHeight},i.stage.aspect=i.stage.width/i.stage.height,i.stage.distHeight=i.stage.height-window.innerHeight,i.config={camera_fov:75,camera_near:1,camera_far:1e3,camera_rot_x:0,camera_rot_y:0,camera_rot_z:0,gui:!0,render_antialias:!1,render_alpha:!0,render_pixelRatio:window.devicePixelRatio>1?1.5:1,render_clearColor:16777215,render_clearColorAlpha:1,render_renderAuto:!0,render_shadowMap_enabled:!1,helper:!0,cameraControl:!1,cameraControlType:0,cameraControlTarget:null,cameraHelper:!1,shadowMap_Enabled:!1,stats:!0,debugMode:!1,option:null},i.isRender=!1,i.renderObjects={},i.resizeObject=[],i.helpers={},i.lookAt=!1,i.lookAtTarget=new h.Vector3(0,0,0),i.config=Object.assign(i.config,r),i.scene=new h.Scene,i.camera=new h.PerspectiveCamera(i.config.camera_fov,i.stage.aspect,i.config.camera_near,i.config.camera_far),i.camera.rotation.set(i.config.camera_rot_x,i.config.camera_rot_y,i.config.camera_rot_z),i.renderer=new h.WebGLRenderer({antialias:i.config.render_antialias,alpha:i.config.render_alpha}),i.renderer.setPixelRatio(i.config.render_pixelRatio),i.renderer.setClearColor(i.config.render_clearColor,i.config.render_clearColorAlpha),i.renderer.setSize(i.stage.width,i.stage.height),i.renderer.shadowMap.enabled=i.config.render_shadowMap_enabled,i.$container=document.querySelector(t),i.$container&&i.$container.append(i.renderer.domElement),i.resize=(0,p.default)(i.resize.bind(c(i)),30),window.addEventListener("resize",i.resize),i.config.stats,i}o(e,f["default"]);var n=s(e);return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(e,[{key:"addRenderObject",value:function(t,e){this.renderObjects.hasOwnProperty(t)||(this.renderObjects[t]=e)}},{key:"removeRenderObject",value:function(t){this.renderObjects.hasOwnProperty(t)&&delete this.renderObjects[t]}},{key:"resize",value:function(){var t=this;m.isIOS&&window.innerWidth==this.stage.width||(this.stage.width=window.innerWidth,this.stage.height=window.innerHeight,this.stage.distHeight=0,m.isIOS&&(this.stage.height=this.scream.getScreenHeight(),this.stage.distHeight=this.stage.height-window.innerHeight),this.stage.aspect=this.stage.width/this.stage.height,this.camera.aspect=this.stage.aspect,this.camera.updateProjectionMatrix(),this.resizeObject.forEach(function(e){e.resize(t.stage.width,t.stage.height)}),this.renderer.setSize(this.stage.width,this.stage.height))}},{key:"renderStart",value:function(){this.isRender||(this.isRender=!0,requestAnimationFrame(this.render.bind(this)))}},{key:"rednerStop",value:function(){this.isRender=!1}},{key:"render",value:function(){for(var t in this.renderObjects)this.renderObjects[t]();this.isRender&&requestAnimationFrame(this.render.bind(this))}}]),e}();n.default=v},{"../../util/UA":132,"./util/Dat":120,"./util/OrbitControls":121,events:6,"lodash/debounce":69,scream:86,three:89}],104:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t("three"),o=i(t("./History")),s=(i(t("./util/Dat")),function(){function t(e,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.container=new a.Object3D,this.container.name="Histories",this.naviList=e,this.list=[],this.loaders=[],this.setGui(),this.activeID=-1}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"load",value:function(){var t=this;return this.naviList.forEach(function(e,n){var i=new o.default(n,e);t.list[n]=i,t.container.add(i.container),t.loaders=t.loaders.concat(i.load())}),this.loaders}},{key:"setGui",value:function(){}},{key:"update",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0],this.list.forEach(function(t){t.update()})}},{key:"active",value:function(t){this.activeID=t,this.list.forEach(function(e,n){-1==t?(e.container.visible=!0,e.setMonochrome(1),e.setScale(1),e.setOpacity(1)):t==n?(e.container.visible=!0,e.setMonochrome(0),e.setScale(2),e.setOpacity(.2)):(e.container.visible=!1,e.setOpacity(1))})}}]),t}());n.default=s},{"./History":105,"./util/Dat":120,three:89}],105:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t("three"),o=i(t("./Plane")),s=i(t("../../Config")),u=t("gsap"),c=function(){function t(e,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.id=e,this.naviIndex=n.getAttribute("data-navi-index"),this.monochrome=1,this.opacity=1,this.container=new a.Object3D,this.planes=[],this.loaders=[],this.dataDom=n}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"load",value:function(){for(var t=this,e=this.dataDom.getAttribute("data-page-assets-path"),n=this.dataDom.getAttribute("data-page-history-legnth"),i=(this.dataDom.getAttribute("data-page-color"),function(i){var r=new o.default({transparent:!0,color:new a.Color(13421772)}),u=i+1<10?"0"+(i+1):i+1;t.loaders[i]=r.load(e+"history_".concat(u,".png")).then(function(){r.resizeGeomery(),r.resetViewPort(s.default.scenePosition.history.position.z),r.container.position.z=-i*(200+100*Math.random()),r.container.position.x=window.innerWidth*Math.random()-.5*window.innerWidth,r.container.position.y=-(r.viewArea.height/n+1.5*r.size.height)*i+r.viewArea.height*Math.random()}),t.planes[i]=r,t.container.add(r.container)}),r=0;r<n;r++)i(r);return this.loaders}},{key:"resize",value:function(){}},{key:"update",value:function(t){var e=this;("about"!=s.default.currentScene||s.default.isTransition)&&this.planes.forEach(function(n,i){var r=n.container.position,a=n.mesh.material.uniforms;n.resetViewPort(),r.y+=2,r.y>n.viewArea.height&&(r.y=-n.viewArea.height),a.opacity.value=t,a.opacity2.value=e.opacity,a.monochrome.value=e.monochrome})}},{key:"setMonochrome",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u.TweenLite.to(this,e,{monochrome:t,ease:u.Power2.easeOut})}},{key:"setScale",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.container.scale.set(t,t,t)}},{key:"setOpacity",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u.TweenLite.to(this,e,{opacity:t,ease:u.Power2.easeOut})}}]),t}();n.default=c},{"../../Config":92,"./Plane":111,gsap:7,three:89}],106:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t("three"),o=i(t("../../Config")),s=(i(t("./Intro_Lion")),i(t("./util/Dat")),i(t("./Paper"))),u=(t("lodash"),t("gsap")),c=t("../../util/UA")(),l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),o.default.stageSize,this.container=new a.Object3D,this.textContainer=new a.Object3D,this.paperContainer=new a.Object3D,this.container.name="Intro",this.container.add(this.paperContainer),this.isKilled=!1,this.$introContents=document.querySelector(".introContents"),this.naviList=e,this.mouse={x:0,y:0},this.mouseAcc={x:0,y:0},this.paperTotal=o.default.sceneOffset.intro.papers,this.papers=[],this.loaders=[],this.paperCenter=new a.Vector3(0,0,0),this.paperOption={spreadTime:o.default.animation.intro.spreadTime,width:360,height:500,segments:10,shaderMaterial:!0,side:a.DoubleSide},this.count=0,this.toRad=Math.PI/180,this.paperMargin=.4,this.animOffset={centerX:1e4,centerY:-1e4,centerZ:-1e4,rotX:500,rotY:273,rotZ:1440,disX:7e3,disY:3300,disZ:3500,amp:8.5,ampFriction:.9,timeSpeed:.003,delay:50},c.isSmartPhone?this.paperContainer.position.set(0,-400,-800):this.paperContainer.position.set(0,-300,-500),this.paperContainer.rotation.set(-1.256,0,.8203),this.paperContainer.scale.set(1.5,1.5,1.5),this.paperCenter.set(0,0,1e4),window.addEventListener("mousemove",this.onMoseMove.bind(this))}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"onMoseMove",value:function(t){var e=t.clientX,n=t.clientY;this.mouse.x=e/window.innerWidth*2-1,this.mouse.y=-n/window.innerHeight*2+1}},{key:"load",value:function(){for(var t=this,e=(new a.Vector3,o.default.sceneOffset.intro.papers,Math.sqrt(5),Math.PI,function(e){var n=e%t.naviList.length,o=t.naviList[n],u=o.getAttribute("data-page-assets-path"),c=(o.getAttribute("data-page-thumb"),o.getAttribute("data-page-name"),o.getAttribute("data-page-color"));t.paperOption.isBackFaceColor=!0,t.paperOption.backFaceColor=new a.Color(c);var l=new s.default(t.paperOption);l.container.position,l.container.rotation,l.lookTarget=new a.Vector3(0,0,0),l.mesh.geometry.attributes.position.array,i=Math.acos(2*e/t.paperTotal-1),r=Math.sqrt(t.paperTotal*Math.PI)*i,l.container.position.setFromSphericalCoords(200,i,r),l.container.position.copy(l.container.position).multiplyScalar(2),l.phi=i,l.theta=r,l.oldPosition=new a.Vector3,l.velocity={x:4*Math.random()-2,y:0,vx:0,vy:0,vz:0,sx:.2+.1*Math.random(),sy:.2+.1*Math.random(),sz:2*Math.random()+2,progress:0,time:0,direction:1,timeSpeed:.1,rot:.5*(2*Math.random()-1)*Math.PI/180},l.resetAnimOffset=function(){l.animOffset=Object.assign({},t.animOffset);var e=Math.random()<.2?-1:1;l.animOffset.centerX=t.animOffset.centerX*Math.random(),l.animOffset.centerY=t.animOffset.centerY*Math.random(),l.animOffset.centerZ=t.animOffset.centerZ*Math.random(),l.animOffset.rotY*=e,l.animOffset.disX+=1e3*(10*Math.random()-5),l.animOffset.disY+=1e3*(10*Math.random()-5),l.animOffset.disZ+=2*Math.random()*500},l.resetAnimOffset(),l.free=!1,t.papers[e]=l,t.paperContainer.add(l.container),t.loaders.push(l.load([u+"thumb.jpg",u+"thumb_en.jpg"]).then(function(){}))}),n=0;n<o.default.sceneOffset.intro.papers;n++){var i,r;e(n)}return this.loaders}},{key:"reset",value:function(){this.papers.forEach(function(t,e){t.velocity.progress=0,t.free=!1,t.resetAnimOffset(),t.freeTimer&&clearTimeout(t.freeTimer)})}},{key:"spread",value:function(){var t=this;return new Promise(function(e){t.papers.forEach(function(n,i){n.velocity.progress=0,n.free=!1,n.resetAnimOffset(),n.freeTimer&&clearTimeout(n.freeTimer),n.freeTimer=setTimeout(function(){n.free=!0,i==t.papers.length-1&&(t.spreadTimer=setTimeout(e,1e3*t.paperOption.spreadTime*.5))},(t.paperTotal-i)*t.animOffset.delay)}),u.TweenLite.to(t.paperContainer.position,3,{y:-700,ease:u.Power3.easeInOut})})}},{key:"showTitle",value:function(){this.$introContents.classList.remove("-hide")}},{key:"hideTitle",value:function(){this.$introContents.classList.add("-hide")}},{key:"hide",value:function(){this.container.visible=!1}},{key:"kill",value:function(){this.isKilled=!0,this.$introContents.parentElement.removeChild(this.$introContents),o.default.scene.remove(this.container),this.papers.forEach(function(t,e){t.kill()}),this.papers=null,window.removeEventListener("mousemove",this.onMoseMove)}},{key:"resise",value:function(){}},{key:"update",value:function(){var t=this;if(!this.isKilled){var e=new a.Vector3,n=this.paperContainer.position.clone();n.add(this.paperCenter),this.mouseAcc.x+=.05*(this.mouse.x-this.mouseAcc.x),this.paperContainer.rotation.z=.8203-.2*this.mouseAcc.x,this.papers.forEach(function(i,r){var a=i.velocity;i.free?(a.progress+=1/t.paperOption.spreadTime/60,a.progress>1&&(a.progress=1,i.free=!1,i.resetAnimOffset())):(a.vx=0,a.vy=0,a.vz=0,a.time=0,i.container.position.x=a.vx,i.container.position.y=a.vy,i.container.position.z=r*t.paperMargin*10),a.vx=Math.sin(a.progress*i.animOffset.rotX*t.toRad)*i.animOffset.disX*a.progress,a.vy=Math.sin(a.progress*i.animOffset.rotY*t.toRad)*i.animOffset.disY*a.progress,a.vz=i.animOffset.disZ*a.progress,i.container.position.x=a.vx,i.container.position.y=a.vy,i.container.position.z=a.vz+r*t.paperMargin*10;var o=i.oldPosition.distanceTo(i.container.position);e.subVectors(i.oldPosition,i.container.position),e.normalize(),i.mesh.material.uniforms.time.value+=Math.min(1,Math.abs(o)*t.animOffset.timeSpeed),i.mesh.material.uniforms.ampX.value+=e.x*t.animOffset.amp,i.mesh.material.uniforms.ampY.value+=e.y*t.animOffset.amp,i.mesh.material.uniforms.ampX.value*=t.animOffset.ampFriction,i.mesh.material.uniforms.ampY.value*=t.animOffset.ampFriction,i.oldPosition.copy(i.container.position),n.x+=i.animOffset.centerX*a.progress,n.y+=i.animOffset.centerY*a.progress,n.z+=i.animOffset.centerZ*a.progress,i.container.lookAt(n),i.mesh.rotation.copy(t.paperContainer.rotation)})}}}]),t}();n.default=l},{"../../Config":92,"../../util/UA":132,"./Intro_Lion":107,"./Paper":109,"./util/Dat":120,gsap:7,lodash:76,three:89}],107:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=i(t("../../Config")),o=t("three"),s=(i(t("./util/Dat")),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{width:1024,height:1122};(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.texture=null;var n=(a.default.stageSize,new o.PlaneBufferGeometry(e.width,e.height,1)),i=new o.ShaderMaterial({uniforms:{uTexture:{value:this.texture},distortion:{value:0},loaded:{value:0},lionAspect:{value:e.width/e.height}},vertexShader:"\n        varying vec2 vUv;\n        void main(){\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position , 1.0);\n        }\n      ",fragmentShader:"\n        varying vec2 vUv;\n\n        uniform sampler2D uTexture;\n        uniform float distortion;\n        uniform float loaded;\n        uniform float lionAspect;\n\n        void main(){\n          vec4 tColor = vec4(1.0);\n          vec4 lionColor = vec4(1.0);\n\n          vec2 newUV = vUv;\n          vec2 lionUV = vUv;\n\n  \t\t\t\t// newUV -= vec2(0.5,0.5);\n  \t\t\t\t// newUV *= vec2(pow(length(newUV),distortion));\n          // newUV += vec2(0.5,0.5);\n          \n          float alpha = 1.0;\n          if(loaded == 1.) {\n            \n            lionColor = texture2D(uTexture , lionUV);\n\n          } \n\n          if(lionColor.r == 1.){\n            tColor.a = 0.0;\n          }\n          \n          gl_FragColor = lionColor;\n          \n        }\n      ",transparent:!0});this.mesh=new o.Mesh(n,i),this.mesh.position.set(0,0,0)}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"load",value:function(){var t=this;return new Promise(function(e){t.texture=(new o.TextureLoader).load(a.default.assetPath+"images/lion.png",function(n){n.minFilter=o.LinearFilter;var i=t.mesh.material.uniforms;i.uTexture.value=n,i.loaded.value=1,t.mesh.material.needsUpdate=!0,e()})})}},{key:"resize",value:function(){}}]),t}());n.default=s},{"../../Config":92,"./util/Dat":120,three:89}],108:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function u(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=h(t);if(e){var r=h(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return c(this,n)}}function c(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?l(t):e}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var f=i(t("./Base3D")),p=i(t("../../util/DragAndDropSmooth")),d=i(t("@barba/core")),m=(i(t("@barba/css")),t("three")),v=t("gsap"),g=i(t("./Intro")),y=i(t("./Papers")),_=i(t("./Histories")),x=i(t("../../Config")),b=i(t("../../util/GetLanguage")),w=i(t("../lineAnim/LineAnimation")),M=i(t("../Cursor")),S=i(t("../Header")),A=t("./postprocessing/EffectComposer.js"),T=t("./postprocessing/RenderPass.js"),P=t("./postprocessing/ShaderPass.js"),L=t("./shader/LionMaskShader.js"),E=t("./shader/FXAAShader.js"),O=t("../../util/UA")(),C=function(t){function e(){var t;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),e.instance)return c(t,e.instance);var i=document.querySelector("#webglContent");(t=n.call(this,"#webglContent",{camera_far:5e3,debugMode:!1,cameraHelper:!1,stats:!1,render_renderAuto:!1})).scene.background=x.default.backgroundColors.default.clone(),t.renderer.autoColor=!1,t.option={maskOpacity:1},t.mouse={x:0,y:0},t.tweeners={},t.header=new S.default,t.$nav=document.querySelector("nav"),t.$webglContent=i,x.default.base3D=l(t),x.default.scene=t.scene,x.default.stageSize=t.stage,x.default.camera=t.camera,x.default.renderer=t.renderer,x.default.computeZ=function(e,n,i){var r=t.camera.fov*Math.PI/180,a=2*Math.tan(r/2);return(n*t.stage.height+i*(e*a))/(i*a)},t.dnd=new p.default(t.$webglContent,O.isPC?{power:.2,friction:.93,wheel:!0}:{power:.6,friction:.94});var r=Array.from(document.querySelectorAll("[data-navi-list]"));(r=r.splice(Math.round(.5*r.length)).concat(r)).forEach(function(t,e){var n=t.getAttribute("data-page-color");x.default.naviColors[e]=n}),t.cursor=new M.default,t.intro=new g.default(r),t.intro.container.position.copy(x.default.scenePosition.intro.position),t.scene.add(t.intro.container),t.papers=new y.default(r),t.papers.container.position.copy(x.default.scenePosition.home.position),t.scene.add(t.papers.container),t.histories=new _.default(r,t.papers.papers),t.histories.container.position.copy(x.default.scenePosition.history.position),t.scene.add(t.histories.container),t.papers.histories=t.histories.list,t.lineAnimation=new w.default(r),t.lineAnimation.container.position.copy(x.default.scenePosition.about.position),t.scene.add(t.lineAnimation.container),t.raycaster=new m.Raycaster,t.intersectedObject=null,t.mouseDownTimeCheck=null,t.intersectObject=function(e,n,i){t.mouse.x=e/t.stage.width*2-1,t.mouse.y=-n/t.stage.height*2+1,t.raycaster.setFromCamera(t.mouse,t.camera);var r=t.raycaster.intersectObjects(i),a=null;return r.length>0&&(a=r[0].object),a},i.addEventListener("mousedown",function(e){t.intersectedObject=a(e),t.mouseDownTimeCheck=new Date}),i.addEventListener("mouseup",function(e){if(!(new Date-t.mouseDownTimeCheck>x.default.mouseDownUpThresholdTime)){var n=a(e);if(null!==t.intersectedObject&&null!==n&&t.intersectedObject._name==n._name){if(x.default.isTransition)return;var i="en"==(0,b.default)().document?n._hrefEn:n._href;i+"/"==window.location.pathname?t.header.emit("naviClose"):d.default.go(i)}}}),i.addEventListener("mousemove",function(e){a(e)?i.classList.contains("-hover")||(i.classList.add("-hover"),t.cursor.changeScale("big")):i.classList.contains("-hover")&&(i.classList.remove("-hover"),t.cursor.changeScale("normal"))});var a=function(e){var n=e.clientX,i=e.clientY;return t.intersectObject(n,i,t.papers.eventTargets)};t.renderPass=new T.RenderPass(t.scene,t.camera),t.fxaaPass=new P.ShaderPass(E.FXAAShader),t.lionPass=new P.ShaderPass(L.LionMaskShader),t.lionPass.uniforms.resolution.value.x=x.default.stageSize.width,t.lionPass.uniforms.resolution.value.y=x.default.stageSize.height;var o=t.renderer.getPixelRatio();return t.fxaaPass.material.uniforms.resolution.value.x=1/(t.renderer.domElement.offsetWidth*o),t.fxaaPass.material.uniforms.resolution.value.y=1/(t.renderer.domElement.offsetHeight*o),t.composer=new A.EffectComposer(t.renderer),t.composer.addPass(t.renderPass),t.composer.addPass(t.lionPass),t.composer.addPass(t.fxaaPass),t.addRenderObject("navi",function(){t.infoText="";var e=t.dnd.update();x.default.isTransition&&(e.x=0,e.y=0),t.papers.update(e),t.composer.render(),t.intro.update(t.mouse),t.cursor.update(),t.lineAnimation.update(),t.lionPass.uniforms.time.value+=.01}),t.resizeObject.push({resize:function(e,n){t.onResize(e,n)}}),t.onResize(t.stage.width,t.stage.height),e.instance=l(t),c(t,e.instance)}s(e,f["default"]);var n=u(e);return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"ready",value:function(){var t=this;return new Promise(function(e){(new m.TextureLoader).load(x.default.assetPath+"images/lion.png",function(n){t.lionPass.uniforms.tMask.value=n,e()})})}},{key:"load",value:function(){var t=this;if(!this.isLoading)return this.isLoading=!0,new Promise(function(e){var n=[];(function(t,e){var n=0;return e(0),t.forEach(function(i){i.then(function(){e(++n/t.length)})}),Promise.all(t)})(n=(n=(n=n.concat(t.intro.load())).concat(t.papers.load())).concat(t.histories.load()),function(e){t.cursor.loading(e)}).then(function(){setTimeout(function(){O.isPC?t.cursor.changeMode("loading"):t.cursor.close()},500),t.isLoading=!1,e()})})}},{key:"changeBgColor",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{duration:1,delay:0};return new Promise(function(i){var r={duration:1,delay:0,ease:v.Power3.easeOut,onComplete:i};Object.assign(r,n),Object.assign(r,x.default.backgroundColors[e]),t.tweeners.bgColor&&t.tweeners.bgColor.kill(),t.tweeners.bgColor=v.TweenLite.to(t.scene.background,r.duration,r)})}},{key:"viewTop",value:function(){var t=this;return new Promise(function(e){var n=x.default.animation.intro.spreadTime;t.sceneMove("intro"),t.maskView({duration:1,delay:.1}).then(function(){t.intro.showTitle(),t.contentsView({delay:2}),setTimeout(function(){t.intro.hideTitle()},4e3),t.maskHide({delay:3}).then(function(){return t.sceneMoveSmooth("home",{duration:x.default.animation.navi.duration}),t.intro.spread({duration:n})}).then(function(){t.papers.intro().then(function(){e(),t.intro.kill()})})})})}},{key:"viewNavi",value:function(t){var e=this;return new Promise(function(n){e.intro.kill(),e.sceneMove("navi"),e.contentsView({delay:0}),e.maskHide({delay:2}),e.maskView({duration:1,delay:0}).then(function(){return e.papers.intro(t,!0)}).then(function(){n()})})}},{key:"viewAbout",value:function(){var t=this;return new Promise(function(e){t.intro.kill(),t.contentsView({delay:0}),t.maskView({duration:1,delay:0}),t.maskHide({delay:.5}).then(function(){e()}),t.papers.intro()})}},{key:"sceneMove",value:function(t){x.default.currentScene!=t&&(x.default.currentScene=t,this.camera.position.z=x.default.scenePosition[t].camera.z)}},{key:"sceneMoveSmooth",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(i){var r=x.default.scenePosition[t].camera;if(t==x.default.currentScene||r.z==e.camera.position.z)return i();var a=Object.assign({duration:2,ease:v.Power4.easeInOut},n);e.tweeners.sceneMove&&e.tweeners.sceneMove.kill(),e.tweeners.sceneMove=v.TweenLite.to(e.camera.position,a.duration,{x:r.x,y:r.y,z:r.z,delay:0,ease:a.ease,onComplete:function(){i(),e.sceneMove(t)}})})}},{key:"maskView",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({duration:2,delay:0},e);return this.lionPass.uniforms.scale.value=x.default.lionScale,new Promise(function(e){var i;v.TweenLite.to(t.lionPass.uniforms.maskOpacity,n.duration,(a(i={delay:.3,value:1},"delay",n.delay),a(i,"ease",v.Power2.easeInOut),a(i,"onComplete",e),i)),v.TweenLite.to(t.lionPass.uniforms.scale,n.duration,{value:x.default.lionScale,delay:n.delay,ease:v.Power1.easeInOut})})}},{key:"maskHide",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({duration:2,delay:0},e);return new Promise(function(e){v.TweenLite.to(t.lionPass.uniforms.maskOpacity,n.duration,{value:0,delay:n.delay,ease:v.Power1.easeInOut,onComplete:e}),v.TweenLite.to(t.lionPass.uniforms.scale,2*n.duration,{value:.35,delay:n.delay,ease:v.Power1.easeInOut,onComplete:e})})}},{key:"contentsView",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({duration:2,delay:0},e);return new Promise(function(e){v.TweenLite.to(t.lionPass.uniforms.opacity,n.duration,{value:1,delay:n.delay,ease:v.Power1.easeInOut,onComplete:e})})}},{key:"contentsHide",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=Object.assign({duration:2,delay:0},e);return new Promise(function(e){v.TweenLite.to(t.lionPass.uniforms.opacity,n.duration,{value:0,delay:n.delay,ease:v.Power1.easeInOut,onComplete:e})})}},{key:"changeNoise",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=Object.assign({duration:2,delay:0,noise:.05},t);v.TweenLite.to(this.lionPass.uniforms.noiseIntensity,e.duration,{value:e.noise,ease:v.Power1.easeInOut})}},{key:"onResize",value:function(t,e){this.composer.setSize(t,e);var n=this.renderer.getPixelRatio();this.fxaaPass.material.uniforms.resolution.value.x=1/(t*n),this.fxaaPass.material.uniforms.resolution.value.y=1/(e*n),this.scene.position.y=this.stage.distHeight,O.isIOS&&window.innerWidth<720&&(this.scene.position.y+=-window.innerWidth/720*50);var i=t<720?t/720:1;if(this.lionPass.uniforms.lionPosition.value.y=.8*-this.stage.distHeight,O.isSmartPhone){this.lionPass.uniforms.resolution.value.x=.5*t,this.lionPass.uniforms.resolution.value.y=.5*e,this.lionPass.uniforms.lionResolution.value.x=t,this.lionPass.uniforms.lionResolution.value.y=t*(2012/1920)}else{this.lionPass.uniforms.resolution.value.x=1*t/i,this.lionPass.uniforms.resolution.value.y=1*e/i,this.lionPass.uniforms.lionResolution.value.x=e*(1920/2012),this.lionPass.uniforms.lionResolution.value.y=e}for(var r in x.default.scenePosition){var a=x.default.scenePosition[r];a.camera.x=a.position.x,a.camera.y=a.position.y,a.camera.z=x.default.computeZ(a.position.z,a.height+this.stage.distHeight,e)}this.papers.resize(),""!=x.default.currentScene&&this.camera.position.copy(x.default.scenePosition[x.default.currentScene].camera)}},{key:"show",value:function(){}},{key:"hide",value:function(){}}]),e}();n.default=C},{"../../Config":92,"../../util/DragAndDropSmooth":125,"../../util/GetLanguage":127,"../../util/UA":132,"../Cursor":93,"../Header":94,"../lineAnim/LineAnimation":99,"./Base3D":103,"./Histories":104,"./Intro":106,"./Papers":110,"./postprocessing/EffectComposer.js":112,"./postprocessing/RenderPass.js":115,"./postprocessing/ShaderPass.js":116,"./shader/FXAAShader.js":118,"./shader/LionMaskShader.js":119,"@barba/core":1,"@barba/css":2,gsap:7,three:89}],109:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("three"),a=t("gsap"),o=function(t){return t&&t.__esModule?t:{default:t}}(t("../../Config")),s=(t("../../util/UA")(),function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n,i=Object.assign({id:-1,name:"",width:100,height:100,transparent:!1,lang:"",segments:1,shaderMaterial:!1,side:r.DoubleSide,isBackFaceColor:!1,eventTarget:!1,href:!1,backFaceColor:new r.Color("#ffffff")},e);this.texture,this.container=new r.Object3D,this.meshContainer=new r.Object3D,this.size={width:e.width,height:e.height,aspectW:e.width/e.height,aspectH:e.height/e.width},this.scale=new r.Vector2(1,1),this.rotation=new r.Quaternion(0,0,0),this.progress={zoom:0,texture:0,now:0},this.isZooming=!1,this.name=e.name,this.zoomOption=o.default.animation.paper.zoomOption,this.config={zoomFit:0},this.tweeners={zoom:null,texture:null},this.isFit=!1,n=i.shaderMaterial?new r.ShaderMaterial({uniforms:{time:{value:0},opacity:{value:1},opacity2:{value:1},tDiffuse1:{value:null},tDiffuse2:{value:null},range:{value:100},radius:{value:0},rotY:{value:0},ampX:{value:0},ampY:{value:Math.PI},lightPosition:{value:new r.Vector3(0,0,0)},backFaceColor:{value:i.backFaceColor},isBackFaceColor:{value:i.isBackFaceColor},freqX:{value:.01},freqY:{value:.01},tProgress:{value:"ja"==o.default.currentLang?0:1}},vertexShader:"\n          #define PI radians(180.0)\n          uniform float time;\n          uniform float range;\n          uniform float radius;\n          uniform float rotY;\n          uniform float ampX;\n          uniform float ampY;\n          uniform float freqX;\n          uniform float freqY;\n\n          varying vec2 vUv;\n          varying float zColor;\n        \n          mat4 rotationMatrix(vec3 axis, float angle)\n          {\n              axis = normalize(axis);\n              float s = sin(angle);\n              float c = cos(angle);\n              float oc = 1.0 - c;\n              \n              return mat4(oc * axis.x * axis.x + c,           oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s,  0.0,\n                          oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c,           oc * axis.y * axis.z - axis.x * s,  0.0,\n                          oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c,           0.0,\n                          0.0,                                0.0,                                0.0,                                1.0);\n          }\n\n        \n          void main() {\n            vUv = uv;\n            float curveAmount = range / radius;\n\n            float invRange = range > 0.0 ? 1.0 / range : 0.0;\n\n            vec3 pos = position;\n            pos.z = sin(pos.x * freqX + time) * ampX + cos(pos.y * freqY + time) * ampY;\n            mat4 rota = rotationMatrix(vec3(0.0,1.0,0.0), rotY);\n            \n            zColor = pos.z;\n            vec4 mvPosition = modelViewMatrix * rota * vec4(pos, 1.0);\n            gl_Position = projectionMatrix * mvPosition;\n          }\n        ",fragmentShader:"\n          uniform vec3 color;\n          uniform vec3 backFaceColor;\n          uniform float opacity;\n          uniform float opacity2;\n          uniform sampler2D tDiffuse1;\n          uniform sampler2D tDiffuse2;\n          uniform bool isBackFaceColor;\n          uniform vec3 lightPosition;\n          uniform float tProgress;\n\n          varying vec2 vUv;\n          varying float zColor;\n\n          void main() {\n            vec4 tColor1 = texture2D(tDiffuse1,vUv);\n            vec4 tColor2 = texture2D(tDiffuse2,vUv);\n            vec4 tColor = mix(tColor1,tColor2,tProgress);\n\n            float brightness = (smoothstep(-1.0,1.0,clamp(zColor,-1.,1.)) * 0.02);\n            vec3 destColor= tColor.rgb;\n            if (gl_FrontFacing == false && isBackFaceColor) destColor = backFaceColor;\n            gl_FragColor = vec4( destColor.rgb + brightness, opacity * opacity2 );\n          }\n        ",transparent:!0,wireframe:!1,side:i.side}):new r.MeshBasicMaterial({wireframe:!1,transparent:i.transparent});var a=new r.PlaneBufferGeometry(i.width,i.height,i.segments,i.segments);a.dispose(),this.mesh=new r.Mesh(a,n),this.container.add(this.meshContainer),this.meshContainer.add(this.mesh),i.eventTarget&&(this.eventTarget=new r.Mesh(new r.PlaneBufferGeometry(i.width,i.height,1),new r.MeshBasicMaterial({wireframe:!1,color:16711680})),this.eventTarget.renderOrder=10,this.eventTarget.material.depthTest=!1,this.eventTarget.material.dispose(),this.eventTarget.geometry.dispose(),this.eventTarget.visible=!1,this.eventTarget._name=i.name,this.eventTarget._id=i.id,this.eventTarget._href=i.href,this.eventTarget._hrefEn=i.hrefEn,this.meshContainer.add(this.eventTarget)),this.uniforms=this.mesh.material.uniforms}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"load",value:function(t){var e=this;return new Promise(function(n){var i=0;t.forEach(function(a,o){(new r.TextureLoader).load(a,function(a){a.minFilter=r.LinearFilter,a.magFilter=r.LinearFilter,e.size.width=a.image.width,e.size.height=a.image.height;var s=e.mesh.material;e.texture=a,"ShaderMaterial"==s.type?s.uniforms["tDiffuse".concat(o+1)].value=a:s.map=a,s.needsUpdate=!0,++i==t.length&&n()})})})}},{key:"fitSize",value:function(){this.mesh.geometry.computeBoundingBox();var t,e=window.innerWidth,n=window.innerHeight;t=e>n?e/this.size.aspectW:n*this.size.aspectH;var i=n,a=this.mesh.geometry.boundingBox.max.y-this.mesh.geometry.boundingBox.min.y,s=o.default.camera.fov*Math.PI/180,u=2*Math.tan(s/2),c=t*u,l=a*i+t*(this.mesh.position.z*u),h=this.container.getWorldPosition(new r.Vector3),f=o.default.camera.position.z-h.z-l/c;this.config.zoomFit=f}},{key:"setOpacity",value:function(t){this.mesh.material.uniforms.opacity2.value=t}},{key:"changeTexture",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=Object.assign(n,o.default.animation.paper.textureChange);return new Promise(function(n){t.tweeners.texture&&(t.tweeners.texture.kill(),n()),t.uniforms.time.value%=2*Math.PI,t.uniforms.ampY.value%=2*Math.PI,t.progress.now=0,t.progress.texture=2==e?0:1,t.tweeners.texture=a.TweenLite.to(t.progress,i.duration,{texture:2==e?1:0,now:1,delay:i.delay,ease:i.ease,onUpdate:t.textureUpdate.bind(t),onComplete:n})})}},{key:"zoom",value:function(t,e){var n=this;this.tweeners.zoom&&(this.tweeners.zoom.kill(),this.isZooming=!1),this.tweeners.zoom=a.TweenLite.to(this.progress,t.duration,{zoom:t.zoom,delay:t.delay,ease:t.ease,onStart:function(){n.isZooming=!0,n.fitSize()},onUpdate:this.zoomUpdate.bind(this),onComplete:function(){e(),n.isZooming=!1}})}},{key:"zoomIn",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(!(arguments.length>1&&void 0!==arguments[1])||arguments[1],Object.assign(Object.assign({},o.default.animation.paper.zoomOption),e));return n.zoom=1,this.isFit=!0,this.fitSize(),new Promise(function(e){t.zoom(n,e)})}},{key:"zoomOut",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isFit=!1;var n=Object.assign(Object.assign({},o.default.animation.paper.zoomOption),e);return n.zoom=0,new Promise(function(e){t.zoom(n,e)})}},{key:"zoomUpdate",value:function(){var t=this.progress.zoom;this.meshContainer.position.z=t*this.config.zoomFit;var e=t*-Math.PI,n=e-this.uniforms.rotY.value;this.uniforms.ampX.value+=20*Math.abs(n),this.uniforms.time.value+=.1*Math.abs(n),this.uniforms.time.value%=2*Math.PI,this.uniforms.rotY.value=e,this.mesh.position.y=.5*-o.default.stageSize.distHeight*t,this.isFit||(this.uniforms.opacity2.value+=1-.2*this.uniforms.opacity2.value)}},{key:"textureUpdate",value:function(){var t=this.progress.texture,e=Math.abs(1-(this.progress.now-.5)/.5);this.name,this.uniforms.ampY.value+=e*Math.PI*.4,this.uniforms.tProgress.value=t}},{key:"resize",value:function(){var t=this;if(this.fitSize(),this.isFit){var e=Object.assign({},o.default.animation.paper.zoomOption);e.zoom=1,a.TweenLite.to(this.progress,0,{zoom:e.zoom,delay:e.delay,ease:e.ease,onStart:function(){t.fitSize()},onUpdate:this.zoomUpdate.bind(this),onComplete:function(){}})}}},{key:"resizeGeomery",value:function(){this.mesh.geometry.dispose(),this.mesh.geometry=new r.PlaneBufferGeometry(this.size.width,this.size.height)}},{key:"kill",value:function(){this.mesh.material.dispose(),this.mesh.geometry.dispose(),this.texture&&this.texture.dispose()}}]),t}());n.default=s},{"../../Config":92,"../../util/UA":132,gsap:7,three:89}],110:[function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var a=t("three"),o=i(t("./Paper")),s=(i(t("./util/SimpleMesh")),i(t("./util/Dat")),i(t("../../Config"))),u=t("gsap"),c=(t("lodash"),i(t("../Header"))),l=t("../../util/UA")(),h=function(){function t(e){var n=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.paperOption=s.default.paperOption[l.isPC?"pc":"sp"],this.paperSize=this.paperOption.size,this.offset={cx:0,cy:0,vx:0,vy:0,introProgress:0,disX:0,disY:0,oldX:0,x:0,sx:0,margin:this.paperOption.margin,degree:180*Math.PI/180,radius:this.paperOption.bend,freqX:0,freqY:0,amp:2,ampFriction:.94,timeSpeed:.1},this.naviList=e,this.container=new a.Object3D,this.container.name="Papers",this.lock=!1,this.isIntro=!1,this.currentID=0,this.oldID=0,this.opacity=1,this.currentActivePaper=null,this.tweener,this.header=new c.default,this.loaders=[],this.names=[],this.papers=[],this.colors=[],this.eventTargets=[],this.histories=[],this.orderNames=[],this.orderId=[],this.papersProgress=[],this.$articleHeader=document.querySelector(".article_headers"),this.$articleHeaders=document.querySelectorAll(".article_header"),this.naviList.forEach(function(t,e){var i=t.querySelectorAll("a"),r=(t.getAttribute("data-page-assets-path"),t.getAttribute("data-page-thumb"),t.getAttribute("data-page-name")),u=t.getAttribute("data-navi-index"),c=t.getAttribute("data-page-color"),l=new o.default({id:e,name:r,lang:s.default.currentLang,width:n.paperSize.width,height:n.paperSize.height,shaderMaterial:!0,segments:10,isBackFaceColor:!0,eventTarget:!0,href:i[0].getAttribute("href"),hrefEn:i[1].getAttribute("href"),backFaceColor:new a.Color(c)});n.names[u]=r,n.orderId[e]=u,n.papers[e]=l,n.orderNames[e]=r,n.eventTargets[e]=l.eventTarget,n.colors[e]=c,n.container.add(l.container)}),this.isJumping=!1,this.resize()}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"load",value:function(){var t=this;return this.naviList.forEach(function(e,n){var i=e.getAttribute("data-page-assets-path"),r=t.papers[n];t.loaders.push(r.load([i+"thumb.jpg",i+"thumb_en.jpg"]))}),this.loaders}},{key:"getMaxInArray",value:function(t,e){return Math.max(t,e)}},{key:"getMinInArray",value:function(t,e){return Math.min(t,e)}},{key:"changeProperty",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n){var i=Object.assign({onComplete:n,duration:1,ease:u.Power4.easeInOut},e);u.TweenLite.to(t.offset,i.duration,i)})}},{key:"bendOff",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n){var i=Object.assign({onComplete:n,duration:1,ease:u.Power4.easeInOut,radius:0},e);u.TweenLite.to(t.offset,i.duration,i),u.TweenLite.to(t.container.position,i.duration,{y:s.default.stageSize.distHeight,ease:i.ease})})}},{key:"bendOn",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n){var i=Object.assign({onComplete:n,duration:1,ease:u.Power4.easeInOut,radius:t.paperOption.bend},e);u.TweenLite.to(t.offset,i.duration,i),u.TweenLite.to(t.container.position,i.duration,{y:0,ease:i.ease})})}},{key:"resize",value:function(){this.paperSizeWithMargin=this.paperSize.width+this.offset.margin.x,window.innerWidth<960&&!l.isPC&&(this.paperSizeWithMargin-=window.innerWidth/960*50),this.allPaperSize=this.paperSizeWithMargin*this.papers.length,this.standX=.5*-this.allPaperSize,this.papers.forEach(function(t){t.resize()})}},{key:"fadeIn",value:function(){}},{key:"changeTxuture",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ja";this.papers.forEach(function(e,n){e.changeTexture("ja"==t?1:2)})}},{key:"intro",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.names[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise(function(i){var r=t.getID(e),a=s.default.animation.navi.cycle*t.papers.length*t.paperSizeWithMargin-t.paperSizeWithMargin*r,o=-t.paperSizeWithMargin*r,c=t.getPaperByName(e);t.offset.introProgress=0,t.container.position.y=s.default.animation.navi.fromY,t.offset.x=a,t.isIntro=!0,t.tweener&&t.tweener.kill(),u.TweenLite.to(t.container.position,s.default.animation.navi.duration,{y:0,ease:u.Power4.easeInOut}),t.tweener=u.TweenLite.to(t.offset,s.default.animation.navi.duration,{introProgress:1,x:o,ease:u.Power4.easeInOut,onComplete:function(){t.isIntro=!1,n?c.zoomIn().then(function(){i()}):i()}})})}},{key:"viewPapers",value:function(){return this.getCurrentPaper()}},{key:"getCurrentPaper",value:function(){return this.currentActivePaper}},{key:"getID",value:function(t){return this.names.indexOf(t)}},{key:"getPaperByName",value:function(t){return this.papers[this.orderNames.indexOf(t)]}},{key:"getPaperColor",value:function(t){return this.colors[this.orderNames.indexOf(t)]}},{key:"articleHeaderToggle",value:function(t){t?this.$articleHeader.classList.remove("-hide"):this.$articleHeader.classList.add("-hide")}},{key:"changeAritcleHeader",value:function(t){var e=this;this.$articleHeaders.forEach(function(n,i){i==e.orderId[t]?n.classList.remove("-hide"):n.classList.add("-hide")})}},{key:"jump",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"string"==typeof t&&(t=this.getID(t));var i=Object.assign(n,s.default.animation.paper.jump);return new Promise(function(n){e.jump_next=t,e.jump_crt=e.currentID;var r=e.currentID-t,a=e.papers.length;Math.abs(r)>a/2&&(r=(a-e.jump_next+a/2)%a-(a-e.currentID+a/2)%a);e.jumpX=r*e.paperSizeWithMargin+e.offset.cx,e.offset.x=e.offset.cx,e.tweener&&e.tweener.kill(),e.jumpTimer&&clearTimeout(e.jumpTimer),e.jumpTimer=setTimeout(function(){n()},.8*i.duration*1e3),i.x=e.jumpX,e.tweener=u.TweenLite.to(e.offset,i.duration,i)})}},{key:"active",value:function(t){var e=this.orderNames.indexOf(t);return this.currentActivePaper=this.papers[e],this.papers.forEach(function(t,n){t.container.visible=-1==e||e==n}),e}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0};this.lock||this.papersUpdate(t)}},{key:"infoTextUpdate",value:function(){}},{key:"papersUpdate",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{x:0,y:0},n=0+this.standX,i=this.allPaperSize+this.standX;this.opacity=this.offset.introProgress,this.offset.x+=e.x;var r=this.offset.x-this.offset.oldX;if(Math.abs(r)<100&&(this.offset.disX=r),this.offset.disX=Math.round(1e3*this.offset.disX)/1e3,this.offset.cx=this.offset.x,this.offset.cx%=this.allPaperSize,this.header.moveIndication(this.offset.cx/this.allPaperSize),this.currentID=-this.offset.cx/this.paperSizeWithMargin,this.currentID<0&&(this.currentID=this.papers.length+this.currentID),this.papers.forEach(function(e,r){var a=e.container.position,o=e.container.rotation;a.x=t.offset.cx+r*t.paperSizeWithMargin+t.standX+.5*t.paperSizeWithMargin,a.x<n&&(a.x+=t.allPaperSize),a.x>i&&(a.x-=t.allPaperSize);var s=-a.x/t.standX;s=Math.round(1e3*s)/1e3;var u=Math.abs(s);t.papersProgress[r]=u,a.y=Math.cos(-s*Math.PI)*t.offset.radius*.1-.1*t.offset.radius;var c=t.offset.radius,l=Math.atan2(c,a.x-0);o.z=s*Math.cos(l+.5*Math.PI)*c/4e3;var h=.01*t.offset.disX;(e.mesh.material.uniforms.ampX.value+=Math.abs(h)*t.offset.amp,e.mesh.material.uniforms.ampY.value+=.15*Math.min(1,c*Math.abs(h*u)),e.mesh.material.uniforms.opacity.value=t.opacity,e.mesh.material.uniforms.time.value+=t.offset.timeSpeed,e.mesh.material.uniforms.ampX.value*=t.offset.ampFriction,e.mesh.material.uniforms.ampY.value*=t.offset.ampFriction,t.histories.length>0)&&(t.histories[r].container.position.x=a.x,t.histories[r].update(t.opacity*(1-u)))}),this.papersProgress.length>0){var a=this.papersProgress.indexOf(this.papersProgress.reduce(this.getMinInArray));a!=this.oldID&&this.changeAritcleHeader(a),this.oldID=a,this.offset.oldX=this.offset.x}}}]),t}();n.default=h},{"../../Config":92,"../../util/UA":132,"../Header":94,"./Paper":109,"./util/Dat":120,"./util/SimpleMesh":122,gsap:7,lodash:76,three:89}],111:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("three"),a=(t("gsap"),function(t){return t&&t.__esModule?t:{default:t}}(t("../../Config"))),o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=Object.assign({id:-1,name:"",width:100,height:100,transparent:!1,segments:1,href:!1,color:new r.Color,backFaceColor:new r.Color("#ffffff")},e);this.texture,this.container=new r.Object3D,this.size={width:n.width,height:n.height,aspectW:n.width/n.height,aspectH:n.height/n.width},this.name=e.name,this.viewArea={height:0,width:0},this.isFit=!1;var i=new r.ShaderMaterial({uniforms:{time:{value:0},opacity:{value:1},opacity2:{value:1},monochrome:{value:0},color:{value:e.color},tDiffuse:{value:null}},vertexShader:"\n        #define PI radians(180.0)\n\n        varying vec2 vUv;\n      \n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n        }\n      ",fragmentShader:"\n        uniform float opacity;\n        uniform float opacity2;\n        uniform sampler2D tDiffuse;\n        uniform vec3 color;\n        uniform float monochrome;\n        varying vec2 vUv;\n\n        void main() {\n          vec4 tColor = texture2D(tDiffuse,vUv);\n          vec3 destColor = mix(tColor.rgb * color,tColor.rgb,monochrome);\n          gl_FragColor = vec4( destColor, tColor.a * opacity * opacity2);\n        }\n      ",transparent:!0,wireframe:!1}),a=new r.PlaneBufferGeometry(n.width,n.height,n.segments,n.segments);a.dispose(),i.dispose(),this.mesh=new r.Mesh(a,i),this.container.add(this.mesh)}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"resetViewPort",value:function(t){void 0!==t||a.default.camera.position.z,this.mesh.geometry.computeBoundingBox();var e=this.mesh.geometry.boundingBox.max.y-this.mesh.geometry.boundingBox.min.y,n=a.default.camera.fov*a.default.PI,i=2*Math.tan(n/2),o=this.container.getWorldPosition(new r.Vector3),s=(a.default.camera.position.z-o.z)*i+e/i*1.5;this.viewArea.height=Math.abs(.5*s),this.viewArea.width=this.viewArea.height*window.innerWidth/window.innerHeight}},{key:"setMonochro",value:function(){}},{key:"setOpacity",value:function(t){this.mesh.material.uniforms.opacity2.value=t}},{key:"load",value:function(t){var e=this;return new Promise(function(n){(new r.TextureLoader).load(t,function(t){t.minFilter=r.LinearFilter,t.magFilter=r.LinearFilter,e.size.width=t.image.width,e.size.height=t.image.height;var i=e.mesh.material;e.texture=t,"ShaderMaterial"==i.type?i.uniforms.tDiffuse.value=t:i.map=t,i.needsUpdate=!0,n()})})}},{key:"resize",value:function(){this.fitSize(),this.isFit&&this.zoomIn()}},{key:"resizeGeomery",value:function(){this.mesh.geometry.dispose(),this.mesh.geometry=new r.PlaneBufferGeometry(this.size.width,this.size.height)}}]),t}();n.default=o},{"../../Config":92,gsap:7,three:89}],112:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Pass=n.EffectComposer=void 0;var i=t("three"),r=t("../shader/CopyShader.js"),a=t("./ShaderPass.js"),o=t("./MaskPass.js"),s=function(t,e){if(this.renderer=t,void 0===e){var n={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat,stencilBuffer:!1},o=t.getSize(new i.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=o.width,this._height=o.height,(e=new i.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=e.width,this._height=e.height;this.renderTarget1=e,this.renderTarget2=e.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],r.CopyShader,a.ShaderPass,this.copyPass=new a.ShaderPass(r.CopyShader),this.clock=new i.Clock};n.EffectComposer=s,Object.assign(s.prototype,{swapBuffers:function(){var t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t},addPass:function(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(t,e){this.passes.splice(e,0,t)},isLastEnabledPass:function(t){for(var e=t+1;e<this.passes.length;e++)if(this.passes[e].enabled)return!1;return!0},render:function(t){void 0===t&&(t=this.clock.getDelta());var e,n,i=this.renderer.getRenderTarget(),r=!1,a=this.passes.length;for(n=0;n<a;n++)if(!1!==(e=this.passes[n]).enabled){if(e.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),e.render(this.renderer,this.writeBuffer,this.readBuffer,t,r),e.needsSwap){if(r){var s=this.renderer.getContext(),u=this.renderer.state.buffers.stencil;u.setFunc(s.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),u.setFunc(s.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==o.MaskPass&&(e instanceof o.MaskPass?r=!0:e instanceof o.ClearMaskPass&&(r=!1))}this.renderer.setRenderTarget(i)},reset:function(t){if(void 0===t){var e=this.renderer.getSize(new i.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=e.width,this._height=e.height,(t=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(t,e){this._width=t,this._height=e;var n=this._width*this._pixelRatio,i=this._height*this._pixelRatio;this.renderTarget1.setSize(n,i),this.renderTarget2.setSize(n,i);for(var r=0;r<this.passes.length;r++)this.passes[r].setSize(n,i)},setPixelRatio:function(t){this._pixelRatio=t,this.setSize(this._width,this._height)}});var u=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};n.Pass=u,Object.assign(u.prototype,{setSize:function(){},render:function(){}}),u.FullScreenQuad=function(){var t=new i.OrthographicCamera(-1,1,1,-1,0,1),e=new i.PlaneBufferGeometry(2,2),n=function(t){this._mesh=new i.Mesh(e,t)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,t)}}),n}()},{"../shader/CopyShader.js":117,"./MaskPass.js":113,"./ShaderPass.js":116,three:89}],113:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ClearMaskPass=n.MaskPass=void 0;var i=t("./Pass.js"),r=function(t,e){i.Pass.call(this),this.scene=t,this.camera=e,this.clear=!0,this.needsSwap=!1,this.inverse=!1};n.MaskPass=r,r.prototype=Object.assign(Object.create(i.Pass.prototype),{constructor:r,render:function(t,e,n){var i,r,a=t.getContext(),o=t.state;o.buffers.color.setMask(!1),o.buffers.depth.setMask(!1),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0),this.inverse?(i=0,r=1):(i=1,r=0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(a.REPLACE,a.REPLACE,a.REPLACE),o.buffers.stencil.setFunc(a.ALWAYS,i,4294967295),o.buffers.stencil.setClear(r),o.buffers.stencil.setLocked(!0),t.setRenderTarget(n),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(e),this.clear&&t.clear(),t.render(this.scene,this.camera),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setLocked(!1),o.buffers.stencil.setFunc(a.EQUAL,1,4294967295),o.buffers.stencil.setOp(a.KEEP,a.KEEP,a.KEEP),o.buffers.stencil.setLocked(!0)}});var a=function(){i.Pass.call(this),this.needsSwap=!1};n.ClearMaskPass=a,a.prototype=Object.create(i.Pass.prototype),Object.assign(a.prototype,{render:function(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}})},{"./Pass.js":114}],114:[function(t,e,n){"use strict";function i(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.defineProperty(n,"__esModule",{value:!0}),n.Pass=i;var r=t("three");Object.assign(i.prototype,{setSize:function(){},render:function(){}}),i.FullScreenQuad=function(){var t=new r.OrthographicCamera(-1,1,1,-1,0,1),e=new r.PlaneBufferGeometry(2,2),n=function(t){this._mesh=new r.Mesh(e,t)};return Object.defineProperty(n.prototype,"material",{get:function(){return this._mesh.material},set:function(t){this._mesh.material=t}}),Object.assign(n.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,t)}}),n}()},{three:89}],115:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.RenderPass=void 0;var i=t("../postprocessing/Pass.js"),r=function(t,e,n,r,a){i.Pass.call(this),this.scene=t,this.camera=e,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==a?a:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};n.RenderPass=r,r.prototype=Object.assign(Object.create(i.Pass.prototype),{constructor:r,render:function(t,e,n){var i,r,a,o=t.autoClear;t.autoClear=!1,void 0!==this.overrideMaterial&&(a=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(i=t.getClearColor().getHex(),r=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:n),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(i,r),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=a),t.autoClear=o}})},{"../postprocessing/Pass.js":114}],116:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.ShaderPass=void 0;var i=t("three"),r=t("./Pass.js"),a=function(t,e){r.Pass.call(this),this.textureID=void 0!==e?e:"tDiffuse",t instanceof i.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):t&&(this.uniforms=i.UniformsUtils.clone(t.uniforms),this.material=new i.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new r.Pass.FullScreenQuad(this.material)};n.ShaderPass=a,a.prototype=Object.assign(Object.create(r.Pass.prototype),{constructor:a,render:function(t,e,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}})},{"./Pass.js":114,three:89}],117:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.CopyShader=void 0;n.CopyShader={uniforms:{tDiffuse:{value:null},opacity:{value:.5}},vertexShader:"\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n      }\n  ",fragmentShader:"\n    uniform float opacity;\n    uniform sampler2D tDiffuse;\n    varying vec2 vUv;\n    void main() {\n    \tvec4 texel = texture2D( tDiffuse, vUv );\n    \tgl_FragColor = opacity * texel;\n    }\n  "}},{}],118:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.FXAAShader=void 0;var i={uniforms:{tDiffuse:{value:null},resolution:{value:new(t("three").Vector2)(1/1024,1/512)}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["precision highp float;","","uniform sampler2D tDiffuse;","","uniform vec2 resolution;","","varying vec2 vUv;","","// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)","","//----------------------------------------------------------------------------------","// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag","// SDK Version: v3.00","// Email:       gameworks@nvidia.com","// Site:        http://developer.nvidia.com/","//","// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.","//","// Redistribution and use in source and binary forms, with or without","// modification, are permitted provided that the following conditions","// are met:","//  * Redistributions of source code must retain the above copyright","//    notice, this list of conditions and the following disclaimer.","//  * Redistributions in binary form must reproduce the above copyright","//    notice, this list of conditions and the following disclaimer in the","//    documentation and/or other materials provided with the distribution.","//  * Neither the name of NVIDIA CORPORATION nor the names of its","//    contributors may be used to endorse or promote products derived","//    from this software without specific prior written permission.","//","// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY","// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE","// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR","// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR","// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,","// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,","// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR","// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY","// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT","// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE","// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.","//","//----------------------------------------------------------------------------------","","#define FXAA_PC 1","#define FXAA_GLSL_100 1","#define FXAA_QUALITY_PRESET 12","","#define FXAA_GREEN_AS_LUMA 1","","/*--------------------------------------------------------------------------*/","#ifndef FXAA_PC_CONSOLE","    //","    // The console algorithm for PC is included","    // for developers targeting really low spec machines.","    // Likely better to just run FXAA_PC, and use a really low preset.","    //","    #define FXAA_PC_CONSOLE 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_120","    #define FXAA_GLSL_120 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GLSL_130","    #define FXAA_GLSL_130 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_3","    #define FXAA_HLSL_3 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_4","    #define FXAA_HLSL_4 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_HLSL_5","    #define FXAA_HLSL_5 0","#endif","/*==========================================================================*/","#ifndef FXAA_GREEN_AS_LUMA","    //","    // For those using non-linear color,","    // and either not able to get luma in alpha, or not wanting to,","    // this enables FXAA to run using green as a proxy for luma.","    // So with this enabled, no need to pack luma in alpha.","    //","    // This will turn off AA on anything which lacks some amount of green.","    // Pure red and blue or combination of only R and B, will get no AA.","    //","    // Might want to lower the settings for both,","    //    fxaaConsoleEdgeThresholdMin","    //    fxaaQualityEdgeThresholdMin","    // In order to insure AA does not get turned off on colors","    // which contain a minor amount of green.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_GREEN_AS_LUMA 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_EARLY_EXIT","    //","    // Controls algorithm's early exit path.","    // On PS3 turning this ON adds 2 cycles to the shader.","    // On 360 turning this OFF adds 10ths of a millisecond to the shader.","    // Turning this off on console will result in a more blurry image.","    // So this defaults to on.","    //","    // 1 = On.","    // 0 = Off.","    //","    #define FXAA_EARLY_EXIT 1","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_DISCARD","    //","    // Only valid for PC OpenGL currently.","    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.","    //","    // 1 = Use discard on pixels which don't need AA.","    //     For APIs which enable concurrent TEX+ROP from same surface.","    // 0 = Return unchanged color on pixels which don't need AA.","    //","    #define FXAA_DISCARD 0","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_FAST_PIXEL_OFFSET","    //","    // Used for GLSL 120 only.","    //","    // 1 = GL API supports fast pixel offsets","    // 0 = do not use fast pixel offsets","    //","    #ifdef GL_EXT_gpu_shader4","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_FAST_PIXEL_OFFSET 1","    #endif","    #ifndef FXAA_FAST_PIXEL_OFFSET","        #define FXAA_FAST_PIXEL_OFFSET 0","    #endif","#endif","/*--------------------------------------------------------------------------*/","#ifndef FXAA_GATHER4_ALPHA","    //","    // 1 = API supports gather4 on alpha channel.","    // 0 = API does not support gather4 on alpha channel.","    //","    #if (FXAA_HLSL_5 == 1)","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_ARB_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifdef GL_NV_gpu_shader5","        #define FXAA_GATHER4_ALPHA 1","    #endif","    #ifndef FXAA_GATHER4_ALPHA","        #define FXAA_GATHER4_ALPHA 0","    #endif","#endif","","","/*============================================================================","                        FXAA QUALITY - TUNING KNOBS","------------------------------------------------------------------------------","NOTE the other tuning knobs are now in the shader function inputs!","============================================================================*/","#ifndef FXAA_QUALITY_PRESET","    //","    // Choose the quality preset.","    // This needs to be compiled into the shader as it effects code.","    // Best option to include multiple presets is to","    // in each shader define the preset, then include this file.","    //","    // OPTIONS","    // -----------------------------------------------------------------------","    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)","    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)","    // 39       - no dither, very expensive","    //","    // NOTES","    // -----------------------------------------------------------------------","    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)","    // 13 = about same speed as FXAA 3.9 and better than 12","    // 23 = closest to FXAA 3.9 visually and performance wise","    //  _ = the lowest digit is directly related to performance","    // _  = the highest digit is directly related to style","    //","    #define FXAA_QUALITY_PRESET 12","#endif","","","/*============================================================================","","                           FXAA QUALITY - PRESETS","","============================================================================*/","","/*============================================================================","                     FXAA QUALITY - MEDIUM DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 10)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 3.0","    #define FXAA_QUALITY_P2 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 11)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 3.0","    #define FXAA_QUALITY_P3 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 12)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 4.0","    #define FXAA_QUALITY_P4 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 13)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 4.0","    #define FXAA_QUALITY_P5 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 14)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 4.0","    #define FXAA_QUALITY_P6 12.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 15)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 12.0","#endif","","/*============================================================================","                     FXAA QUALITY - LOW DITHER PRESETS","============================================================================*/","#if (FXAA_QUALITY_PRESET == 20)","    #define FXAA_QUALITY_PS 3","    #define FXAA_QUALITY_P0 1.5","    #define FXAA_QUALITY_P1 2.0","    #define FXAA_QUALITY_P2 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 21)","    #define FXAA_QUALITY_PS 4","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 22)","    #define FXAA_QUALITY_PS 5","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 23)","    #define FXAA_QUALITY_PS 6","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 24)","    #define FXAA_QUALITY_PS 7","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 3.0","    #define FXAA_QUALITY_P6 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 25)","    #define FXAA_QUALITY_PS 8","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 4.0","    #define FXAA_QUALITY_P7 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 26)","    #define FXAA_QUALITY_PS 9","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 4.0","    #define FXAA_QUALITY_P8 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 27)","    #define FXAA_QUALITY_PS 10","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 4.0","    #define FXAA_QUALITY_P9 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 28)","    #define FXAA_QUALITY_PS 11","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 4.0","    #define FXAA_QUALITY_P10 8.0","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_QUALITY_PRESET == 29)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.5","    #define FXAA_QUALITY_P2 2.0","    #define FXAA_QUALITY_P3 2.0","    #define FXAA_QUALITY_P4 2.0","    #define FXAA_QUALITY_P5 2.0","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","/*============================================================================","                     FXAA QUALITY - EXTREME QUALITY","============================================================================*/","#if (FXAA_QUALITY_PRESET == 39)","    #define FXAA_QUALITY_PS 12","    #define FXAA_QUALITY_P0 1.0","    #define FXAA_QUALITY_P1 1.0","    #define FXAA_QUALITY_P2 1.0","    #define FXAA_QUALITY_P3 1.0","    #define FXAA_QUALITY_P4 1.0","    #define FXAA_QUALITY_P5 1.5","    #define FXAA_QUALITY_P6 2.0","    #define FXAA_QUALITY_P7 2.0","    #define FXAA_QUALITY_P8 2.0","    #define FXAA_QUALITY_P9 2.0","    #define FXAA_QUALITY_P10 4.0","    #define FXAA_QUALITY_P11 8.0","#endif","","","","/*============================================================================","","                                API PORTING","","============================================================================*/","#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)","    #define FxaaBool bool","    #define FxaaDiscard discard","    #define FxaaFloat float","    #define FxaaFloat2 vec2","    #define FxaaFloat3 vec3","    #define FxaaFloat4 vec4","    #define FxaaHalf float","    #define FxaaHalf2 vec2","    #define FxaaHalf3 vec3","    #define FxaaHalf4 vec4","    #define FxaaInt2 ivec2","    #define FxaaSat(x) clamp(x, 0.0, 1.0)","    #define FxaaTex sampler2D","#else","    #define FxaaBool bool","    #define FxaaDiscard clip(-1)","    #define FxaaFloat float","    #define FxaaFloat2 float2","    #define FxaaFloat3 float3","    #define FxaaFloat4 float4","    #define FxaaHalf half","    #define FxaaHalf2 half2","    #define FxaaHalf3 half3","    #define FxaaHalf4 half4","    #define FxaaSat(x) saturate(x)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_100 == 1)","  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)","  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_120 == 1)","    // Requires,","    //  #version 120","    // And at least,","    //  #extension GL_EXT_gpu_shader4 : enable","    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)","    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)","    #if (FXAA_FAST_PIXEL_OFFSET == 1)","        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)","    #else","        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)","    #endif","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_GLSL_130 == 1)",'    // Requires "#version 130" or better',"    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)","    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)","    #if (FXAA_GATHER4_ALPHA == 1)","        // use #extension GL_ARB_gpu_shader5 : enable","        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)","        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)","        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)","        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)","    #endif","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_3 == 1)","    #define FxaaInt2 float2","    #define FxaaTex sampler2D","    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))","    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_4 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","#endif","/*--------------------------------------------------------------------------*/","#if (FXAA_HLSL_5 == 1)","    #define FxaaInt2 int2","    struct FxaaTex { SamplerState smpl; Texture2D tex; };","    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)","    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)","    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)","    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)","    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)","    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)","#endif","","","/*============================================================================","                   GREEN AS LUMA OPTION SUPPORT FUNCTION","============================================================================*/","#if (FXAA_GREEN_AS_LUMA == 0)","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }","#else","    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }","#endif","","","","","/*============================================================================","","                             FXAA3 QUALITY - PC","","============================================================================*/","#if (FXAA_PC == 1)","/*--------------------------------------------------------------------------*/","FxaaFloat4 FxaaPixelShader(","    //","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy} = center of pixel","    FxaaFloat2 pos,","    //","    // Used only for FXAA Console, and not used on the 360 version.","    // Use noperspective interpolation here (turn off perspective interpolation).","    // {xy_} = upper left of pixel","    // {_zw} = lower right of pixel","    FxaaFloat4 fxaaConsolePosPos,","    //","    // Input color texture.","    // {rgb_} = color in linear or perceptual color space","    // if (FXAA_GREEN_AS_LUMA == 0)","    //     {__a} = luma in perceptual color space (not linear)","    FxaaTex tex,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 2nd sampler.","    // This sampler needs to have an exponent bias of -1.","    FxaaTex fxaaConsole360TexExpBiasNegOne,","    //","    // Only used on the optimized 360 version of FXAA Console.",'    // For everything but 360, just use the same input here as for "tex".',"    // For 360, same texture, just alias with a 3nd sampler.","    // This sampler needs to have an exponent bias of -2.","    FxaaTex fxaaConsole360TexExpBiasNegTwo,","    //","    // Only used on FXAA Quality.","    // This must be from a constant/uniform.","    // {x_} = 1.0/screenWidthInPixels","    // {_y} = 1.0/screenHeightInPixels","    FxaaFloat2 fxaaQualityRcpFrame,","    //","    // Only used on FXAA Console.","    // This must be from a constant/uniform.","    // This effects sub-pixel AA quality and inversely sharpness.","    //   Where N ranges between,","    //     N = 0.50 (default)","    //     N = 0.33 (sharper)","    // {x__} = -N/screenWidthInPixels","    // {_y_} = -N/screenHeightInPixels","    // {_z_} =  N/screenWidthInPixels","    // {__w} =  N/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt,","    //","    // Only used on FXAA Console.","    // Not used on 360, but used on PS3 and PC.","    // This must be from a constant/uniform.","    // {x__} = -2.0/screenWidthInPixels","    // {_y_} = -2.0/screenHeightInPixels","    // {_z_} =  2.0/screenWidthInPixels","    // {__w} =  2.0/screenHeightInPixels","    FxaaFloat4 fxaaConsoleRcpFrameOpt2,","    //","    // Only used on FXAA Console.","    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.","    // This must be from a constant/uniform.","    // {x__} =  8.0/screenWidthInPixels","    // {_y_} =  8.0/screenHeightInPixels","    // {_z_} = -4.0/screenWidthInPixels","    // {__w} = -4.0/screenHeightInPixels","    FxaaFloat4 fxaaConsole360RcpFrameOpt2,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_SUBPIX define.","    // It is here now to allow easier tuning.","    // Choose the amount of sub-pixel aliasing removal.","    // This can effect sharpness.","    //   1.00 - upper limit (softer)","    //   0.75 - default amount of filtering","    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)","    //   0.25 - almost off","    //   0.00 - completely off","    FxaaFloat fxaaQualitySubpix,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // The minimum amount of local contrast required to apply algorithm.","    //   0.333 - too little (faster)","    //   0.250 - low quality","    //   0.166 - default","    //   0.125 - high quality","    //   0.063 - overkill (slower)","    FxaaFloat fxaaQualityEdgeThreshold,","    //","    // Only used on FXAA Quality.","    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    //   0.0833 - upper limit (default, the start of visible unfiltered edges)","    //   0.0625 - high quality (faster)","    //   0.0312 - visible limit (slower)","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaQualityEdgeThresholdMin,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only three safe values here: 2 and 4 and 8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // For all other platforms can be a non-power of two.","    //   8.0 is sharper (default!!!)","    //   4.0 is softer","    //   2.0 is really soft (good only for vector graphics inputs)","    FxaaFloat fxaaConsoleEdgeSharpness,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.","    // It is here now to allow easier tuning.","    // This does not effect PS3, as this needs to be compiled in.","    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.","    //   Due to the PS3 being ALU bound,","    //   there are only two safe values here: 1/4 and 1/8.","    //   These options use the shaders ability to a free *|/ by 2|4|8.","    // The console setting has a different mapping than the quality setting.","    // Other platforms can use other values.","    //   0.125 leaves less aliasing, but is softer (default!!!)","    //   0.25 leaves more aliasing, and is sharper","    FxaaFloat fxaaConsoleEdgeThreshold,","    //","    // Only used on FXAA Console.","    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.","    // It is here now to allow easier tuning.","    // Trims the algorithm from processing darks.","    // The console setting has a different mapping than the quality setting.","    // This only applies when FXAA_EARLY_EXIT is 1.","    // This does not apply to PS3,","    // PS3 was simplified to avoid more shader instructions.","    //   0.06 - faster but more aliasing in darks","    //   0.05 - default","    //   0.04 - slower and less aliasing in darks","    // Special notes when using FXAA_GREEN_AS_LUMA,","    //   Likely want to set this to zero.","    //   As colors that are mostly not-green","    //   will appear very dark in the green channel!","    //   Tune by looking at mostly non-green content,","    //   then start at zero and increase until aliasing is a problem.","    FxaaFloat fxaaConsoleEdgeThresholdMin,","    //","    // Extra constants for 360 FXAA Console only.","    // Use zeros or anything else for other platforms.","    // These must be in physical constant registers and NOT immediates.","    // Immediates will result in compiler un-optimizing.","    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)","    FxaaFloat4 fxaaConsole360ConstDir",") {","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posM;","    posM.x = pos.x;","    posM.y = pos.y;","    #if (FXAA_GATHER4_ALPHA == 1)","        #if (FXAA_DISCARD == 0)","            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","            #if (FXAA_GREEN_AS_LUMA == 0)","                #define lumaM rgbyM.w","            #else","                #define lumaM rgbyM.y","            #endif","        #endif","        #if (FXAA_GREEN_AS_LUMA == 0)","            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));","        #else","            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);","            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));","        #endif","        #if (FXAA_DISCARD == 1)","            #define lumaM luma4A.w","        #endif","        #define lumaE luma4A.z","        #define lumaS luma4A.x","        #define lumaSE luma4A.y","        #define lumaNW luma4B.w","        #define lumaN luma4B.z","        #define lumaW luma4B.x","    #else","        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);","        #if (FXAA_GREEN_AS_LUMA == 0)","            #define lumaM rgbyM.w","        #else","            #define lumaM rgbyM.y","        #endif","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));","        #endif","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat maxSM = max(lumaS, lumaM);","    FxaaFloat minSM = min(lumaS, lumaM);","    FxaaFloat maxESM = max(lumaE, maxSM);","    FxaaFloat minESM = min(lumaE, minSM);","    FxaaFloat maxWN = max(lumaN, lumaW);","    FxaaFloat minWN = min(lumaN, lumaW);","    FxaaFloat rangeMax = max(maxWN, maxESM);","    FxaaFloat rangeMin = min(minWN, minESM);","    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;","    FxaaFloat range = rangeMax - rangeMin;","    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);","    FxaaBool earlyExit = range < rangeMaxClamped;","/*--------------------------------------------------------------------------*/","    if(earlyExit)","        #if (FXAA_DISCARD == 1)","            FxaaDiscard;","        #else","            return rgbyM;","        #endif","/*--------------------------------------------------------------------------*/","    #if (FXAA_GATHER4_ALPHA == 0)","        #if (FXAA_GLSL_100 == 1)","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));","        #else","          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));","          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","        #endif","    #else","        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));","        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));","    #endif","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNS = lumaN + lumaS;","    FxaaFloat lumaWE = lumaW + lumaE;","    FxaaFloat subpixRcpRange = 1.0/range;","    FxaaFloat subpixNSWE = lumaNS + lumaWE;","    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;","    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNESE = lumaNE + lumaSE;","    FxaaFloat lumaNWNE = lumaNW + lumaNE;","    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;","    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;","/*--------------------------------------------------------------------------*/","    FxaaFloat lumaNWSW = lumaNW + lumaSW;","    FxaaFloat lumaSWSE = lumaSW + lumaSE;","    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);","    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);","    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;","    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;","    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;","    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;","/*--------------------------------------------------------------------------*/","    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;","    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;","    FxaaBool horzSpan = edgeHorz >= edgeVert;","    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;","/*--------------------------------------------------------------------------*/","    if(!horzSpan) lumaN = lumaW;","    if(!horzSpan) lumaS = lumaE;","    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;","    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;","/*--------------------------------------------------------------------------*/","    FxaaFloat gradientN = lumaN - lumaM;","    FxaaFloat gradientS = lumaS - lumaM;","    FxaaFloat lumaNN = lumaN + lumaM;","    FxaaFloat lumaSS = lumaS + lumaM;","    FxaaBool pairN = abs(gradientN) >= abs(gradientS);","    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));","    if(pairN) lengthSign = -lengthSign;","    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posB;","    posB.x = posM.x;","    posB.y = posM.y;","    FxaaFloat2 offNP;","    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;","    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;","    if(!horzSpan) posB.x += lengthSign * 0.5;","    if( horzSpan) posB.y += lengthSign * 0.5;","/*--------------------------------------------------------------------------*/","    FxaaFloat2 posN;","    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;","    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;","    FxaaFloat2 posP;","    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;","    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;","    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;","    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));","    FxaaFloat subpixE = subpixC * subpixC;","    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));","/*--------------------------------------------------------------------------*/","    if(!pairN) lumaNN = lumaSS;","    FxaaFloat gradientScaled = gradient * 1.0/4.0;","    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;","    FxaaFloat subpixF = subpixD * subpixE;","    FxaaBool lumaMLTZero = lumaMM < 0.0;","/*--------------------------------------------------------------------------*/","    lumaEndN -= lumaNN * 0.5;","    lumaEndP -= lumaNN * 0.5;","    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;","    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;","    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;","    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;","    FxaaBool doneNP = (!doneN) || (!doneP);","    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;","    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;","/*--------------------------------------------------------------------------*/","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 3)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 4)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 5)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 6)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;","/*--------------------------------------------------------------------------*/","                        #if (FXAA_QUALITY_PS > 7)","                        if(doneNP) {","                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                            doneN = abs(lumaEndN) >= gradientScaled;","                            doneP = abs(lumaEndP) >= gradientScaled;","                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;","                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;","                            doneNP = (!doneN) || (!doneP);","                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;","                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;","/*--------------------------------------------------------------------------*/","    #if (FXAA_QUALITY_PS > 8)","    if(doneNP) {","        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","        doneN = abs(lumaEndN) >= gradientScaled;","        doneP = abs(lumaEndP) >= gradientScaled;","        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;","        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;","        doneNP = (!doneN) || (!doneP);","        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;","        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;","/*--------------------------------------------------------------------------*/","        #if (FXAA_QUALITY_PS > 9)","        if(doneNP) {","            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","            doneN = abs(lumaEndN) >= gradientScaled;","            doneP = abs(lumaEndP) >= gradientScaled;","            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;","            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;","            doneNP = (!doneN) || (!doneP);","            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;","            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;","/*--------------------------------------------------------------------------*/","            #if (FXAA_QUALITY_PS > 10)","            if(doneNP) {","                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                doneN = abs(lumaEndN) >= gradientScaled;","                doneP = abs(lumaEndP) >= gradientScaled;","                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;","                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;","                doneNP = (!doneN) || (!doneP);","                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;","                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;","/*--------------------------------------------------------------------------*/","                #if (FXAA_QUALITY_PS > 11)","                if(doneNP) {","                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                    doneN = abs(lumaEndN) >= gradientScaled;","                    doneP = abs(lumaEndP) >= gradientScaled;","                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;","                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;","                    doneNP = (!doneN) || (!doneP);","                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;","                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;","/*--------------------------------------------------------------------------*/","                    #if (FXAA_QUALITY_PS > 12)","                    if(doneNP) {","                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));","                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));","                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;","                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;","                        doneN = abs(lumaEndN) >= gradientScaled;","                        doneP = abs(lumaEndP) >= gradientScaled;","                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;","                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;","                        doneNP = (!doneN) || (!doneP);","                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;","                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","    #endif","/*--------------------------------------------------------------------------*/","                        }","                        #endif","/*--------------------------------------------------------------------------*/","                    }","                    #endif","/*--------------------------------------------------------------------------*/","                }","                #endif","/*--------------------------------------------------------------------------*/","            }","            #endif","/*--------------------------------------------------------------------------*/","        }","        #endif","/*--------------------------------------------------------------------------*/","    }","/*--------------------------------------------------------------------------*/","    FxaaFloat dstN = posM.x - posN.x;","    FxaaFloat dstP = posP.x - posM.x;","    if(!horzSpan) dstN = posM.y - posN.y;","    if(!horzSpan) dstP = posP.y - posM.y;","/*--------------------------------------------------------------------------*/","    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;","    FxaaFloat spanLength = (dstP + dstN);","    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;","    FxaaFloat spanLengthRcp = 1.0/spanLength;","/*--------------------------------------------------------------------------*/","    FxaaBool directionN = dstN < dstP;","    FxaaFloat dst = min(dstN, dstP);","    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;","    FxaaFloat subpixG = subpixF * subpixF;","    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;","    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;","/*--------------------------------------------------------------------------*/","    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;","    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);","    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;","    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;","    #if (FXAA_DISCARD == 1)","        return FxaaTexTop(tex, posM);","    #else","        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);","    #endif","}","/*==========================================================================*/","#endif","","void main() {","  gl_FragColor = FxaaPixelShader(","    vUv,","    vec4(0.0),","    tDiffuse,","    tDiffuse,","    tDiffuse,","    resolution,","    vec4(0.0),","    vec4(0.0),","    vec4(0.0),","    0.75,","    0.166,","    0.0833,","    0.0,","    0.0,","    0.0,","    vec4(0.0)","  );","","  // TODO avoid querying texture twice for same texel","  gl_FragColor.a = texture2D(tDiffuse, vUv).a;","}"].join("\n")};n.FXAAShader=i},{three:89}],119:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.LionMaskShader=void 0;var i={uniforms:{tDiffuse:{value:null},baseColor:{value:new(t("three").Color)(15856370)},tMask:{value:null},opacity:{value:0},maskOpacity:{value:0},resolution:{value:{x:1920,y:1080}},lionResolution:{value:{x:1920,y:2012}},lionAspect:{value:1920/2012},lionPosition:{value:{x:0,y:0}},distortion:{value:0},thretold:{value:1},noiseBrightness:{value:1},noiseIntensity:{value:.05},time:{value:0},scale:{value:1}},vertexShader:"\n      varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n      }\n  ",fragmentShader:"\n    uniform float opacity;\n    uniform float maskOpacity;\n    uniform float aspect;\n    uniform float scale;\n    uniform float thretold;\n    uniform float distortion;\n    uniform float lionAspect;\n    uniform vec2 resolution;\n    uniform vec2 lionResolution;\n    uniform vec2 lionPosition;\n    uniform vec3 baseColor;\n    uniform sampler2D tDiffuse;\n    uniform sampler2D tMask;\n\n    uniform float time;\n    uniform float noiseIntensity;\n\t\tuniform float noiseBrightness;\n\n    varying vec2 vUv;\n\n    float random(vec2 co){\n      return fract(sin(dot(co.xy,vec2(12.9898,78.233))) * 43758.5453);\n    }\n\n    void main() {\n\n      vec2 newUV = vUv;\n      newUV *= sin(time);\n      float r = random(newUV);\n      vec3 noise = vec3(r * noiseBrightness);\n      // vec3 newColor = mix(color.rgb,noise,noiseIntensity);\n      // destColor = newColor;\n\n\n      vec2 texelUv = vUv;\n      vec2 lionUV = vUv;\n\n      vec2 res = resolution / lionResolution;\n      lionUV -= vec2(0.5,0.5);\n      lionUV *= res;\n      lionUV /= scale;\n      lionUV += vec2(0.5,0.5);\n      lionUV.y += lionPosition.y / resolution.y;\n\n      \n      vec4 texelMask = texture2D( tMask, lionUV );\n      vec4 texel = texture2D( tDiffuse, texelUv );\n\n      texel.rgb = mix(baseColor.rgb,texel.rgb,opacity);\n\n      vec4 maskColor = vec4(1.0);\n      maskColor *= texelMask.a;\n\n      vec4 destColor = texel;\n\n      if(length(texelMask.rgb) < 0.9 ){\n        destColor.rgb= vec3(1.0);\n      }\n      \n      // texelMask.rgb = vec3(1.0);\n      // destColor *= texelMask;\n      // destColor.rgb = vec3(1.0 - texelMask.a);\n      // destColor.rgb = (texel.rgb * vec3(destColor.rgb));\n\n      destColor = mix(texel,destColor,maskOpacity);\n      vec3 noiseColor = mix(destColor.rgb,noise,noiseIntensity);\n      gl_FragColor = vec4(noiseColor,destColor.a);//vec4(destColor,1.0);\n    }\n  ",transparent:!0};n.LionMaskShader=i},{three:89}],120:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"remove",value:function(){}}]),t}());n.default=r},{}],121:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.MapControls=n.OrbitControls=void 0;var i=t("THREE"),r=function(t,e){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T.autoRotateSpeed;return 2*Math.PI/60/60*t}function r(){return Math.pow(.95,T.zoomSpeed)}function a(t){N.theta-=t}function o(t){N.phi-=t}function s(t){T.object.isPerspectiveCamera?D/=t:T.object.isOrthographicCamera?(T.object.zoom=Math.max(T.minZoom,Math.min(T.maxZoom,T.object.zoom*t)),T.object.updateProjectionMatrix(),k=!0):T.enableZoom=!1}function u(t){T.object.isPerspectiveCamera?D*=t:T.object.isOrthographicCamera?(T.object.zoom=Math.max(T.minZoom,Math.min(T.maxZoom,T.object.zoom/t)),T.object.updateProjectionMatrix(),k=!0):T.enableZoom=!1}function c(t){z.set(t.clientX,t.clientY)}function l(t){j.set(t.clientX,t.clientY)}function h(t){if(1==t.touches.length)z.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);z.set(e,n)}}function f(t){if(1==t.touches.length)j.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);j.set(e,n)}}function p(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);W.set(0,i)}function d(t){if(1==t.touches.length)U.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);U.set(e,n)}B.subVectors(U,z).multiplyScalar(T.rotateSpeed);var i=T.domElement;a(2*Math.PI*B.x/i.clientHeight),o(2*Math.PI*B.y/i.clientHeight),z.copy(U)}function m(t){if(1==t.touches.length)G.set(t.touches[0].pageX,t.touches[0].pageY);else{var e=.5*(t.touches[0].pageX+t.touches[1].pageX),n=.5*(t.touches[0].pageY+t.touches[1].pageY);G.set(e,n)}V.subVectors(G,j).multiplyScalar(T.panSpeed),Q(V.x,V.y),j.copy(G)}function v(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);H.set(0,i),X.set(0,Math.pow(H.y/W.y,T.zoomSpeed)),s(X.y),W.copy(H)}function g(t){if(!1!==T.enabled){var e;switch(t.preventDefault(),T.domElement.focus?T.domElement.focus():window.focus(),t.button){case 0:e=T.mouseButtons.LEFT;break;case 1:e=T.mouseButtons.MIDDLE;break;case 2:e=T.mouseButtons.RIGHT;break;default:e=-1}switch(e){case i.MOUSE.DOLLY:if(!1===T.enableZoom)return;(function(t){W.set(t.clientX,t.clientY)})(t),C=O.DOLLY;break;case i.MOUSE.ROTATE:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===T.enablePan)return;l(t),C=O.PAN}else{if(!1===T.enableRotate)return;c(t),C=O.ROTATE}break;case i.MOUSE.PAN:if(t.ctrlKey||t.metaKey||t.shiftKey){if(!1===T.enableRotate)return;c(t),C=O.ROTATE}else{if(!1===T.enablePan)return;l(t),C=O.PAN}break;default:C=O.NONE}C!==O.NONE&&(document.addEventListener("mousemove",y,!1),document.addEventListener("mouseup",_,!1),T.dispatchEvent(L))}}function y(t){if(!1!==T.enabled)switch(t.preventDefault(),C){case O.ROTATE:if(!1===T.enableRotate)return;!function(t){U.set(t.clientX,t.clientY),B.subVectors(U,z).multiplyScalar(T.rotateSpeed);var e=T.domElement;a(2*Math.PI*B.x/e.clientHeight),o(2*Math.PI*B.y/e.clientHeight),z.copy(U),T.update()}(t);break;case O.DOLLY:if(!1===T.enableZoom)return;!function(t){H.set(t.clientX,t.clientY),X.subVectors(H,W),X.y>0?s(r()):X.y<0&&u(r()),W.copy(H),T.update()}(t);break;case O.PAN:if(!1===T.enablePan)return;!function(t){G.set(t.clientX,t.clientY),V.subVectors(G,j).multiplyScalar(T.panSpeed),Q(V.x,V.y),j.copy(G),T.update()}(t)}}function _(t){!1!==T.enabled&&(document.removeEventListener("mousemove",y,!1),document.removeEventListener("mouseup",_,!1),T.dispatchEvent(E),C=O.NONE)}function x(t){!1===T.enabled||!1===T.enableZoom||C!==O.NONE&&C!==O.ROTATE||(t.preventDefault(),t.stopPropagation(),T.dispatchEvent(L),function(t){t.deltaY<0?u(r()):t.deltaY>0&&s(r()),T.update()}(t),T.dispatchEvent(E))}function b(t){!1!==T.enabled&&!1!==T.enableKeys&&!1!==T.enablePan&&function(t){var e=!1;switch(t.keyCode){case T.keys.UP:Q(0,T.keyPanSpeed),e=!0;break;case T.keys.BOTTOM:Q(0,-T.keyPanSpeed),e=!0;break;case T.keys.LEFT:Q(T.keyPanSpeed,0),e=!0;break;case T.keys.RIGHT:Q(-T.keyPanSpeed,0),e=!0}e&&(t.preventDefault(),T.update())}(t)}function w(t){if(!1!==T.enabled){switch(t.preventDefault(),t.touches.length){case 1:switch(T.touches.ONE){case i.TOUCH.ROTATE:if(!1===T.enableRotate)return;h(t),C=O.TOUCH_ROTATE;break;case i.TOUCH.PAN:if(!1===T.enablePan)return;f(t),C=O.TOUCH_PAN;break;default:C=O.NONE}break;case 2:switch(T.touches.TWO){case i.TOUCH.DOLLY_PAN:if(!1===T.enableZoom&&!1===T.enablePan)return;(function(t){T.enableZoom&&p(t),T.enablePan&&f(t)})(t),C=O.TOUCH_DOLLY_PAN;break;case i.TOUCH.DOLLY_ROTATE:if(!1===T.enableZoom&&!1===T.enableRotate)return;(function(t){T.enableZoom&&p(t),T.enableRotate&&h(t)})(t),C=O.TOUCH_DOLLY_ROTATE;break;default:C=O.NONE}break;default:C=O.NONE}C!==O.NONE&&T.dispatchEvent(L)}}function M(t){if(!1!==T.enabled)switch(t.preventDefault(),t.stopPropagation(),C){case O.TOUCH_ROTATE:if(!1===T.enableRotate)return;d(t),T.update();break;case O.TOUCH_PAN:if(!1===T.enablePan)return;m(t),T.update();break;case O.TOUCH_DOLLY_PAN:if(!1===T.enableZoom&&!1===T.enablePan)return;(function(t){T.enableZoom&&v(t),T.enablePan&&m(t)})(t),T.update();break;case O.TOUCH_DOLLY_ROTATE:if(!1===T.enableZoom&&!1===T.enableRotate)return;(function(t){T.enableZoom&&v(t),T.enableRotate&&d(t)})(t),T.update();break;default:C=O.NONE}}function S(t){!1!==T.enabled&&(T.dispatchEvent(E),C=O.NONE)}function A(t){!1!==T.enabled&&t.preventDefault()}document,this.object=t,this.domElement=e,this.enabled=!0,this.target=new i.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!0,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateProp={theta:"left",phi:"top"},this.autoRotateSpeed={theta:0,phi:0},this.autoPanSpeed={x:0,y:0},this.autoDolly={zoom:0},this.zoom=0,this.radius=1,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:i.MOUSE.ROTATE,MIDDLE:i.MOUSE.DOLLY,RIGHT:i.MOUSE.PAN},this.touches={ONE:i.TOUCH.ROTATE,TWO:i.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return I.phi},this.getAzimuthalAngle=function(){return I.theta},this.dollyIn=function(t){u(Math.pow(.95,t))},this.dollyOut=function(t){s(Math.pow(.95,t))},this.saveState=function(){T.target0.copy(T.target),T.position0.copy(T.object.position),T.zoom0=T.object.zoom},this.reset=function(){T.target.copy(T.target0),T.object.position.copy(T.position0),T.object.zoom=T.zoom0,T.object.updateProjectionMatrix(),T.dispatchEvent(P),T.update(),C=O.NONE},this.update=function(){var e=new i.Vector3,r=(new i.Vector3,(new i.Quaternion).setFromUnitVectors(t.up,new i.Vector3(0,1,0))),s=r.clone().inverse(),u=new i.Vector3,c=new i.Quaternion;return function(){var t=T.object.position;return e.copy(t).sub(T.target),e.applyQuaternion(r),I.setFromVector3(e),0!=T.autoRotateSpeed.theta&&a(n(T.autoRotateSpeed.theta)),0!=T.autoRotateSpeed.phi&&o(n(T.autoRotateSpeed.phi)),0!=T.autoPanSpeed.x&&Y(T.autoPanSpeed.x,T.object.matrix),0!=T.autoPanSpeed.y&&q(T.autoPanSpeed.y,T.object.matrix),0!=T.autoDolly.zoom&&T.dollyIn(T.autoDolly.zoom),T.enableDamping?(I.theta+=N.theta*T.dampingFactor,I.phi+=N.phi*T.dampingFactor):(I.theta+=N.theta,I.phi+=N.phi),I.theta=Math.max(T.minAzimuthAngle,Math.min(T.maxAzimuthAngle,I.theta)),I.phi=Math.max(T.minPolarAngle,Math.min(T.maxPolarAngle,I.phi)),I.makeSafe(),I.radius*=D,I.radius=Math.max(T.minDistance,Math.min(T.maxDistance,I.radius)),!0===T.enableDamping?T.target.addScaledVector(R,T.dampingFactor):T.target.add(R),e.setFromSpherical(I),e.applyQuaternion(s),t.copy(T.target).add(e),T.object.lookAt(T.target),!0===T.enableDamping?(N.theta*=1-T.dampingFactor,N.phi*=1-T.dampingFactor,R.multiplyScalar(1-T.dampingFactor)):(N.set(0,0,0),R.set(0,0,0)),D=1,!!(k||u.distanceToSquared(T.object.position)>F||8*(1-c.dot(T.object.quaternion))>F)&&(T.dispatchEvent(P),u.copy(T.object.position),c.copy(T.object.quaternion),k=!1,!0)}}(),this.dispose=function(){T.domElement.removeEventListener("contextmenu",A,!1),T.domElement.removeEventListener("mousedown",g,!1),T.domElement.removeEventListener("wheel",x,!1),T.domElement.removeEventListener("touchstart",w,!1),T.domElement.removeEventListener("touchend",S,!1),T.domElement.removeEventListener("touchmove",M,!1),document.removeEventListener("mousemove",y,!1),document.removeEventListener("mouseup",_,!1),T.domElement.removeEventListener("keydown",b,!1)};var T=this,P={type:"change"},L={type:"start"},E={type:"end"},O={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},C=O.NONE,F=1e-6;this.spherical=new i.Spherical;var I=this.spherical,N=new i.Spherical,D=1,R=new i.Vector3,k=!1,z=new i.Vector2,U=new i.Vector2,B=new i.Vector2,j=new i.Vector2,G=new i.Vector2,V=new i.Vector2,W=new i.Vector2,H=new i.Vector2,X=new i.Vector2,Y=function(){var t=new i.Vector3;return function(e,n){t.setFromMatrixColumn(n,0),t.multiplyScalar(-e),R.add(t)}}(),q=function(){var t=new i.Vector3;return function(e,n){!0===T.screenSpacePanning?t.setFromMatrixColumn(n,1):(t.setFromMatrixColumn(n,0),t.crossVectors(T.object.up,t)),t.multiplyScalar(e),R.add(t)}}(),Q=function(){var t=new i.Vector3;return function(e,n){var i=T.domElement;if(T.object.isPerspectiveCamera){var r=T.object.position;t.copy(r).sub(T.target);var a=t.length();a*=Math.tan(T.object.fov/2*Math.PI/180),Y(2*e*a/i.clientHeight,T.object.matrix),q(2*n*a/i.clientHeight,T.object.matrix)}else T.object.isOrthographicCamera?(Y(e*(T.object.right-T.object.left)/T.object.zoom/i.clientWidth,T.object.matrix),q(n*(T.object.top-T.object.bottom)/T.object.zoom/i.clientHeight,T.object.matrix)):T.enablePan=!1}}();T.domElement.addEventListener("contextmenu",A,!1),T.domElement.addEventListener("mousedown",g,!1),T.domElement.addEventListener("wheel",x,!1),T.domElement.addEventListener("touchstart",w,!1),T.domElement.addEventListener("touchend",S,!1),T.domElement.addEventListener("touchmove",M,!1),T.domElement.addEventListener("keydown",b,!1),-1===T.domElement.tabIndex&&(T.domElement.tabIndex=0),this.update()};n.OrbitControls=r,(r.prototype=Object.create(i.EventDispatcher.prototype)).constructor=r;var a=function(t,e){r.call(this,t,e),this.mouseButtons.LEFT=i.MOUSE.PAN,this.mouseButtons.RIGHT=i.MOUSE.ROTATE,this.touches.ONE=i.TOUCH.PAN,this.touches.TWO=i.TOUCH.DOLLY_ROTATE};n.MapControls=a,(a.prototype=Object.create(i.EventDispatcher.prototype)).constructor=a},{THREE:5}],122:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,n=arguments.length>2?arguments[2]:void 0,r=new i.PlaneBufferGeometry(t,e,1),a=new i.MeshBasicMaterial(Object.assign({opacity:1,transparent:!0},n));return r.dispose(),new i.Mesh(r,a)};var i=t("three")},{three:89}],123:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}e.exports=function(){if("object"===("undefined"==typeof window?"undefined":i(window))&&"function"==typeof window.addEventListener&&Object.defineProperty){var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});return window.addEventListener("test",null,e),t}}},{}],124:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function a(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=u(t);if(e){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return o(this,n)}}function o(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?s(t):e}function s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=function(t){return t&&t.__esModule?t:{default:t}}(t("events")),l=t("./UA")(),h=t("./CheckPassive"),f=t("lodash/throttle"),p=function(t){function e(t){function i(t){var e,n={x:0,y:0};(t.target.getBoundingClientRect(),l.isMozilla&&l.isPC&&!1,t.touches)?t.touches?(e=t.touches[0],n.x=e.clientX,n.y=e.clientY):(n.x=t.clientX,n.y=t.clientY):(n.x=t.clientX,n.y=t.clientY);return n}var r,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,e),(r=n.call(this)).$target=t,r.config=Object.assign({moveWhileDown:!0,targetOut:!1,wheel:!1,wheelReverse:!1,wheelUseYtoX:!0,wheelPower:.1},a),r.EVENT_DRAG_START="dragStart",r.EVENT_DRAG_MOVE="dragMove",r.EVENT_DRAG_END="dragEnd",r.EVENT_MOUSE_WHEEL="mouseWheel",r.isDown=!1,r.status={event:null,start:{x:0,y:0},move:{x:0,y:0},end:{x:0,y:0},wheel:{deltaX:0,deltaY:0},distance:{x:0,y:0},distanceOffset:function(){return{x:Math.abs(this.distance.x),y:Math.abs(this.distance.y)}}};var o=function(e){r.status.start=i(e),r.status.move={x:0,y:0},r.status.end={x:0,y:0},r.status.distance={x:0,y:0},r.emit(r.EVENT_DRAG_START,r.status),r.isDown=!0,l.isPC&&(document.addEventListener("mousemove",u,!!h()&&{passive:!0}),document.addEventListener("mouseup",c),r.config.targetOut&&t.addEventListener("mouseout",c)),document.addEventListener("touchmove",u,!!h()&&{passive:!0}),document.addEventListener("touchend",c,!1)},u=function(t){r.status.move=i(t),r.status.distance.x=r.status.start.x-r.status.move.x,r.status.distance.y=r.status.start.y-r.status.move.y,r.emit(r.EVENT_DRAG_MOVE,r.status)},c=function e(n){r.isDown=!1,r.status.end=r.status.move,r.emit(r.EVENT_DRAG_END,r.status),l.isPC&&(document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",e),r.config.targetOut&&t.removeEventListener("mouseout",e)),document.removeEventListener("touchmove",u),document.removeEventListener("touchend",e)},p=function(t){var e=(t.delta,t.deltaX),n=t.deltaY;r.config.wheelUseYtoX?r.status.wheel.deltaX=-n:(r.status.wheel.deltaX=-e,r.status.wheel.deltaY=-n),r.status.wheel.deltaX*=r.config.wheelPower,r.status.wheel.deltaY*=r.config.wheelPower,r.emit(r.EVENT_MOUSE_WHEEL,r.status)};return p=f(p.bind(s(r)),10),l.isPC&&(r.$target.addEventListener("mousedown",o),r.config.wheel&&r.$target.addEventListener("wheel",p,!!h()&&{passive:!0})),r.$target.addEventListener("touchstart",o,!!h()&&{passive:!0}),r}r(e,c["default"]);var n=a(e);return e}();n.default=p},{"./CheckPassive":123,"./UA":132,events:6,"lodash/throttle":79}],125:[function(t,e,n){"use strict";function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&function(t,e){(Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}(t,e)}function o(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var n,i=u(t);if(e){var r=u(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return s(this,n)}}function s(t,e){return!e||"object"!==i(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var c=function(t){return t&&t.__esModule?t:{default:t}}(t("./DragAndDrop")),l=function(t){function e(t){var i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=n.apply(this,arguments)).smoothConfig=Object.assign({power:.2,friction:.93},r),i.offset={old:{x:0,y:0},vf:{x:0,y:0}},i.on(i.EVENT_DRAG_START,function(t){i.offset.old=t.start}),i.on(i.EVENT_DRAG_MOVE,function(t){i.offset.vf.x+=Math.round((t.move.x-i.offset.old.x)*i.smoothConfig.power),i.offset.vf.y+=Math.round((t.move.y-i.offset.old.y)*i.smoothConfig.power),i.offset.old=t.move}),i.config.wheel&&i.on(i.EVENT_MOUSE_WHEEL,function(t){i.offset.vf.x+=t.wheel.deltaX,i.offset.vf.y+=t.wheel.deltaY}),i.on(i.EVENT_DRAG_END,function(t){}),i}a(e,c["default"]);var n=o(e);return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(e,[{key:"update",value:function(){return this.offset.vf.x*=this.smoothConfig.friction,this.offset.vf.y*=this.smoothConfig.friction,this.offset.vf.x=Math.round(1e3*this.offset.vf.x)/1e3,this.offset.vf.y=Math.round(1e3*this.offset.vf.y)/1e3,this.offset.vf.x>-.01&&this.offset.vf.x<.01&&!this.isDrag&&(this.offset.vf.x=0),this.offset.vf.y>-.01&&this.offset.vf.y<.01&&!this.isDrag&&(this.offset.vf.y=0),this.offset.vf}}]),e}();n.default=l},{"./DragAndDrop":124}],126:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;n.default={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t},back:function(t){return t*t*(4*t-3)}}},{}],127:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(){return{browser:(window.navigator.userLanguage||window.navigator.language).substring(0,2),document:document.querySelector("html").getAttribute("lang")}}},{}],128:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=function(t){var e=document.head,n=t.html.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0],i=document.createElement("head");i.innerHTML=n;var r=(new DOMParser).parseFromString(t.html,"text/html"),a=r.getElementsByTagName("body")[0].getAttribute("data-page-type");document.querySelector("body").setAttribute("data-page-type",a);var o=r.getElementsByTagName("html")[0].getAttribute("lang"),s=document.querySelector("html").getAttribute("lang");document.querySelector("html").setAttribute("lang",o);var u=["meta[name='keywords']","meta[name='description']","meta[property^='fb']","meta[property^='og']","meta[name^='twitter']","meta[name='robots']","meta[itemprop]","link[itemprop]","link[rel='prev']","link[rel='next']","link[rel='canonical']"].join(",");return e.querySelectorAll(u).forEach(function(t){e.removeChild(t)}),i.querySelectorAll(u).forEach(function(t){e.appendChild(t)}),{lang:o,changed:s!=o}}},{}],129:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=t("gsap"),a=t("lodash/bind"),o=t("lodash/debounce"),s=function(){function t(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.wrap=e,this.inner=n,this.titleWrap=n.querySelectorAll(".scroll-anim__textWrap"),this.direction=this.wrap.getAttribute("data-direction"),this.scrollSpeed=this.wrap.getAttribute("data-speed")||-2,this.isRender=!1,this.position={x:0,y:0,z:0},this.speed={x:0,y:0,z:0,vx:0},this.loopSize=0,this.titleTotal=5,this.option=Object.assign({letterViewDelay:50,flowSpeed:Number(this.scrollSpeed),nonestop:!1},i),this.resize=o(a(this.resize,this),10),window.addEventListener("resize",this.resize),this.resize()}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"resize",value:function(){var t=this.titleWrap[0].getBoundingClientRect().width;"vertical"==this.direction&&(t=this.titleWrap[0].getBoundingClientRect().height);this.loopSize=1*t,this.inner.style.marginLeft="0px"}},{key:"translate3d",value:function(t,e,n,i){t.style.transform="translate3d("+e+","+n+","+i+")"}},{key:"start",value:function(){r.TweenLite.to(this.speed,1,{delay:1,x:this.option.flowSpeed,ease:r.Power4.easeInOut})}},{key:"stop",value:function(){}},{key:"speedUp",value:function(){r.TweenLite.to(this.speed,1,{vx:this.option.flowSpeed<0?-2:2,ease:r.Power4.easeOut})}},{key:"speedDown",value:function(){r.TweenLite.to(this.speed,1,{vx:0,ease:r.Power4.easeOut})}},{key:"show",value:function(){this.inner.classList.add("on")}},{key:"hide",value:function(){this.inner.classList.remove("on")}},{key:"update",value:function(){(this.wrap.classList.contains("is-inview")||this.option.nonestop)&&(this.position.x+=this.speed.x+this.speed.vx,0!=this.loopSize&&(this.position.x%=this.loopSize),this.inner.style.transform="translate3d(".concat(this.position.x,"px,0,0)"))}},{key:"destroy",value:function(){window.removeEventListener("resize",this.resize)}}]),t}();n.default=s},{gsap:7,"lodash/bind":67,"lodash/debounce":69}],130:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(t){return t&&t.__esModule?t:{default:t}}(t("locomotive-scroll")),a=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t.instance?t.instance:(t.instance=this,this._scroll=null,this)}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"set",value:function(t){if(this._scroll)throw"already scroll is active";this._scroll=new r.default({el:t,smooth:!0})}},{key:"destroy",value:function(){this._scroll&&(this._scroll.destroy(),this._scroll=null)}},{key:"update",value:function(){this._scroll&&this._scroll.update()}}]),t}();n.default=a},{"locomotive-scroll":8}],131:[function(t,e,n){"use strict";var i=t("gsap"),r=function(t){var e,n,r,a,o=this;return this._progress=-1,this.update=function(e){this._progress=e,i.TweenLite.set(t,{strokeDashoffset:n*this._progress+"px",strokeDasharray:r+"px "+r+"px"})},this.fromTo=function(t,e,n,r,o,s){var u=this,c="undefined"==o?i.Power4.easeInOut:o;a&&a.kill(),a=i.TweenLite.to(this,n,{delay:r,_progress:e,ease:c,onStart:function(){u._progress=t},onUpdate:function(){u.update(u._progress)},onComplete:function(){s&&s()}})},this.to=function(t,e,n,r,s){var u="undefined"==r?i.Power4.easeInOut:r;a&&a.kill(),a=i.TweenLite.to(this,e,{delay:n,_progress:t,ease:u,onStart:function(){},onUpdate:function(){o.update(o._progress)},onComplete:function(){s&&s()}})},function(){e=t.getTotalLength(),n=e,r=e,this.update(this._progress)}.call(this),this};r.prototype.constructor=r,e.exports=r},{gsap:7}],132:[function(t,e,n){"use strict";(function(){var t=function(){return window.UA?window.UA:(i=navigator.userAgent,n=navigator.userAgent.toLowerCase(),r=window.navigator,((t={isIE:!1,isIE6:!1,isIE7:!1,isIE8:!1,isIE9:!1,isLtIE9:!1,isLtIE10:!1,isLtIE11:!1,isIE10:!1,isIE11:!1,isEdge:!1,isIOS:!1,isIOS8:!1,isIPhone:!1,isIPad:!1,isIPhone4:!1,isIPad3:!1,isAndroid:!1,isAndroidMobile:!1,isChrome:!1,isSafari:!1,isMozilla:!1,isWebkit:!1,isOpera:!1,isPC:!1,isTablet:!1,isSmartPhone:!1,browser:n,isMac:/mac/i.test(r.platform),isWin:/win/i.test(r.platform)}).isIE=/msie\s(\d+)/.test(n))&&(e=RegExp.$1,e*=1,t.isIE6=6===e,t.isIE7=7===e,t.isIE8=8===e,t.isIE9=9===e,t.isIE10=10===e,t.isLtIE9=e<9,t.isLtIE10=e<10,t.isLtIE11=e<11),t.isIE7&&-1!==n.indexOf("trident/4.0")&&(t.isIE7=!1,t.isIE8=!0),-1!==n.indexOf("trident/7.0")&&(t.isIE=!0,t.isIE11=!0),n.indexOf("applewebkit")>-1&&n.indexOf("edge")>-1&&(t.isEdge=!0,t.isIE=!0),(t.isIPhone=/i(phone|pod)/.test(n))&&(t.isIPhone4=2===window.devicePixelRatio),(t.isIPad=/ipad/.test(n))&&2===window.devicePixelRatio,t.isIOS=t.isIPhone||t.isIPad,t.isAndroid=/android/.test(n),t.isAndroid&&(t.androidVersion=Number(/Android \d+(.\d)?/.exec(i)[0].replace("Android ",""))),t.isAndroidMobile=/android(.+)?mobile/.test(n),t.isPC=!t.isIOS&&!t.isAndroid,t.isTablet=t.isIPad||t.isAndroid&&t.isAndroidMobile,t.isSmartPhone=t.isIPhone||t.isAndroidMobile,t.isChrome=/chrome/.test(n),t.isIOS&&(t.isChrome=/crios/.test(n),t.isTablet?t.iosVersion=Number(n.substr(n.lastIndexOf("ipad")+12,3).split("_")[0]):t.iosVersion=Number(n.substr(n.lastIndexOf("iphone os")+10,3).split("_")[0]),t.isTablet&&(t.isSmartPhone=!1)),t.isChrome&&(t.isAndroidMobile?t.chromeVersion=n.substr(n.lastIndexOf("chrome/")+7,2):t.isAndroid&&t.isTablet?t.chromeVersion=n.substr(n.lastIndexOf("chrome/")+7,2):t.chromeVersion=n.substr(n.lastIndexOf("crios/")+6,2)),t.isWebkit=/webkit/.test(n),t.isOpera=/opera/.test(n),t.isMozilla=n.indexOf("compatible")<0&&/mozilla/.test(n),t.isSafari=!t.isChrome&&t.isWebkit,t.isSafari&&void 0!==document.ontouchstart&&(t.isIOS=!0),window.UA=t,t);var t,e,n,i,r};t.prototype.constructor=t,e.exports=t}).call(void 0)},{}],133:[function(t,e,n){"use strict";function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var r=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{videoId:videoId,containerId:containerId,width:width,height:height};(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.isReady=!1,this.player,this.config={height:"640",width:"480",videoId:"",playerVars:{},events:{onReady:function(t){e.onPlayerReady(t)},onStateChange:function(t){e.onPlayerStateChange(t)}}},Object.assign(this.config,n),this.player=new YT.Player(n.containerId,this.config)}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"onPlayerReady",value:function(t){}},{key:"onPlayerStateChange",value:function(t){}},{key:"play",value:function(){this.player.playVideo()}},{key:"destroy",value:function(){this.player.destroy()}},{key:"stop",value:function(){this.player.stopVideo()}}]),t}();n.default=r},{}],134:[function(t,e,n){"use strict";(0,function(t){return t&&t.__esModule?t:{default:t}}(t("./component/Common")).default)()},{"./component/Common":91}]},{},[134]);